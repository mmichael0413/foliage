!function(t,e){function n(t){var e=t.length,n=re.type(t);return re.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t){var e=fe[t]={};return re.each(t.match(ae)||[],function(t,n){e[n]=!0}),e}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=re.expando+Math.random()}function r(t,n,i){var s;if(i===e&&1===t.nodeType)if(s="data-"+n.replace(ye,"-$1").toLowerCase(),i=t.getAttribute(s),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:ve.test(i)?JSON.parse(i):i}catch(r){}me.set(t,n,i)}else i=e;return i}function o(){return!0}function a(){return!1}function l(){try{return V.activeElement}catch(t){}}function c(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function h(t,e,n){if(re.isFunction(e))return re.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return re.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(Ae.test(e))return re.filter(e,t,n);e=re.filter(e,t)}return re.grep(t,function(t){return ee.call(e,t)>=0!==n})}function u(t,e){return re.nodeName(t,"table")&&re.nodeName(1===e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function d(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function p(t){var e=je.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function f(t,e){for(var n=t.length,i=0;n>i;i++)ge.set(t[i],"globalEval",!e||ge.get(e[i],"globalEval"))}function m(t,e){var n,i,s,r,o,a,l,c;if(1===e.nodeType){if(ge.hasData(t)&&(r=ge.access(t),o=ge.set(e,r),c=r.events)){delete o.handle,o.events={};for(s in c)for(n=0,i=c[s].length;i>n;n++)re.event.add(e,s,c[s][n])}me.hasData(t)&&(a=me.access(t),l=re.extend({},a),me.set(e,l))}}function g(t,n){var i=t.getElementsByTagName?t.getElementsByTagName(n||"*"):t.querySelectorAll?t.querySelectorAll(n||"*"):[];return n===e||n&&re.nodeName(t,n)?re.merge([t],i):i}function v(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Fe.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function y(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,s=Je.length;s--;)if(e=Je[s]+n,e in t)return e;return i}function b(t,e){return t=e||t,"none"===re.css(t,"display")||!re.contains(t.ownerDocument,t)}function _(e){return t.getComputedStyle(e,null)}function w(t,e){for(var n,i,s,r=[],o=0,a=t.length;a>o;o++)i=t[o],i.style&&(r[o]=ge.get(i,"olddisplay"),n=i.style.display,e?(r[o]||"none"!==n||(i.style.display=""),""===i.style.display&&b(i)&&(r[o]=ge.access(i,"olddisplay",C(i.nodeName)))):r[o]||(s=b(i),(n&&"none"!==n||!s)&&ge.set(i,"olddisplay",s?n:re.css(i,"display"))));for(o=0;a>o;o++)i=t[o],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[o]||"":"none"));return t}function x(t,e,n){var i=Ue.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function k(t,e,n,i,s){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,o=0;4>r;r+=2)"margin"===n&&(o+=re.css(t,n+Ze[r],!0,s)),i?("content"===n&&(o-=re.css(t,"padding"+Ze[r],!0,s)),"margin"!==n&&(o-=re.css(t,"border"+Ze[r]+"Width",!0,s))):(o+=re.css(t,"padding"+Ze[r],!0,s),"padding"!==n&&(o+=re.css(t,"border"+Ze[r]+"Width",!0,s)));return o}function S(t,e,n){var i=!0,s="width"===e?t.offsetWidth:t.offsetHeight,r=_(t),o=re.support.boxSizing&&"border-box"===re.css(t,"boxSizing",!1,r);if(0>=s||null==s){if(s=ze(t,e,r),(0>s||null==s)&&(s=t.style[e]),Ye.test(s))return s;i=o&&(re.support.boxSizingReliable||s===t.style[e]),s=parseFloat(s)||0}return s+k(t,e,n||(o?"border":"content"),i,r)+"px"}function C(t){var e=V,n=Xe[t];return n||(n=T(t,e),"none"!==n&&n||(Be=(Be||re("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(Be[0].contentWindow||Be[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),n=T(t,e),Be.detach()),Xe[t]=n),n}function T(t,e){var n=re(e.createElement(t)).appendTo(e.body),i=re.css(n[0],"display");return n.remove(),i}function E(t,e,n,i){var s;if(re.isArray(e))re.each(e,function(e,s){n||en.test(t)?i(t,s):E(t+"["+("object"==typeof s?e:"")+"]",s,n,i)});else if(n||"object"!==re.type(e))i(t,e);else for(s in e)E(t+"["+s+"]",e[s],n,i)}function A(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,s=0,r=e.toLowerCase().match(ae)||[];if(re.isFunction(n))for(;i=r[s++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function P(t,n,i,s){function r(l){var c;return o[l]=!0,re.each(t[l]||[],function(t,l){var h=l(n,i,s);return"string"!=typeof h||a||o[h]?a?!(c=h):e:(n.dataTypes.unshift(h),r(h),!1)}),c}var o={},a=t===bn;return r(n.dataTypes[0])||!o["*"]&&r("*")}function L(t,n){var i,s,r=re.ajaxSettings.flatOptions||{};for(i in n)n[i]!==e&&((r[i]?t:s||(s={}))[i]=n[i]);return s&&re.extend(!0,t,s),t}function D(t,n,i){for(var s,r,o,a,l=t.contents,c=t.dataTypes;"*"===c[0];)c.shift(),s===e&&(s=t.mimeType||n.getResponseHeader("Content-Type"));if(s)for(r in l)if(l[r]&&l[r].test(s)){c.unshift(r);break}if(c[0]in i)o=c[0];else{for(r in i){if(!c[0]||t.converters[r+" "+c[0]]){o=r;break}a||(a=r)}o=o||a}return o?(o!==c[0]&&c.unshift(o),i[o]):e}function q(t,e,n,i){var s,r,o,a,l,c={},h=t.dataTypes.slice();if(h[1])for(o in t.converters)c[o.toLowerCase()]=t.converters[o];for(r=h.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=h.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(o=c[l+" "+r]||c["* "+r],!o)for(s in c)if(a=s.split(" "),a[1]===r&&(o=c[l+" "+a[0]]||c["* "+a[0]])){o===!0?o=c[s]:c[s]!==!0&&(r=a[0],h.unshift(a[1]));break}if(o!==!0)if(o&&t["throws"])e=o(e);else try{e=o(e)}catch(u){return{state:"parsererror",error:o?u:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}function N(){return setTimeout(function(){An=e}),An=re.now()}function I(t,e,n){for(var i,s=(In[e]||[]).concat(In["*"]),r=0,o=s.length;o>r;r++)if(i=s[r].call(n,e,t))return i}function M(t,e,n){var i,s,r=0,o=Nn.length,a=re.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var e=An||N(),n=Math.max(0,c.startTime+c.duration-e),i=n/c.duration||0,r=1-i,o=0,l=c.tweens.length;l>o;o++)c.tweens[o].run(r);return a.notifyWith(t,[c,r,n]),1>r&&l?n:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:re.extend({},e),opts:re.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:An||N(),duration:n.duration,tweens:[],createTween:function(e,n){var i=re.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(s)return this;for(s=!0;i>n;n++)c.tweens[n].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),h=c.props;for(F(h,c.opts.specialEasing);o>r;r++)if(i=Nn[r].call(c,t,h,c.opts))return i;return re.map(h,I,c),re.isFunction(c.opts.start)&&c.opts.start.call(t,c),re.fx.timer(re.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function F(t,e){var n,i,s,r,o;for(n in t)if(i=re.camelCase(n),s=e[i],r=t[n],re.isArray(r)&&(s=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),o=re.cssHooks[i],o&&"expand"in o){r=o.expand(r),delete t[i];for(n in r)n in t||(t[n]=r[n],e[n]=s)}else e[i]=s}function O(t,n,i){var s,r,o,a,l,c,h=this,u={},d=t.style,p=t.nodeType&&b(t),f=ge.get(t,"fxshow");i.queue||(l=re._queueHooks(t,"fx"),null==l.unqueued&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,re.queue(t,"fx").length||l.empty.fire()})})),1===t.nodeType&&("height"in n||"width"in n)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===re.css(t,"display")&&"none"===re.css(t,"float")&&(d.display="inline-block")),i.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(s in n)if(r=n[s],Ln.exec(r)){if(delete n[s],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!f||f[s]===e)continue;p=!0}u[s]=f&&f[s]||re.style(t,s)}if(!re.isEmptyObject(u)){f?"hidden"in f&&(p=f.hidden):f=ge.access(t,"fxshow",{}),o&&(f.hidden=!p),p?re(t).show():h.done(function(){re(t).hide()}),h.done(function(){var e;ge.remove(t,"fxshow");for(e in u)re.style(t,e,u[e])});for(s in u)a=I(p?f[s]:0,s,h),s in f||(f[s]=a.start,p&&(a.end=a.start,a.start="width"===s||"height"===s?1:0))}}function $(t,e,n,i,s){return new $.prototype.init(t,e,n,i,s)}function j(t,e){var n,i={height:t},s=0;for(e=e?1:0;4>s;s+=2-e)n=Ze[s],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function R(t){return re.isWindow(t)?t:9===t.nodeType&&t.defaultView}var H,z,B=typeof e,W=t.location,V=t.document,U=V.documentElement,Y=t.jQuery,G=t.$,X={},K=[],Q="2.0.3",Z=K.concat,J=K.push,te=K.slice,ee=K.indexOf,ne=X.toString,ie=X.hasOwnProperty,se=Q.trim,re=function(t,e){return new re.fn.init(t,e,H)},oe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ae=/\S+/g,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,he=/^-ms-/,ue=/-([\da-z])/gi,de=function(t,e){return e.toUpperCase()},pe=function(){V.removeEventListener("DOMContentLoaded",pe,!1),t.removeEventListener("load",pe,!1),re.ready()};re.fn=re.prototype={jquery:Q,constructor:re,init:function(t,n,i){var s,r;if(!t)return this;if("string"==typeof t){if(s="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:le.exec(t),!s||!s[1]&&n)return!n||n.jquery?(n||i).find(t):this.constructor(n).find(t);if(s[1]){if(n=n instanceof re?n[0]:n,re.merge(this,re.parseHTML(s[1],n&&n.nodeType?n.ownerDocument||n:V,!0)),ce.test(s[1])&&re.isPlainObject(n))for(s in n)re.isFunction(this[s])?this[s](n[s]):this.attr(s,n[s]);return this}return r=V.getElementById(s[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=V,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):re.isFunction(t)?i.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),re.makeArray(t,this))},selector:"",length:0,toArray:function(){return te.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=re.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return re.each(this,t,e)},ready:function(t){return re.ready.promise().done(t),this},slice:function(){return this.pushStack(te.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(re.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:[].sort,splice:[].splice},re.fn.init.prototype=re.fn,re.extend=re.fn.extend=function(){var t,n,i,s,r,o,a=arguments[0]||{},l=1,c=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[1]||{},l=2),"object"==typeof a||re.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(t=arguments[l]))for(n in t)i=a[n],s=t[n],a!==s&&(h&&s&&(re.isPlainObject(s)||(r=re.isArray(s)))?(r?(r=!1,o=i&&re.isArray(i)?i:[]):o=i&&re.isPlainObject(i)?i:{},a[n]=re.extend(h,o,s)):s!==e&&(a[n]=s));return a},re.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),noConflict:function(e){return t.$===re&&(t.$=G),e&&t.jQuery===re&&(t.jQuery=Y),re},isReady:!1,readyWait:1,holdReady:function(t){t?re.readyWait++:re.ready(!0)},ready:function(t){(t===!0?--re.readyWait:re.isReady)||(re.isReady=!0,t!==!0&&--re.readyWait>0||(z.resolveWith(V,[re]),re.fn.trigger&&re(V).trigger("ready").off("ready")))},isFunction:function(t){return"function"===re.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?X[ne.call(t)]||"object":typeof t},isPlainObject:function(t){if("object"!==re.type(t)||t.nodeType||re.isWindow(t))return!1;try{if(t.constructor&&!ie.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||V;var i=ce.exec(t),s=!n&&[];return i?[e.createElement(i[1])]:(i=re.buildFragment([t],e,s),s&&re(s).remove(),re.merge([],i.childNodes))},parseJSON:JSON.parse,parseXML:function(t){var n,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,n=i.parseFromString(t,"text/xml")}catch(s){n=e}return(!n||n.getElementsByTagName("parsererror").length)&&re.error("Invalid XML: "+t),n},noop:function(){},globalEval:function(t){var e,n=eval;t=re.trim(t),t&&(1===t.indexOf("use strict")?(e=V.createElement("script"),e.text=t,V.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(he,"ms-").replace(ue,de)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var s,r=0,o=t.length,a=n(t);if(i){if(a)for(;o>r&&(s=e.apply(t[r],i),s!==!1);r++);else for(r in t)if(s=e.apply(t[r],i),s===!1)break}else if(a)for(;o>r&&(s=e.call(t[r],r,t[r]),s!==!1);r++);else for(r in t)if(s=e.call(t[r],r,t[r]),s===!1)break;return t},trim:function(t){return null==t?"":se.call(t)},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?re.merge(i,"string"==typeof t?[t]:t):J.call(i,t)),i},inArray:function(t,e,n){return null==e?-1:ee.call(e,t,n)},merge:function(t,n){var i=n.length,s=t.length,r=0;if("number"==typeof i)for(;i>r;r++)t[s++]=n[r];else for(;n[r]!==e;)t[s++]=n[r++];return t.length=s,t},grep:function(t,e,n){var i,s=[],r=0,o=t.length;for(n=!!n;o>r;r++)i=!!e(t[r],r),n!==i&&s.push(t[r]);return s},map:function(t,e,i){var s,r=0,o=t.length,a=n(t),l=[];if(a)for(;o>r;r++)s=e(t[r],r,i),null!=s&&(l[l.length]=s);else for(r in t)s=e(t[r],r,i),null!=s&&(l[l.length]=s);return Z.apply([],l)},guid:1,proxy:function(t,n){var i,s,r;return"string"==typeof n&&(i=t[n],n=t,t=i),re.isFunction(t)?(s=te.call(arguments,2),r=function(){return t.apply(n||this,s.concat(te.call(arguments)))},r.guid=t.guid=t.guid||re.guid++,r):e},access:function(t,n,i,s,r,o,a){var l=0,c=t.length,h=null==i;if("object"===re.type(i)){r=!0;for(l in i)re.access(t,n,l,i[l],!0,o,a)}else if(s!==e&&(r=!0,re.isFunction(s)||(a=!0),h&&(a?(n.call(t,s),n=null):(h=n,n=function(t,e,n){return h.call(re(t),n)})),n))for(;c>l;l++)n(t[l],i,a?s:s.call(t[l],l,n(t[l],i)));return r?t:h?n.call(t):c?n(t[0],i):o},now:Date.now,swap:function(t,e,n,i){var s,r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];s=n.apply(t,i||[]);for(r in e)t.style[r]=o[r];return s}}),re.ready.promise=function(e){return z||(z=re.Deferred(),"complete"===V.readyState?setTimeout(re.ready):(V.addEventListener("DOMContentLoaded",pe,!1),t.addEventListener("load",pe,!1))),z.promise(e)},re.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){X["[object "+e+"]"]=e.toLowerCase()}),H=re(V),function(t,e){function n(t,e,n,i){var s,r,o,a,l,c,h,u,f,m;if((e?e.ownerDocument||e:R)!==q&&D(e),e=e||q,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(I&&!i){if(s=be.exec(t))if(o=s[1]){if(9===a){if(r=e.getElementById(o),!r||!r.parentNode)return n;if(r.id===o)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(o))&&$(e,r)&&r.id===o)return n.push(r),n}else{if(s[2])return te.apply(n,e.getElementsByTagName(t)),n;if((o=s[3])&&k.getElementsByClassName&&e.getElementsByClassName)return te.apply(n,e.getElementsByClassName(o)),n}if(k.qsa&&(!M||!M.test(t))){if(u=h=j,f=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=d(t),(h=e.getAttribute("id"))?u=h.replace(xe,"\\$&"):e.setAttribute("id",u),u="[id='"+u+"'] ",l=c.length;l--;)c[l]=u+p(c[l]);f=pe.test(t)&&e.parentNode||e,m=c.join(",")}if(m)try{return te.apply(n,f.querySelectorAll(m)),n}catch(g){}finally{h||e.removeAttribute("id")}}}return w(t.replace(he,"$1"),e,n,i)}function i(){function t(n,i){return e.push(n+=" ")>C.cacheLength&&delete t[e.shift()],t[n]=i}var e=[];return t}function s(t){return t[j]=!0,t}function r(t){var e=q.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),i=t.length;i--;)C.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||X)-(~t.sourceIndex||X);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function l(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function c(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function h(t){return s(function(e){return e=+e,s(function(n,i){for(var s,r=t([],n.length,e),o=r.length;o--;)n[s=r[o]]&&(n[s]=!(i[s]=n[s]))})})}function u(){}function d(t,e){var i,s,r,o,a,l,c,h=W[t+" "];if(h)return e?0:h.slice(0);for(a=t,l=[],c=C.preFilter;a;){(!i||(s=ue.exec(a)))&&(s&&(a=a.slice(s[0].length)||a),l.push(r=[])),i=!1,(s=de.exec(a))&&(i=s.shift(),r.push({value:i,type:s[0].replace(he," ")}),a=a.slice(i.length));for(o in C.filter)!(s=ve[o].exec(a))||c[o]&&!(s=c[o](s))||(i=s.shift(),r.push({value:i,type:o,matches:s}),a=a.slice(i.length));if(!i)break}return e?a.length:a?n.error(t):W(t,l).slice(0)}function p(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,s=n&&"parentNode"===i,r=z++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||s)return t(e,n,r)}:function(e,n,o){var a,l,c,h=H+" "+r;if(o){for(;e=e[i];)if((1===e.nodeType||s)&&t(e,n,o))return!0}else for(;e=e[i];)if(1===e.nodeType||s)if(c=e[j]||(e[j]={}),(l=c[i])&&l[0]===h){if((a=l[1])===!0||a===S)return a===!0}else if(l=c[i]=[h],l[1]=t(e,n,o)||S,l[1]===!0)return!0}}function m(t){return t.length>1?function(e,n,i){for(var s=t.length;s--;)if(!t[s](e,n,i))return!1;return!0}:t[0]}function g(t,e,n,i,s){for(var r,o=[],a=0,l=t.length,c=null!=e;l>a;a++)(r=t[a])&&(!n||n(r,i,s))&&(o.push(r),c&&e.push(a));return o}function v(t,e,n,i,r,o){return i&&!i[j]&&(i=v(i)),r&&!r[j]&&(r=v(r,o)),s(function(s,o,a,l){var c,h,u,d=[],p=[],f=o.length,m=s||_(e||"*",a.nodeType?[a]:a,[]),v=!t||!s&&e?m:g(m,d,t,a,l),y=n?r||(s?t:f||i)?[]:o:v;if(n&&n(v,y,a,l),i)for(c=g(y,p),i(c,[],a,l),h=c.length;h--;)(u=c[h])&&(y[p[h]]=!(v[p[h]]=u));if(s){if(r||t){if(r){for(c=[],h=y.length;h--;)(u=y[h])&&c.push(v[h]=u);r(null,y=[],c,l)}for(h=y.length;h--;)(u=y[h])&&(c=r?ne.call(s,u):d[h])>-1&&(s[c]=!(o[c]=u))}}else y=g(y===o?y.splice(f,y.length):y),r?r(null,o,y,l):te.apply(o,y)})}function y(t){for(var e,n,i,s=t.length,r=C.relative[t[0].type],o=r||C.relative[" "],a=r?1:0,l=f(function(t){return t===e},o,!0),c=f(function(t){return ne.call(e,t)>-1},o,!0),h=[function(t,n,i){return!r&&(i||n!==P)||((e=n).nodeType?l(t,n,i):c(t,n,i))}];s>a;a++)if(n=C.relative[t[a].type])h=[f(m(h),n)];else{if(n=C.filter[t[a].type].apply(null,t[a].matches),n[j]){for(i=++a;s>i&&!C.relative[t[i].type];i++);return v(a>1&&m(h),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(he,"$1"),n,i>a&&y(t.slice(a,i)),s>i&&y(t=t.slice(i)),s>i&&p(t))}h.push(n)}return m(h)}function b(t,e){var i=0,r=e.length>0,o=t.length>0,a=function(s,a,l,c,h){var u,d,p,f=[],m=0,v="0",y=s&&[],b=null!=h,_=P,w=s||o&&C.find.TAG("*",h&&a.parentNode||a),x=H+=null==_?1:Math.random()||.1;for(b&&(P=a!==q&&a,S=i);null!=(u=w[v]);v++){if(o&&u){for(d=0;p=t[d++];)if(p(u,a,l)){c.push(u);break}b&&(H=x,S=++i)}r&&((u=!p&&u)&&m--,s&&y.push(u))}if(m+=v,r&&v!==m){for(d=0;p=e[d++];)p(y,f,a,l);if(s){if(m>0)for(;v--;)y[v]||f[v]||(f[v]=Z.call(c));f=g(f)}te.apply(c,f),b&&!s&&f.length>0&&m+e.length>1&&n.uniqueSort(c)}return b&&(H=x,P=_),y};return r?s(a):a}function _(t,e,i){for(var s=0,r=e.length;r>s;s++)n(t,e[s],i);return i}function w(t,e,n,i){var s,r,o,a,l,c=d(t);if(!i&&1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(o=r[0]).type&&k.getById&&9===e.nodeType&&I&&C.relative[r[1].type]){if(e=(C.find.ID(o.matches[0].replace(ke,Se),e)||[])[0],!e)return n;t=t.slice(r.shift().value.length)}for(s=ve.needsContext.test(t)?0:r.length;s--&&(o=r[s],!C.relative[a=o.type]);)if((l=C.find[a])&&(i=l(o.matches[0].replace(ke,Se),pe.test(r[0].type)&&e.parentNode||e))){if(r.splice(s,1),t=i.length&&p(r),!t)return te.apply(n,i),n;break}}return A(t,c)(i,e,!I,n,pe.test(t)),n}var x,k,S,C,T,E,A,P,L,D,q,N,I,M,F,O,$,j="sizzle"+-new Date,R=t.document,H=0,z=0,B=i(),W=i(),V=i(),U=!1,Y=function(t,e){return t===e?(U=!0,0):0},G=typeof e,X=1<<31,K={}.hasOwnProperty,Q=[],Z=Q.pop,J=Q.push,te=Q.push,ee=Q.slice,ne=Q.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ie="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",se="[\\x20\\t\\r\\n\\f]",oe="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ae=oe.replace("w","w#"),le="\\["+se+"*("+oe+")"+se+"*(?:([*^$|!~]?=)"+se+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ae+")|)|)"+se+"*\\]",ce=":("+oe+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+le.replace(3,8)+")*)|.*)\\)|)",he=RegExp("^"+se+"+|((?:^|[^\\\\])(?:\\\\.)*)"+se+"+$","g"),ue=RegExp("^"+se+"*,"+se+"*"),de=RegExp("^"+se+"*([>+~]|"+se+")"+se+"*"),pe=RegExp(se+"*[+~]"),fe=RegExp("="+se+"*([^\\]'\"]*)"+se+"*\\]","g"),me=RegExp(ce),ge=RegExp("^"+ae+"$"),ve={ID:RegExp("^#("+oe+")"),CLASS:RegExp("^\\.("+oe+")"),TAG:RegExp("^("+oe.replace("w","w*")+")"),ATTR:RegExp("^"+le),PSEUDO:RegExp("^"+ce),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+se+"*(even|odd|(([+-]|)(\\d*)n|)"+se+"*(?:([+-]|)"+se+"*(\\d+)|))"+se+"*\\)|)","i"),bool:RegExp("^(?:"+ie+")$","i"),needsContext:RegExp("^"+se+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+se+"*((?:-\\d)?\\d*)"+se+"*\\)|)(?=[^-]|$)","i")},ye=/^[^{]+\{\s*\[native \w/,be=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_e=/^(?:input|select|textarea|button)$/i,we=/^h\d$/i,xe=/'|\\/g,ke=RegExp("\\\\([\\da-f]{1,6}"+se+"?|("+se+")|.)","ig"),Se=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(55296|i>>10,56320|1023&i)};try{te.apply(Q=ee.call(R.childNodes),R.childNodes),Q[R.childNodes.length].nodeType}catch(Ce){te={apply:Q.length?function(t,e){J.apply(t,ee.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}E=n.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},k=n.support={},D=n.setDocument=function(t){var n=t?t.ownerDocument||t:R,i=n.defaultView;return n!==q&&9===n.nodeType&&n.documentElement?(q=n,N=n.documentElement,I=!E(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){D()}),k.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),k.getElementsByTagName=r(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),k.getElementsByClassName=r(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),k.getById=r(function(t){return N.appendChild(t).id=j,!n.getElementsByName||!n.getElementsByName(j).length}),k.getById?(C.find.ID=function(t,e){if(typeof e.getElementById!==G&&I){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(t){var e=t.replace(ke,Se);return function(t){return t.getAttribute("id")===e}}):(delete C.find.ID,C.filter.ID=function(t){var e=t.replace(ke,Se);return function(t){var n=typeof t.getAttributeNode!==G&&t.getAttributeNode("id");return n&&n.value===e}}),C.find.TAG=k.getElementsByTagName?function(t,n){return typeof n.getElementsByTagName!==G?n.getElementsByTagName(t):e}:function(t,e){var n,i=[],s=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[s++];)1===n.nodeType&&i.push(n);return i}return r},C.find.CLASS=k.getElementsByClassName&&function(t,n){return typeof n.getElementsByClassName!==G&&I?n.getElementsByClassName(t):e},F=[],M=[],(k.qsa=ye.test(n.querySelectorAll))&&(r(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||M.push("\\["+se+"*(?:value|"+ie+")"),t.querySelectorAll(":checked").length||M.push(":checked")}),r(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("t",""),t.querySelectorAll("[t^='']").length&&M.push("[*^$]="+se+"*(?:''|\"\")"),t.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),M.push(",.*:")})),(k.matchesSelector=ye.test(O=N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&r(function(t){k.disconnectedMatch=O.call(t,"div"),O.call(t,"[s!='']:x"),F.push("!=",ce)}),M=M.length&&RegExp(M.join("|")),F=F.length&&RegExp(F.join("|")),$=ye.test(N.contains)||N.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},Y=N.compareDocumentPosition?function(t,e){if(t===e)return U=!0,0;var i=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e);return i?1&i||!k.sortDetached&&e.compareDocumentPosition(t)===i?t===n||$(R,t)?-1:e===n||$(R,e)?1:L?ne.call(L,t)-ne.call(L,e):0:4&i?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var i,s=0,r=t.parentNode,o=e.parentNode,l=[t],c=[e];if(t===e)return U=!0,0;if(!r||!o)return t===n?-1:e===n?1:r?-1:o?1:L?ne.call(L,t)-ne.call(L,e):0;if(r===o)return a(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)c.unshift(i);for(;l[s]===c[s];)s++;return s?a(l[s],c[s]):l[s]===R?-1:c[s]===R?1:0},n):q},n.matches=function(t,e){return n(t,null,null,e)},n.matchesSelector=function(t,e){if((t.ownerDocument||t)!==q&&D(t),e=e.replace(fe,"='$1']"),!(!k.matchesSelector||!I||F&&F.test(e)||M&&M.test(e)))try{var i=O.call(t,e);if(i||k.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(s){}return n(e,q,null,[t]).length>0},n.contains=function(t,e){return(t.ownerDocument||t)!==q&&D(t),$(t,e)},n.attr=function(t,n){(t.ownerDocument||t)!==q&&D(t);var i=C.attrHandle[n.toLowerCase()],s=i&&K.call(C.attrHandle,n.toLowerCase())?i(t,n,!I):e;return s===e?k.attributes||!I?t.getAttribute(n):(s=t.getAttributeNode(n))&&s.specified?s.value:null:s},n.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},n.uniqueSort=function(t){var e,n=[],i=0,s=0;if(U=!k.detectDuplicates,L=!k.sortStable&&t.slice(0),t.sort(Y),U){for(;e=t[s++];)e===t[s]&&(i=n.push(s));for(;i--;)t.splice(n[i],1)}return t},T=n.getText=function(t){var e,n="",i=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=T(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[i];i++)n+=T(e);return n},C=n.selectors={cacheLength:50,createPseudo:s,match:ve,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(ke,Se),t[3]=(t[4]||t[5]||"").replace(ke,Se),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||n.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&n.error(t[0]),t},PSEUDO:function(t){var n,i=!t[5]&&t[2];return ve.CHILD.test(t[0])?null:(t[3]&&t[4]!==e?t[2]=t[4]:i&&me.test(i)&&(n=d(i,!0))&&(n=i.indexOf(")",i.length-n)-i.length)&&(t[0]=t[0].slice(0,n),t[2]=i.slice(0,n)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(ke,Se).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=B[t+" "];return e||(e=RegExp("(^|"+se+")"+t+"("+se+"|$)"))&&B(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==G&&t.getAttribute("class")||"")})},ATTR:function(t,e,i){return function(s){var r=n.attr(s,t);return null==r?"!="===e:e?(r+="","="===e?r===i:"!="===e?r!==i:"^="===e?i&&0===r.indexOf(i):"*="===e?i&&r.indexOf(i)>-1:"$="===e?i&&r.slice(-i.length)===i:"~="===e?(" "+r+" ").indexOf(i)>-1:"|="===e?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,s){var r="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===s?function(t){return!!t.parentNode}:function(e,n,l){var c,h,u,d,p,f,m=r!==o?"nextSibling":"previousSibling",g=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(g){if(r){for(;m;){for(u=e;u=u[m];)if(a?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&y){for(h=g[j]||(g[j]={}),c=h[t]||[],p=c[0]===H&&c[1],d=c[0]===H&&c[2],u=p&&g.childNodes[p];u=++p&&u&&u[m]||(d=p=0)||f.pop();)if(1===u.nodeType&&++d&&u===e){h[t]=[H,p,d];break}}else if(y&&(c=(e[j]||(e[j]={}))[t])&&c[0]===H)d=c[1];else for(;(u=++p&&u&&u[m]||(d=p=0)||f.pop())&&((a?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++d||(y&&((u[j]||(u[j]={}))[t]=[H,d]),u!==e)););return d-=s,d===i||0===d%i&&d/i>=0}}},PSEUDO:function(t,e){var i,r=C.pseudos[t]||C.setFilters[t.toLowerCase()]||n.error("unsupported pseudo: "+t);return r[j]?r(e):r.length>1?(i=[t,t,"",e],C.setFilters.hasOwnProperty(t.toLowerCase())?s(function(t,n){for(var i,s=r(t,e),o=s.length;o--;)i=ne.call(t,s[o]),t[i]=!(n[i]=s[o])}):function(t){return r(t,0,i)}):r}},pseudos:{not:s(function(t){var e=[],n=[],i=A(t.replace(he,"$1"));return i[j]?s(function(t,e,n,s){for(var r,o=i(t,null,s,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))}):function(t,s,r){return e[0]=t,i(e,null,r,n),!n.pop()}}),has:s(function(t){return function(e){return n(t,e).length>0}}),contains:s(function(t){return function(e){return(e.textContent||e.innerText||T(e)).indexOf(t)>-1}}),lang:s(function(t){return ge.test(t||"")||n.error("unsupported lang: "+t),t=t.replace(ke,Se).toLowerCase(),function(e){var n;do if(n=I?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===N},focus:function(t){return t===q.activeElement&&(!q.hasFocus||q.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return we.test(t.nodeName)},input:function(t){return _e.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:h(function(){return[0]}),last:h(function(t,e){return[e-1]}),eq:h(function(t,e,n){return[0>n?n+e:n]}),even:h(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:h(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:h(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:h(function(t,e,n){for(var i=0>n?n+e:n;e>++i;)t.push(i);return t})}},C.pseudos.nth=C.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[x]=l(x);for(x in{submit:!0,reset:!0})C.pseudos[x]=c(x);
u.prototype=C.filters=C.pseudos,C.setFilters=new u,A=n.compile=function(t,e){var n,i=[],s=[],r=V[t+" "];if(!r){for(e||(e=d(t)),n=e.length;n--;)r=y(e[n]),r[j]?i.push(r):s.push(r);r=V(t,b(s,i))}return r},k.sortStable=j.split("").sort(Y).join("")===j,k.detectDuplicates=U,D(),k.sortDetached=r(function(t){return 1&t.compareDocumentPosition(q.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,n,i){return i?e:t.getAttribute(n,"type"===n.toLowerCase()?1:2)}),k.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,n,i){return i||"input"!==t.nodeName.toLowerCase()?e:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(ie,function(t,n,i){var s;return i?e:(s=t.getAttributeNode(n))&&s.specified?s.value:t[n]===!0?n.toLowerCase():null}),re.find=n,re.expr=n.selectors,re.expr[":"]=re.expr.pseudos,re.unique=n.uniqueSort,re.text=n.getText,re.isXMLDoc=n.isXML,re.contains=n.contains}(t);var fe={};re.Callbacks=function(t){t="string"==typeof t?fe[t]||i(t):re.extend({},t);var n,s,r,o,a,l,c=[],h=!t.once&&[],u=function(e){for(n=t.memory&&e,s=!0,l=o||0,o=0,a=c.length,r=!0;c&&a>l;l++)if(c[l].apply(e[0],e[1])===!1&&t.stopOnFalse){n=!1;break}r=!1,c&&(h?h.length&&u(h.shift()):n?c=[]:d.disable())},d={add:function(){if(c){var e=c.length;!function i(e){re.each(e,function(e,n){var s=re.type(n);"function"===s?t.unique&&d.has(n)||c.push(n):n&&n.length&&"string"!==s&&i(n)})}(arguments),r?a=c.length:n&&(o=e,u(n))}return this},remove:function(){return c&&re.each(arguments,function(t,e){for(var n;(n=re.inArray(e,c,n))>-1;)c.splice(n,1),r&&(a>=n&&a--,l>=n&&l--)}),this},has:function(t){return t?re.inArray(t,c)>-1:!(!c||!c.length)},empty:function(){return c=[],a=0,this},disable:function(){return c=h=n=e,this},disabled:function(){return!c},lock:function(){return h=e,n||d.disable(),this},locked:function(){return!h},fireWith:function(t,e){return!c||s&&!h||(e=e||[],e=[t,e.slice?e.slice():e],r?h.push(e):u(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!s}};return d},re.extend({Deferred:function(t){var e=[["resolve","done",re.Callbacks("once memory"),"resolved"],["reject","fail",re.Callbacks("once memory"),"rejected"],["notify","progress",re.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return re.Deferred(function(n){re.each(e,function(e,r){var o=r[0],a=re.isFunction(t[e])&&t[e];s[r[1]](function(){var t=a&&a.apply(this,arguments);t&&re.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?re.extend(t,i):i}},s={};return i.pipe=i.then,re.each(e,function(t,r){var o=r[2],a=r[3];i[r[1]]=o.add,a&&o.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),s[r[0]]=function(){return s[r[0]+"With"](this===s?i:this,arguments),this},s[r[0]+"With"]=o.fireWith}),i.promise(s),t&&t.call(s,s),s},when:function(t){var e,n,i,s=0,r=te.call(arguments),o=r.length,a=1!==o||t&&re.isFunction(t.promise)?o:0,l=1===a?t:re.Deferred(),c=function(t,n,i){return function(s){n[t]=this,i[t]=arguments.length>1?te.call(arguments):s,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(o>1)for(e=Array(o),n=Array(o),i=Array(o);o>s;s++)r[s]&&re.isFunction(r[s].promise)?r[s].promise().done(c(s,i,r)).fail(l.reject).progress(c(s,n,e)):--a;return a||l.resolveWith(i,r),l.promise()}}),re.support=function(e){var n=V.createElement("input"),i=V.createDocumentFragment(),s=V.createElement("div"),r=V.createElement("select"),o=r.appendChild(V.createElement("option"));return n.type?(n.type="checkbox",e.checkOn=""!==n.value,e.optSelected=o.selected,e.reliableMarginRight=!0,e.boxSizingReliable=!0,e.pixelPosition=!1,n.checked=!0,e.noCloneChecked=n.cloneNode(!0).checked,r.disabled=!0,e.optDisabled=!o.disabled,n=V.createElement("input"),n.value="t",n.type="radio",e.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),i.appendChild(n),e.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,e.focusinBubbles="onfocusin"in t,s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===s.style.backgroundClip,re(function(){var n,i,r="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",o=V.getElementsByTagName("body")[0];o&&(n=V.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",o.appendChild(n).appendChild(s),s.innerHTML="",s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",re.swap(o,null!=o.style.zoom?{zoom:1}:{},function(){e.boxSizing=4===s.offsetWidth}),t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(s,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(s,null)||{width:"4px"}).width,i=s.appendChild(V.createElement("div")),i.style.cssText=s.style.cssText=r,i.style.marginRight=i.style.width="0",s.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(i,null)||{}).marginRight)),o.removeChild(n))}),e):e}({});var me,ge,ve=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ye=/([A-Z])/g;s.uid=1,s.accepts=function(t){return t.nodeType?1===t.nodeType||9===t.nodeType:!0},s.prototype={key:function(t){if(!s.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=s.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(i){e[this.expando]=n,re.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var i,s=this.key(t),r=this.cache[s];if("string"==typeof e)r[e]=n;else if(re.isEmptyObject(r))re.extend(this.cache[s],e);else for(i in e)r[i]=e[i];return r},get:function(t,n){var i=this.cache[this.key(t)];return n===e?i:i[n]},access:function(t,n,i){var s;return n===e||n&&"string"==typeof n&&i===e?(s=this.get(t,n),s!==e?s:this.get(t,re.camelCase(n))):(this.set(t,n,i),i!==e?i:n)},remove:function(t,n){var i,s,r,o=this.key(t),a=this.cache[o];if(n===e)this.cache[o]={};else{re.isArray(n)?s=n.concat(n.map(re.camelCase)):(r=re.camelCase(n),n in a?s=[n,r]:(s=r,s=s in a?[s]:s.match(ae)||[])),i=s.length;for(;i--;)delete a[s[i]]}},hasData:function(t){return!re.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}},me=new s,ge=new s,re.extend({acceptData:s.accepts,hasData:function(t){return me.hasData(t)||ge.hasData(t)},data:function(t,e,n){return me.access(t,e,n)},removeData:function(t,e){me.remove(t,e)},_data:function(t,e,n){return ge.access(t,e,n)},_removeData:function(t,e){ge.remove(t,e)}}),re.fn.extend({data:function(t,n){var i,s,o=this[0],a=0,l=null;if(t===e){if(this.length&&(l=me.get(o),1===o.nodeType&&!ge.get(o,"hasDataAttrs"))){for(i=o.attributes;i.length>a;a++)s=i[a].name,0===s.indexOf("data-")&&(s=re.camelCase(s.slice(5)),r(o,s,l[s]));ge.set(o,"hasDataAttrs",!0)}return l}return"object"==typeof t?this.each(function(){me.set(this,t)}):re.access(this,function(n){var i,s=re.camelCase(t);if(o&&n===e){if(i=me.get(o,t),i!==e)return i;if(i=me.get(o,s),i!==e)return i;if(i=r(o,s,e),i!==e)return i}else this.each(function(){var i=me.get(this,s);me.set(this,s,n),-1!==t.indexOf("-")&&i!==e&&me.set(this,t,n)})},null,n,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){me.remove(this,t)})}}),re.extend({queue:function(t,n,i){var s;return t?(n=(n||"fx")+"queue",s=ge.get(t,n),i&&(!s||re.isArray(i)?s=ge.access(t,n,re.makeArray(i)):s.push(i)),s||[]):e},dequeue:function(t,e){e=e||"fx";var n=re.queue(t,e),i=n.length,s=n.shift(),r=re._queueHooks(t,e),o=function(){re.dequeue(t,e)};"inprogress"===s&&(s=n.shift(),i--),s&&("fx"===e&&n.unshift("inprogress"),delete r.stop,s.call(t,o,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ge.get(t,n)||ge.access(t,n,{empty:re.Callbacks("once memory").add(function(){ge.remove(t,[e+"queue",n])})})}}),re.fn.extend({queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),i>arguments.length?re.queue(this[0],t):n===e?this:this.each(function(){var e=re.queue(this,t,n);re._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&re.dequeue(this,t)})},dequeue:function(t){return this.each(function(){re.dequeue(this,t)})},delay:function(t,e){return t=re.fx?re.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,s=1,r=re.Deferred(),o=this,a=this.length,l=function(){--s||r.resolveWith(o,[o])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";a--;)i=ge.get(o[a],t+"queueHooks"),i&&i.empty&&(s++,i.empty.add(l));return l(),r.promise(n)}});var be,_e,we=/[\t\r\n\f]/g,xe=/\r/g,ke=/^(?:input|select|textarea|button)$/i;re.fn.extend({attr:function(t,e){return re.access(this,re.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){re.removeAttr(this,t)})},prop:function(t,e){return re.access(this,re.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[re.propFix[t]||t]})},addClass:function(t){var e,n,i,s,r,o=0,a=this.length,l="string"==typeof t&&t;if(re.isFunction(t))return this.each(function(e){re(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(ae)||[];a>o;o++)if(n=this[o],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(we," "):" ")){for(r=0;s=e[r++];)0>i.indexOf(" "+s+" ")&&(i+=s+" ");n.className=re.trim(i)}return this},removeClass:function(t){var e,n,i,s,r,o=0,a=this.length,l=0===arguments.length||"string"==typeof t&&t;if(re.isFunction(t))return this.each(function(e){re(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(ae)||[];a>o;o++)if(n=this[o],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(we," "):"")){for(r=0;s=e[r++];)for(;i.indexOf(" "+s+" ")>=0;)i=i.replace(" "+s+" "," ");n.className=t?re.trim(i):""}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(re.isFunction(t)?function(n){re(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,i=0,s=re(this),r=t.match(ae)||[];e=r[i++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else(n===B||"boolean"===n)&&(this.className&&ge.set(this,"__className__",this.className),this.className=this.className||t===!1?"":ge.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(we," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,i,s,r=this[0];return arguments.length?(s=re.isFunction(t),this.each(function(i){var r;1===this.nodeType&&(r=s?t.call(this,i,re(this).val()):t,null==r?r="":"number"==typeof r?r+="":re.isArray(r)&&(r=re.map(r,function(t){return null==t?"":t+""})),n=re.valHooks[this.type]||re.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,r,"value")!==e||(this.value=r))})):r?(n=re.valHooks[r.type]||re.valHooks[r.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(r,"value"))!==e?i:(i=r.value,"string"==typeof i?i.replace(xe,""):null==i?"":i)):void 0}}),re.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,i=t.options,s=t.selectedIndex,r="select-one"===t.type||0>s,o=r?null:[],a=r?s+1:i.length,l=0>s?a:r?s:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==s||(re.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&re.nodeName(n.parentNode,"optgroup"))){if(e=re(n).val(),r)return e;o.push(e)}return o},set:function(t,e){for(var n,i,s=t.options,r=re.makeArray(e),o=s.length;o--;)i=s[o],(i.selected=re.inArray(re(i).val(),r)>=0)&&(n=!0);return n||(t.selectedIndex=-1),r}}},attr:function(t,n,i){var s,r,o=t.nodeType;return t&&3!==o&&8!==o&&2!==o?typeof t.getAttribute===B?re.prop(t,n,i):(1===o&&re.isXMLDoc(t)||(n=n.toLowerCase(),s=re.attrHooks[n]||(re.expr.match.bool.test(n)?_e:be)),i===e?s&&"get"in s&&null!==(r=s.get(t,n))?r:(r=re.find.attr(t,n),null==r?e:r):null!==i?s&&"set"in s&&(r=s.set(t,i,n))!==e?r:(t.setAttribute(n,i+""),i):(re.removeAttr(t,n),e)):void 0},removeAttr:function(t,e){var n,i,s=0,r=e&&e.match(ae);if(r&&1===t.nodeType)for(;n=r[s++];)i=re.propFix[n]||n,re.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!re.support.radioValue&&"radio"===e&&re.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(t,n,i){var s,r,o,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?(o=1!==a||!re.isXMLDoc(t),o&&(n=re.propFix[n]||n,r=re.propHooks[n]),i!==e?r&&"set"in r&&(s=r.set(t,i,n))!==e?s:t[n]=i:r&&"get"in r&&null!==(s=r.get(t,n))?s:t[n]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ke.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),_e={set:function(t,e,n){return e===!1?re.removeAttr(t,n):t.setAttribute(n,n),n}},re.each(re.expr.match.bool.source.match(/\w+/g),function(t,n){var i=re.expr.attrHandle[n]||re.find.attr;re.expr.attrHandle[n]=function(t,n,s){var r=re.expr.attrHandle[n],o=s?e:(re.expr.attrHandle[n]=e)!=i(t,n,s)?n.toLowerCase():null;return re.expr.attrHandle[n]=r,o}}),re.support.optSelected||(re.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),re.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){re.propFix[this.toLowerCase()]=this}),re.each(["radio","checkbox"],function(){re.valHooks[this]={set:function(t,n){return re.isArray(n)?t.checked=re.inArray(re(t).val(),n)>=0:e}},re.support.checkOn||(re.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Se=/^key/,Ce=/^(?:mouse|contextmenu)|click/,Te=/^(?:focusinfocus|focusoutblur)$/,Ee=/^([^.]*)(?:\.(.+)|)$/;re.event={global:{},add:function(t,n,i,s,r){var o,a,l,c,h,u,d,p,f,m,g,v=ge.get(t);if(v){for(i.handler&&(o=i,i=o.handler,r=o.selector),i.guid||(i.guid=re.guid++),(c=v.events)||(c=v.events={}),(a=v.handle)||(a=v.handle=function(t){return typeof re===B||t&&re.event.triggered===t.type?e:re.event.dispatch.apply(a.elem,arguments)},a.elem=t),n=(n||"").match(ae)||[""],h=n.length;h--;)l=Ee.exec(n[h])||[],f=g=l[1],m=(l[2]||"").split(".").sort(),f&&(d=re.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=re.event.special[f]||{},u=re.extend({type:f,origType:g,data:s,handler:i,guid:i.guid,selector:r,needsContext:r&&re.expr.match.needsContext.test(r),namespace:m.join(".")},o),(p=c[f])||(p=c[f]=[],p.delegateCount=0,d.setup&&d.setup.call(t,s,m,a)!==!1||t.addEventListener&&t.addEventListener(f,a,!1)),d.add&&(d.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),r?p.splice(p.delegateCount++,0,u):p.push(u),re.event.global[f]=!0);t=null}},remove:function(t,e,n,i,s){var r,o,a,l,c,h,u,d,p,f,m,g=ge.hasData(t)&&ge.get(t);if(g&&(l=g.events)){for(e=(e||"").match(ae)||[""],c=e.length;c--;)if(a=Ee.exec(e[c])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(u=re.event.special[p]||{},p=(i?u.delegateType:u.bindType)||p,d=l[p]||[],a=a[2]&&RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=d.length;r--;)h=d[r],!s&&m!==h.origType||n&&n.guid!==h.guid||a&&!a.test(h.namespace)||i&&i!==h.selector&&("**"!==i||!h.selector)||(d.splice(r,1),h.selector&&d.delegateCount--,u.remove&&u.remove.call(t,h));o&&!d.length&&(u.teardown&&u.teardown.call(t,f,g.handle)!==!1||re.removeEvent(t,p,g.handle),delete l[p])}else for(p in l)re.event.remove(t,p+e[c],n,i,!0);re.isEmptyObject(l)&&(delete g.handle,ge.remove(t,"events"))}},trigger:function(n,i,s,r){var o,a,l,c,h,u,d,p=[s||V],f=ie.call(n,"type")?n.type:n,m=ie.call(n,"namespace")?n.namespace.split("."):[];if(a=l=s=s||V,3!==s.nodeType&&8!==s.nodeType&&!Te.test(f+re.event.triggered)&&(f.indexOf(".")>=0&&(m=f.split("."),f=m.shift(),m.sort()),h=0>f.indexOf(":")&&"on"+f,n=n[re.expando]?n:new re.Event(f,"object"==typeof n&&n),n.isTrigger=r?2:3,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=e,n.target||(n.target=s),i=null==i?[n]:re.makeArray(i,[n]),d=re.event.special[f]||{},r||!d.trigger||d.trigger.apply(s,i)!==!1)){if(!r&&!d.noBubble&&!re.isWindow(s)){for(c=d.delegateType||f,Te.test(c+f)||(a=a.parentNode);a;a=a.parentNode)p.push(a),l=a;l===(s.ownerDocument||V)&&p.push(l.defaultView||l.parentWindow||t)}for(o=0;(a=p[o++])&&!n.isPropagationStopped();)n.type=o>1?c:d.bindType||f,u=(ge.get(a,"events")||{})[n.type]&&ge.get(a,"handle"),u&&u.apply(a,i),u=h&&a[h],u&&re.acceptData(a)&&u.apply&&u.apply(a,i)===!1&&n.preventDefault();return n.type=f,r||n.isDefaultPrevented()||d._default&&d._default.apply(p.pop(),i)!==!1||!re.acceptData(s)||h&&re.isFunction(s[f])&&!re.isWindow(s)&&(l=s[h],l&&(s[h]=null),re.event.triggered=f,s[f](),re.event.triggered=e,l&&(s[h]=l)),n.result}},dispatch:function(t){t=re.event.fix(t);var n,i,s,r,o,a=[],l=te.call(arguments),c=(ge.get(this,"events")||{})[t.type]||[],h=re.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,t)!==!1){for(a=re.event.handlers.call(this,t,c),n=0;(r=a[n++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,s=((re.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l),s!==e&&(t.result=s)===!1&&(t.preventDefault(),t.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,t),t.result}},handlers:function(t,n){var i,s,r,o,a=[],l=n.delegateCount,c=t.target;if(l&&c.nodeType&&(!t.button||"click"!==t.type))for(;c!==this;c=c.parentNode||this)if(c.disabled!==!0||"click"!==t.type){for(s=[],i=0;l>i;i++)o=n[i],r=o.selector+" ",s[r]===e&&(s[r]=o.needsContext?re(r,this).index(c)>=0:re.find(r,this,null,[c]).length),s[r]&&s.push(o);s.length&&a.push({elem:c,handlers:s})}return n.length>l&&a.push({elem:this,handlers:n.slice(l)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var i,s,r,o=n.button;return null==t.pageX&&null!=n.clientX&&(i=t.target.ownerDocument||V,s=i.documentElement,r=i.body,t.pageX=n.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),t.pageY=n.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),t.which||o===e||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[re.expando])return t;var e,n,i,s=t.type,r=t,o=this.fixHooks[s];for(o||(this.fixHooks[s]=o=Ce.test(s)?this.mouseHooks:Se.test(s)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,t=new re.Event(r),e=i.length;e--;)n=i[e],t[n]=r[n];return t.target||(t.target=V),3===t.target.nodeType&&(t.target=t.target.parentNode),o.filter?o.filter(t,r):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):e},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):e},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&re.nodeName(this,"input")?(this.click(),!1):e},_default:function(t){return re.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var s=re.extend(new re.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?re.event.trigger(s,null,e):re.event.dispatch.call(e,s),s.isDefaultPrevented()&&n.preventDefault()}},re.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},re.Event=function(t,n){return this instanceof re.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.getPreventDefault&&t.getPreventDefault()?o:a):this.type=t,n&&re.extend(this,n),this.timeStamp=t&&t.timeStamp||re.now(),this[re.expando]=!0,e):new re.Event(t,n)},re.Event.prototype={isDefaultPrevented:a,isPropagationStopped:a,isImmediatePropagationStopped:a,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=o,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=o,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()}},re.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){re.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,s=t.relatedTarget,r=t.handleObj;return(!s||s!==i&&!re.contains(i,s))&&(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),re.support.focusinBubbles||re.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){re.event.simulate(e,t.target,re.event.fix(t),!0)};re.event.special[e]={setup:function(){0===n++&&V.addEventListener(t,i,!0)},teardown:function(){0===--n&&V.removeEventListener(t,i,!0)}}}),re.fn.extend({on:function(t,n,i,s,r){var o,l;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=e);for(l in t)this.on(l,n,i,t[l],r);return this}if(null==i&&null==s?(s=n,i=n=e):null==s&&("string"==typeof n?(s=i,i=e):(s=i,i=n,n=e)),s===!1)s=a;else if(!s)return this;return 1===r&&(o=s,s=function(t){return re().off(t),o.apply(this,arguments)},s.guid=o.guid||(o.guid=re.guid++)),this.each(function(){re.event.add(this,t,s,i,n)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,n,i){var s,r;if(t&&t.preventDefault&&t.handleObj)return s=t.handleObj,re(t.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof t){for(r in t)this.off(r,n,t[r]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=e),i===!1&&(i=a),this.each(function(){re.event.remove(this,t,i,n)})},trigger:function(t,e){return this.each(function(){re.event.trigger(t,e,this)})},triggerHandler:function(t,n){var i=this[0];return i?re.event.trigger(t,n,i,!0):e}});var Ae=/^.[^:#\[\.,]*$/,Pe=/^(?:parents|prev(?:Until|All))/,Le=re.expr.match.needsContext,De={children:!0,contents:!0,next:!0,prev:!0};re.fn.extend({find:function(t){var e,n=[],i=this,s=i.length;if("string"!=typeof t)return this.pushStack(re(t).filter(function(){for(e=0;s>e;e++)if(re.contains(i[e],this))return!0}));for(e=0;s>e;e++)re.find(t,i[e],n);return n=this.pushStack(s>1?re.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},has:function(t){var e=re(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(re.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(h(this,t||[],!0))},filter:function(t){return this.pushStack(h(this,t||[],!1))},is:function(t){return!!h(this,"string"==typeof t&&Le.test(t)?re(t):t||[],!1).length},closest:function(t,e){for(var n,i=0,s=this.length,r=[],o=Le.test(t)||"string"!=typeof t?re(t,e||this.context):0;s>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(11>n.nodeType&&(o?o.index(n)>-1:1===n.nodeType&&re.find.matchesSelector(n,t))){n=r.push(n);break}return this.pushStack(r.length>1?re.unique(r):r)},index:function(t){return t?"string"==typeof t?ee.call(re(t),this[0]):ee.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?re(t,e):re.makeArray(t&&t.nodeType?[t]:t),i=re.merge(this.get(),n);return this.pushStack(re.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),re.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return re.dir(t,"parentNode")},parentsUntil:function(t,e,n){return re.dir(t,"parentNode",n)},next:function(t){return c(t,"nextSibling")},prev:function(t){return c(t,"previousSibling")},nextAll:function(t){return re.dir(t,"nextSibling")},prevAll:function(t){return re.dir(t,"previousSibling")},nextUntil:function(t,e,n){return re.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return re.dir(t,"previousSibling",n)},siblings:function(t){return re.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return re.sibling(t.firstChild)},contents:function(t){return t.contentDocument||re.merge([],t.childNodes)}},function(t,e){re.fn[t]=function(n,i){var s=re.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(s=re.filter(i,s)),this.length>1&&(De[t]||re.unique(s),Pe.test(t)&&s.reverse()),this.pushStack(s)}}),re.extend({filter:function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?re.find.matchesSelector(i,t)?[i]:[]:re.find.matches(t,re.grep(e,function(t){return 1===t.nodeType}))},dir:function(t,n,i){for(var s=[],r=i!==e;(t=t[n])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&re(t).is(i))break;s.push(t)}return s},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var qe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ne=/<([\w:]+)/,Ie=/<|&#?\w+;/,Me=/<(?:script|style|link)/i,Fe=/^(?:checkbox|radio)$/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,$e=/^$|\/(?:java|ecma)script/i,je=/^true\/(.*)/,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,He={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};He.optgroup=He.option,He.tbody=He.tfoot=He.colgroup=He.caption=He.thead,He.th=He.td,re.fn.extend({text:function(t){return re.access(this,function(t){return t===e?re.text(this):this.empty().append((this[0]&&this[0].ownerDocument||V).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=u(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=u(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?re.filter(t,this):this,s=0;null!=(n=i[s]);s++)e||1!==n.nodeType||re.cleanData(g(n)),n.parentNode&&(e&&re.contains(n.ownerDocument,n)&&f(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(re.cleanData(g(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return re.clone(this,t,e)})},html:function(t){return re.access(this,function(t){var n=this[0]||{},i=0,s=this.length;if(t===e&&1===n.nodeType)return n.innerHTML;if("string"==typeof t&&!Me.test(t)&&!He[(Ne.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(qe,"<$1></$2>");try{for(;s>i;i++)n=this[i]||{},1===n.nodeType&&(re.cleanData(g(n,!1)),n.innerHTML=t);n=0}catch(r){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=re.map(this,function(t){return[t.nextSibling,t.parentNode]}),e=0;return this.domManip(arguments,function(n){var i=t[e++],s=t[e++];s&&(i&&i.parentNode!==s&&(i=this.nextSibling),re(this).remove(),s.insertBefore(n,i))},!0),e?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e,n){t=Z.apply([],t);var i,s,r,o,a,l,c=0,h=this.length,u=this,f=h-1,m=t[0],v=re.isFunction(m);if(v||!(1>=h||"string"!=typeof m||re.support.checkClone)&&Oe.test(m))return this.each(function(i){var s=u.eq(i);v&&(t[0]=m.call(this,i,s.html())),s.domManip(t,e,n)});if(h&&(i=re.buildFragment(t,this[0].ownerDocument,!1,!n&&this),s=i.firstChild,1===i.childNodes.length&&(i=s),s)){for(r=re.map(g(i,"script"),d),o=r.length;h>c;c++)a=i,c!==f&&(a=re.clone(a,!0,!0),o&&re.merge(r,g(a,"script"))),e.call(this[c],a,c);if(o)for(l=r[r.length-1].ownerDocument,re.map(r,p),c=0;o>c;c++)a=r[c],$e.test(a.type||"")&&!ge.access(a,"globalEval")&&re.contains(l,a)&&(a.src?re._evalUrl(a.src):re.globalEval(a.textContent.replace(Re,"")))}return this}}),re.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){re.fn[t]=function(t){for(var n,i=[],s=re(t),r=s.length-1,o=0;r>=o;o++)n=o===r?this:this.clone(!0),re(s[o])[e](n),J.apply(i,n.get());return this.pushStack(i)}}),re.extend({clone:function(t,e,n){var i,s,r,o,a=t.cloneNode(!0),l=re.contains(t.ownerDocument,t);if(!(re.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||re.isXMLDoc(t)))for(o=g(a),r=g(t),i=0,s=r.length;s>i;i++)v(r[i],o[i]);if(e)if(n)for(r=r||g(t),o=o||g(a),i=0,s=r.length;s>i;i++)m(r[i],o[i]);else m(t,a);return o=g(a,"script"),o.length>0&&f(o,!l&&g(t,"script")),a},buildFragment:function(t,e,n,i){for(var s,r,o,a,l,c,h=0,u=t.length,d=e.createDocumentFragment(),p=[];u>h;h++)if(s=t[h],s||0===s)if("object"===re.type(s))re.merge(p,s.nodeType?[s]:s);else if(Ie.test(s)){for(r=r||d.appendChild(e.createElement("div")),o=(Ne.exec(s)||["",""])[1].toLowerCase(),a=He[o]||He._default,r.innerHTML=a[1]+s.replace(qe,"<$1></$2>")+a[2],c=a[0];c--;)r=r.lastChild;re.merge(p,r.childNodes),r=d.firstChild,r.textContent=""}else p.push(e.createTextNode(s));for(d.textContent="",h=0;s=p[h++];)if((!i||-1===re.inArray(s,i))&&(l=re.contains(s.ownerDocument,s),r=g(d.appendChild(s),"script"),l&&f(r),n))for(c=0;s=r[c++];)$e.test(s.type||"")&&n.push(s);return d},cleanData:function(t){for(var n,i,r,o,a,l,c=re.event.special,h=0;(i=t[h])!==e;h++){if(s.accepts(i)&&(a=i[ge.expando],a&&(n=ge.cache[a]))){if(r=Object.keys(n.events||{}),r.length)for(l=0;(o=r[l])!==e;l++)c[o]?re.event.remove(i,o):re.removeEvent(i,o,n.handle);ge.cache[a]&&delete ge.cache[a]}delete me.cache[i[me.expando]]}},_evalUrl:function(t){return re.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),re.fn.extend({wrapAll:function(t){var e;return re.isFunction(t)?this.each(function(e){re(this).wrapAll(t.call(this,e))}):(this[0]&&(e=re(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(re.isFunction(t)?function(e){re(this).wrapInner(t.call(this,e))}:function(){var e=re(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=re.isFunction(t);return this.each(function(n){re(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){re.nodeName(this,"body")||re(this).replaceWith(this.childNodes)}).end()}});var ze,Be,We=/^(none|table(?!-c[ea]).+)/,Ve=/^margin/,Ue=RegExp("^("+oe+")(.*)$","i"),Ye=RegExp("^("+oe+")(?!px)[a-z%]+$","i"),Ge=RegExp("^([+-])=("+oe+")","i"),Xe={BODY:"block"},Ke={position:"absolute",visibility:"hidden",display:"block"},Qe={letterSpacing:0,fontWeight:400},Ze=["Top","Right","Bottom","Left"],Je=["Webkit","O","Moz","ms"];re.fn.extend({css:function(t,n){return re.access(this,function(t,n,i){var s,r,o={},a=0;if(re.isArray(n)){for(s=_(t),r=n.length;r>a;a++)o[n[a]]=re.css(t,n[a],!1,s);return o}return i!==e?re.style(t,n,i):re.css(t,n)
},t,n,arguments.length>1)},show:function(){return w(this,!0)},hide:function(){return w(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){b(this)?re(this).show():re(this).hide()})}}),re.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=ze(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,n,i,s){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,l=re.camelCase(n),c=t.style;return n=re.cssProps[l]||(re.cssProps[l]=y(c,l)),a=re.cssHooks[n]||re.cssHooks[l],i===e?a&&"get"in a&&(r=a.get(t,!1,s))!==e?r:c[n]:(o=typeof i,"string"===o&&(r=Ge.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(re.css(t,n)),o="number"),null==i||"number"===o&&isNaN(i)||("number"!==o||re.cssNumber[l]||(i+="px"),re.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(c[n]="inherit"),a&&"set"in a&&(i=a.set(t,i,s))===e||(c[n]=i)),e)}},css:function(t,n,i,s){var r,o,a,l=re.camelCase(n);return n=re.cssProps[l]||(re.cssProps[l]=y(t.style,l)),a=re.cssHooks[n]||re.cssHooks[l],a&&"get"in a&&(r=a.get(t,!0,i)),r===e&&(r=ze(t,n,s)),"normal"===r&&n in Qe&&(r=Qe[n]),""===i||i?(o=parseFloat(r),i===!0||re.isNumeric(o)?o||0:r):r}}),ze=function(t,n,i){var s,r,o,a=i||_(t),l=a?a.getPropertyValue(n)||a[n]:e,c=t.style;return a&&(""!==l||re.contains(t.ownerDocument,t)||(l=re.style(t,n)),Ye.test(l)&&Ve.test(n)&&(s=c.width,r=c.minWidth,o=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=a.width,c.width=s,c.minWidth=r,c.maxWidth=o)),l},re.each(["height","width"],function(t,n){re.cssHooks[n]={get:function(t,i,s){return i?0===t.offsetWidth&&We.test(re.css(t,"display"))?re.swap(t,Ke,function(){return S(t,n,s)}):S(t,n,s):e},set:function(t,e,i){var s=i&&_(t);return x(t,e,i?k(t,n,i,re.support.boxSizing&&"border-box"===re.css(t,"boxSizing",!1,s),s):0)}}}),re(function(){re.support.reliableMarginRight||(re.cssHooks.marginRight={get:function(t,n){return n?re.swap(t,{display:"inline-block"},ze,[t,"marginRight"]):e}}),!re.support.pixelPosition&&re.fn.position&&re.each(["top","left"],function(t,n){re.cssHooks[n]={get:function(t,i){return i?(i=ze(t,n),Ye.test(i)?re(t).position()[n]+"px":i):e}}})}),re.expr&&re.expr.filters&&(re.expr.filters.hidden=function(t){return 0>=t.offsetWidth&&0>=t.offsetHeight},re.expr.filters.visible=function(t){return!re.expr.filters.hidden(t)}),re.each({margin:"",padding:"",border:"Width"},function(t,e){re.cssHooks[t+e]={expand:function(n){for(var i=0,s={},r="string"==typeof n?n.split(" "):[n];4>i;i++)s[t+Ze[i]+e]=r[i]||r[i-2]||r[0];return s}},Ve.test(t)||(re.cssHooks[t+e].set=x)});var tn=/%20/g,en=/\[\]$/,nn=/\r?\n/g,sn=/^(?:submit|button|image|reset|file)$/i,rn=/^(?:input|select|textarea|keygen)/i;re.fn.extend({serialize:function(){return re.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=re.prop(this,"elements");return t?re.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!re(this).is(":disabled")&&rn.test(this.nodeName)&&!sn.test(t)&&(this.checked||!Fe.test(t))}).map(function(t,e){var n=re(this).val();return null==n?null:re.isArray(n)?re.map(n,function(t){return{name:e.name,value:t.replace(nn,"\r\n")}}):{name:e.name,value:n.replace(nn,"\r\n")}}).get()}}),re.param=function(t,n){var i,s=[],r=function(t,e){e=re.isFunction(e)?e():null==e?"":e,s[s.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=re.ajaxSettings&&re.ajaxSettings.traditional),re.isArray(t)||t.jquery&&!re.isPlainObject(t))re.each(t,function(){r(this.name,this.value)});else for(i in t)E(i,t[i],n,r);return s.join("&").replace(tn,"+")},re.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){re.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),re.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var on,an,ln=re.now(),cn=/\?/,hn=/#.*$/,un=/([?&])_=[^&]*/,dn=/^(.*?):[ \t]*([^\r\n]*)$/gm,pn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,fn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,vn=re.fn.load,yn={},bn={},_n="*/".concat("*");try{an=W.href}catch(wn){an=V.createElement("a"),an.href="",an=an.href}on=gn.exec(an.toLowerCase())||[],re.fn.load=function(t,n,i){if("string"!=typeof t&&vn)return vn.apply(this,arguments);var s,r,o,a=this,l=t.indexOf(" ");return l>=0&&(s=t.slice(l),t=t.slice(0,l)),re.isFunction(n)?(i=n,n=e):n&&"object"==typeof n&&(r="POST"),a.length>0&&re.ajax({url:t,type:r,dataType:"html",data:n}).done(function(t){o=arguments,a.html(s?re("<div>").append(re.parseHTML(t)).find(s):t)}).complete(i&&function(t,e){a.each(i,o||[t.responseText,e,t])}),this},re.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){re.fn[e]=function(t){return this.on(e,t)}}),re.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:an,type:"GET",isLocal:pn.test(on[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_n,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":re.parseJSON,"text xml":re.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?L(L(t,re.ajaxSettings),e):L(re.ajaxSettings,t)},ajaxPrefilter:A(yn),ajaxTransport:A(bn),ajax:function(t,n){function i(t,n,i,a){var c,u,y,b,w,k=n;2!==_&&(_=2,l&&clearTimeout(l),s=e,o=a||"",x.readyState=t>0?4:0,c=t>=200&&300>t||304===t,i&&(b=D(d,x,i)),b=q(d,b,x,c),c?(d.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(re.lastModified[r]=w),w=x.getResponseHeader("etag"),w&&(re.etag[r]=w)),204===t||"HEAD"===d.type?k="nocontent":304===t?k="notmodified":(k=b.state,u=b.data,y=b.error,c=!y)):(y=k,(t||!k)&&(k="error",0>t&&(t=0))),x.status=t,x.statusText=(n||k)+"",c?m.resolveWith(p,[u,k,x]):m.rejectWith(p,[x,k,y]),x.statusCode(v),v=e,h&&f.trigger(c?"ajaxSuccess":"ajaxError",[x,d,c?u:y]),g.fireWith(p,[x,k]),h&&(f.trigger("ajaxComplete",[x,d]),--re.active||re.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=e),n=n||{};var s,r,o,a,l,c,h,u,d=re.ajaxSetup({},n),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?re(p):re.event,m=re.Deferred(),g=re.Callbacks("once memory"),v=d.statusCode||{},y={},b={},_=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!a)for(a={};e=dn.exec(o);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return _||(t=b[n]=b[n]||t,y[t]=e),this},overrideMimeType:function(t){return _||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>_)for(e in t)v[e]=[v[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return s&&s.abort(e),i(0,e),this}};if(m.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,d.url=((t||d.url||an)+"").replace(hn,"").replace(mn,on[1]+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=re.trim(d.dataType||"*").toLowerCase().match(ae)||[""],null==d.crossDomain&&(c=gn.exec(d.url.toLowerCase()),d.crossDomain=!(!c||c[1]===on[1]&&c[2]===on[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(on[3]||("http:"===on[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=re.param(d.data,d.traditional)),P(yn,d,n,x),2===_)return x;h=d.global,h&&0===re.active++&&re.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!fn.test(d.type),r=d.url,d.hasContent||(d.data&&(r=d.url+=(cn.test(r)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=un.test(r)?r.replace(un,"$1_="+ln++):r+(cn.test(r)?"&":"?")+"_="+ln++)),d.ifModified&&(re.lastModified[r]&&x.setRequestHeader("If-Modified-Since",re.lastModified[r]),re.etag[r]&&x.setRequestHeader("If-None-Match",re.etag[r])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+_n+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)x.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(p,x,d)===!1||2===_))return x.abort();w="abort";for(u in{success:1,error:1,complete:1})x[u](d[u]);if(s=P(bn,d,n,x)){x.readyState=1,h&&f.trigger("ajaxSend",[x,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},d.timeout));try{_=1,s.send(y,i)}catch(k){if(!(2>_))throw k;i(-1,k)}}else i(-1,"No Transport");return x},getJSON:function(t,e,n){return re.get(t,e,n,"json")},getScript:function(t,n){return re.get(t,e,n,"script")}}),re.each(["get","post"],function(t,n){re[n]=function(t,i,s,r){return re.isFunction(i)&&(r=r||s,s=i,i=e),re.ajax({url:t,type:n,dataType:r,data:i,success:s})}}),re.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return re.globalEval(t),t}}}),re.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),re.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,s){e=re("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&s("error"===t.type?404:200,t.type)}),V.head.appendChild(e[0])},abort:function(){n&&n()}}}});var xn=[],kn=/(=)\?(?=&|$)|\?\?/;re.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=xn.pop()||re.expando+"_"+ln++;return this[t]=!0,t}}),re.ajaxPrefilter("json jsonp",function(n,i,s){var r,o,a,l=n.jsonp!==!1&&(kn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&kn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(r=n.jsonpCallback=re.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(kn,"$1"+r):n.jsonp!==!1&&(n.url+=(cn.test(n.url)?"&":"?")+n.jsonp+"="+r),n.converters["script json"]=function(){return a||re.error(r+" was not called"),a[0]},n.dataTypes[0]="json",o=t[r],t[r]=function(){a=arguments},s.always(function(){t[r]=o,n[r]&&(n.jsonpCallback=i.jsonpCallback,xn.push(r)),a&&re.isFunction(o)&&o(a[0]),a=o=e}),"script"):e}),re.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Sn=re.ajaxSettings.xhr(),Cn={0:200,1223:204},Tn=0,En={};t.ActiveXObject&&re(t).on("unload",function(){for(var t in En)En[t]();En=e}),re.support.cors=!!Sn&&"withCredentials"in Sn,re.support.ajax=Sn=!!Sn,re.ajaxTransport(function(t){var n;return re.support.cors||Sn&&!t.crossDomain?{send:function(i,s){var r,o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)a[r]=t.xhrFields[r];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(r in i)a.setRequestHeader(r,i[r]);n=function(t){return function(){n&&(delete En[o],n=a.onload=a.onerror=null,"abort"===t?a.abort():"error"===t?s(a.status||404,a.statusText):s(Cn[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:e,a.getAllResponseHeaders()))}},a.onload=n(),a.onerror=n("error"),n=En[o=Tn++]=n("abort"),a.send(t.hasContent&&t.data||null)},abort:function(){n&&n()}}:e});var An,Pn,Ln=/^(?:toggle|show|hide)$/,Dn=RegExp("^(?:([+-])=|)("+oe+")([a-z%]*)$","i"),qn=/queueHooks$/,Nn=[O],In={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),s=Dn.exec(e),r=s&&s[3]||(re.cssNumber[t]?"":"px"),o=(re.cssNumber[t]||"px"!==r&&+i)&&Dn.exec(re.css(n.elem,t)),a=1,l=20;if(o&&o[3]!==r){r=r||o[3],s=s||[],o=+i||1;do a=a||".5",o/=a,re.style(n.elem,t,o+r);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return s&&(o=n.start=+o||+i||0,n.unit=r,n.end=s[1]?o+(s[1]+1)*s[2]:+s[2]),n}]};re.Animation=re.extend(M,{tweener:function(t,e){re.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,s=t.length;s>i;i++)n=t[i],In[n]=In[n]||[],In[n].unshift(e)},prefilter:function(t,e){e?Nn.unshift(t):Nn.push(t)}}),re.Tween=$,$.prototype={constructor:$,init:function(t,e,n,i,s,r){this.elem=t,this.prop=n,this.easing=s||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(re.cssNumber[n]?"":"px")},cur:function(){var t=$.propHooks[this.prop];return t&&t.get?t.get(this):$.propHooks._default.get(this)},run:function(t){var e,n=$.propHooks[this.prop];return this.pos=e=this.options.duration?re.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):$.propHooks._default.set(this),this}},$.prototype.init.prototype=$.prototype,$.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=re.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){re.fx.step[t.prop]?re.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[re.cssProps[t.prop]]||re.cssHooks[t.prop])?re.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},$.propHooks.scrollTop=$.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},re.each(["toggle","show","hide"],function(t,e){var n=re.fn[e];re.fn[e]=function(t,i,s){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(j(e,!0),t,i,s)}}),re.fn.extend({fadeTo:function(t,e,n,i){return this.filter(b).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var s=re.isEmptyObject(t),r=re.speed(e,n,i),o=function(){var e=M(this,re.extend({},t),r);(s||ge.get(this,"finish"))&&e.stop(!0)};return o.finish=o,s||r.queue===!1?this.each(o):this.queue(r.queue,o)},stop:function(t,n,i){var s=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",r=re.timers,o=ge.get(this);if(n)o[n]&&o[n].stop&&s(o[n]);else for(n in o)o[n]&&o[n].stop&&qn.test(n)&&s(o[n]);for(n=r.length;n--;)r[n].elem!==this||null!=t&&r[n].queue!==t||(r[n].anim.stop(i),e=!1,r.splice(n,1));(e||!i)&&re.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=ge.get(this),i=n[t+"queue"],s=n[t+"queueHooks"],r=re.timers,o=i?i.length:0;for(n.finish=!0,re.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;o>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),re.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){re.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),re.speed=function(t,e,n){var i=t&&"object"==typeof t?re.extend({},t):{complete:n||!n&&e||re.isFunction(t)&&t,duration:t,easing:n&&e||e&&!re.isFunction(e)&&e};return i.duration=re.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in re.fx.speeds?re.fx.speeds[i.duration]:re.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){re.isFunction(i.old)&&i.old.call(this),i.queue&&re.dequeue(this,i.queue)},i},re.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},re.timers=[],re.fx=$.prototype.init,re.fx.tick=function(){var t,n=re.timers,i=0;for(An=re.now();n.length>i;i++)t=n[i],t()||n[i]!==t||n.splice(i--,1);n.length||re.fx.stop(),An=e},re.fx.timer=function(t){t()&&re.timers.push(t)&&re.fx.start()},re.fx.interval=13,re.fx.start=function(){Pn||(Pn=setInterval(re.fx.tick,re.fx.interval))},re.fx.stop=function(){clearInterval(Pn),Pn=null},re.fx.speeds={slow:600,fast:200,_default:400},re.fx.step={},re.expr&&re.expr.filters&&(re.expr.filters.animated=function(t){return re.grep(re.timers,function(e){return t===e.elem}).length}),re.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){re.offset.setOffset(this,t,e)});var n,i,s=this[0],r={top:0,left:0},o=s&&s.ownerDocument;return o?(n=o.documentElement,re.contains(n,s)?(typeof s.getBoundingClientRect!==B&&(r=s.getBoundingClientRect()),i=R(o),{top:r.top+i.pageYOffset-n.clientTop,left:r.left+i.pageXOffset-n.clientLeft}):r):void 0},re.offset={setOffset:function(t,e,n){var i,s,r,o,a,l,c,h=re.css(t,"position"),u=re(t),d={};"static"===h&&(t.style.position="relative"),a=u.offset(),r=re.css(t,"top"),l=re.css(t,"left"),c=("absolute"===h||"fixed"===h)&&(r+l).indexOf("auto")>-1,c?(i=u.position(),o=i.top,s=i.left):(o=parseFloat(r)||0,s=parseFloat(l)||0),re.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(d.top=e.top-a.top+o),null!=e.left&&(d.left=e.left-a.left+s),"using"in e?e.using.call(t,d):u.css(d)}},re.fn.extend({position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===re.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),re.nodeName(t[0],"html")||(i=t.offset()),i.top+=re.css(t[0],"borderTopWidth",!0),i.left+=re.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-re.css(n,"marginTop",!0),left:e.left-i.left-re.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||U;t&&!re.nodeName(t,"html")&&"static"===re.css(t,"position");)t=t.offsetParent;return t||U})}}),re.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,i){var s="pageYOffset"===i;re.fn[n]=function(r){return re.access(this,function(n,r,o){var a=R(n);return o===e?a?a[i]:n[r]:(a?a.scrollTo(s?t.pageXOffset:o,s?o:t.pageYOffset):n[r]=o,e)},n,r,arguments.length,null)}}),re.each({Height:"height",Width:"width"},function(t,n){re.each({padding:"inner"+t,content:n,"":"outer"+t},function(i,s){re.fn[s]=function(s,r){var o=arguments.length&&(i||"boolean"!=typeof s),a=i||(s===!0||r===!0?"margin":"border");return re.access(this,function(n,i,s){var r;return re.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(r=n.documentElement,Math.max(n.body["scroll"+t],r["scroll"+t],n.body["offset"+t],r["offset"+t],r["client"+t])):s===e?re.css(n,i,a):re.style(n,i,s,a)},n,o?s:e,o,null)}})}),re.fn.size=function(){return this.length},re.fn.andSelf=re.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=re:"function"==typeof define&&define.amd&&define("jquery",[],function(){return re}),"object"==typeof t&&"object"==typeof t.document&&(t.jQuery=t.$=re)}(window),function(){var t=this,e=t._,n={},i=Array.prototype,s=Object.prototype,r=Function.prototype,o=i.push,a=i.slice,l=i.concat,c=s.toString,h=s.hasOwnProperty,u=i.forEach,d=i.map,p=i.reduce,f=i.reduceRight,m=i.filter,g=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,_=Array.isArray,w=Object.keys,x=r.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.6.0";var S=k.each=k.forEach=function(t,e,i){if(null==t)return t;if(u&&t.forEach===u)t.forEach(e,i);else if(t.length===+t.length){for(var s=0,r=t.length;r>s;s++)if(e.call(i,t[s],s,t)===n)return}else for(var o=k.keys(t),s=0,r=o.length;r>s;s++)if(e.call(i,t[o[s]],o[s],t)===n)return;return t};k.map=k.collect=function(t,e,n){var i=[];return null==t?i:d&&t.map===d?t.map(e,n):(S(t,function(t,s,r){i.push(e.call(n,t,s,r))}),i)};var C="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,n,i){var s=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return i&&(e=k.bind(e,i)),s?t.reduce(e,n):t.reduce(e);if(S(t,function(t,r,o){s?n=e.call(i,n,t,r,o):(n=t,s=!0)}),!s)throw new TypeError(C);return n},k.reduceRight=k.foldr=function(t,e,n,i){var s=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return i&&(e=k.bind(e,i)),s?t.reduceRight(e,n):t.reduceRight(e);var r=t.length;if(r!==+r){var o=k.keys(t);r=o.length}if(S(t,function(a,l,c){l=o?o[--r]:--r,s?n=e.call(i,n,t[l],l,c):(n=t[l],s=!0)}),!s)throw new TypeError(C);return n},k.find=k.detect=function(t,e,n){var i;return T(t,function(t,s,r){return e.call(n,t,s,r)?(i=t,!0):void 0}),i},k.filter=k.select=function(t,e,n){var i=[];return null==t?i:m&&t.filter===m?t.filter(e,n):(S(t,function(t,s,r){e.call(n,t,s,r)&&i.push(t)}),i)},k.reject=function(t,e,n){return k.filter(t,function(t,i,s){return!e.call(n,t,i,s)},n)},k.every=k.all=function(t,e,i){e||(e=k.identity);var s=!0;return null==t?s:g&&t.every===g?t.every(e,i):(S(t,function(t,r,o){return(s=s&&e.call(i,t,r,o))?void 0:n}),!!s)};var T=k.some=k.any=function(t,e,i){e||(e=k.identity);var s=!1;return null==t?s:v&&t.some===v?t.some(e,i):(S(t,function(t,r,o){return s||(s=e.call(i,t,r,o))?n:void 0}),!!s)};k.contains=k.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):T(t,function(t){return t===e})},k.invoke=function(t,e){var n=a.call(arguments,2),i=k.isFunction(e);return k.map(t,function(t){return(i?e:t[e]).apply(t,n)})},k.pluck=function(t,e){return k.map(t,k.property(e))},k.where=function(t,e){return k.filter(t,k.matches(e))},k.findWhere=function(t,e){return k.find(t,k.matches(e))},k.max=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var i=-1/0,s=-1/0;return S(t,function(t,r,o){var a=e?e.call(n,t,r,o):t;a>s&&(i=t,s=a)}),i},k.min=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var i=1/0,s=1/0;return S(t,function(t,r,o){var a=e?e.call(n,t,r,o):t;s>a&&(i=t,s=a)}),i},k.shuffle=function(t){var e,n=0,i=[];return S(t,function(t){e=k.random(n++),i[n-1]=i[e],i[e]=t}),i},k.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=k.values(t)),t[k.random(t.length-1)]):k.shuffle(t).slice(0,Math.max(0,e))};var E=function(t){return null==t?k.identity:k.isFunction(t)?t:k.property(t)};k.sortBy=function(t,e,n){return e=E(e),k.pluck(k.map(t,function(t,i,s){return{value:t,index:i,criteria:e.call(n,t,i,s)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var A=function(t){return function(e,n,i){var s={};return n=E(n),S(e,function(r,o){var a=n.call(i,r,o,e);t(s,a,r)}),s}};k.groupBy=A(function(t,e,n){k.has(t,e)?t[e].push(n):t[e]=[n]}),k.indexBy=A(function(t,e,n){t[e]=n}),k.countBy=A(function(t,e){k.has(t,e)?t[e]++:t[e]=1}),k.sortedIndex=function(t,e,n,i){n=E(n);for(var s=n.call(i,e),r=0,o=t.length;o>r;){var a=r+o>>>1;n.call(i,t[a])<s?r=a+1:o=a}return r},k.toArray=function(t){return t?k.isArray(t)?a.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:a.call(t,0,e)},k.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},k.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var P=function(t,e,n){return e&&k.every(t,k.isArray)?l.apply(n,t):(S(t,function(t){k.isArray(t)||k.isArguments(t)?e?o.apply(n,t):P(t,e,n):n.push(t)}),n)};k.flatten=function(t,e){return P(t,e,[])},k.without=function(t){return k.difference(t,a.call(arguments,1))},k.partition=function(t,e){var n=[],i=[];return S(t,function(t){(e(t)?n:i).push(t)}),[n,i]},k.uniq=k.unique=function(t,e,n,i){k.isFunction(e)&&(i=n,n=e,e=!1);var s=n?k.map(t,n,i):t,r=[],o=[];return S(s,function(n,i){(e?i&&o[o.length-1]===n:k.contains(o,n))||(o.push(n),r.push(t[i]))}),r},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(t){var e=a.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.contains(e,t)})})},k.difference=function(t){var e=l.apply(i,a.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=k.max(k.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=k.pluck(arguments,""+n);return e},k.object=function(t,e){if(null==t)return{};for(var n={},i=0,s=t.length;s>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},k.indexOf=function(t,e,n){if(null==t)return-1;var i=0,s=t.length;if(n){if("number"!=typeof n)return i=k.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,s+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;s>i;i++)if(t[i]===e)return i;return-1},k.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(b&&t.lastIndexOf===b)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var s=i?n:t.length;s--;)if(t[s]===e)return s;return-1},k.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),s=0,r=new Array(i);i>s;)r[s++]=t,t+=n;return r};var L=function(){};k.bind=function(t,e){var n,i;if(x&&t.bind===x)return x.apply(t,a.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return n=a.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(a.call(arguments)));L.prototype=t.prototype;var s=new L;L.prototype=null;var r=t.apply(s,n.concat(a.call(arguments)));return Object(r)===r?r:s}},k.partial=function(t){var e=a.call(arguments,1);return function(){for(var n=0,i=e.slice(),s=0,r=i.length;r>s;s++)i[s]===k&&(i[s]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},k.bindAll=function(t){var e=a.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return S(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var n={};return e||(e=k.identity),function(){var i=e.apply(this,arguments);return k.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},k.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(a.call(arguments,1)))},k.throttle=function(t,e,n){var i,s,r,o=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:k.now(),o=null,r=t.apply(i,s),i=s=null};return function(){var c=k.now();a||n.leading!==!1||(a=c);var h=e-(c-a);return i=this,s=arguments,0>=h?(clearTimeout(o),o=null,a=c,r=t.apply(i,s),i=s=null):o||n.trailing===!1||(o=setTimeout(l,h)),r}},k.debounce=function(t,e,n){var i,s,r,o,a,l=function(){var c=k.now()-o;e>c?i=setTimeout(l,e-c):(i=null,n||(a=t.apply(r,s),r=s=null))};return function(){r=this,s=arguments,o=k.now();var c=n&&!i;return i||(i=setTimeout(l,e)),c&&(a=t.apply(r,s),r=s=null),a}},k.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return k.partial(e,t)},k.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},k.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},k.keys=function(t){if(!k.isObject(t))return[];if(w)return w(t);var e=[];for(var n in t)k.has(t,n)&&e.push(n);return e},k.values=function(t){for(var e=k.keys(t),n=e.length,i=new Array(n),s=0;n>s;s++)i[s]=t[e[s]];return i},k.pairs=function(t){for(var e=k.keys(t),n=e.length,i=new Array(n),s=0;n>s;s++)i[s]=[e[s],t[e[s]]];return i},k.invert=function(t){for(var e={},n=k.keys(t),i=0,s=n.length;s>i;i++)e[t[n[i]]]=n[i];return e},k.functions=k.methods=function(t){var e=[];for(var n in t)k.isFunction(t[n])&&e.push(n);return e.sort()},k.extend=function(t){return S(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},k.pick=function(t){var e={},n=l.apply(i,a.call(arguments,1));return S(n,function(n){n in t&&(e[n]=t[n])}),e},k.omit=function(t){var e={},n=l.apply(i,a.call(arguments,1));for(var s in t)k.contains(n,s)||(e[s]=t[s]);return e},k.defaults=function(t){return S(a.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var D=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var s=c.call(t);if(s!=c.call(e))return!1;switch(s){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var r=n.length;r--;)if(n[r]==t)return i[r]==e;var o=t.constructor,a=e.constructor;if(o!==a&&!(k.isFunction(o)&&o instanceof o&&k.isFunction(a)&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),i.push(e);var l=0,h=!0;if("[object Array]"==s){if(l=t.length,h=l==e.length)for(;l--&&(h=D(t[l],e[l],n,i)););}else{for(var u in t)if(k.has(t,u)&&(l++,!(h=k.has(e,u)&&D(t[u],e[u],n,i))))break;if(h){for(u in e)if(k.has(e,u)&&!l--)break;h=!l}}return n.pop(),i.pop(),h};k.isEqual=function(t,e){return D(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=_||function(t){return"[object Array]"==c.call(t)},k.isObject=function(t){return t===Object(t)},S(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return h.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.constant=function(t){return function(){return t}},k.property=function(t){return function(e){return e[t]}},k.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},k.times=function(t,e,n){for(var i=Array(Math.max(0,t)),s=0;t>s;s++)i[s]=e.call(n,s);return i},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},k.now=Date.now||function(){return(new Date).getTime()};var q={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};q.unescape=k.invert(q.escape);var N={escape:new RegExp("["+k.keys(q.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(q.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(N[t],function(e){return q[t][e]})}}),k.result=function(t,e){if(null==t)return void 0;var n=t[e];return k.isFunction(n)?n.call(t):n},k.mixin=function(t){S(k.functions(t),function(e){var n=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),$.call(this,n.apply(k,t))}})};var I=0;k.uniqueId=function(t){var e=++I+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\t|\u2028|\u2029/g;
k.template=function(t,e,n){var i;n=k.defaults({},n,k.templateSettings);var s=new RegExp([(n.escape||M).source,(n.interpolate||M).source,(n.evaluate||M).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(s,function(e,n,i,s,a){return o+=t.slice(r,a).replace(O,function(t){return"\\"+F[t]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),s&&(o+="';\n"+s+"\n__p+='"),r=a+e.length,e}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=new Function(n.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(e)return i(e,k);var l=function(t){return i.call(this,t,k)};return l.source="function("+(n.variable||"obj")+"){\n"+o+"}",l},k.chain=function(t){return k(t).chain()};var $=function(t){return this._chain?k(t).chain():t};k.mixin(k),S(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];k.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],$.call(this,n)}}),S(["concat","join","slice"],function(t){var e=i[t];k.prototype[t]=function(){return $.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return k})}.call(this),function(t,e){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,i,s){t.Backbone=e(t,s,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");e(t,exports,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,n,i){{var s=t.Backbone,r=[],o=(r.push,r.slice);r.splice}e.VERSION="1.1.2",e.$=i,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,i){if(!c(this,"once",t,[e,i])||!e)return this;var s=this,r=n.once(function(){s.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,i)},off:function(t,e,i){var s,r,o,a,l,h,u,d;if(!this._events||!c(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events=void 0,this;for(a=t?[t]:n.keys(this._events),l=0,h=a.length;h>l;l++)if(t=a[l],o=this._events[t]){if(this._events[t]=s=[],e||i)for(u=0,d=o.length;d>u;u++)r=o[u],(e&&e!==r.callback&&e!==r.callback._callback||i&&i!==r.context)&&s.push(r);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=o.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&h(n,e),i&&h(i,arguments),this},stopListening:function(t,e,i){var s=this._listeningTo;if(!s)return this;var r=!e&&!i;i||"object"!=typeof e||(i=this),t&&((s={})[t._listenId]=t);for(var o in s)t=s[o],t.off(e,i,this),(r||n.isEmpty(t._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var s in n)t[e].apply(t,[s,n[s]].concat(i));return!1}if(l.test(n)){for(var r=n.split(l),o=0,a=r.length;a>o;o++)t[e].apply(t,[r[o]].concat(i));return!1}return!0},h=function(t,e){var n,i=-1,s=t.length,r=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++i<s;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r);return;case 2:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r,o);return;case 3:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r,o,a);return;default:for(;++i<s;)(n=t[i]).callback.apply(n.ctx,e);return}},u={listenTo:"on",listenToOnce:"once"};n.each(u,function(t,e){a[e]=function(e,i,s){var r=this._listeningTo||(this._listeningTo={}),o=e._listenId||(e._listenId=n.uniqueId("l"));return r[o]=e,s||"object"!=typeof i||(s=this),e[t](i,s,this),this}}),a.bind=a.on,a.unbind=a.off,n.extend(e,a);var d=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var s,r,o,a,l,c,h,u;if(null==t)return this;if("object"==typeof t?(r=t,i=e):(r={})[t]=e,i||(i={}),!this._validate(r,i))return!1;o=i.unset,l=i.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),u=this.attributes,h=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(s in r)e=r[s],n.isEqual(u[s],e)||a.push(s),n.isEqual(h[s],e)?delete this.changed[s]:this.changed[s]=e,o?delete u[s]:u[s]=e;if(!l){a.length&&(this._pending=i);for(var d=0,p=a.length;p>d;d++)this.trigger("change:"+a[d],this,u[a[d]],i)}if(c)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e,i=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in t)n.isEqual(s[r],e=t[r])||((i||(i={}))[r]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(i&&i(e,n,t),void e.trigger("sync",e,n,t)):!1},O(this,t),this.sync("read",this,t)},save:function(t,e,i){var s,r,o,a=this.attributes;if(null==t||"object"==typeof t?(s=t,i=e):(s={})[t]=e,i=n.extend({validate:!0},i),s&&!i.wait){if(!this.set(s,i))return!1}else if(!this._validate(s,i))return!1;s&&i.wait&&(this.attributes=n.extend({},a,s)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;return i.success=function(t){l.attributes=a;var e=l.parse(t,i);return i.wait&&(e=n.extend(s||{},e)),n.isObject(e)&&!l.set(e,i)?!1:(c&&c(l,t,i),void l.trigger("sync",l,t,i))},O(this,i),r=this.isNew()?"create":i.patch?"patch":"update","patch"===r&&(i.attrs=s),o=this.sync(r,this,i),s&&i.wait&&(this.attributes=a),o},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&s(),i&&i(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;O(this,t);var r=this.sync("delete",this,t);return t.wait||s(),r},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];n.each(p,function(t){d.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(f.prototype,a,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,g))},remove:function(t,e){var i=!n.isArray(t);t=i?[t]:n.clone(t),e||(e={});var s,r,o,a;for(s=0,r=t.length;r>s;s++)a=t[s]=this.get(t[s]),a&&(delete this._byId[a.id],delete this._byId[a.cid],o=this.indexOf(a),this.models.splice(o,1),this.length--,e.silent||(e.index=o,a.trigger("remove",a,this,e)),this._removeReference(a,e));return i?t[0]:t},set:function(t,e){e=n.defaults({},e,m),e.parse&&(t=this.parse(t,e));var i=!n.isArray(t);t=i?t?[t]:[]:n.clone(t);var s,r,o,a,l,c,h,u=e.at,p=this.model,f=this.comparator&&null==u&&e.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},_=e.add,w=e.merge,x=e.remove,k=!f&&_&&x?[]:!1;for(s=0,r=t.length;r>s;s++){if(l=t[s]||{},o=l instanceof d?a=l:l[p.prototype.idAttribute||"id"],c=this.get(o))x&&(b[c.cid]=!0),w&&(l=l===a?a.attributes:l,e.parse&&(l=c.parse(l,e)),c.set(l,e),f&&!h&&c.hasChanged(g)&&(h=!0)),t[s]=c;else if(_){if(a=t[s]=this._prepareModel(l,e),!a)continue;v.push(a),this._addReference(a,e)}a=c||a,!k||!a.isNew()&&b[a.id]||k.push(a),b[a.id]=!0}if(x){for(s=0,r=this.length;r>s;++s)b[(a=this.models[s]).cid]||y.push(a);y.length&&this.remove(y,e)}if(v.length||k&&k.length)if(f&&(h=!0),this.length+=v.length,null!=u)for(s=0,r=v.length;r>s;s++)this.models.splice(u+s,0,v[s]);else{k&&(this.models.length=0);var S=k||v;for(s=0,r=S.length;r>s;s++)this.models.push(S[s])}if(h&&this.sort({silent:!0}),!e.silent){for(s=0,r=v.length;r>s;s++)(a=v[s]).trigger("add",a,this,e);(h||k&&k.length)&&this.trigger("sort",this,e)}return i?t[0]:t},reset:function(t,e){e||(e={});for(var i=0,s=this.models.length;s>i;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return o.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(n){var s=t.reset?"reset":"set";i[s](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)},O(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,s=e.success;return e.success=function(t,n){e.wait&&i.add(t,e),s&&s(t,n,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_addReference:function(t){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(v,function(t){f.prototype[t]=function(){var e=o.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}});var y=["groupBy","countBy","sortBy","indexBy"];n.each(y,function(t){f.prototype[t]=function(e,i){var s=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,s,i)}});var b=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[t[e]]),i){var s=e.match(_),r=s[1],o=s[2];i=n.bind(i,this),r+=".delegateEvents"+this.cid,""===o?this.$el.on(r,i):this.$el.on(r,o,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className"));var i=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(i,!1)}}}),e.sync=function(t,i,s){var r=k[t];n.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:r,dataType:"json"};if(s.url||(o.url=n.result(i,"url")||F()),null!=s.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(s.attrs||i.toJSON(s))),s.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",s.emulateJSON&&(o.data._method=r);var a=s.beforeSend;s.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),a?a.apply(this,arguments):void 0}}"GET"===o.type||s.emulateJSON||(o.processData=!1),"PATCH"===o.type&&x&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=s.xhr=e.ajax(n.extend(o,s));return i.trigger("request",i,l,s),l};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var S=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,E=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(S.prototype,a,{initialize:function(){},route:function(t,i,s){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(s=i,i=""),s||(s=this[i]);var r=this;return e.history.route(t,function(n){var o=r._extractParameters(t,n);r.execute(s,o),r.trigger.apply(r,["route:"+i].concat(o)),r.trigger("route",i,o),e.history.trigger("route",r,i,o)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(A,"\\$&").replace(C,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/?]+)"}).replace(E,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var P=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},L=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,q=/msie [\w.]+/,N=/\/$/,I=/#.*$/;P.started=!1,n.extend(P.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(N,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(L,"")},start:function(t){if(P.started)throw new Error("Backbone.history has already been started");P.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),s=document.documentMode,r=q.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);if(this.root=("/"+this.root+"/").replace(D,"/"),r&&this._wantsHashChange){var o=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(L,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),P.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!P.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(I,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new P;var M=function(t,e){var i,s=this;i=t&&n.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},n.extend(i,s,e);var r=function(){this.constructor=i};return r.prototype=s.prototype,i.prototype=new r,t&&n.extend(i.prototype,t),i.__super__=s.prototype,i};d.extend=f.extend=S.extend=b.extend=P.extend=M;var F=function(){throw new Error('A "url" property or function must be specified')},O=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}};return e}),define("context",["underscore","backbone"],function(t,e){var n=function(){var n={};return t.extend(n,e.Events),n};return n()}),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n,i=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),n=t("meta[name=csrf-param]").attr("content");t('form input[name="'+n+'"]').val(e)},fire:function(e,n,i){var s=t.Event(n);return e.trigger(s,i),s.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(i){var s,r,o,a,l,c,h,u;if(n.fire(i,"ajax:before")){if(a=i.data("cross-domain"),l=a===e?null:a,c=i.data("with-credentials")||null,h=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){s=i.attr("method"),r=i.attr("action"),o=i.serializeArray();var d=i.data("ujs:submit-button");d&&(o.push(d),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(s=i.data("method"),r=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(s=i.data("method")||"get",r=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):(s=i.data("method"),r=n.href(i),o=i.data("params")||null);return u={type:s||"GET",data:o,dataType:h,beforeSend:function(t,s){return s.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+s.accepts.script),n.fire(i,"ajax:beforeSend",[t,s])?void i.trigger("ajax:send",t):!1},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:l},c&&(u.xhrFields={withCredentials:c}),r&&(u.url=r),n.ajax(u)}return!1},handleMethod:function(i){var s=n.href(i),r=i.data("method"),o=i.attr("target"),a=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),c=t('<form method="post" action="'+s+'"></form>'),h='<input name="_method" value="'+r+'" type="hidden" />';l!==e&&a!==e&&(h+='<input name="'+l+'" value="'+a+'" type="hidden" />'),o&&c.attr("target",o),c.hide().append(h).appendTo("body"),c.submit()},formElements:function(e,n){return e.is("form")?t(e[0].elements).filter(n):e.find(n)},disableFormElements:function(e){n.formElements(e,n.disableSelector).each(function(){n.disableFormElement(t(this))})},disableFormElement:function(t){var n,i;n=t.is("button")?"html":"val",i=t.data("disable-with"),t.data("ujs:enable-with",t[n]()),i!==e&&t[n](i),t.prop("disabled",!0)},enableFormElements:function(e){n.formElements(e,n.enableSelector).each(function(){n.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,i=t.data("confirm"),s=!1;return i?(n.fire(t,"confirm")&&(s=n.confirm(i),e=n.fire(t,"confirm:complete",[s])),s&&e):!0},blankInputs:function(e,n,i){var s,r,o=t(),a=n||"input,textarea",l=e.find(a);return l.each(function(){if(s=t(this),r=s.is("input[type=checkbox],input[type=radio]")?s.is(":checked"):s.val(),!r==!i){if(s.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+s.attr("name")+'"]').length)return!0;o=o.add(s)}}),o.length?o:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var i=t.data("disable-with");t.data("ujs:enable-with",t.html()),i!==e&&t.html(i),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),i.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(t(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var s=t(this),r=s.data("method"),o=s.data("params"),a=i.metaKey||i.ctrlKey;if(!n.allowAction(s))return n.stopEverything(i);if(!a&&s.is(n.linkDisableSelector)&&n.disableElement(s),s.data("remote")!==e){if(a&&(!r||"GET"===r)&&!o)return!0;var l=n.handleRemote(s);return l===!1?n.enableElement(s):l.error(function(){n.enableElement(s)}),!1}return s.data("method")?(n.handleMethod(s),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var s=n.handleRemote(i);return s===!1?n.enableFormElement(i):s.error(function(){n.enableFormElement(i)}),!1}),i.delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var s,r,o=t(this),a=o.data("remote")!==e;if(!n.allowAction(o))return n.stopEverything(i);if(o.attr("novalidate")==e&&(s=n.blankInputs(o,n.requiredInputSelector),s&&n.fire(o,"ajax:aborted:required",[s])))return n.stopEverything(i);if(a){if(r=n.nonBlankInputs(o,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(o)},13);var l=n.fire(o,"ajax:aborted:file",[r]);return l||setTimeout(function(){n.enableFormElements(o)},13),l}return n.handleRemote(o),!1}setTimeout(function(){n.disableFormElements(o)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var s=i.attr("name"),r=s?{name:s,value:i.val()}:null;i.closest("form").data("ujs:submit-button",r)}),i.delegate(n.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){n.refreshCSRFTokens()}))}(jQuery),define("jquery_ujs",function(){});var Handlebars=function(){var t=function(){function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){function e(t){return a[t]||"&amp;"}function n(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}function i(t){return t instanceof o?t.toString():t||0===t?(t=""+t,c.test(t)?t.replace(l,e):t):""}function s(t){return t||0===t?d(t)&&0===t.length?!0:!1:!0}var r={},o=t,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,c=/[&<>"'`]/;r.extend=n;var h=Object.prototype.toString;r.toString=h;var u=function(t){return"function"==typeof t};u(/x/)&&(u=function(t){return"function"==typeof t&&"[object Function]"===h.call(t)});var u;r.isFunction=u;var d=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===h.call(t):!1};return r.isArray=d,r.escapeExpression=i,r.isEmpty=s,r}(t),n=function(){function t(t,e){var i;e&&e.firstLine&&(i=e.firstLine,t+=" - "+i+":"+e.firstColumn);for(var s=Error.prototype.constructor.call(this,t),r=0;r<n.length;r++)this[n[r]]=s[n[r]];i&&(this.lineNumber=i,this.column=e.firstColumn)}var e,n=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),i=function(t,e){function n(t,e){this.helpers=t||{},this.partials=e||{},i(this)}function i(t){t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw new a("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse||function(){},s=n.fn;return d(e)&&(e=e.call(this)),e===!0?s(this):e===!1||null==e?i(this):u(e)?e.length>0?t.helpers.each(e,n):i(this):s(e)}),t.registerHelper("each",function(t,e){var n,i=e.fn,s=e.inverse,r=0,o="";if(d(t)&&(t=t.call(this)),e.data&&(n=g(e.data)),t&&"object"==typeof t)if(u(t))for(var a=t.length;a>r;r++)n&&(n.index=r,n.first=0===r,n.last=r===t.length-1),o+=i(t[r],{data:n});else for(var l in t)t.hasOwnProperty(l)&&(n&&(n.key=l,n.index=r,n.first=0===r),o+=i(t[l],{data:n}),r++);return 0===r&&(o=s(this)),o}),t.registerHelper("if",function(t,e){return d(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||o.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){return d(t)&&(t=t.call(this)),o.isEmpty(t)?void 0:e.fn(t)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)})}function s(t,e){m.log(t,e)}var r={},o=t,a=e,l="1.3.0";r.VERSION=l;var c=4;r.COMPILER_REVISION=c;var h={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};r.REVISION_CHANGES=h;var u=o.isArray,d=o.isFunction,p=o.toString,f="[object Object]";r.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:m,log:s,registerHelper:function(t,e,n){if(p.call(t)===f){if(n||e)throw new a("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else n&&(e.not=n),this.helpers[t]=e},registerPartial:function(t,e){p.call(t)===f?o.extend(this.partials,t):this.partials[t]=e}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(m.level<=t){var n=m.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};r.logger=m,r.log=s;var g=function(t){var e={};return o.extend(e,t),e};return r.createFrame=g,r}(e,n),s=function(t,e,n){function i(t){var e=t&&t[0]||1,n=d;if(e!==n){if(n>e){var i=p[n],s=p[e];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+s+").")}throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")
}}function s(t,e){if(!e)throw new u("No environment passed to template");var n=function(t,n,i,s,r,o){var a=e.VM.invokePartial.apply(this,arguments);if(null!=a)return a;if(e.compile){var l={helpers:s,partials:r,data:o};return r[n]=e.compile(t,{data:void 0!==o},e),r[n](i,l)}throw new u("The partial "+n+" could not be compiled when running in runtime-only mode")},i={escapeExpression:h.escapeExpression,invokePartial:n,programs:[],program:function(t,e,n){var i=this.programs[t];return n?i=o(t,e,n):i||(i=this.programs[t]=o(t,e)),i},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n={},h.extend(n,e),h.extend(n,t)),n},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(n,s){s=s||{};var r,o,a=s.partial?s:e;s.partial||(r=s.helpers,o=s.partials);var l=t.call(i,a,n,r,o,s.data);return s.partial||e.VM.checkRevision(i.compilerInfo),l}}function r(t,e,n){var i=Array.prototype.slice.call(arguments,3),s=function(t,s){return s=s||{},e.apply(this,[t,s.data||n].concat(i))};return s.program=t,s.depth=i.length,s}function o(t,e,n){var i=function(t,i){return i=i||{},e(t,i.data||n)};return i.program=t,i.depth=0,i}function a(t,e,n,i,s,r){var o={partial:!0,helpers:i,partials:s,data:r};if(void 0===t)throw new u("The partial "+e+" could not be found");return t instanceof Function?t(n,o):void 0}function l(){return""}var c={},h=t,u=e,d=n.COMPILER_REVISION,p=n.REVISION_CHANGES;return c.checkRevision=i,c.template=s,c.programWithDepth=r,c.program=o,c.invokePartial=a,c.noop=l,c}(e,n,i),r=function(t,e,n,i,s){var r,o=t,a=e,l=n,c=i,h=s,u=function(){var t=new o.HandlebarsEnvironment;return c.extend(t,o),t.SafeString=a,t.Exception=l,t.Utils=c,t.VM=h,t.template=function(e){return h.template(e,t)},t},d=u();return d.create=u,r=d}(i,t,n,e,s),o=function(t){function e(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var n,i=t,s={ProgramNode:function(t,n,i,r){var o,a;3===arguments.length?(r=i,i=null):2===arguments.length&&(r=n,n=null),e.call(this,r),this.type="program",this.statements=t,this.strip={},i?(a=i[0],a?(o={first_line:a.firstLine,last_line:a.lastLine,last_column:a.lastColumn,first_column:a.firstColumn},this.inverse=new s.ProgramNode(i,n,o)):this.inverse=new s.ProgramNode(i,n),this.strip.right=n.left):n&&(this.strip.left=n.right)},MustacheNode:function(t,n,i,r,o){if(e.call(this,o),this.type="mustache",this.strip=r,null!=i&&i.charAt){var a=i.charAt(3)||i.charAt(2);this.escaped="{"!==a&&"&"!==a}else this.escaped=!!i;this.sexpr=t instanceof s.SexprNode?t:new s.SexprNode(t,n),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(t,n,i){e.call(this,i),this.type="sexpr",this.hash=n;var s=this.id=t[0],r=this.params=t.slice(1),o=this.eligibleHelper=s.isSimple;this.isHelper=o&&(r.length||n)},PartialNode:function(t,n,i,s){e.call(this,s),this.type="partial",this.partialName=t,this.context=n,this.strip=i},BlockNode:function(t,n,s,r,o){if(e.call(this,o),t.sexpr.id.original!==r.path.original)throw new i(t.sexpr.id.original+" doesn't match "+r.path.original,this);this.type="block",this.mustache=t,this.program=n,this.inverse=s,this.strip={left:t.strip.left,right:r.strip.right},(n||s).strip.left=t.strip.right,(s||n).strip.right=r.strip.left,s&&!n&&(this.isInverse=!0)},ContentNode:function(t,n){e.call(this,n),this.type="content",this.string=t},HashNode:function(t,n){e.call(this,n),this.type="hash",this.pairs=t},IdNode:function(t,n){e.call(this,n),this.type="ID";for(var s="",r=[],o=0,a=0,l=t.length;l>a;a++){var c=t[a].part;if(s+=(t[a].separator||"")+c,".."===c||"."===c||"this"===c){if(r.length>0)throw new i("Invalid path: "+s,this);".."===c?o++:this.isScoped=!0}else r.push(c)}this.original=s,this.parts=r,this.string=r.join("."),this.depth=o,this.isSimple=1===t.length&&!this.isScoped&&0===o,this.stringModeValue=this.string},PartialNameNode:function(t,n){e.call(this,n),this.type="PARTIAL_NAME",this.name=t.original},DataNode:function(t,n){e.call(this,n),this.type="DATA",this.id=t},StringNode:function(t,n){e.call(this,n),this.type="STRING",this.original=this.string=this.stringModeValue=t},IntegerNode:function(t,n){e.call(this,n),this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)},BooleanNode:function(t,n){e.call(this,n),this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},CommentNode:function(t,n){e.call(this,n),this.type="comment",this.comment=t}};return n=s}(n),a=function(){var t,e=function(){function t(t,e){return{left:"~"===t.charAt(2),right:"~"===e.charAt(0)||"~"===e.charAt(1)}}function e(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(e,n,i,s,r,o){var a=o.length-1;switch(r){case 1:return new s.ProgramNode(o[a-1],this._$);case 2:return new s.ProgramNode([],this._$);case 3:this.$=new s.ProgramNode([],o[a-1],o[a],this._$);break;case 4:this.$=new s.ProgramNode(o[a-2],o[a-1],o[a],this._$);break;case 5:this.$=new s.ProgramNode(o[a-1],o[a],[],this._$);break;case 6:this.$=new s.ProgramNode(o[a],this._$);break;case 7:this.$=new s.ProgramNode([],this._$);break;case 8:this.$=new s.ProgramNode([],this._$);break;case 9:this.$=[o[a]];break;case 10:o[a-1].push(o[a]),this.$=o[a-1];break;case 11:this.$=new s.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a],this._$);break;case 12:this.$=new s.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a],this._$);break;case 13:this.$=o[a];break;case 14:this.$=o[a];break;case 15:this.$=new s.ContentNode(o[a],this._$);break;case 16:this.$=new s.CommentNode(o[a],this._$);break;case 17:this.$=new s.MustacheNode(o[a-1],null,o[a-2],t(o[a-2],o[a]),this._$);break;case 18:this.$=new s.MustacheNode(o[a-1],null,o[a-2],t(o[a-2],o[a]),this._$);break;case 19:this.$={path:o[a-1],strip:t(o[a-2],o[a])};break;case 20:this.$=new s.MustacheNode(o[a-1],null,o[a-2],t(o[a-2],o[a]),this._$);break;case 21:this.$=new s.MustacheNode(o[a-1],null,o[a-2],t(o[a-2],o[a]),this._$);break;case 22:this.$=new s.PartialNode(o[a-2],o[a-1],t(o[a-3],o[a]),this._$);break;case 23:this.$=t(o[a-1],o[a]);break;case 24:this.$=new s.SexprNode([o[a-2]].concat(o[a-1]),o[a],this._$);break;case 25:this.$=new s.SexprNode([o[a]],null,this._$);break;case 26:this.$=o[a];break;case 27:this.$=new s.StringNode(o[a],this._$);break;case 28:this.$=new s.IntegerNode(o[a],this._$);break;case 29:this.$=new s.BooleanNode(o[a],this._$);break;case 30:this.$=o[a];break;case 31:o[a-1].isHelper=!0,this.$=o[a-1];break;case 32:this.$=new s.HashNode(o[a],this._$);break;case 33:this.$=[o[a-2],o[a]];break;case 34:this.$=new s.PartialNameNode(o[a],this._$);break;case 35:this.$=new s.PartialNameNode(new s.StringNode(o[a],this._$),this._$);break;case 36:this.$=new s.PartialNameNode(new s.IntegerNode(o[a],this._$));break;case 37:this.$=new s.DataNode(o[a],this._$);break;case 38:this.$=new s.IdNode(o[a],this._$);break;case 39:o[a-2].push({part:o[a],separator:o[a-1]}),this.$=o[a-2];break;case 40:this.$=[{part:o[a]}];break;case 43:this.$=[];break;case 44:o[a-1].push(o[a]);break;case 47:this.$=[o[a]];break;case 48:o[a-1].push(o[a])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(t){throw new Error(t)},parse:function(t){function e(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,i=[0],s=[null],r=[],o=this.table,a="",l=0,c=0,h=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;r.push(u);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,v,y,b,_,w,x={};;){if(m=i[i.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===p||"undefined"==typeof p)&&(p=e()),g=o[m]&&o[m][p]),"undefined"==typeof g||!g.length||!g[0]){var k="";if(!h){w=[];for(y in o[m])this.terminals_[y]&&y>2&&w.push("'"+this.terminals_[y]+"'");k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:u,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:i.push(p),s.push(this.lexer.yytext),r.push(this.lexer.yylloc),i.push(g[1]),p=null,f?(p=f,f=null):(c=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,u=this.lexer.yylloc,h>0&&h--);break;case 2:if(b=this.productions_[g[1]][1],x.$=s[s.length-b],x._$={first_line:r[r.length-(b||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(b||1)].first_column,last_column:r[r.length-1].last_column},d&&(x._$.range=[r[r.length-(b||1)].range[0],r[r.length-1].range[1]]),v=this.performAction.call(x,a,c,l,this.yy,g[1],s,r),"undefined"!=typeof v)return v;b&&(i=i.slice(0,-1*b*2),s=s.slice(0,-1*b),r=r.slice(0,-1*b)),i.push(this.productions_[g[1]][0]),s.push(x.$),r.push(x._$),_=o[i[i.length-2]][i[i.length-1]],i.push(_);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i,s;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length&&(n=this._input.match(this.rules[r[o]]),!n||e&&!(n[0].length>e[0].length)||(e=n,i=o,this.options.flex));o++);return e?(s=e[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,r[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n){function i(t,n){return e.yytext=e.yytext.substr(t,e.yyleng-n)}switch(n){case 0:if("\\\\"===e.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return i(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return i(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return e.yytext=i(1,2).replace(/\\"/g,'"'),32;case 24:return e.yytext=i(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return e.yytext=i(1,2),40;case 31:return"INVALID";case 32:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},t}();return n.lexer=i,e.prototype=n,n.Parser=e,new e}();return t=e}(),l=function(t,e){function n(t){return t.constructor===r.ProgramNode?t:(s.yy=r,s.parse(t))}var i={},s=t,r=e;return i.parser=s,i.parse=n,i}(a,o),c=function(t){function e(){}function n(t,e,n){if(null==t||"string"!=typeof t&&t.constructor!==n.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var i=n.parse(t),s=(new n.Compiler).compile(i,e);return(new n.JavaScriptCompiler).compile(s,e)}function i(t,e,n){function i(){var i=n.parse(t),s=(new n.Compiler).compile(i,e),r=(new n.JavaScriptCompiler).compile(s,e,void 0,!0);return n.template(r)}if(null==t||"string"!=typeof t&&t.constructor!==n.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var s;return function(t,e){return s||(s=i()),s.call(this,t,e)}}var s={},r=t;return s.Compiler=e,e.prototype={compiler:e,disassemble:function(){for(var t,e,n,i=this.opcodes,s=[],r=0,o=i.length;o>r;r++)if(t=i[r],"DECLARE"===t.opcode)s.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var a=0;a<t.args.length;a++)n=t.args[a],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),e.push(n);s.push(t.opcode+" "+e.join(" "))}return s.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;e>n;n++){var i=this.opcodes[n],s=t.opcodes[n];if(i.opcode!==s.opcode||i.args.length!==s.args.length)return!1;for(var r=0;r<i.args.length;r++)if(i.args[r]!==s.args[r])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(n=0;e>n;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.accept(t)},accept:function(t){var e,n=t.strip||{};return n.left&&this.opcode("strip"),e=this[t.type](t),n.right&&this.opcode("strip"),e},program:function(t){for(var e=t.statements,n=0,i=e.length;i>n;n++)this.accept(e[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,n=(new this.compiler).compile(t,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var s=0,r=n.depths.list.length;r>s;s++)e=n.depths.list[s],2>e||this.addDepth(e-1);return i},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var s=e.sexpr,r=this.classifySexpr(s);"helper"===r?this.helperSexpr(s,n,i):"simple"===r?(this.simpleSexpr(s),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(s,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,n,i=t.pairs;this.opcode("pushHash");for(var s=0,r=i.length;r>s;s++)e=i[s],n=e[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type),"sexpr"===n.type&&this.sexpr(n)):this.accept(n),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),this.opcode(t.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(t,e,n){var i=t.id,s=i.parts[0],r=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",s,r)},simpleSexpr:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),s=t.id.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",i.length,s);else{if(this.options.knownHelpersOnly)throw new r("You specified knownHelpersOnly, but used the unknown helper "+s,t);this.opcode("invokeHelper",i.length,s,t.isRoot)}},sexpr:function(t){var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var n=1,i=t.parts.length;i>n;n++)this.opcode("lookup",t.parts[n])},DATA:function(t){if(this.options.data=!0,t.id.isScoped||t.id.depth)throw new r("Scoped data references are not supported: "+t.original,t);this.opcode("lookupData");for(var e=t.id.parts,n=0,i=e.length;i>n;n++)this.opcode("lookup",e[n])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var s=t.id.parts[0];i.knownHelpers[s]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e,n=t.length;n--;)e=t[n],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type),"sexpr"===e.type&&this.sexpr(e)):this[e.type](e)},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("emptyHash"),i}},s.precompile=n,s.compile=i,s}(n),h=function(t,e){function n(t){this.value=t}function i(){}var s,r=t.COMPILER_REVISION,o=t.REVISION_CHANGES,a=t.log,l=e;i.prototype={nameLookup:function(t,e){var n,s;return 0===t.indexOf("depth")&&(n=!0),s=/^[0-9]+$/.test(e)?t+"["+e+"]":i.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']",n?"("+t+" && "+s+")":s},compilerInfo:function(){var t=r,e=o[t];return"this.compilerInfo = ["+t+",'"+e+"'];\n"},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,n,i){this.environment=t,this.options=e||{},a("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var s,r=t.opcodes;this.i=0;for(var o=r.length;this.i<o;this.i++)s=r[this.i],"DECLARE"===s.opcode?this[s.name]=s.value:this[s.opcode].apply(this,s.args),s.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new l("Compile completed with content left on stack");return this.createFunctionContext(i)},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,n="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(n+=" data = data || {};"),t.push(n)}t.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],s=0,r=this.environment.depths.list.length;r>s;s++)i.push("depth"+this.environment.depths.list[s]);var o=this.mergeSource();if(this.isChild||(o=this.compilerInfo()+o),t)return i.push(o),Function.apply(this,i);var l="function "+(this.name||"")+"("+i.join(",")+") {\n  "+o+"}";return a("debug",l+"\n\n"),l},mergeSource:function(){for(var t,e="",n=0,i=this.source.length;i>n;n++){var s=this.source[n];s.appendToBuffer?t=t?t+"\n    + "+s.content:s.content:(t&&(e+="buffer += "+t+";\n  ",t=void 0),e+=s+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.stripNext&&(t=t.replace(/^\s+/,"")),this.pendingContent=t},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"sexpr"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}
<<<<<<< HEAD
},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){this.pushStackLiteral(null!=t?this.programExpression(t):null)},invokeHelper:function(t,e,n){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var i=this.lastHelper=this.setupHelper(t,e,!0),s=this.nameLookup("depth"+this.lastContext,e,"context"),r="helper = "+i.name+" || "+s;i.paramsInit&&(r+=","+i.paramsInit),this.push("("+r+",helper ? helper.call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+"))"),n||this.flushInline()},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var n=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),s=this.nameLookup("depth"+this.lastContext,t,"context"),r=this.nextStack();n.paramsInit&&this.pushSource(n.paramsInit),this.pushSource("if (helper = "+i+") { "+r+" = helper.call("+n.callParams+"); }"),this.pushSource("else { helper = "+s+"; "+r+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),e=this.popStack());var s=this.hash;e&&s.contexts.push("'"+t+"': "+e),n&&s.types.push("'"+t+"': "+n),s.values.push("'"+t+"': ("+i+")")},compiler:i,compileChildren:function(t,e){for(var n,i,s=t.children,r=0,o=s.length;o>r;r++){n=s[r],i=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,e,this.context),this.context.environments[a]=n):(n.index=a,n.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,n=this.environment.children[t],i=n.depths.list,s=[n.index,n.name,"data"],r=0,o=i.length;o>r;r++)e=i[r],s.push(1===e?"depth0":"depth"+(e-1));return(0===i.length?"self.program(":"self.programWithDepth(")+s.join(", ")+")"},register:function(t,e){this.useRegister(t),this.pushSource(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,i,s,r="",o=this.isInline();if(o){var a=this.popStack(!0);if(a instanceof n)e=a.value,s=!0;else{i=!this.stackSlot;var l=i?this.incrStack():this.topStackName();r="("+this.push(l)+" = "+a+"),",e=this.topStack()}}else e=this.topStack();var c=t.call(this,e);return o?(s||this.popStack(),i&&this.stackSlot--,this.push("("+r+c+")")):(/^stack/.test(e)||(e=this.nextStack()),this.pushSource(e+" = ("+r+c+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,i=t.length;i>e;e++){var s=t[e];s instanceof n?this.compileStack.push(s):this.pushStack(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();if(!t&&i instanceof n)return i.value;if(!e){if(!this.stackSlot)throw new l("Invalid stack pop");this.stackSlot--}return i},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,i=e[e.length-1];return!t&&i instanceof n?i.value:i},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,n){var i=[],s=this.setupParams(t,i,n),r=this.nameLookup("helpers",e,"helper");return{params:i,paramsInit:s,name:r,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(e)].concat(i).join(", ")}},setupOptions:function(t,e){var n,i,s,r=[],o=[],a=[];r.push("hash:"+this.popStack()),this.options.stringParams&&(r.push("hashTypes:"+this.popStack()),r.push("hashContexts:"+this.popStack())),i=this.popStack(),s=this.popStack(),(s||i)&&(s||(this.context.aliases.self="this",s="self.noop"),i||(this.context.aliases.self="this",i="self.noop"),r.push("inverse:"+i),r.push("fn:"+s));for(var l=0;t>l;l++)n=this.popStack(),e.push(n),this.options.stringParams&&(a.push(this.popStack()),o.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+o.join(",")+"]"),r.push("types:["+a.join(",")+"]")),this.options.data&&r.push("data:data"),r},setupParams:function(t,e,n){var i="{"+this.setupOptions(t,e).join(",")+"}";return n?(this.useRegister("options"),e.push("options"),"options="+i):(e.push(i),"")}};for(var c="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),h=i.RESERVED_WORDS={},u=0,d=c.length;d>u;u++)h[c[u]]=!0;return i.isValidJavaScriptVariableName=function(t){return!i.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)?!0:!1},s=i}(i,n),u=function(t,e,n,i,s){var r,o=t,a=e,l=n.parser,c=n.parse,h=i.Compiler,u=i.compile,d=i.precompile,p=s,f=o.create,m=function(){var t=f();return t.compile=function(e,n){return u(e,n,t)},t.precompile=function(e,n){return d(e,n,t)},t.AST=a,t.Compiler=h,t.JavaScriptCompiler=p,t.Parser=l,t.parse=c,t};return o=m(),o.create=m,r=o}(r,o,l,c,h);return u}();define("handlebars",["jquery"],function(t){return function(){var e;return e||t.Handlebars}}(this)),define("handlebarsTemplates",["handlebars"],function(t){return this.ThirdChannel=this.ThirdChannel||{},this.ThirdChannel.templates=this.ThirdChannel.templates||{},t.registerPartial("open_alert_rows",t.template(function(t,e,n,i,s){function r(t,e){var i,s,r="";return r+='\n	<div class="item pure-g">\n		<p class="col-6-12 col-md-1-2">',(s=n.title)?i=s.call(t,{hash:{},data:e}):(s=t&&t.title,i=typeof s===h?s.call(t,{hash:{},data:e}):s),r+=u(i)+'</p>\n		<p class="col-4-12 col-md-1-2">',(s=n.created_at)?i=s.call(t,{hash:{},data:e}):(s=t&&t.created_at,i=typeof s===h?s.call(t,{hash:{},data:e}):s),r+=u(i)+'</p>\n		<div class="col-1-12">\n			<a href="'+u((i=t&&t.links,i=null==i||i===!1?i:i.resolve,typeof i===h?i.apply(t):i))+'" class="btn primary"><i class="ic fa ic_check"></i></a>\n		</div>\n		<div class="col-1-12">\n			<a href="'+u((i=t&&t.links,i=null==i||i===!1?i:i.checkin,typeof i===h?i.apply(t):i))+'" class="btn primary"><i class="ic fa ic_report-16"></i></a>\n		</div>\n	</div>\n'}function o(){return"\n	<p>There are no Open Alerts for this Store</p>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var a,l,c,h="function",u=this.escapeExpression,d=this,p=n.blockHelperMissing;return c={hash:{},inverse:d.program(3,o,s),fn:d.program(1,r,s),data:s},(l=n.rows)?a=l.call(e,c):(l=e&&e.rows,a=typeof l===h?l.call(e,c):l),n.rows||(a=p.call(e,a,{hash:{},inverse:d.program(3,o,s),fn:d.program(1,r,s),data:s})),a||0===a?a:""})),this.ThirdChannel.templates.activity=t.template(function(t,e,n,i,s){function r(t){var e,n="";return n+='\n                <p>\n                    <a href="#">'+_((e=t&&t.location,e=null==e||e===!1?e:e.store,typeof e===b?e.apply(t):e))+"</a>, "+_((e=t&&t.location,e=null==e||e===!1?e:e.city,typeof e===b?e.apply(t):e))+", "+_((e=t&&t.location,e=null==e||e===!1?e:e.state,typeof e===b?e.apply(t):e))+"\n                </p>\n                "}function o(t,e){var i,s,r="";return r+='\n            <div class="issues-found">\n                <h3>',(s=n.issue_length)?i=s.call(t,{hash:{},data:e}):(s=t&&t.issue_length,i=typeof s===b?s.call(t,{hash:{},data:e}):s),r+=_(i)+' Issues Found</h3>\n                <ul class="unstyled">\n                    ',i=n.each.call(t,t&&t.issues,{hash:{},inverse:w.noop,fn:w.program(4,a,e),data:e}),(i||0===i)&&(r+=i),r+="\n                </ul>\n            </div>\n            "}function a(t,e){var i,s,r="";return r+="\n                    <li>- ",(s=n.label)?i=s.call(t,{hash:{},data:e}):(s=t&&t.label,i=typeof s===b?s.call(t,{hash:{},data:e}):s),r+=_(i)+"</li>\n                    "}function l(t,e){var i,s,r="";return r+='\n                    <a class="activity_like_button gray" data-id="',(s=n.activity_id)?i=s.call(t,{hash:{},data:e}):(s=t&&t.activity_id,i=typeof s===b?s.call(t,{hash:{},data:e}):s),r+=_(i)+'" href="#">\n                        Like\n                    </a>\n                    '}function c(){return"\n                     Liked\n                    "}function h(t,e){var i,s,r="";return r+='\n                <span class="action bold">\n                    <a href="',(s=n.report_url)?i=s.call(t,{hash:{},data:e}):(s=t&&t.report_url,i=typeof s===b?s.call(t,{hash:{},data:e}):s),r+=_(i)+'" target="_new">Full Report</a>\n                </span>\n                '}function u(t,e){var i,s="";return s+='\n            <div class="swiper-container">\n                <div class="swiper-wrapper">\n                    <!--First Slide-->\n                    ',i=n.each.call(t,t&&t.images,{hash:{},inverse:w.noop,fn:w.programWithDepth(13,d,e,t),data:e}),(i||0===i)&&(s+=i),s+='\n                    <a href="#" class="arrow arrow-left"><span class="ic ic_left"></span> </a>\n                    <a href="#" class="arrow arrow-right"><span class="ic ic_right"></span> </a>\n\n                </div>\n            </div>\n            '}function d(t,e,i){var s,r,o="";return o+='\n                    <div class="swiper-slide">\n                        <img src="',(r=n.url)?s=r.call(t,{hash:{},data:e}):(r=t&&t.url,s=typeof r===b?r.call(t,{hash:{},data:e}):r),o+=_(s)+'" class="img-responsive " onerror="this.src=\''+_((s=i&&i.content_image_error_url,typeof s===b?s.apply(t):s))+"'\"/>\n                    </div>\n                    "}function p(t,e){var i,s,r,o="";return o+='\n            <span class="action">\n                <a href="#" class="more-comments">View ',(s=n.additional_comments)?i=s.call(t,{hash:{},data:e}):(s=t&&t.additional_comments,i=typeof s===b?s.call(t,{hash:{},data:e}):s),o+=_(i)+" More "+_((s=n.pluralize||t&&t.pluralize,r={hash:{},data:e},s?s.call(t,t&&t.additional_comments,"Comment","Comments",r):x.call(t,"pluralize",t&&t.additional_comments,"Comment","Comments",r)))+"</a>\n            </span>\n            "}function f(){return'\n        <div class="comment new-comment">\n\n\n        </div>\n        '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var m,g,v,y="",b="function",_=this.escapeExpression,w=this,x=n.helperMissing;return y+='<div class="activity-holder">\n    <div class="activity">\n        <div class="activity-meta">\n            <img src="',(g=n.user_image)?m=g.call(e,{hash:{},data:s}):(g=e&&e.user_image,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+'" alt="Images That Describes Me" class="user-image img-circle" onerror="this.src=\'',(g=n.user_image_error_url)?m=g.call(e,{hash:{},data:s}):(g=e&&e.user_image_error_url,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+'\'"/>\n            <div class="bar-body">\n                ',g=n.if_eq||e&&e.if_eq,v={hash:{},inverse:w.noop,fn:w.program(1,r,s),data:s},m=g?g.call(e,e&&e.type,"Checkin",v):x.call(e,"if_eq",e&&e.type,"Checkin",v),(m||0===m)&&(y+=m),y+='\n                <p>\n                    <span data-livestamp="',(g=n.created_at)?m=g.call(e,{hash:{},data:s}):(g=e&&e.created_at,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+'"></span> by\n                    <a href="/programs/',(g=n.current_program)?m=g.call(e,{hash:{},data:s}):(g=e&&e.current_program,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+"/profiles/",(g=n.user_id)?m=g.call(e,{hash:{},data:s}):(g=e&&e.user_id,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+'">',(g=n.user_name)?m=g.call(e,{hash:{},data:s}):(g=e&&e.user_name,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+'</a>\n                </p>\n            </div>\n        </div>\n        <div class="activity-content">\n            ',g=n.if_eq||e&&e.if_eq,v={hash:{},inverse:w.noop,fn:w.program(3,o,s),data:s},m=g?g.call(e,e&&e.type,"Checkin",v):x.call(e,"if_eq",e&&e.type,"Checkin",v),(m||0===m)&&(y+=m),y+="\n\n            <h3>",(g=n.subject)?m=g.call(e,{hash:{},data:s}):(g=e&&e.subject,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+"</h3>\n            ",(g=n.content)?m=g.call(e,{hash:{},data:s}):(g=e&&e.content,m=typeof g===b?g.call(e,{hash:{},data:s}):g),(m||0===m)&&(y+=m),y+=' <a href="/programs/',(g=n.current_program)?m=g.call(e,{hash:{},data:s}):(g=e&&e.current_program,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+"/activities/",(g=n.activity_id)?m=g.call(e,{hash:{},data:s}):(g=e&&e.activity_id,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+'">View Full Activity</a>\n\n            <div class="activity-actions">\n                <span class="action bold">\n                    ',m=n["if"].call(e,e&&e.show_like_button,{hash:{},inverse:w.program(8,c,s),fn:w.program(6,l,s),data:s}),(m||0===m)&&(y+=m),y+='\n                </span>\n                <span class="action bold"><a href="#" class="start-comment">Comment</a></span>\n                ',g=n.if_eq||e&&e.if_eq,v={hash:{},inverse:w.noop,fn:w.program(10,h,s),data:s},m=g?g.call(e,e&&e.type,"Checkin",v):x.call(e,"if_eq",e&&e.type,"Checkin",v),(m||0===m)&&(y+=m),y+='\n            </div>\n        </div>\n\n        <div class="activity-photos">\n            ',m=n["if"].call(e,e&&e.images,{hash:{},inverse:w.noop,fn:w.program(12,u,s),data:s}),(m||0===m)&&(y+=m),y+='\n        </div>\n\n\n    </div>\n    <div class="comment-holder">\n        <div class="activity-status">\n            <span class="action">\n                <span class="like-count" data-likecount="',(g=n.like_count)?m=g.call(e,{hash:{},data:s}):(g=e&&e.like_count,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+'">',(g=n.like_count)?m=g.call(e,{hash:{},data:s}):(g=e&&e.like_count,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+'</span> <span class="like-label">'+_((g=n.pluralize||e&&e.pluralize,v={hash:{},data:s},g?g.call(e,e&&e.like_count,"Like","Likes",v):x.call(e,"pluralize",e&&e.like_count,"Like","Likes",v)))+"</span>\n            </span>\n\n            ",g=n.if_gt||e&&e.if_gt,v={hash:{},inverse:w.noop,fn:w.program(15,p,s),data:s},m=g?g.call(e,e&&e.comments_count,3,v):x.call(e,"if_gt",e&&e.comments_count,3,v),(m||0===m)&&(y+=m),y+='\n        </div>\n        <div class="comments">\n\n        </div>\n\n        ',m=n["if"].call(e,e&&e.current_user,{hash:{},inverse:w.noop,fn:w.program(17,f,s),data:s}),(m||0===m)&&(y+=m),y+="\n    </div>\n</div>\n"}),this.ThirdChannel.templates["checkins/store"]=t.template(function(t,e,n,i,s){function r(t,e){var i,s,r="";return r+='\n<tr>\n    <td>\n        <a href="',(s=n.name)?i=s.call(t,{hash:{},data:e}):(s=t&&t.name,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+'">',(s=n.name)?i=s.call(t,{hash:{},data:e}):(s=t&&t.name,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+", #",(s=n.id)?i=s.call(t,{hash:{},data:e}):(s=t&&t.id,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+"</a>, ",(s=n.city)?i=s.call(t,{hash:{},data:e}):(s=t&&t.city,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+", ",(s=n.state)?i=s.call(t,{hash:{},data:e}):(s=t&&t.state,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+"\n        ",i=n["if"].call(t,t&&t.special_project,{hash:{},inverse:m.noop,fn:m.program(2,o,e),data:e}),(i||0===i)&&(r+=i),r+="\n\n    </td>\n    <td>",(s=n.last_checkin)?i=s.call(t,{hash:{},data:e}):(s=t&&t.last_checkin,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+"</td>\n    <td>\n        ",i=n["if"].call(t,t&&t.special_project,{hash:{},inverse:m.program(6,l,e),fn:m.program(4,a,e),data:e}),(i||0===i)&&(r+=i),r+="\n    </td>\n</tr>\n"}function o(){return"\n            <strong>This store is part of a Special Project</strong>\n        "}function a(t,e){var i,s,r="";return r+='\n            <a href="/programs/',(s=n.program)?i=s.call(t,{hash:{},data:e}):(s=t&&t.program,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+"/checkins/",(s=n.id)?i=s.call(t,{hash:{},data:e}):(s=t&&t.id,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+'/choose" class="btn btn-primary btn-sm"><strong>Checkin Here</strong></a>\n        '}function l(t,e){var i,s,r="";return r+='\n\n            <form accept-charset="UTF-8" action="/programs/',(s=n.program)?i=s.call(t,{hash:{},data:e}):(s=t&&t.program,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+'/checkins" method="post">\n                <input id="id" name="customer_store_id" type="hidden" value="',(s=n.id)?i=s.call(t,{hash:{},data:e}):(s=t&&t.id,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+'">\n                <input name="authenticity_token" value="',(s=n.authenticity_token)?i=s.call(t,{hash:{},data:e}):(s=t&&t.authenticity_token,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+'" type="hidden">\n                <strong><button class="btn text-same-color" name="commit"><span class="ic ic_location"></span>  Checkin Here</button></strong>\n            </form>\n        '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var c,h,u,d="",p="function",f=this.escapeExpression,m=this,g=n.blockHelperMissing;return d+='<table>\n    <tr><th>YOUR STORES</th><th>LAST CHECKIN</th><th></th></tr>\n</table>\n\n<div class="pagination"></div>\n\n',u={hash:{},inverse:m.noop,fn:m.program(1,r,s),data:s},(h=n.rows)?c=h.call(e,u):(h=e&&e.rows,c=typeof h===p?h.call(e,u):h),n.rows||(c=g.call(e,c,{hash:{},inverse:m.noop,fn:m.program(1,r,s),data:s})),(c||0===c)&&(d+=c),d}),this.ThirdChannel.templates.comment=t.template(function(t,e,n,i,s){function r(t,e){var i,s,r="";return r+='\n        <a href="/programs/',(s=n.current_program)?i=s.call(t,{hash:{},data:e}):(s=t&&t.current_program,i=typeof s===u?s.call(t,{hash:{},data:e}):s),r+=d(i)+"/profiles/",(s=n.commenter_id)?i=s.call(t,{hash:{},data:e}):(s=t&&t.commenter_id,i=typeof s===u?s.call(t,{hash:{},data:e}):s),r+=d(i)+'">',(s=n.user_name)?i=s.call(t,{hash:{},data:e}):(s=t&&t.user_name,i=typeof s===u?s.call(t,{hash:{},data:e}):s),r+=d(i)+"</a>\n        "}function o(){return"Anonymous"}function a(){return'\n<div class="pull-right">\n    <a href="#" class="fa fa-times-circle delete-comment" style="text-decoration: none; font-size: 16px;"></a>\n</div>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var l,c,h="",u="function",d=this.escapeExpression,p=this;return h+='<img src="',(c=n.user_image)?l=c.call(e,{hash:{},data:s}):(c=e&&e.user_image,l=typeof c===u?c.call(e,{hash:{},data:s}):c),h+=d(l)+'" class="user-image img-circle" onerror="this.src=\'',(c=n.user_image_error_url)?l=c.call(e,{hash:{},data:s}):(c=e&&e.user_image_error_url,l=typeof c===u?c.call(e,{hash:{},data:s}):c),h+=d(l)+'\'"/>\n\n<div class="bar-body">\n    <strong>',l=n["if"].call(e,e&&e.user_name,{hash:{},inverse:p.program(3,o,s),fn:p.program(1,r,s),data:s}),(l||0===l)&&(h+=l),h+="</strong>:\n    ",(c=n.comment)?l=c.call(e,{hash:{},data:s}):(c=e&&e.comment,l=typeof c===u?c.call(e,{hash:{},data:s}):c),(l||0===l)&&(h+=l),h+='<br/>\n    <span class="tiny">posted  <span data-livestamp="',(c=n.posted_at)?l=c.call(e,{hash:{},data:s}):(c=e&&e.posted_at,l=typeof c===u?c.call(e,{hash:{},data:s}):c),h+=d(l)+'"></span></span>\n</div>\n\n',l=n["if"].call(e,e&&e.deletable,{hash:{},inverse:p.noop,fn:p.program(5,a,s),data:s}),(l||0===l)&&(h+=l),h}),this.ThirdChannel.templates["dashboards/alerts/index/alert"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<tr>\n    <td class="',(o=n.alertClass)?r=o.call(e,{hash:{},data:s}):(o=e&&e.alertClass,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'"><a href="alerts/',(o=n.id)?r=o.call(e,{hash:{},data:s}):(o=e&&e.id,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'">',(o=n.title)?r=o.call(e,{hash:{},data:s}):(o=e&&e.title,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'</a></td>\n    <td><a href="alerts/',(o=n.id)?r=o.call(e,{hash:{},data:s}):(o=e&&e.id,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'"><span class="alert-count"><i class="fa fa-spinner fa-spin"></i></span></a></td>\n    <td></td>\n</tr>\n'}),this.ThirdChannel.templates["dashboards/alerts/index/alerts"]=t.template(function(t,e,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{},'<tbody class="alerts"></tbody>\n\n'}),this.ThirdChannel.templates["dashboards/alerts/index/group"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+="<td>",(o=n.title)?r=o.call(e,{hash:{},data:s}):(o=e&&e.title,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'</td>\n<td><span class="alert-count"></span></td>\n<td class="expander"><i class="fa fa-caret-up"></i></td>\n'}),this.ThirdChannel.templates["dashboards/alerts/index/section"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+="<table>\n    <thead>\n    <tr>\n        <th>",(o=n.title)?r=o.call(e,{hash:{},data:s}):(o=e&&e.title,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+"</th>\n        <th>Total Issues</th>\n        <th></th>\n    </tr>\n    </thead>\n</table>\n\n\n"}),this.ThirdChannel.templates["dashboards/alerts/show/store"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<td><a href="'+c((r=e&&e.profile,r=null==r||r===!1?r:r.link,typeof r===l?r.apply(e):r))+'">',(o=n.name)?r=o.call(e,{hash:{},data:s}):(o=e&&e.name,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+"</a>, ",(o=n.location)?r=o.call(e,{hash:{},data:s}):(o=e&&e.location,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+"</td>\n<td>",(o=n.dateAdded)?r=o.call(e,{hash:{},data:s}):(o=e&&e.dateAdded,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'</td>\n<td>\n    <button class="btn primary" onclick="location.href=\''+c((r=e&&e.report,r=null==r||r===!1?r:r.link,typeof r===l?r.apply(e):r))+'\'">\n        <i class="ic fa ic_report-16"></i>\n    </button>\n    <button class="btn primary" onclick="location.href=\''+c((r=e&&e.report,r=null==r||r===!1?r:r.link,typeof r===l?r.apply(e):r))+'\'">\n        <i class="ic fa ic_check"></i>\n    </button>\n\n</td>\n'}),this.ThirdChannel.templates["dashboards/alerts/show/stores"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<div class="section">\n    <table>\n        <thead>\n        <tr>\n            <th>Stores with ',(o=n.title)?r=o.call(e,{hash:{},data:s}):(o=e&&e.title,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+"</th>\n            <th>Date Added</th>\n            <th>Actions</th>\n        </tr>\n        </thead>\n        <tbody></tbody>\n    </table>\n</div>\n\n"}),this.ThirdChannel.templates.filter_active_item=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<input type="checkbox" name="',(o=n.param)?r=o.call(e,{hash:{},data:s}):(o=e&&e.param,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'" value="',(o=n.value)?r=o.call(e,{hash:{},data:s}):(o=e&&e.value,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'" class="filter-input" checked="true"/>\n<div class="btn default ic_check"></div>\n<span>',(o=n.label)?r=o.call(e,{hash:{},data:s}):(o=e&&e.label,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+"</span>"}),this.ThirdChannel.templates.filters=t.template(function(t,e,n,i,s){function r(t,e){var i,s="";return s+="\n    ",i=n["if"].call(t,t&&t.name,{hash:{},inverse:u.noop,fn:u.program(2,o,e),data:e}),(i||0===i)&&(s+=i),s+="\n"}function o(t,e){var i,s,r="";return r+='\n    <div class="filter-component" data-filter-param="',(s=n.name)?i=s.call(t,{hash:{},data:e}):(s=t&&t.name,i=typeof s===c?s.call(t,{hash:{},data:e}):s),r+=h(i)+'">\n        <div class="filter-item">',(s=n.label)?i=s.call(t,{hash:{},data:e}):(s=t&&t.label,i=typeof s===c?s.call(t,{hash:{},data:e}):s),r+=h(i)+' <span class="expand-indicator"></span></div>\n        <div class="filter-list">\n            ',i=n.each.call(t,t&&t.items,{hash:{},inverse:u.noop,fn:u.program(3,a,e),data:e}),(i||0===i)&&(r+=i),r+="\n        </div>\n    </div>\n    "}function a(t){var e,n="";return n+='\n                <div class="filter-list-item" data-value="'+h((e=t&&t[1],typeof e===c?e.apply(t):e))+'">\n                    <div class="btn default">&nbsp;</div>\n                    <span>'+h((e=t&&t[0],typeof e===c?e.apply(t):e))+"</span>\n                </div>\n            "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var l,c="function",h=this.escapeExpression,u=this;return l=n.each.call(e,e,{hash:{},inverse:u.noop,fn:u.program(1,r,s),data:s}),l||0===l?l:""}),this.ThirdChannel.templates["filters/date_component"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<div class="filter-component" data-type="date">\n  <div class="filter-item">',(o=n.label)?r=o.call(e,{hash:{},data:s}):(o=e&&e.label,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'<span class="expand-indicator"></span></div>\n  <div class="filter-list">\n        <div class="filter-list-item">\n          <p>Please enter the date:</p>\n          <input type="date"/>\n        </div>\n  </div>\n</div>'}),this.ThirdChannel.templates["filters/list_component"]=t.template(function(t,e,n,i,s){function r(t,e){var i,s,r="";return r+='\n        <div class="filter-list-item flexible" data-value="',(s=n.value)?i=s.call(t,{hash:{},data:e}):(s=t&&t.value,i=typeof s===u?s.call(t,{hash:{},data:e}):s),r+=d(i)+'">\n          <div class="btn default">&nbsp;</div><span>',(s=n.name)?i=s.call(t,{hash:{},data:e}):(s=t&&t.name,i=typeof s===u?s.call(t,{hash:{},data:e}):s),r+=d(i)+"</span>\n        </div>\n    "}function o(){return"\n    	<p>There are no items for this filter.</p>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var a,l,c,h="",u="function",d=this.escapeExpression,p=this,f=n.blockHelperMissing;return h+='<div class="filter-component">\n  <div class="filter-item">',(l=n.label)?a=l.call(e,{hash:{},data:s}):(l=e&&e.label,a=typeof l===u?l.call(e,{hash:{},data:s}):l),h+=d(a)+'<span class="expand-indicator"></span></div>\n  <div class="filter-list">\n    ',c={hash:{},inverse:p.program(3,o,s),fn:p.program(1,r,s),data:s},(l=n.items)?a=l.call(e,c):(l=e&&e.items,a=typeof l===u?l.call(e,c):l),n.items||(a=f.call(e,a,{hash:{},inverse:p.program(3,o,s),fn:p.program(1,r,s),data:s})),(a||0===a)&&(h+=a),h+="\n  </div>\n</div>"}),this.ThirdChannel.templates["filters/spinner_component"]=t.template(function(t,e,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{},"<div class='filter-component spinner'>\n    <div class='filter-item'>\n        <i class='fa fa-spinner fa-spin'></i>\n    </div>\n</div>\""}),this.ThirdChannel.templates.incomplete_activities=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<div class="activity-holder">\n<h3>',(o=n.incomplete)?r=o.call(e,{hash:{},data:s}):(o=e&&e.incomplete,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+' Checkins in progress</h3>\n    <a href="/programs/',(o=n.current_program)?r=o.call(e,{hash:{},data:s}):(o=e&&e.current_program,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'/activities/current_checkins">View Locations  <i class="fa fa-chevron-right"></i></a>\n</div>'}),this.ThirdChannel.templates.loading=t.template(function(t,e,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{},'<div class="section loading-section">\n    <div class="loading">\n        <div class="fa fa-spin fa-spinner"></div> Loading...\n    </div>\n</div>\n\n'}),this.ThirdChannel.templates["new-comment"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<img src="'+c((r=e&&e.current_user,r=null==r||r===!1?r:r.user_image,typeof r===l?r.apply(e):r))+'" class="user-image hidden-xs img-circle" onerror="this.src=\'',(o=n.user_image_error_url)?r=o.call(e,{hash:{},data:s}):(o=e&&e.user_image_error_url,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'\'"/>\n\n<div class="bar-body">\n\n    <textarea rows="1" class="expanding new-comment-field" placeholder="Write a comment..."></textarea>\n\n    <button class="btn light solid add-comment">Comment</button>\n</div>'}),this.ThirdChannel.templates.no_results=t.template(function(t,e,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{},'<div class="">\n    <i class="fa fa-ban"></i> No Results Found\n</div>\n'}),this.ThirdChannel.templates["notifications/badge"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return(o=n.count)?r=o.call(e,{hash:{},data:s}):(o=e&&e.count,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+"\n\n"}),this.ThirdChannel.templates["notifications/notification"]=t.template(function(t,e,n,i,s){function r(t,e){var i,s,r,a="";return a+="\n<tr>\n    <td class=\"<%= note.read ? 'read' : 'unread' %>\">\n        <p>\n            ",(s=n.author_url)?i=s.call(t,{hash:{},data:e}):(s=t&&t.author_url,i=typeof s===f?s.call(t,{hash:{},data:e}):s),(i||0===i)&&(a+=i),a+="\n                <span>\n                    ",(s=n.verb)?i=s.call(t,{hash:{},data:e}):(s=t&&t.verb,i=typeof s===f?s.call(t,{hash:{},data:e}):s),a+=v(i)+"\n                    ",s=n.if_eq||t&&t.if_eq,r={hash:{},inverse:m.noop,fn:m.program(2,o,e),data:e},i=s?s.call(t,"Comment",t&&t.note_type,r):g.call(t,"if_eq","Comment",t&&t.note_type,r),(i||0===i)&&(a+=i),a+="\n                    on ",(s=n.created_at)?i=s.call(t,{hash:{},data:e}):(s=t&&t.created_at,i=typeof s===f?s.call(t,{hash:{},data:e}):s),a+=v(i)+":\n                </span>\n        </p>\n        ",(s=n.content)?i=s.call(t,{hash:{},data:e}):(s=t&&t.content,i=typeof s===f?s.call(t,{hash:{},data:e}):s),(i||0===i)&&(a+=i),a+='\n        <div class="table-actions">\n            ',(s=n.activity_url)?i=s.call(t,{hash:{},data:e}):(s=t&&t.activity_url,i=typeof s===f?s.call(t,{hash:{},data:e}):s),(i||0===i)&&(a+=i),a+=" | ",(s=n.delete_url)?i=s.call(t,{hash:{},data:e}):(s=t&&t.delete_url,i=typeof s===f?s.call(t,{hash:{},data:e}):s),(i||0===i)&&(a+=i),a+="\n        </div>\n    </td>\n</tr>\n"
=======
},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){this.pushStackLiteral(null!=t?this.programExpression(t):null)},invokeHelper:function(t,e,n){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var i=this.lastHelper=this.setupHelper(t,e,!0),s=this.nameLookup("depth"+this.lastContext,e,"context"),r="helper = "+i.name+" || "+s;i.paramsInit&&(r+=","+i.paramsInit),this.push("("+r+",helper ? helper.call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+"))"),n||this.flushInline()},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var n=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),s=this.nameLookup("depth"+this.lastContext,t,"context"),r=this.nextStack();n.paramsInit&&this.pushSource(n.paramsInit),this.pushSource("if (helper = "+i+") { "+r+" = helper.call("+n.callParams+"); }"),this.pushSource("else { helper = "+s+"; "+r+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),e=this.popStack());var s=this.hash;e&&s.contexts.push("'"+t+"': "+e),n&&s.types.push("'"+t+"': "+n),s.values.push("'"+t+"': ("+i+")")},compiler:i,compileChildren:function(t,e){for(var n,i,s=t.children,r=0,o=s.length;o>r;r++){n=s[r],i=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,e,this.context),this.context.environments[a]=n):(n.index=a,n.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,n=this.environment.children[t],i=n.depths.list,s=[n.index,n.name,"data"],r=0,o=i.length;o>r;r++)e=i[r],s.push(1===e?"depth0":"depth"+(e-1));return(0===i.length?"self.program(":"self.programWithDepth(")+s.join(", ")+")"},register:function(t,e){this.useRegister(t),this.pushSource(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new n(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var e,i,s,r="",o=this.isInline();if(o){var a=this.popStack(!0);if(a instanceof n)e=a.value,s=!0;else{i=!this.stackSlot;var l=i?this.incrStack():this.topStackName();r="("+this.push(l)+" = "+a+"),",e=this.topStack()}}else e=this.topStack();var c=t.call(this,e);return o?(s||this.popStack(),i&&this.stackSlot--,this.push("("+r+c+")")):(/^stack/.test(e)||(e=this.nextStack()),this.pushSource(e+" = ("+r+c+");")),e},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,i=t.length;i>e;e++){var s=t[e];s instanceof n?this.compileStack.push(s):this.pushStack(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),i=(e?this.inlineStack:this.compileStack).pop();if(!t&&i instanceof n)return i.value;if(!e){if(!this.stackSlot)throw new l("Invalid stack pop");this.stackSlot--}return i},topStack:function(t){var e=this.isInline()?this.inlineStack:this.compileStack,i=e[e.length-1];return!t&&i instanceof n?i.value:i},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,n){var i=[],s=this.setupParams(t,i,n),r=this.nameLookup("helpers",e,"helper");return{params:i,paramsInit:s,name:r,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(e)].concat(i).join(", ")}},setupOptions:function(t,e){var n,i,s,r=[],o=[],a=[];r.push("hash:"+this.popStack()),this.options.stringParams&&(r.push("hashTypes:"+this.popStack()),r.push("hashContexts:"+this.popStack())),i=this.popStack(),s=this.popStack(),(s||i)&&(s||(this.context.aliases.self="this",s="self.noop"),i||(this.context.aliases.self="this",i="self.noop"),r.push("inverse:"+i),r.push("fn:"+s));for(var l=0;t>l;l++)n=this.popStack(),e.push(n),this.options.stringParams&&(a.push(this.popStack()),o.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+o.join(",")+"]"),r.push("types:["+a.join(",")+"]")),this.options.data&&r.push("data:data"),r},setupParams:function(t,e,n){var i="{"+this.setupOptions(t,e).join(",")+"}";return n?(this.useRegister("options"),e.push("options"),"options="+i):(e.push(i),"")}};for(var c="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),h=i.RESERVED_WORDS={},u=0,d=c.length;d>u;u++)h[c[u]]=!0;return i.isValidJavaScriptVariableName=function(t){return!i.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)?!0:!1},s=i}(i,n),u=function(t,e,n,i,s){var r,o=t,a=e,l=n.parser,c=n.parse,h=i.Compiler,u=i.compile,d=i.precompile,p=s,f=o.create,m=function(){var t=f();return t.compile=function(e,n){return u(e,n,t)},t.precompile=function(e,n){return d(e,n,t)},t.AST=a,t.Compiler=h,t.JavaScriptCompiler=p,t.Parser=l,t.parse=c,t};return o=m(),o.create=m,r=o}(r,o,l,c,h);return u}();define("handlebars",["jquery"],function(t){return function(){var e;return e||t.Handlebars}}(this)),define("handlebarsTemplates",["handlebars"],function(t){return this.ThirdChannel=this.ThirdChannel||{},this.ThirdChannel.templates=this.ThirdChannel.templates||{},t.registerPartial("open_alert_rows",t.template(function(t,e,n,i,s){function r(t,e){var i,s,r="";return r+='\n	<div class="item pure-g">\n		<p class="col-6-12 col-md-1-2">',(s=n.title)?i=s.call(t,{hash:{},data:e}):(s=t&&t.title,i=typeof s===h?s.call(t,{hash:{},data:e}):s),r+=u(i)+'</p>\n		<p class="col-4-12 col-md-1-2">',(s=n.created_at)?i=s.call(t,{hash:{},data:e}):(s=t&&t.created_at,i=typeof s===h?s.call(t,{hash:{},data:e}):s),r+=u(i)+'</p>\n		<div class="col-1-12">\n			<a href="'+u((i=t&&t.links,i=null==i||i===!1?i:i.resolve,typeof i===h?i.apply(t):i))+'" class="btn primary resolve"><i class="ic fa ic_check"></i></a>\n		</div>\n		<div class="col-1-12">\n			<a href="'+u((i=t&&t.links,i=null==i||i===!1?i:i.checkin,typeof i===h?i.apply(t):i))+'" class="btn primary"><i class="ic fa ic_report-16"></i></a>\n		</div>\n	</div>\n'}function o(){return"\n	<p>There are no Open Alerts for this Store</p>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var a,l,c,h="function",u=this.escapeExpression,d=this,p=n.blockHelperMissing;return c={hash:{},inverse:d.program(3,o,s),fn:d.program(1,r,s),data:s},(l=n.rows)?a=l.call(e,c):(l=e&&e.rows,a=typeof l===h?l.call(e,c):l),n.rows||(a=p.call(e,a,{hash:{},inverse:d.program(3,o,s),fn:d.program(1,r,s),data:s})),a||0===a?a:""})),this.ThirdChannel.templates.activity=t.template(function(t,e,n,i,s){function r(t){var e,n="";return n+='\n                <p>\n                    <a href="#">'+_((e=t&&t.location,e=null==e||e===!1?e:e.store,typeof e===b?e.apply(t):e))+"</a>, "+_((e=t&&t.location,e=null==e||e===!1?e:e.city,typeof e===b?e.apply(t):e))+", "+_((e=t&&t.location,e=null==e||e===!1?e:e.state,typeof e===b?e.apply(t):e))+"\n                </p>\n                "}function o(t,e){var i,s,r="";return r+='\n            <div class="issues-found">\n                <h3>',(s=n.issue_length)?i=s.call(t,{hash:{},data:e}):(s=t&&t.issue_length,i=typeof s===b?s.call(t,{hash:{},data:e}):s),r+=_(i)+' Issues Found</h3>\n                <ul class="unstyled">\n                    ',i=n.each.call(t,t&&t.issues,{hash:{},inverse:w.noop,fn:w.program(4,a,e),data:e}),(i||0===i)&&(r+=i),r+="\n                </ul>\n            </div>\n            "}function a(t,e){var i,s,r="";return r+="\n                    <li>- ",(s=n.label)?i=s.call(t,{hash:{},data:e}):(s=t&&t.label,i=typeof s===b?s.call(t,{hash:{},data:e}):s),r+=_(i)+"</li>\n                    "}function l(t,e){var i,s,r="";return r+='\n                    <a class="activity_like_button gray" data-id="',(s=n.activity_id)?i=s.call(t,{hash:{},data:e}):(s=t&&t.activity_id,i=typeof s===b?s.call(t,{hash:{},data:e}):s),r+=_(i)+'" href="#">\n                        Like\n                    </a>\n                    '}function c(){return"\n                     Liked\n                    "}function h(t,e){var i,s,r="";return r+='\n                <span class="action bold">\n                    <a href="',(s=n.report_url)?i=s.call(t,{hash:{},data:e}):(s=t&&t.report_url,i=typeof s===b?s.call(t,{hash:{},data:e}):s),r+=_(i)+'" target="_new">Full Report</a>\n                </span>\n                '}function u(t,e){var i,s="";return s+='\n            <div class="swiper-container">\n                <div class="swiper-wrapper">\n                    <!--First Slide-->\n                    ',i=n.each.call(t,t&&t.images,{hash:{},inverse:w.noop,fn:w.programWithDepth(13,d,e,t),data:e}),(i||0===i)&&(s+=i),s+='\n                    <a href="#" class="arrow arrow-left"><span class="ic ic_left"></span> </a>\n                    <a href="#" class="arrow arrow-right"><span class="ic ic_right"></span> </a>\n\n                </div>\n            </div>\n            '}function d(t,e,i){var s,r,o="";return o+='\n                    <div class="swiper-slide">\n                        <img src="',(r=n.url)?s=r.call(t,{hash:{},data:e}):(r=t&&t.url,s=typeof r===b?r.call(t,{hash:{},data:e}):r),o+=_(s)+'" class="img-responsive " onerror="this.src=\''+_((s=i&&i.content_image_error_url,typeof s===b?s.apply(t):s))+"'\"/>\n                    </div>\n                    "}function p(t,e){var i,s,r,o="";return o+='\n            <span class="action">\n                <a href="#" class="more-comments">View ',(s=n.additional_comments)?i=s.call(t,{hash:{},data:e}):(s=t&&t.additional_comments,i=typeof s===b?s.call(t,{hash:{},data:e}):s),o+=_(i)+" More "+_((s=n.pluralize||t&&t.pluralize,r={hash:{},data:e},s?s.call(t,t&&t.additional_comments,"Comment","Comments",r):x.call(t,"pluralize",t&&t.additional_comments,"Comment","Comments",r)))+"</a>\n            </span>\n            "}function f(){return'\n        <div class="comment new-comment">\n\n\n        </div>\n        '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var m,g,v,y="",b="function",_=this.escapeExpression,w=this,x=n.helperMissing;return y+='<div class="activity-holder">\n    <div class="activity">\n        <div class="activity-meta">\n            <img src="',(g=n.user_image)?m=g.call(e,{hash:{},data:s}):(g=e&&e.user_image,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+'" alt="Images That Describes Me" class="user-image img-circle" onerror="this.src=\'',(g=n.user_image_error_url)?m=g.call(e,{hash:{},data:s}):(g=e&&e.user_image_error_url,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+'\'"/>\n            <div class="bar-body">\n                ',g=n.if_eq||e&&e.if_eq,v={hash:{},inverse:w.noop,fn:w.program(1,r,s),data:s},m=g?g.call(e,e&&e.type,"Checkin",v):x.call(e,"if_eq",e&&e.type,"Checkin",v),(m||0===m)&&(y+=m),y+='\n                <p>\n                    <span data-livestamp="',(g=n.created_at)?m=g.call(e,{hash:{},data:s}):(g=e&&e.created_at,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+'"></span> by\n                    <a href="/programs/',(g=n.current_program)?m=g.call(e,{hash:{},data:s}):(g=e&&e.current_program,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+"/profiles/",(g=n.user_id)?m=g.call(e,{hash:{},data:s}):(g=e&&e.user_id,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+'">',(g=n.user_name)?m=g.call(e,{hash:{},data:s}):(g=e&&e.user_name,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+'</a>\n                </p>\n            </div>\n        </div>\n        <div class="activity-content">\n            ',g=n.if_eq||e&&e.if_eq,v={hash:{},inverse:w.noop,fn:w.program(3,o,s),data:s},m=g?g.call(e,e&&e.type,"Checkin",v):x.call(e,"if_eq",e&&e.type,"Checkin",v),(m||0===m)&&(y+=m),y+="\n\n            <h3>",(g=n.subject)?m=g.call(e,{hash:{},data:s}):(g=e&&e.subject,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+"</h3>\n            ",(g=n.content)?m=g.call(e,{hash:{},data:s}):(g=e&&e.content,m=typeof g===b?g.call(e,{hash:{},data:s}):g),(m||0===m)&&(y+=m),y+=' <a href="/programs/',(g=n.current_program)?m=g.call(e,{hash:{},data:s}):(g=e&&e.current_program,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+"/activities/",(g=n.activity_id)?m=g.call(e,{hash:{},data:s}):(g=e&&e.activity_id,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+'">View Full Activity</a>\n\n            <div class="activity-actions">\n                <span class="action bold">\n                    ',m=n["if"].call(e,e&&e.show_like_button,{hash:{},inverse:w.program(8,c,s),fn:w.program(6,l,s),data:s}),(m||0===m)&&(y+=m),y+='\n                </span>\n                <span class="action bold"><a href="#" class="start-comment">Comment</a></span>\n                ',g=n.if_eq||e&&e.if_eq,v={hash:{},inverse:w.noop,fn:w.program(10,h,s),data:s},m=g?g.call(e,e&&e.type,"Checkin",v):x.call(e,"if_eq",e&&e.type,"Checkin",v),(m||0===m)&&(y+=m),y+='\n            </div>\n        </div>\n\n        <div class="activity-photos">\n            ',m=n["if"].call(e,e&&e.images,{hash:{},inverse:w.noop,fn:w.program(12,u,s),data:s}),(m||0===m)&&(y+=m),y+='\n        </div>\n\n\n    </div>\n    <div class="comment-holder">\n        <div class="activity-status">\n            <span class="action">\n                <span class="like-count" data-likecount="',(g=n.like_count)?m=g.call(e,{hash:{},data:s}):(g=e&&e.like_count,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+'">',(g=n.like_count)?m=g.call(e,{hash:{},data:s}):(g=e&&e.like_count,m=typeof g===b?g.call(e,{hash:{},data:s}):g),y+=_(m)+'</span> <span class="like-label">'+_((g=n.pluralize||e&&e.pluralize,v={hash:{},data:s},g?g.call(e,e&&e.like_count,"Like","Likes",v):x.call(e,"pluralize",e&&e.like_count,"Like","Likes",v)))+"</span>\n            </span>\n\n            ",g=n.if_gt||e&&e.if_gt,v={hash:{},inverse:w.noop,fn:w.program(15,p,s),data:s},m=g?g.call(e,e&&e.comments_count,3,v):x.call(e,"if_gt",e&&e.comments_count,3,v),(m||0===m)&&(y+=m),y+='\n        </div>\n        <div class="comments">\n\n        </div>\n\n        ',m=n["if"].call(e,e&&e.current_user,{hash:{},inverse:w.noop,fn:w.program(17,f,s),data:s}),(m||0===m)&&(y+=m),y+="\n    </div>\n</div>\n"}),this.ThirdChannel.templates["checkins/store"]=t.template(function(t,e,n,i,s){function r(t,e){var i,s,r="";return r+='\n<tr>\n    <td>\n        <a href="',(s=n.name)?i=s.call(t,{hash:{},data:e}):(s=t&&t.name,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+'">',(s=n.name)?i=s.call(t,{hash:{},data:e}):(s=t&&t.name,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+", #",(s=n.id)?i=s.call(t,{hash:{},data:e}):(s=t&&t.id,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+"</a>, ",(s=n.city)?i=s.call(t,{hash:{},data:e}):(s=t&&t.city,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+", ",(s=n.state)?i=s.call(t,{hash:{},data:e}):(s=t&&t.state,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+"\n        ",i=n["if"].call(t,t&&t.special_project,{hash:{},inverse:m.noop,fn:m.program(2,o,e),data:e}),(i||0===i)&&(r+=i),r+="\n\n    </td>\n    <td>",(s=n.last_checkin)?i=s.call(t,{hash:{},data:e}):(s=t&&t.last_checkin,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+"</td>\n    <td>\n        ",i=n["if"].call(t,t&&t.special_project,{hash:{},inverse:m.program(6,l,e),fn:m.program(4,a,e),data:e}),(i||0===i)&&(r+=i),r+="\n    </td>\n</tr>\n"}function o(){return"\n            <strong>This store is part of a Special Project</strong>\n        "}function a(t,e){var i,s,r="";return r+='\n            <a href="/programs/',(s=n.program)?i=s.call(t,{hash:{},data:e}):(s=t&&t.program,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+"/checkins/",(s=n.id)?i=s.call(t,{hash:{},data:e}):(s=t&&t.id,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+'/choose" class="btn btn-primary btn-sm"><strong>Checkin Here</strong></a>\n        '}function l(t,e){var i,s,r="";return r+='\n\n            <form accept-charset="UTF-8" action="/programs/',(s=n.program)?i=s.call(t,{hash:{},data:e}):(s=t&&t.program,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+'/checkins" method="post">\n                <input id="id" name="customer_store_id" type="hidden" value="',(s=n.id)?i=s.call(t,{hash:{},data:e}):(s=t&&t.id,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+'">\n                <input name="authenticity_token" value="',(s=n.authenticity_token)?i=s.call(t,{hash:{},data:e}):(s=t&&t.authenticity_token,i=typeof s===p?s.call(t,{hash:{},data:e}):s),r+=f(i)+'" type="hidden">\n                <strong><button class="btn text-same-color" name="commit"><span class="ic ic_location"></span>  Checkin Here</button></strong>\n            </form>\n        '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var c,h,u,d="",p="function",f=this.escapeExpression,m=this,g=n.blockHelperMissing;return d+='<table>\n    <tr><th>YOUR STORES</th><th>LAST CHECKIN</th><th></th></tr>\n</table>\n\n<div class="pagination"></div>\n\n',u={hash:{},inverse:m.noop,fn:m.program(1,r,s),data:s},(h=n.rows)?c=h.call(e,u):(h=e&&e.rows,c=typeof h===p?h.call(e,u):h),n.rows||(c=g.call(e,c,{hash:{},inverse:m.noop,fn:m.program(1,r,s),data:s})),(c||0===c)&&(d+=c),d}),this.ThirdChannel.templates.comment=t.template(function(t,e,n,i,s){function r(t,e){var i,s,r="";return r+='\n        <a href="/programs/',(s=n.current_program)?i=s.call(t,{hash:{},data:e}):(s=t&&t.current_program,i=typeof s===u?s.call(t,{hash:{},data:e}):s),r+=d(i)+"/profiles/",(s=n.commenter_id)?i=s.call(t,{hash:{},data:e}):(s=t&&t.commenter_id,i=typeof s===u?s.call(t,{hash:{},data:e}):s),r+=d(i)+'">',(s=n.user_name)?i=s.call(t,{hash:{},data:e}):(s=t&&t.user_name,i=typeof s===u?s.call(t,{hash:{},data:e}):s),r+=d(i)+"</a>\n        "}function o(){return"Anonymous"}function a(){return'\n<div class="pull-right">\n    <a href="#" class="fa fa-times-circle delete-comment" style="text-decoration: none; font-size: 16px;"></a>\n</div>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var l,c,h="",u="function",d=this.escapeExpression,p=this;return h+='<img src="',(c=n.user_image)?l=c.call(e,{hash:{},data:s}):(c=e&&e.user_image,l=typeof c===u?c.call(e,{hash:{},data:s}):c),h+=d(l)+'" class="user-image img-circle" onerror="this.src=\'',(c=n.user_image_error_url)?l=c.call(e,{hash:{},data:s}):(c=e&&e.user_image_error_url,l=typeof c===u?c.call(e,{hash:{},data:s}):c),h+=d(l)+'\'"/>\n\n<div class="bar-body">\n    <strong>',l=n["if"].call(e,e&&e.user_name,{hash:{},inverse:p.program(3,o,s),fn:p.program(1,r,s),data:s}),(l||0===l)&&(h+=l),h+="</strong>:\n    ",(c=n.comment)?l=c.call(e,{hash:{},data:s}):(c=e&&e.comment,l=typeof c===u?c.call(e,{hash:{},data:s}):c),(l||0===l)&&(h+=l),h+='<br/>\n    <span class="tiny">posted  <span data-livestamp="',(c=n.posted_at)?l=c.call(e,{hash:{},data:s}):(c=e&&e.posted_at,l=typeof c===u?c.call(e,{hash:{},data:s}):c),h+=d(l)+'"></span></span>\n</div>\n\n',l=n["if"].call(e,e&&e.deletable,{hash:{},inverse:p.noop,fn:p.program(5,a,s),data:s}),(l||0===l)&&(h+=l),h}),this.ThirdChannel.templates["dashboards/alerts/index/alert"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<tr>\n    <td class="',(o=n.alertClass)?r=o.call(e,{hash:{},data:s}):(o=e&&e.alertClass,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'"><a href="alerts/',(o=n.id)?r=o.call(e,{hash:{},data:s}):(o=e&&e.id,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'">',(o=n.title)?r=o.call(e,{hash:{},data:s}):(o=e&&e.title,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'</a></td>\n    <td><a href="alerts/',(o=n.id)?r=o.call(e,{hash:{},data:s}):(o=e&&e.id,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'"><span class="alert-count"><i class="fa fa-spinner fa-spin"></i></span></a></td>\n    <td></td>\n</tr>\n'}),this.ThirdChannel.templates["dashboards/alerts/index/alerts"]=t.template(function(t,e,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{},'<tbody class="alerts"></tbody>\n\n'}),this.ThirdChannel.templates["dashboards/alerts/index/group"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+="<td>",(o=n.title)?r=o.call(e,{hash:{},data:s}):(o=e&&e.title,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'</td>\n<td><span class="alert-count"></span></td>\n<td class="expander"><i class="fa fa-caret-up"></i></td>\n'}),this.ThirdChannel.templates["dashboards/alerts/index/section"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+="<table>\n    <thead>\n    <tr>\n        <th>",(o=n.title)?r=o.call(e,{hash:{},data:s}):(o=e&&e.title,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+"</th>\n        <th>Total Issues</th>\n        <th></th>\n    </tr>\n    </thead>\n</table>\n\n\n"}),this.ThirdChannel.templates["dashboards/alerts/show/store"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<td><a href="'+c((r=e&&e.profile,r=null==r||r===!1?r:r.link,typeof r===l?r.apply(e):r))+'">',(o=n.name)?r=o.call(e,{hash:{},data:s}):(o=e&&e.name,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+"</a>, ",(o=n.location)?r=o.call(e,{hash:{},data:s}):(o=e&&e.location,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+"</td>\n<td>",(o=n.dateAdded)?r=o.call(e,{hash:{},data:s}):(o=e&&e.dateAdded,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'</td>\n<td>\n    <button class="btn primary" onclick="location.href=\''+c((r=e&&e.report,r=null==r||r===!1?r:r.link,typeof r===l?r.apply(e):r))+'\'">\n        <i class="ic fa ic_report-16"></i>\n    </button>\n    <button class="btn primary" onclick="location.href=\''+c((r=e&&e.report,r=null==r||r===!1?r:r.link,typeof r===l?r.apply(e):r))+'\'">\n        <i class="ic fa ic_check"></i>\n    </button>\n\n</td>\n'}),this.ThirdChannel.templates["dashboards/alerts/show/stores"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<div class="section">\n    <table>\n        <thead>\n        <tr>\n            <th>Stores with ',(o=n.title)?r=o.call(e,{hash:{},data:s}):(o=e&&e.title,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+"</th>\n            <th>Date Added</th>\n            <th>Actions</th>\n        </tr>\n        </thead>\n        <tbody></tbody>\n    </table>\n</div>\n\n"}),this.ThirdChannel.templates.filter_active_item=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<input type="checkbox" name="',(o=n.param)?r=o.call(e,{hash:{},data:s}):(o=e&&e.param,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'" value="',(o=n.value)?r=o.call(e,{hash:{},data:s}):(o=e&&e.value,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'" class="filter-input" checked="true"/>\n<div class="btn default ic_check"></div>\n<span>',(o=n.label)?r=o.call(e,{hash:{},data:s}):(o=e&&e.label,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+"</span>"}),this.ThirdChannel.templates.filters=t.template(function(t,e,n,i,s){function r(t,e){var i,s="";return s+="\n    ",i=n["if"].call(t,t&&t.name,{hash:{},inverse:u.noop,fn:u.program(2,o,e),data:e}),(i||0===i)&&(s+=i),s+="\n"}function o(t,e){var i,s,r="";return r+='\n    <div class="filter-component" data-filter-param="',(s=n.name)?i=s.call(t,{hash:{},data:e}):(s=t&&t.name,i=typeof s===c?s.call(t,{hash:{},data:e}):s),r+=h(i)+'">\n        <div class="filter-item">',(s=n.label)?i=s.call(t,{hash:{},data:e}):(s=t&&t.label,i=typeof s===c?s.call(t,{hash:{},data:e}):s),r+=h(i)+' <span class="expand-indicator"></span></div>\n        <div class="filter-list">\n            ',i=n.each.call(t,t&&t.items,{hash:{},inverse:u.noop,fn:u.program(3,a,e),data:e}),(i||0===i)&&(r+=i),r+="\n        </div>\n    </div>\n    "}function a(t){var e,n="";return n+='\n                <div class="filter-list-item" data-value="'+h((e=t&&t[1],typeof e===c?e.apply(t):e))+'">\n                    <div class="btn default">&nbsp;</div>\n                    <span>'+h((e=t&&t[0],typeof e===c?e.apply(t):e))+"</span>\n                </div>\n            "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var l,c="function",h=this.escapeExpression,u=this;return l=n.each.call(e,e,{hash:{},inverse:u.noop,fn:u.program(1,r,s),data:s}),l||0===l?l:""}),this.ThirdChannel.templates["filters/date_component"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<div class="filter-component" data-type="date">\n  <div class="filter-item">',(o=n.label)?r=o.call(e,{hash:{},data:s}):(o=e&&e.label,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'<span class="expand-indicator"></span></div>\n  <div class="filter-list">\n        <div class="filter-list-item">\n          <p>Please enter the date:</p>\n          <input type="date"/>\n        </div>\n  </div>\n</div>'}),this.ThirdChannel.templates["filters/list_component"]=t.template(function(t,e,n,i,s){function r(t,e){var i,s,r="";return r+='\n        <div class="filter-list-item flexible" data-value="',(s=n.value)?i=s.call(t,{hash:{},data:e}):(s=t&&t.value,i=typeof s===u?s.call(t,{hash:{},data:e}):s),r+=d(i)+'">\n          <div class="btn default">&nbsp;</div><span>',(s=n.name)?i=s.call(t,{hash:{},data:e}):(s=t&&t.name,i=typeof s===u?s.call(t,{hash:{},data:e}):s),r+=d(i)+"</span>\n        </div>\n    "}function o(){return"\n    	<p>There are no items for this filter.</p>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var a,l,c,h="",u="function",d=this.escapeExpression,p=this,f=n.blockHelperMissing;return h+='<div class="filter-component">\n  <div class="filter-item">',(l=n.label)?a=l.call(e,{hash:{},data:s}):(l=e&&e.label,a=typeof l===u?l.call(e,{hash:{},data:s}):l),h+=d(a)+'<span class="expand-indicator"></span></div>\n  <div class="filter-list">\n    ',c={hash:{},inverse:p.program(3,o,s),fn:p.program(1,r,s),data:s},(l=n.items)?a=l.call(e,c):(l=e&&e.items,a=typeof l===u?l.call(e,c):l),n.items||(a=f.call(e,a,{hash:{},inverse:p.program(3,o,s),fn:p.program(1,r,s),data:s})),(a||0===a)&&(h+=a),h+="\n  </div>\n</div>"}),this.ThirdChannel.templates["filters/spinner_component"]=t.template(function(t,e,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{},"<div class='filter-component spinner'>\n    <div class='filter-item'>\n        <i class='fa fa-spinner fa-spin'></i>\n    </div>\n</div>\""}),this.ThirdChannel.templates.incomplete_activities=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<div class="activity-holder">\n<h3>',(o=n.incomplete)?r=o.call(e,{hash:{},data:s}):(o=e&&e.incomplete,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+' Checkins in progress</h3>\n    <a href="/programs/',(o=n.current_program)?r=o.call(e,{hash:{},data:s}):(o=e&&e.current_program,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'/activities/current_checkins">View Locations  <i class="fa fa-chevron-right"></i></a>\n</div>'}),this.ThirdChannel.templates.loading=t.template(function(t,e,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{},'<div class="section loading-section">\n    <div class="loading">\n        <div class="fa fa-spin fa-spinner"></div> Loading...\n    </div>\n</div>\n\n'}),this.ThirdChannel.templates["new-comment"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<img src="'+c((r=e&&e.current_user,r=null==r||r===!1?r:r.user_image,typeof r===l?r.apply(e):r))+'" class="user-image hidden-xs img-circle" onerror="this.src=\'',(o=n.user_image_error_url)?r=o.call(e,{hash:{},data:s}):(o=e&&e.user_image_error_url,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'\'"/>\n\n<div class="bar-body">\n\n    <textarea rows="1" class="expanding new-comment-field" placeholder="Write a comment..."></textarea>\n\n    <button class="btn light solid add-comment">Comment</button>\n</div>'}),this.ThirdChannel.templates.no_results=t.template(function(t,e,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{},'<div class="">\n    <i class="fa fa-ban"></i> No Results Found\n</div>\n'}),this.ThirdChannel.templates["notifications/badge"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return(o=n.count)?r=o.call(e,{hash:{},data:s}):(o=e&&e.count,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+"\n\n"}),this.ThirdChannel.templates["notifications/notification"]=t.template(function(t,e,n,i,s){function r(t,e){var i,s,r,a="";return a+="\n<tr>\n    <td class=\"<%= note.read ? 'read' : 'unread' %>\">\n        <p>\n            ",(s=n.author_url)?i=s.call(t,{hash:{},data:e}):(s=t&&t.author_url,i=typeof s===f?s.call(t,{hash:{},data:e}):s),(i||0===i)&&(a+=i),a+="\n                <span>\n                    ",(s=n.verb)?i=s.call(t,{hash:{},data:e}):(s=t&&t.verb,i=typeof s===f?s.call(t,{hash:{},data:e}):s),a+=v(i)+"\n                    ",s=n.if_eq||t&&t.if_eq,r={hash:{},inverse:m.noop,fn:m.program(2,o,e),data:e},i=s?s.call(t,"Comment",t&&t.note_type,r):g.call(t,"if_eq","Comment",t&&t.note_type,r),(i||0===i)&&(a+=i),a+="\n                    on ",(s=n.created_at)?i=s.call(t,{hash:{},data:e}):(s=t&&t.created_at,i=typeof s===f?s.call(t,{hash:{},data:e}):s),a+=v(i)+":\n                </span>\n        </p>\n        ",(s=n.content)?i=s.call(t,{hash:{},data:e}):(s=t&&t.content,i=typeof s===f?s.call(t,{hash:{},data:e}):s),(i||0===i)&&(a+=i),a+='\n        <div class="table-actions">\n            ',(s=n.activity_url)?i=s.call(t,{hash:{},data:e}):(s=t&&t.activity_url,i=typeof s===f?s.call(t,{hash:{},data:e}):s),(i||0===i)&&(a+=i),a+=" | ",(s=n.delete_url)?i=s.call(t,{hash:{},data:e}):(s=t&&t.delete_url,i=typeof s===f?s.call(t,{hash:{},data:e}):s),(i||0===i)&&(a+=i),a+="\n        </div>\n    </td>\n</tr>\n"
>>>>>>> -added alert resolution to the store_profile index page
}function o(t,e){var i,s,r,o="";return o+="\n\n                        ",s=n.if_eq||t&&t.if_eq,r={hash:{},inverse:m.noop,fn:m.program(3,a,e),data:e},i=s?s.call(t,t&&t.parent_type,"message",r):g.call(t,"if_eq",t&&t.parent_type,"message",r),(i||0===i)&&(o+=i),o+="\n                    "}function a(t,e){var i,s,r,o="";return o+="\n                            on\n                            ",s=n.if_eq||t&&t.if_eq,r={hash:{},inverse:m.program(6,c,e),fn:m.program(4,l,e),data:e},i=s?s.call(t,(i=t&&t.parent_user,null==i||i===!1?i:i.id),t&&t.current_user,r):g.call(t,"if_eq",(i=t&&t.parent_user,null==i||i===!1?i:i.id),t&&t.current_user,r),(i||0===i)&&(o+=i),o+="\n\n                            ",(s=n.parent_type)?i=s.call(t,{hash:{},data:e}):(s=t&&t.parent_type,i=typeof s===f?s.call(t,{hash:{},data:e}):s),o+=v(i)+"\n                        "}function l(){return"\n                                your\n                            "}function c(t){var e,n="";return n+="\n                               ",e=t&&t.parent_user,e=null==e||e===!1?e:e.url,e=typeof e===f?e.apply(t):e,(e||0===e)&&(n+=e),n+="\n                            "}function h(){return"\n<tr>\n    <td>You have no notifications</td>\n</tr>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var u,d,p,f="function",m=this,g=n.helperMissing,v=this.escapeExpression,y=n.blockHelperMissing;return p={hash:{},inverse:m.program(8,h,s),fn:m.program(1,r,s),data:s},(d=n.rows)?u=d.call(e,p):(d=e&&e.rows,u=typeof d===f?d.call(e,p):d),n.rows||(u=y.call(e,u,{hash:{},inverse:m.program(8,h,s),fn:m.program(1,r,s),data:s})),u||0===u?u:""}),this.ThirdChannel.templates.pagination=t.template(function(t,e,n,i,s){function r(t,e){var i,s="";return s+='\n        <nav class="pagination">\n        ',i=n["if"].call(t,t&&t.firstPage,{hash:{},inverse:v.noop,fn:v.program(2,o,e),data:e}),(i||0===i)&&(s+=i),s+="\n        ",i=n["if"].call(t,t&&t.lessPages,{hash:{},inverse:v.noop,fn:v.program(4,a,e),data:e}),(i||0===i)&&(s+=i),s+="\n        ",i=n.each.call(t,t&&t.pages,{hash:{},inverse:v.noop,fn:v.programWithDepth(6,l,e,t),data:e}),(i||0===i)&&(s+=i),s+="\n        ",i=n["if"].call(t,t&&t.morePages,{hash:{},inverse:v.noop,fn:v.program(4,a,e),data:e}),(i||0===i)&&(s+=i),s+="\n        ",i=n["if"].call(t,t&&t.lastPage,{hash:{},inverse:v.noop,fn:v.program(11,u,e),data:e}),(i||0===i)&&(s+=i),s+="\n        </nav>\n    "}function o(){return'\n            <span class="first page">\n                <a href="?page=1">1</a>\n            </span>\n        '}function a(){return'\n            <span class="page gap">...</span>\n        '}function l(t,e,i){var s,r,o,a="";return a+="\n            ",r=n.if_eq||i&&i.if_eq,o={hash:{},inverse:v.program(9,h,e),fn:v.program(7,c,e),data:e},s=r?r.call(t,i&&i.currentPage,t,o):y.call(t,"if_eq",i&&i.currentPage,t,o),(s||0===s)&&(a+=s),a+="\n        "}function c(t){var e="";return e+='\n                <span class="page current">'+g(typeof t===m?t.apply(t):t)+"</span>\n            "}function h(t){var e="";return e+='\n                <span class="page">\n                    <a href="?page='+g(typeof t===m?t.apply(t):t)+'">'+g(typeof t===m?t.apply(t):t)+"</a>\n                </span>\n            "}function u(t,e){var i,s,r="";return r+='\n            <span class="last page">\n                <a href="?page=',(s=n.lastPage)?i=s.call(t,{hash:{},data:e}):(s=t&&t.lastPage,i=typeof s===m?s.call(t,{hash:{},data:e}):s),r+=g(i)+'">',(s=n.lastPage)?i=s.call(t,{hash:{},data:e}):(s=t&&t.lastPage,i=typeof s===m?s.call(t,{hash:{},data:e}):s),r+=g(i)+"</a>\n            </span>\n        "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var d,p,f="",m="function",g=this.escapeExpression,v=this,y=n.helperMissing;return f+='<div class="pagination-holder">\n    <span class="pagination-info"><strong>',(p=n.infoText)?d=p.call(e,{hash:{},data:s}):(p=e&&e.infoText,d=typeof p===m?p.call(e,{hash:{},data:s}):p),f+=g(d)+"</strong> of <strong>",(p=n.totalCount)?d=p.call(e,{hash:{},data:s}):(p=e&&e.totalCount,d=typeof p===m?p.call(e,{hash:{},data:s}):p),f+=g(d)+"</strong></span>\n\n    ",d=n["if"].call(e,e&&e.showPages,{hash:{},inverse:v.noop,fn:v.program(1,r,s),data:s}),(d||0===d)&&(f+=d),f+="\n</div>\n"}),this.ThirdChannel.templates["photo-modal"]=t.template(function(t,e,n,i,s){function r(t,e,i){var s,r,o="";return o+='\n            <div class="swiper-slide">\n                <img src="',(r=n.url)?s=r.call(t,{hash:{},data:e}):(r=t&&t.url,s=typeof r===l?r.call(t,{hash:{},data:e}):r),o+=c(s)+'" class="img-responsive " onerror="this.src=\''+c((s=i&&i.content_image_error_url,typeof s===l?s.apply(t):s))+"'\"/>\n            </div>\n        "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var o,a="",l="function",c=this.escapeExpression,h=this;return a+='<div class="bbm-button close-modal"><i class="ic ic_x"></i></div>\n<div class="swiper-container">\n    <div class="swiper-wrapper">\n        ',o=n.each.call(e,e&&e.images,{hash:{},inverse:h.noop,fn:h.programWithDepth(1,r,s,e),data:s}),(o||0===o)&&(a+=o),a+='\n    </div>\n    <div class="arrow arrow-left"><i class="ic ic_left"></i></div>\n    <div class="arrow arrow-right"><i class="ic ic_right"></i></div>\n</div>'}),this.ThirdChannel.templates["reports/index/section"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<div class="section ',(o=n.css_class)?r=o.call(e,{hash:{},data:s}):(o=e&&e.css_class,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'">\n    <h2>',(o=n.title)?r=o.call(e,{hash:{},data:s}):(o=e&&e.title,r=typeof o===l?o.call(e,{hash:{},data:s}):o),(r||0===r)&&(a+=r),a+='</h2>\n    <div class="subsections"></div>\n</div>'}),this.ThirdChannel.templates["reports/index/subsection"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<div class="subsection ',(o=n.css_class)?r=o.call(e,{hash:{},data:s}):(o=e&&e.css_class,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'">\n    <div>\n    <h3>',(o=n.title)?r=o.call(e,{hash:{},data:s}):(o=e&&e.title,r=typeof o===l?o.call(e,{hash:{},data:s}):o),(r||0===r)&&(a+=r),a+='</h3>\n    <div class="widgets"></div>\n    </div>\n</div>'}),this.ThirdChannel.templates["reports/info/show/checkin"]=t.template(function(t,e,n,i,s){function r(){return"\n            by\n        "}function o(t){var e="";return e+='\n        <div class="info">'+u(typeof t===h?t.apply(t):t)+"</div>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var a,l,c="",h="function",u=this.escapeExpression,d=this;return c+='<div class="checkin">\n    <h3 class="pull-right"><a href="',(l=n.link)?a=l.call(e,{hash:{},data:s}):(l=e&&e.link,a=typeof l===h?l.call(e,{hash:{},data:s}):l),c+=u(a)+'">View Report</a></h3>\n    <h3>',(l=n.created_at)?a=l.call(e,{hash:{},data:s}):(l=e&&e.created_at,a=typeof l===h?l.call(e,{hash:{},data:s}):l),c+=u(a)+"\n        ",a=n["if"].call(e,e&&e.user,{hash:{},inverse:d.noop,fn:d.program(1,r,s),data:s}),(a||0===a)&&(c+=a),c+='\n        <a href="',(l=n.user_link)?a=l.call(e,{hash:{},data:s}):(l=e&&e.user_link,a=typeof l===h?l.call(e,{hash:{},data:s}):l),c+=u(a)+'">',(l=n.user)?a=l.call(e,{hash:{},data:s}):(l=e&&e.user,a=typeof l===h?l.call(e,{hash:{},data:s}):l),c+=u(a)+"</a>\n    </h3>\n\n    ",a=n.each.call(e,e&&e.info,{hash:{},inverse:d.noop,fn:d.program(3,o,s),data:s}),(a||0===a)&&(c+=a),c+="\n</div>\n\n\n"}),this.ThirdChannel.templates["reports/info/show/info_list"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<div class="report-info-list">\n    <div class="pages"></div>\n\n    <div class="section">\n        <table>\n            <thead>\n            <th>',(o=n.header_1)?r=o.call(e,{hash:{},data:s}):(o=e&&e.header_1,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+"</th>\n            <th>",(o=n.header_2)?r=o.call(e,{hash:{},data:s}):(o=e&&e.header_2,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'</th>\n            </thead>\n            <tbody class="list-items"></tbody>\n        </table>\n    </div>\n</div>'}),this.ThirdChannel.templates["reports/info/show/list_item"]=t.template(function(t,e,n,i,s){function r(){return'\n                <i class="fa fa-lg fa-angle-down"></i>\n            '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var o,a,l="",c="function",h=this.escapeExpression,u=this;return l+='<tr>\n        <td><span class="bold"><a href="',(a=n.label_1_link)?o=a.call(e,{hash:{},data:s}):(a=e&&e.label_1_link,o=typeof a===c?a.call(e,{hash:{},data:s}):a),l+=h(o)+'">',(a=n.label_1)?o=a.call(e,{hash:{},data:s}):(a=e&&e.label_1,o=typeof a===c?a.call(e,{hash:{},data:s}):a),l+=h(o)+"</a></span> <span>",(a=n.label_2)?o=a.call(e,{hash:{},data:s}):(a=e&&e.label_2,o=typeof a===c?a.call(e,{hash:{},data:s}):a),l+=h(o)+"</span></td>\n        <td>",(a=n.column_value)?o=a.call(e,{hash:{},data:s}):(a=e&&e.column_value,o=typeof a===c?a.call(e,{hash:{},data:s}):a),l+=h(o)+'</td>\n        <td class="info-toggle">\n            ',o=n["if"].call(e,e&&e.column_value,{hash:{},inverse:u.noop,fn:u.program(1,r,s),data:s}),(o||0===o)&&(l+=o),l+='\n        </td>\n</tr><tr class="checkins hide">\n    <td colspan="3"></td>\n</tr>\n'}),this.ThirdChannel.templates["reports/widgets/bar_chart"]=t.template(function(t,e,n,i,s){function r(){return'\n            <a href="#" class="breakdown-link" tag="View Breakdown">View Breakdown</a>\n        '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var o,a,l,c="",h="function",u=this.escapeExpression,d=n.helperMissing,p=this;return c+='<div class="'+u((o=e&&e.config,o=null==o||o===!1?o:o.widget_class,typeof o===h?o.apply(e):o))+'">\n    <div class="bar-chart">\n        <div>',(a=n.title)?o=a.call(e,{hash:{},data:s}):(a=e&&e.title,o=typeof a===h?a.call(e,{hash:{},data:s}):a),c+=u(o)+"</div>\n        <div class='progress'>\n            <div class='progress-bar "+u((a=n.threshold_class||e&&e.threshold_class,l={hash:{},data:s},a?a.call(e,(o=e&&e.config,null==o||o===!1?o:o.threshold),(o=e&&e.config,null==o||o===!1?o:o.selected_key),(o=e&&e.results,null==o||o===!1?o:o.percentages),l):d.call(e,"threshold_class",(o=e&&e.config,null==o||o===!1?o:o.threshold),(o=e&&e.config,null==o||o===!1?o:o.selected_key),(o=e&&e.results,null==o||o===!1?o:o.percentages),l)))+"' role='progressbar' aria-valuenow='"+u((a=n.value_lookup||e&&e.value_lookup,l={hash:{},data:s},a?a.call(e,(o=e&&e.config,null==o||o===!1?o:o.selected_key),(o=e&&e.results,null==o||o===!1?o:o.percentages),l):d.call(e,"value_lookup",(o=e&&e.config,null==o||o===!1?o:o.selected_key),(o=e&&e.results,null==o||o===!1?o:o.percentages),l)))+"' aria-valuemin='0' aria-valuemax='100' style='width: "+u((a=n.value_lookup||e&&e.value_lookup,l={hash:{},data:s},a?a.call(e,"Yes",(o=e&&e.results,null==o||o===!1?o:o.percentages),l):d.call(e,"value_lookup","Yes",(o=e&&e.results,null==o||o===!1?o:o.percentages),l)))+"%;'>\n                <span>"+u((a=n.value_lookup||e&&e.value_lookup,l={hash:{},data:s},a?a.call(e,(o=e&&e.config,null==o||o===!1?o:o.selected_key),(o=e&&e.results,null==o||o===!1?o:o.percentages),l):d.call(e,"value_lookup",(o=e&&e.config,null==o||o===!1?o:o.selected_key),(o=e&&e.results,null==o||o===!1?o:o.percentages),l)))+"% "+u((o=e&&e.config,o=null==o||o===!1?o:o.selected_key,typeof o===h?o.apply(e):o))+"</span>\n            </div>\n        </div>\n        ",o=n["if"].call(e,e&&e.show_view_list,{hash:{},inverse:p.noop,fn:p.program(1,r,s),data:s}),(o||0===o)&&(c+=o),c+="\n    </div>\n</div>"}),this.ThirdChannel.templates["reports/widgets/default"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o="",a="function",l=this.escapeExpression;return o+='<div class="'+l((r=e&&e.config,r=null==r||r===!1?r:r.widget_class,typeof r===a?r.apply(e):r))+'">\n</div>'}),this.ThirdChannel.templates["reports/widgets/donut_chart"]=t.template(function(t,e,n,i,s){function r(t,e,i){var s,r,a,l="";return l+='\n                    <tr>\n                        <td>\n                            <i class="fa fa-circle" style="color: '+d((r=n.value_lookup||t&&t.value_lookup,a={hash:{},data:e},r?r.call(t,t,(s=i&&i.config,null==s||s===!1?s:s.legendColors),a):u.call(t,"value_lookup",t,(s=i&&i.config,null==s||s===!1?s:s.legendColors),a)))+'"></i>\n                        </td>\n                        <td>\n                            '+d((r=n.value_lookup||t&&t.value_lookup,a={hash:{},data:e},r?r.call(t,t,(s=i&&i.results,null==s||s===!1?s:s.percentages),a):u.call(t,"value_lookup",t,(s=i&&i.results,null==s||s===!1?s:s.percentages),a)))+"% "+d(typeof t===p?t.apply(t):t)+"\n                        </td>\n                    </tr>\n                    ",s=n["if"].call(t,(s=i&&i.config,null==s||s===!1?s:s.count_text),{hash:{},inverse:f.noop,fn:f.programWithDepth(2,o,e,t,i),data:e}),(s||0===s)&&(l+=s),l+="\n                "}function o(t,e,i,s){var r,o,a,l="";return l+="\n                        <tr>\n                            <td></td>\n                            <td>\n                                "+d((o=n.format_number_from_value_lookup||i&&i.format_number_from_value_lookup,a={hash:{},data:e},o?o.call(t,i,(r=s&&s.results,null==r||r===!1?r:r.counts),a):u.call(t,"format_number_from_value_lookup",i,(r=s&&s.results,null==r||r===!1?r:r.counts),a)))+" "+d((r=s&&s.config,r=null==r||r===!1?r:r.count_text,typeof r===p?r.apply(t):r))+"\n                            </td>\n                        </tr>\n                    "}function a(){return'\n                <a href="#" class="breakdown-link" tag="View Breakdown">View Breakdown</a>\n            '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var l,c,h="",u=n.helperMissing,d=this.escapeExpression,p="function",f=this;return h+='<div class="widget chart donut '+d((l=e&&e.config,l=null==l||l===!1?l:l.widget_class,typeof l===p?l.apply(e):l))+'">\n    <p>',(c=n.title)?l=c.call(e,{hash:{},data:s}):(c=e&&e.title,l=typeof c===p?c.call(e,{hash:{},data:s}):c),h+=d(l)+'</p>\n    <div>\n        <canvas width="120" height="120"></canvas>\n        <div class="legend">\n            <table>\n                ',l=n.each.call(e,(l=e&&e.config,null==l||l===!1?l:l.legendOrder),{hash:{},inverse:f.noop,fn:f.programWithDepth(1,r,s,e),data:s}),(l||0===l)&&(h+=l),h+="\n            </table>\n            ",l=n["if"].call(e,e&&e.show_view_list,{hash:{},inverse:f.noop,fn:f.program(4,a,s),data:s}),(l||0===l)&&(h+=l),h+="\n        </div>\n    </div>\n</div>"}),this.ThirdChannel.templates["reports/widgets/horizontal_bar_chart"]=t.template(function(t,e,n,i,s){function r(){return'\n              <a href="#" class="breakdown-link" tag="View Breakdown">View Breakdown</a>\n            '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var o,a,l="",c="function",h=this.escapeExpression,u=this;return l+='<div class="widget '+h((o=e&&e.config,o=null==o||o===!1?o:o.widget_class,typeof o===c?o.apply(e):o))+'">\n    <div>\n        <div class="chart horizontal-bar">\n            <p>',(a=n.title)?o=a.call(e,{hash:{},data:s}):(a=e&&e.title,o=typeof a===c?a.call(e,{hash:{},data:s}):a),l+=h(o)+"</p>\n            ",o=n["if"].call(e,e&&e.show_view_list,{hash:{},inverse:u.noop,fn:u.program(1,r,s),data:s}),(o||0===o)&&(l+=o),l+="\n            <canvas></canvas>\n        </div>\n    </div>\n</div>"}),this.ThirdChannel.templates["reports/widgets/leading_row"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a,l="",c="function",h=this.escapeExpression,u=n.helperMissing;return l+='<div class="widget small-padding '+h((r=e&&e.config,r=null==r||r===!1?r:r.widget_class,typeof r===c?r.apply(e):r))+'">\n    <div class="leading-dots leading-row">\n        <span class="pull-right">'+h((o=n.format_number_from_value_lookup||e&&e.format_number_from_value_lookup,a={hash:{},data:s},o?o.call(e,(r=e&&e.config,null==r||r===!1?r:r.selected_key),(r=e&&e.results,null==r||r===!1?r:r.counts),a):u.call(e,"format_number_from_value_lookup",(r=e&&e.config,null==r||r===!1?r:r.selected_key),(r=e&&e.results,null==r||r===!1?r:r.counts),a)))+"</span>\n        <span>",(o=n.title)?r=o.call(e,{hash:{},data:s}):(o=e&&e.title,r=typeof o===c?o.call(e,{hash:{},data:s}):o),l+=h(r)+"</span>\n    </div>\n</div>"}),this.ThirdChannel.templates["reports/widgets/list_icon"]=t.template(function(t,e,n,i,s){function r(t,e){var i,s,r,a="";return a+="\n            ",s=n.eachRange||t&&t.eachRange,r={hash:{},inverse:p.noop,fn:p.program(2,o,e),data:e},i=s?s.call(t,0,3,(i=t&&t.results,null==i||i===!1?i:i.list),r):f.call(t,"eachRange",0,3,(i=t&&t.results,null==i||i===!1?i:i.list),r),(i||0===i)&&(a+=i),a+="\n        "}function o(t){var e="";return e+="\n                <h4>"+d(typeof t===u?t.apply(t):t)+"</h4>\n            "}function a(){return"\n            <h4>N/A</h4>\n        "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var l,c,h="",u="function",d=this.escapeExpression,p=this,f=n.helperMissing;return h+='<div class="'+d((l=e&&e.config,l=null==l||l===!1?l:l.widget_class,typeof l===u?l.apply(e):l))+'" style="padding-left: 70px;">\n    <div class="pull-left" style="margin-left: -70px;">\n        <div class="circle-icon circle-md">\n            <div class="circle '+d((l=e&&e.config,l=null==l||l===!1?l:l.circle_css,typeof l===u?l.apply(e):l))+'"><div class="tc-icons tc-icons-md tc-icons_'+d((l=e&&e.config,l=null==l||l===!1?l:l.icon,typeof l===u?l.apply(e):l))+'"></div></div>\n        </div>\n    </div>\n    <div class="pull-left">\n        <div>',(c=n.title)?l=c.call(e,{hash:{},data:s}):(c=e&&e.title,l=typeof c===u?c.call(e,{hash:{},data:s}):c),h+=d(l)+"</div>\n\n        ",l=n["if"].call(e,(l=e&&e.results,null==l||l===!1?l:l.list),{hash:{},inverse:p.program(4,a,s),fn:p.program(1,r,s),data:s}),(l||0===l)&&(h+=l),h+='\n    </div>\n    <div class="clearfix"></div>\n</div>'}),this.ThirdChannel.templates["reports/widgets/metric_icon"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a,l="",c="function",h=this.escapeExpression,u=n.helperMissing;return l+='<div class="widget metric-icon '+h((r=e&&e.config,r=null==r||r===!1?r:r.widget_class,typeof r===c?r.apply(e):r))+'">\n    <h2>'+h((r=e&&e.config,r=null==r||r===!1?r:r.prepend_count,typeof r===c?r.apply(e):r))+h((o=n.format_number||e&&e.format_number,a={hash:{},data:s},o?o.call(e,(r=e&&e.results,null==r||r===!1?r:r.count),a):u.call(e,"format_number",(r=e&&e.results,null==r||r===!1?r:r.count),a)))+"</h2>\n    <p>",(o=n.title)?r=o.call(e,{hash:{},data:s}):(o=e&&e.title,r=typeof o===c?o.call(e,{hash:{},data:s}):o),l+=h(r)+"</p>\n</div>"}),this.ThirdChannel.templates["reports/widgets/multi_question_totals"]=t.template(function(t,e,n,i,s){function r(t,e){var i,s,r="";return r+="\n        <tr>\n            <td>",(s=n.title)?i=s.call(t,{hash:{},data:e}):(s=t&&t.title,i=typeof s===c?s.call(t,{hash:{},data:e}):s),r+=h(i)+"</td>\n            <td>",(s=n.sum)?i=s.call(t,{hash:{},data:e}):(s=t&&t.sum,i=typeof s===c?s.call(t,{hash:{},data:e}):s),r+=h(i)+"</td>\n        </tr>\n        "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var o,a,l="",c="function",h=this.escapeExpression,u=this;return l+='<div class="widget '+h((o=e&&e.config,o=null==o||o===!1?o:o.widget_class,typeof o===c?o.apply(e):o))+'">\n    <table>\n        <thead>\n        <th colspan="2">',(a=n.title)?o=a.call(e,{hash:{},data:s}):(a=e&&e.title,o=typeof a===c?a.call(e,{hash:{},data:s}):a),l+=h(o)+"</th>\n        </thead>\n        <tbody>\n        ",o=n.each.call(e,(o=e&&e.results,null==o||o===!1?o:o.rows),{hash:{},inverse:u.noop,fn:u.program(1,r,s),data:s}),(o||0===o)&&(l+=o),l+="\n        <tr>\n            <td><strong>Total # "+h((o=e&&e.config,o=null==o||o===!1?o:o.count_text,typeof o===c?o.apply(e):o))+"</strong></td>\n            <td><strong>"+h((o=e&&e.results,o=null==o||o===!1?o:o.total,typeof o===c?o.apply(e):o))+"</strong></td>\n        </tr>\n        </tbody>\n    </table>\n</div>"}),this.ThirdChannel.templates["reports/widgets/overview_icon"]=t.template(function(t,e,n,i,s){function r(){return'\n            <a href="#" class="breakdown-link" tag="View Breakdown">\n        '}function o(){return"\n        </a>\n        "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var a,l,c,h="",u="function",d=this.escapeExpression,p=this,f=n.helperMissing;return h+='<div class="overview '+d((a=e&&e.config,a=null==a||a===!1?a:a.widget_class,typeof a===u?a.apply(e):a))+'">\n    <div>\n        ',a=n["if"].call(e,e&&e.show_view_list,{hash:{},inverse:p.noop,fn:p.program(1,r,s),data:s}),(a||0===a)&&(h+=a),h+="\n        <h2>"+d((l=n.format_number||e&&e.format_number,c={hash:{},data:s},l?l.call(e,(a=e&&e.results,null==a||a===!1?a:a.count),c):f.call(e,"format_number",(a=e&&e.results,null==a||a===!1?a:a.count),c)))+"</h2>\n        ",a=n["if"].call(e,e&&e.show_view_list,{hash:{},inverse:p.noop,fn:p.program(3,o,s),data:s}),(a||0===a)&&(h+=a),h+="\n        <div>",(l=n.title)?a=l.call(e,{hash:{},data:s}):(l=e&&e.title,a=typeof l===u?l.call(e,{hash:{},data:s}):l),h+=d(a)+"</div>\n    </div>\n</div>\n"}),this.ThirdChannel.templates["reports/widgets/percent_icon"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a,l="",c="function",h=this.escapeExpression,u=n.helperMissing;return l+='<div class="'+h((r=e&&e.config,r=null==r||r===!1?r:r.widget_class,typeof r===c?r.apply(e):r))+'">\n    <div class="icon">\n        <p class="left '+h((r=e&&e.config,r=null==r||r===!1?r:r.title_class,typeof r===c?r.apply(e):r))+'">',(o=n.title)?r=o.call(e,{hash:{},data:s}):(o=e&&e.title,r=typeof o===c?o.call(e,{hash:{},data:s}):o),l+=h(r)+'</p>\n        <div class="row">\n            <div class="col-xs-12 col-md-5 percent_icon_arrow">\n                <span class="tc-icons tc-icons-sm tc-icons_'+h((r=e&&e.config,r=null==r||r===!1?r:r.icon,typeof r===c?r.apply(e):r))+' inverse"></span>\n            </div>\n            <div class="col-xs-12 col-md-6 percent_icon_stats">\n                 <span class="legend">\n                         <span class="legend-item center bold positive">'+h((o=n.value_lookup||e&&e.value_lookup,a={hash:{},data:s},o?o.call(e,(r=e&&e.config,null==r||r===!1?r:r.selected_key),(r=e&&e.results,null==r||r===!1?r:r.percentages),a):u.call(e,"value_lookup",(r=e&&e.config,null==r||r===!1?r:r.selected_key),(r=e&&e.results,null==r||r===!1?r:r.percentages),a)))+"% "+h((r=e&&e.config,r=null==r||r===!1?r:r.selected_key,typeof r===c?r.apply(e):r))+'</span><br/>\n                         <span class="legend-item center">'+h((o=n.format_number_from_value_lookup||e&&e.format_number_from_value_lookup,a={hash:{},data:s},o?o.call(e,(r=e&&e.config,null==r||r===!1?r:r.selected_key),(r=e&&e.results,null==r||r===!1?r:r.counts),a):u.call(e,"format_number_from_value_lookup",(r=e&&e.config,null==r||r===!1?r:r.selected_key),(r=e&&e.results,null==r||r===!1?r:r.counts),a)))+" "+h((r=e&&e.config,r=null==r||r===!1?r:r.count_text,typeof r===c?r.apply(e):r))+"</span>\n                 </span>\n            </div>\n\n\n\n        </div>\n\n    </div>\n</div>"}),this.ThirdChannel.templates["reports/widgets/quadrant_chart"]=t.template(function(t,e,n,i,s){function r(t,e,i){var s,r,a,l="";return l+='\n                    <div class="square" style="background-color: '+u((r=n.value_lookup||i&&i.value_lookup,a={hash:{},data:e},r?r.call(t,null==e||e===!1?e:e.key,(s=i&&i.config,null==s||s===!1?s:s.chartColors),a):h.call(t,"value_lookup",null==e||e===!1?e:e.key,(s=i&&i.config,null==s||s===!1?s:s.chartColors),a)))+'">\n                        <div class="l_content">\n                            <div class="l_table">\n                                <div class="l_table-cell">\n                                    <h2>'+u((r=n.value_lookup||t&&t.value_lookup,a={hash:{},data:e},r?r.call(t,t,(s=i&&i.results,null==s||s===!1?s:s.percentages),a):h.call(t,"value_lookup",t,(s=i&&i.results,null==s||s===!1?s:s.percentages),a)))+"%</h2>\n                                    ",s=n["if"].call(t,(s=i&&i.config,null==s||s===!1?s:s.count_text),{hash:{},inverse:p.noop,fn:p.programWithDepth(2,o,e,t,i),data:e}),(s||0===s)&&(l+=s),l+="\n                                </div>\n                            </div>\n\n                        </div>\n                    </div>\n\n                "}function o(t,e,i,s){var r,o,a,l="";return l+="\n                                        <div>"+u((o=n.format_number_from_value_lookup||i&&i.format_number_from_value_lookup,a={hash:{},data:e},o?o.call(t,i,(r=s&&s.results,null==r||r===!1?r:r.counts),a):h.call(t,"format_number_from_value_lookup",i,(r=s&&s.results,null==r||r===!1?r:r.counts),a)))+" "+u((r=s&&s.config,r=null==r||r===!1?r:r.count_text,typeof r===d?r.apply(t):r))+"</div>\n                                    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var a,l,c="",h=n.helperMissing,u=this.escapeExpression,d="function",p=this;return c+='<div class="widget '+u((a=e&&e.config,a=null==a||a===!1?a:a.widget_class,typeof a===d?a.apply(e):a))+'">\n    <div class="chart quadrant">\n        <p>',(l=n.title)?a=l.call(e,{hash:{},data:s}):(l=e&&e.title,a=typeof l===d?l.call(e,{hash:{},data:s}):l),c+=u(a)+'</p>\n        <div>\n            <div class="y-axis-label-top">'+u((a=e&&e.config,a=null==a||a===!1?a:a.chartLabels,a=null==a||a===!1?a:a.top,typeof a===d?a.apply(e):a))+'</div>\n            <div>\n                <div class="x-axis-label-left">\n                    <div>\n                        <div class="l_content">\n                            <div class="l_table">\n                                <div class="l_table-cell">\n                                    <div>'+u((a=e&&e.config,a=null==a||a===!1?a:a.chartLabels,a=null==a||a===!1?a:a.left,typeof a===d?a.apply(e):a))+'</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="x-axis-label-right">\n                    <div>\n                        <div class="l_content">\n                            <div class="l_table">\n                                <div class="l_table-cell">\n                                    <div>'+u((a=e&&e.config,a=null==a||a===!1?a:a.chartLabels,a=null==a||a===!1?a:a.right,typeof a===d?a.apply(e):a))+'</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="chart">\n                ',a=n.each.call(e,(a=e&&e.config,null==a||a===!1?a:a.chartOrder),{hash:{},inverse:p.noop,fn:p.programWithDepth(1,r,s,e),data:s}),(a||0===a)&&(c+=a),c+='\n                    <div class="clearfix"></div>\n                </div>\n            </div>\n            <div class="y-axis-label-bottom">'+u((a=e&&e.config,a=null==a||a===!1?a:a.chartLabels,a=null==a||a===!1?a:a.bottom,typeof a===d?a.apply(e):a))+"</div>\n        </div>\n    </div>\n</div>"}),this.ThirdChannel.templates["reports/widgets/range_chart"]=t.template(function(t,e,n,i,s){function r(t,e,i){var s,r="";return r+="\n            ",s=n.each.call(t,t,{hash:{},inverse:p.noop,fn:p.programWithDepth(2,o,e,i),data:e}),(s||0===s)&&(r+=s),r+="\n        "}function o(t,e,i){var s,r,o,a="";return a+="\n                <tr>\n                    <td>"+u(typeof t===h?t.apply(t):t)+"</td>\n                    <td>"+u((r=n.value_lookup||i&&i.value_lookup,o={hash:{},data:e},r?r.call(t,null==e||e===!1?e:e.key,(s=i&&i.results,null==s||s===!1?s:s.percentages),o):d.call(t,"value_lookup",null==e||e===!1?e:e.key,(s=i&&i.results,null==s||s===!1?s:s.percentages),o)))+"%</td>\n                </tr>\n            "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var a,l,c="",h="function",u=this.escapeExpression,d=n.helperMissing,p=this;return c+='<div class="widget '+u((a=e&&e.config,a=null==a||a===!1?a:a.widget_class,typeof a===h?a.apply(e):a))+'">\n    <table class="chart range">\n        <thead>\n            <th colspan="2">',(l=n.title)?a=l.call(e,{hash:{},data:s}):(l=e&&e.title,a=typeof l===h?l.call(e,{hash:{},data:s}):l),c+=u(a)+"</th>\n        </thead>\n        ",a=n.each.call(e,(a=e&&e.config,null==a||a===!1?a:a.legendOrder),{hash:{},inverse:p.noop,fn:p.programWithDepth(1,r,s,e),data:s}),(a||0===a)&&(c+=a),c+="\n    </table>\n</div>"}),this.ThirdChannel.templates["reports/widgets/resolution_row"]=t.template(function(t,e,n,i,s){function r(){return'<a href="#" class="breakdown-link" tag="View Breakdown">'}function o(){return"</a>"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var a,l,c="",h="function",u=this.escapeExpression,d=this;return c+='<div class="widget small-padding resolution-row '+u((a=e&&e.config,a=null==a||a===!1?a:a.widget_class,typeof a===h?a.apply(e):a))+'"><div class="col-1-4">',a=n["if"].call(e,e&&e.show_view_list,{hash:{},inverse:d.noop,fn:d.program(1,r,s),data:s}),(a||0===a)&&(c+=a),(l=n.title)?a=l.call(e,{hash:{},data:s}):(l=e&&e.title,a=typeof l===h?l.call(e,{hash:{},data:s}):l),c+=u(a),a=n["if"].call(e,e&&e.show_view_list,{hash:{},inverse:d.noop,fn:d.program(3,o,s),data:s}),(a||0===a)&&(c+=a),c+='</div><div class="col-1-4">'+u((a=e&&e.results,a=null==a||a===!1?a:a.occurrences,typeof a===h?a.apply(e):a))+'</div><div class="col-1-4">'+u((a=e&&e.results,a=null==a||a===!1?a:a.resolutions,typeof a===h?a.apply(e):a))+'</div><div class="col-1-4">'+u((a=e&&e.results,a=null==a||a===!1?a:a.remaining,typeof a===h?a.apply(e):a))+"</div></div>\n\n"}),this.ThirdChannel.templates["s3uploader/image"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<div class=" holder">\n    <div>\n        <div class="image">\n            <img src="',(o=n.source)?r=o.call(e,{hash:{},data:s}):(o=e&&e.source,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'" alt="Image" >\n        </div>\n        <div class="delete">\n            <button class="btn primary"><i class="ic ic_x"></i><span>Delete Image</span></button>\n        </div>\n\n        <div class="description">\n            <label>Description: </label>\n            <input type="text" name="description">\n        </div>\n    </div>\n</div>\n'}),this.ThirdChannel.templates["s3uploader/upload"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var r,o,a="",l="function",c=this.escapeExpression;return a+='<div class=" holder">\n    <div>\n        <div class="image pull-left">\n            <img src="',(o=n.source)?r=o.call(e,{hash:{},data:s}):(o=e&&e.source,r=typeof o===l?o.call(e,{hash:{},data:s}):o),a+=c(r)+'" data-id="63840" alt="Image" >\n        </div>\n        <div class="pull-right">\n            <button class="btn primary cancel"><i class="ic fa ic_x"></i><span>Cancel Upload</span></button>\n        </div>\n        <div class="progress">\n            <div class="bar"></div>\n        </div>\n        <div class="percentage">0%</div>\n    </div>\n</div>\n'}),this.ThirdChannel.templates["store_profile/alerts_rows"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=this.merge(i,t.partials),s=s||{};var r,o="",a=this,l="function",c=this.escapeExpression;return r=a.invokePartial(i.open_alert_rows,"open_alert_rows",e,n,i,s),(r||0===r)&&(o+=r),o+='\n<div class="item"><a href="'+c((r=e&&e.links,r=null==r||r===!1?r:r.history,typeof r===l?r.apply(e):r))+'">View Alert History</a></div>'}),this.ThirdChannel.templates["store_profile/open_alerts_rows"]=t.template(function(t,e,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),i=this.merge(i,t.partials),s=s||{};
var r,o=this;return r=o.invokePartial(i.open_alert_rows,"open_alert_rows",e,n,i,s),r||0===r?r:""}),this.ThirdChannel.templates["store_profile/personnel_rows"]=t.template(function(t,e,n,i,s){function r(t,e){var i,s,r="";return r+='\n	<div class="item pure-g">\n		<p class="col-1-3 col-md-1-2">',(s=n.name)?i=s.call(t,{hash:{},data:e}):(s=t&&t.name,i=typeof s===d?s.call(t,{hash:{},data:e}):s),r+=p(i)+'</p>\n		<p class="col-1-3 col-md-1-2">',(s=n.role)?i=s.call(t,{hash:{},data:e}):(s=t&&t.role,i=typeof s===d?s.call(t,{hash:{},data:e}):s),r+=p(i)+'</p>\n		<p class="col-1-3 col-md-1">\n		',i=n["if"].call(t,t&&t.last_visited,{hash:{},inverse:f.program(4,a,e),fn:f.program(2,o,e),data:e}),(i||0===i)&&(r+=i),r+="			\n		</p>\n	</div>\n"}function o(t,e){var i,s,r="";return r+='\n			<a href="'+p((i=t&&t.links,i=null==i||i===!1?i:i.last_checkin,typeof i===d?i.apply(t):i))+'">Last Visit: ',(s=n.last_visited)?i=s.call(t,{hash:{},data:e}):(s=t&&t.last_visited,i=typeof s===d?s.call(t,{hash:{},data:e}):s),r+=p(i)+"</a></td>\n		"}function a(){return"\n			No Checkins on Record\n		"}function l(){return"\n	<p>There are no Personnel assigned to this store</p>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var c,h,u,d="function",p=this.escapeExpression,f=this,m=n.blockHelperMissing;return u={hash:{},inverse:f.program(6,l,s),fn:f.program(1,r,s),data:s},(h=n.rows)?c=h.call(e,u):(h=e&&e.rows,c=typeof h===d?h.call(e,u):h),n.rows||(c=m.call(e,c,{hash:{},inverse:f.program(6,l,s),fn:f.program(1,r,s),data:s})),c||0===c?c:""}),this.ThirdChannel.templates["store_profile/resolved_alerts_rows"]=t.template(function(t,e,n,i,s){function r(t,e){var i,s,r="";return r+='\n	<div class="item pure-g">\n		<p class="col-4-12 col-md-4-12">',(s=n.title)?i=s.call(t,{hash:{},data:e}):(s=t&&t.title,i=typeof s===h?s.call(t,{hash:{},data:e}):s),r+=u(i)+'</p>\n		<p class="col-4-12 col-md-4-12">',(s=n.created_at)?i=s.call(t,{hash:{},data:e}):(s=t&&t.created_at,i=typeof s===h?s.call(t,{hash:{},data:e}):s),r+=u(i)+'</p>\n		<p class="col-3-12 col-md-3-12">',(s=n.resolved_at)?i=s.call(t,{hash:{},data:e}):(s=t&&t.resolved_at,i=typeof s===h?s.call(t,{hash:{},data:e}):s),r+=u(i)+'</p>\n		<div class="col-1-12">\n			<a href="'+u((i=t&&t.links,i=null==i||i===!1?i:i.checkin,typeof i===h?i.apply(t):i))+'" class="btn primary"><i class="ic fa ic_report-16"></i></a>\n		</div>\n	</div>\n'}function o(){return"\n	<p>There are no Resolved Alerts for this Store</p>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var a,l,c,h="function",u=this.escapeExpression,d=this,p=n.blockHelperMissing;return c={hash:{},inverse:d.program(3,o,s),fn:d.program(1,r,s),data:s},(l=n.rows)?a=l.call(e,c):(l=e&&e.rows,a=typeof l===h?l.call(e,c):l),n.rows||(a=p.call(e,a,{hash:{},inverse:d.program(3,o,s),fn:d.program(1,r,s),data:s})),a||0===a?a:""}),this.ThirdChannel.templates["stores/table_rows"]=t.template(function(t,e,n,i,s){function r(t,e){var i,s,r="";return r+='\n<tr>\n    <td><a href="'+u((i=t&&t.links,i=null==i||i===!1?i:i.profile,typeof i===h?i.apply(t):i))+'">',(s=n.uid)?i=s.call(t,{hash:{},data:e}):(s=t&&t.uid,i=typeof s===h?s.call(t,{hash:{},data:e}):s),r+=u(i)+"</a>, ",(s=n.city)?i=s.call(t,{hash:{},data:e}):(s=t&&t.city,i=typeof s===h?s.call(t,{hash:{},data:e}):s),r+=u(i)+", ",(s=n.state)?i=s.call(t,{hash:{},data:e}):(s=t&&t.state,i=typeof s===h?s.call(t,{hash:{},data:e}):s),r+=u(i)+"</td>\n</tr>\n\n"}function o(){return"\n<tr>\n	<td>There are no Stores for this query.</td>\n</tr>\n\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var a,l,c,h="function",u=this.escapeExpression,d=this,p=n.blockHelperMissing;return c={hash:{},inverse:d.program(3,o,s),fn:d.program(1,r,s),data:s},(l=n.rows)?a=l.call(e,c):(l=e&&e.rows,a=typeof l===h?l.call(e,c):l),n.rows||(a=p.call(e,a,{hash:{},inverse:d.program(3,o,s),fn:d.program(1,r,s),data:s})),a||0===a?a:""}),this.ThirdChannel.templates.teams_table_rows=t.template(function(t,e,n,i,s){function r(t,e){var i,s,r="";return r+='\n<tr>\n    <td><a href="'+u((i=t&&t.links,i=null==i||i===!1?i:i.profile,typeof i===h?i.apply(t):i))+'">',(s=n.first_name)?i=s.call(t,{hash:{},data:e}):(s=t&&t.first_name,i=typeof s===h?s.call(t,{hash:{},data:e}):s),r+=u(i)+" ",(s=n.last_name)?i=s.call(t,{hash:{},data:e}):(s=t&&t.last_name,i=typeof s===h?s.call(t,{hash:{},data:e}):s),r+=u(i)+'</a></td>\n    <td class="minor-m">'+u((i=t&&t.address,i=null==i||i===!1?i:i.state,typeof i===h?i.apply(t):i))+"</td>\n    <td>",(s=n.email)?i=s.call(t,{hash:{},data:e}):(s=t&&t.email,i=typeof s===h?s.call(t,{hash:{},data:e}):s),r+=u(i)+'</td>\n    <td class="minor-m">',(s=n.phone)?i=s.call(t,{hash:{},data:e}):(s=t&&t.phone,i=typeof s===h?s.call(t,{hash:{},data:e}):s),r+=u(i)+'</td>\n    <td class="minor-m">',(s=n.university)?i=s.call(t,{hash:{},data:e}):(s=t&&t.university,i=typeof s===h?s.call(t,{hash:{},data:e}):s),r+=u(i)+"</td>\n</tr>\n"}function o(){return'\n<tr>\n	<td colspan="5">No Field Force found for this query.</td>\n</tr>\n'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),s=s||{};var a,l,c,h="function",u=this.escapeExpression,d=this,p=n.blockHelperMissing;return c={hash:{},inverse:d.program(3,o,s),fn:d.program(1,r,s),data:s},(l=n.rows)?a=l.call(e,c):(l=e&&e.rows,a=typeof l===h?l.call(e,c):l),n.rows||(a=p.call(e,a,{hash:{},inverse:d.program(3,o,s),fn:d.program(1,r,s),data:s})),a||0===a?a:""}),this.ThirdChannel.templates}),define("app/views/notifications/notification_badge",["require","jquery","underscore","backbone","handlebars","handlebarsTemplates"],function(t){var e=t("jquery"),n=(t("underscore"),t("backbone")),i=(t("handlebars"),t("handlebarsTemplates"));return n.View.extend({el:".notifications",template:i["notifications/badge"],render:function(){var t=this;e.ajax({url:"/programs/Merchandising/notifications.json"}).done(function(e){e.count>0&&(t.$el.addClass("notify"),t.$el.attr("title","Unread Notifications"),1==e.count&&t.$(".link").text("Notification"),t.$(".link").prepend(t.template(e)))})}})}),define("app/views/layout/navigation",["require","jquery","underscore","backbone","jquery_ujs","context","app/views/notifications/notification_badge"],function(t){var e=t("jquery"),n=(t("underscore"),t("backbone")),i=(t("jquery_ujs"),t("context")),s=t("app/views/notifications/notification_badge");return n.View.extend({el:"#site-wrapper",initialize:function(){this.listenTo(i,"filter:toggle",this.toggleFilter),this.$siteWrapper=this.$el,this.$siteSubmenu=this.$("#site-submenu"),this.$toggleFilter=e(".toggle-filter"),(new s).render()},events:{"click .toggle-nav":"toggleNav","click .toggle-filter":"toggleFilter","click .toggle-subnav":"toggleSubnav","click .collapse-nav":"collapseNav"},toggleNav:function(){this.$siteWrapper.hasClass("show-nav")?(this.$siteWrapper.removeClass("show-nav"),this.$siteSubmenu.removeClass("show-subnav")):this.$siteWrapper.addClass("show-nav")},toggleFilter:function(){this.$siteWrapper.hasClass("show-filter")?(this.$siteWrapper.removeClass("show-filter"),this.$toggleFilter.removeClass("enabled")):(this.$siteWrapper.addClass("show-filter"),this.$toggleFilter.addClass("enabled"))},toggleSubnav:function(){this.$siteSubmenu.hasClass("show-subnav")?this.$siteSubmenu.removeClass("show-subnav"):this.$siteSubmenu.addClass("show-subnav")},collapseNav:function(){this.$siteWrapper.hasClass("collapsed-nav")?(this.$siteWrapper.find(".collapse-nav .ic_right").removeClass("ic_right").addClass("ic_left"),this.$siteWrapper.removeClass("collapsed-nav"),this.$siteWrapper.addClass("expanded-nav"),window.localStorage.setItem("main_navigation","expanded-nav")):(this.$siteWrapper.find(".collapse-nav .ic_left").removeClass("ic_left").addClass("ic_right"),this.$siteWrapper.addClass("collapsed-nav"),this.$siteWrapper.removeClass("expanded-nav"),window.localStorage.setItem("main_navigation","collapsed-nav")),i.trigger("navigation:collapsed")}})}),define("app/views/layout/main",["require","app/views/layout/navigation"],function(t){var e=t("app/views/layout/navigation");return{init:function(){new e}}}),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},i=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};if("undefined"==typeof Backbone||null===Backbone)throw new Error("Backbone is not defined. Please include the latest version from http://documentcloud.github.com/backbone/backbone.js");Backbone.Modal=function(e){function s(){this.triggerCancel=t(this.triggerCancel,this),this.triggerSubmit=t(this.triggerSubmit,this),this.triggerView=t(this.triggerView,this),this.clickOutside=t(this.clickOutside,this),this.checkKey=t(this.checkKey,this),this.args=Array.prototype.slice.apply(arguments),Backbone.View.prototype.constructor.apply(this,this.args),this.setUIElements(),this.delegateModalEvents()}return n(s,e),s.prototype.prefix="bbm",s.prototype.render=function(t){var e,n,i=this;return null==t&&(t={}),e=this.serializeData(),this.$el.addClass(""+this.prefix+"-wrapper"),this.modalEl=Backbone.$("<div />").addClass(""+this.prefix+"-modal"),this.template&&this.modalEl.html(this.template(e)),this.$el.html(this.modalEl),Backbone.$("body").on("keyup",this.checkKey),Backbone.$("body").on("click",this.clickOutside),this.viewContainer?(this.viewContainerEl=this.modalEl.find(this.viewContainer),this.viewContainerEl.addClass(""+this.prefix+"-modal__views")):this.viewContainerEl=this.modalEl,this.$el.show(),(null!=(n=this.views)?n.length:void 0)>0&&this.openAt(0),"function"==typeof this.onRender&&this.onRender(),this.modalEl.css({opacity:0}),this.$el.fadeIn({duration:100,complete:function(){return i.modalEl.css({opacity:1}).addClass(""+i.prefix+"-modal--open")}}),this},s.prototype.setUIElements=function(){var t;if(this.template=this.getOption("template"),this.views=this.getOption("views"),null!=(t=this.views)&&(t.length=_.size(this.views)),this.viewContainer=this.getOption("viewContainer"),this.$el.hide(),_.isUndefined(this.template)&&_.isUndefined(this.views))throw new Error("No template or views defined for Backbone.Modal");if(this.template&&this.views&&_.isUndefined(this.viewContainer))throw new Error("No viewContainer defined for Backbone.Modal")},s.prototype.getOption=function(t){return t?this.options&&i.call(this.options,t)>=0&&null!=this.options[t]?this.options[t]:this[t]:void 0},s.prototype.serializeData=function(){var t;return t={},this.model&&(t=_.extend(t,this.model.toJSON())),this.collection&&(t=_.extend(t,{items:this.collection.toJSON()})),t},s.prototype.delegateModalEvents=function(){var t,e,n,i,s,r,o;this.active=!0,t=this.getOption("cancelEl"),s=this.getOption("submitEl"),s&&this.$el.on("click",s,this.triggerSubmit),t&&this.$el.on("click",t,this.triggerCancel),o=[];for(e in this.views)"length"!==e?(n=e.match(/^(\S+)\s*(.*)$/),r=n[1],i=n[2],o.push(this.$el.on(r,i,this.views[e],this.triggerView))):o.push(void 0);return o},s.prototype.undelegateModalEvents=function(){var t,e,n,i,s,r,o;this.active=!1,t=this.getOption("cancelEl"),s=this.getOption("submitEl"),s&&this.$el.off("click",s,this.triggerSubmit),t&&this.$el.off("click",t,this.triggerCancel),o=[];for(e in this.views)"length"!==e?(n=e.match(/^(\S+)\s*(.*)$/),r=n[1],i=n[2],o.push(this.$el.off(r,i,this.views[e],this.triggerView))):o.push(void 0);return o},s.prototype.checkKey=function(t){if(this.active)switch(t.keyCode){case 27:return this.triggerCancel();case 13:return this.triggerSubmit()}},s.prototype.clickOutside=function(t){return Backbone.$(t.target).hasClass(""+this.prefix+"-wrapper")&&this.active?this.triggerCancel(null,!0):void 0},s.prototype.buildView=function(t){var e;if(t)return _.isFunction(t)?(e=new t(this.args[0]),e instanceof Backbone.View?{el:e.render().$el,view:e}:{el:t(this.args[0])}):{view:t,el:t.$el}},s.prototype.triggerView=function(t){var e,n,i,s;null!=t&&"function"==typeof t.preventDefault&&t.preventDefault(),s=t.data,n=this.buildView(s.view),this.currentView&&(this.previousView=this.currentView),this.currentView=n.view||n.el,e=0;for(i in this.views)s.view===this.views[i].view&&(this.currentIndex=e),e++;return s.onActive&&(_.isFunction(s.onActive)?s.onActive(this):_.isString(s.onActive)&&this[s.onActive].call(this,s)),this.shouldAnimate?this.animateToView(n.el):(this.shouldAnimate=!0,this.$(this.viewContainerEl).html(n.el))},s.prototype.animateToView=function(t){var e,n,i,s,r,o,a=this;return s={position:"relative",top:-9999,left:-9999},r=Backbone.$("<tester/>").css(s),r.html(this.$el.clone().css(s)),0!==Backbone.$("tester").length?Backbone.$("tester").replaceWith(r):Backbone.$("body").append(r),e=r.find(this.viewContainer?this.viewContainer:"."+this.prefix+"-modal"),e.removeAttr("style"),i=e.outerHeight(),e.html(t),n=e.outerHeight(),i===n?(this.$(this.viewContainerEl).html(t),null!=(o=this.previousView)&&"function"==typeof o.close?o.close():void 0):(this.$(this.viewContainerEl).css({opacity:0}),this.$(this.viewContainerEl).animate({height:n},100,function(){var e;return a.$(a.viewContainerEl).css({opacity:1}).removeAttr("style"),a.$(a.viewContainerEl).html(t),null!=(e=a.previousView)&&"function"==typeof e.close?e.close():void 0}))},s.prototype.triggerSubmit=function(t){return null!=t&&t.preventDefault(),this.beforeSubmit&&this.beforeSubmit()===!1?void 0:("function"==typeof this.submit&&this.submit(),this.regionEnabled?this.trigger("modal:close"):this.close())},s.prototype.triggerCancel=function(t){return null!=t&&t.preventDefault(),this.beforeCancel&&this.beforeCancel()===!1?void 0:("function"==typeof this.cancel&&this.cancel(),this.regionEnabled?this.trigger("modal:close"):this.close())},s.prototype.close=function(){var t=this;return Backbone.$("body").off("keyup",this.checkKey),Backbone.$("body").off("click",this.clickOutside),"function"==typeof this.onClose&&this.onClose(),this.shouldAnimate=!1,this.modalEl.addClass("{@prefix}-modal--close"),this.$el.fadeOut({duration:200}),_.delay(function(){var e;return null!=(e=t.currentView)&&"function"==typeof e.remove&&e.remove(),t.remove()},200)},s.prototype.openAt=function(t){var e,n,i;e=0;for(n in this.views)"length"!==n&&(e===t&&(i=this.views[n]),e++);return i&&(this.currentIndex=t,this.triggerView({data:i})),this},s.prototype.next=function(){return this.currentIndex+1<this.views.length?this.openAt(this.currentIndex+1):void 0},s.prototype.previous=function(){return this.currentIndex-1<this.views.length-1?this.openAt(this.currentIndex-1):void 0},s}(Backbone.View)}.call(this),define("backbone.modal",["backbone"],function(t){return function(){var e;return e||t.BackboneModal}}(this)),define("app/modals/activities/photo-modal",["require","jquery","underscore","backbone","backbone.modal","handlebars","handlebarsTemplates"],function(t){var e=(t("jquery"),t("underscore"),t("backbone")),n=(t("backbone.modal"),t("handlebars"),t("handlebarsTemplates"));return e.Modal.extend({initialize:function(t){this.model=t.model},template:function(){return n["photo-modal"](this.model.attributes)},cancelEl:".bbm-button"})}),function(t){"function"==typeof define&&define.amd?define("slick_carousel",["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){var e=window.Slick||{};e=function(){function e(e,i){var s,r,o=this;if(o.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:t(e),appendDots:t(e),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(t,e){return'<button type="button" data-role="none">'+(e+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",fade:!1,focusOnSelect:!1,infinite:!0,lazyLoad:"ondemand",onBeforeChange:null,onAfterChange:null,onInit:null,onReInit:null,pauseOnHover:!0,pauseOnDotsHover:!1,responsive:null,rtl:!1,slide:"div",slidesToShow:1,slidesToScroll:1,speed:300,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0},o.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentSlide:0,currentLeft:null,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1},t.extend(o,o.initials),o.activeBreakpoint=null,o.animType=null,o.animProp=null,o.breakpoints=[],o.breakpointSettings=[],o.cssTransitions=!1,o.paused=!1,o.positionProp=null,o.$slider=t(e),o.$slidesCache=null,o.transformType=null,o.transitionType=null,o.windowWidth=0,o.windowTimer=null,o.options=t.extend({},o.defaults,i),o.originalSettings=o.options,s=o.options.responsive||null,s&&s.length>-1){for(r in s)s.hasOwnProperty(r)&&(o.breakpoints.push(s[r].breakpoint),o.breakpointSettings[s[r].breakpoint]=s[r].settings);o.breakpoints.sort(function(t,e){return e-t})}o.autoPlay=t.proxy(o.autoPlay,o),o.autoPlayClear=t.proxy(o.autoPlayClear,o),o.changeSlide=t.proxy(o.changeSlide,o),o.selectHandler=t.proxy(o.selectHandler,o),o.setPosition=t.proxy(o.setPosition,o),o.swipeHandler=t.proxy(o.swipeHandler,o),o.dragHandler=t.proxy(o.dragHandler,o),o.keyHandler=t.proxy(o.keyHandler,o),o.autoPlayIterator=t.proxy(o.autoPlayIterator,o),o.instanceUid=n++,o.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,o.init()}var n=0;return e}(),e.prototype.addSlide=function(e,n,i){var s=this;if("boolean"==typeof n)i=n,n=null;else if(0>n||n>=s.slideCount)return!1;s.unload(),"number"==typeof n?0===n&&0===s.$slides.length?t(e).appendTo(s.$slideTrack):i?t(e).insertBefore(s.$slides.eq(n)):t(e).insertAfter(s.$slides.eq(n)):i===!0?t(e).prependTo(s.$slideTrack):t(e).appendTo(s.$slideTrack),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slides.each(function(e,n){t(n).attr("index",e)}),s.$slidesCache=s.$slides,s.reinit()},e.prototype.animateSlide=function(e,n){var i={},s=this;if(1===s.options.slidesToShow&&s.options.adaptiveHeight===!0&&s.options.vertical===!1){var r=s.$slides.eq(s.currentSlide).outerHeight(!0);s.$list.animate({height:r},s.options.speed)}s.options.rtl===!0&&s.options.vertical===!1&&(e=-e),s.transformsEnabled===!1?s.options.vertical===!1?s.$slideTrack.animate({left:e},s.options.speed,s.options.easing,n):s.$slideTrack.animate({top:e},s.options.speed,s.options.easing,n):s.cssTransitions===!1?t({animStart:s.currentLeft}).animate({animStart:e},{duration:s.options.speed,easing:s.options.easing,step:function(t){s.options.vertical===!1?(i[s.animType]="translate("+t+"px, 0px)",s.$slideTrack.css(i)):(i[s.animType]="translate(0px,"+t+"px)",s.$slideTrack.css(i))},complete:function(){n&&n.call()}}):(s.applyTransition(),i[s.animType]=s.options.vertical===!1?"translate3d("+e+"px, 0px, 0px)":"translate3d(0px,"+e+"px, 0px)",s.$slideTrack.css(i),n&&setTimeout(function(){s.disableTransition(),n.call()},s.options.speed))},e.prototype.asNavFor=function(e){var n=this,i=null!=n.options.asNavFor?t(n.options.asNavFor).getSlick():null;null!=i&&i.slideHandler(e,!0)},e.prototype.applyTransition=function(t){var e=this,n={};n[e.transitionType]=e.options.fade===!1?e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:"opacity "+e.options.speed+"ms "+e.options.cssEase,e.options.fade===!1?e.$slideTrack.css(n):e.$slides.eq(t).css(n)},e.prototype.autoPlay=function(){var t=this;t.autoPlayTimer&&clearInterval(t.autoPlayTimer),t.slideCount>t.options.slidesToShow&&t.paused!==!0&&(t.autoPlayTimer=setInterval(t.autoPlayIterator,t.options.autoplaySpeed))},e.prototype.autoPlayClear=function(){var t=this;t.autoPlayTimer&&clearInterval(t.autoPlayTimer)},e.prototype.autoPlayIterator=function(){var t=this;t.options.infinite===!1?1===t.direction?(t.currentSlide+1===t.slideCount-1&&(t.direction=0),t.slideHandler(t.currentSlide+t.options.slidesToScroll)):(t.currentSlide-1===0&&(t.direction=1),t.slideHandler(t.currentSlide-t.options.slidesToScroll)):t.slideHandler(t.currentSlide+t.options.slidesToScroll)},e.prototype.buildArrows=function(){var e=this;e.options.arrows===!0&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow=t(e.options.prevArrow),e.$nextArrow=t(e.options.nextArrow),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.appendTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),e.options.infinite!==!0&&e.$prevArrow.addClass("slick-disabled"))},e.prototype.buildDots=function(){var e,n,i=this;if(i.options.dots===!0&&i.slideCount>i.options.slidesToShow){for(n='<ul class="'+i.options.dotsClass+'">',e=0;e<=i.getDotCount();e+=1)n+="<li>"+i.options.customPaging.call(this,i,e)+"</li>";n+="</ul>",i.$dots=t(n).appendTo(i.options.appendDots),i.$dots.find("li").first().addClass("slick-active")}},e.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each(function(e,n){t(n).attr("index",e)}),e.$slidesCache=e.$slides,e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?t('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),e.options.centerMode===!0&&(e.options.slidesToScroll=1,e.options.slidesToShow%2===0&&(e.options.slidesToShow=3)),t("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.options.accessibility===!0&&e.$list.prop("tabIndex",0),e.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),e.options.draggable===!0&&e.$list.addClass("draggable")},e.prototype.checkResponsive=function(){var e,n,i=this;if(i.originalSettings.responsive&&i.originalSettings.responsive.length>-1&&null!==i.originalSettings.responsive){n=null;for(e in i.breakpoints)i.breakpoints.hasOwnProperty(e)&&t(window).width()<i.breakpoints[e]&&(n=i.breakpoints[e]);null!==n?null!==i.activeBreakpoint?n!==i.activeBreakpoint&&(i.activeBreakpoint=n,i.options=t.extend({},i.options,i.breakpointSettings[n]),i.refresh()):(i.activeBreakpoint=n,i.options=t.extend({},i.options,i.breakpointSettings[n]),i.refresh()):null!==i.activeBreakpoint&&(i.activeBreakpoint=null,i.options=t.extend({},i.options,i.originalSettings),i.refresh())}},e.prototype.changeSlide=function(e){var n,i,s,r=this,o=t(e.target);switch(o.is("a")&&e.preventDefault(),s=r.slideCount%r.options.slidesToScroll!==0,n=s?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,e.data.message){case"previous":i=0===n?r.options.slidesToScroll:r.options.slidesToShow-n,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-i);break;case"next":i=0===n?r.options.slidesToScroll:n,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+i);break;case"index":var a=0===e.data.index?0:e.data.index||t(e.target).parent().index()*r.options.slidesToScroll;r.slideHandler(a);default:return!1}},e.prototype.destroy=function(){var e=this;e.autoPlayClear(),e.touchObject={},t(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&(e.$prevArrow.remove(),e.$nextArrow.remove()),e.$slides.parent().hasClass("slick-track")&&e.$slides.unwrap().unwrap(),e.$slides.removeClass("slick-slide slick-active slick-visible").css("width",""),e.$slider.removeClass("slick-slider"),e.$slider.removeClass("slick-initialized"),e.$list.off(".slick"),t(window).off(".slick-"+e.instanceUid),t(document).off(".slick-"+e.instanceUid)},e.prototype.disableTransition=function(t){var e=this,n={};n[e.transitionType]="",e.options.fade===!1?e.$slideTrack.css(n):e.$slides.eq(t).css(n)},e.prototype.fadeSlide=function(t,e,n){var i=this;i.cssTransitions===!1?(i.$slides.eq(e).css({zIndex:1e3}),i.$slides.eq(e).animate({opacity:1},i.options.speed,i.options.easing,n),i.$slides.eq(t).animate({opacity:0},i.options.speed,i.options.easing)):(i.applyTransition(e),i.applyTransition(t),i.$slides.eq(e).css({opacity:1,zIndex:1e3}),i.$slides.eq(t).css({opacity:0}),n&&setTimeout(function(){i.disableTransition(e),i.disableTransition(t),n.call()},i.options.speed))},e.prototype.filterSlides=function(t){var e=this;null!==t&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(t).appendTo(e.$slideTrack),e.reinit())},e.prototype.getCurrent=function(){var t=this;return t.currentSlide},e.prototype.getDotCount=function(){var t,e=this,n=0,i=0,s=0;for(t=e.options.infinite===!0?e.slideCount+e.options.slidesToShow-e.options.slidesToScroll:e.slideCount;t>n;)s++,i+=e.options.slidesToScroll,n=i+e.options.slidesToShow;return s},e.prototype.getLeft=function(t){var e,n,i,s=this,r=0;return s.slideOffset=0,n=s.$slides.first().outerHeight(),s.options.infinite===!0?(s.slideCount>s.options.slidesToShow&&(s.slideOffset=s.slideWidth*s.options.slidesToShow*-1,r=n*s.options.slidesToShow*-1),s.slideCount%s.options.slidesToScroll!==0&&t+s.options.slidesToScroll>s.slideCount&&s.slideCount>s.options.slidesToShow&&(s.slideOffset=s.slideCount%s.options.slidesToShow*s.slideWidth*-1,r=s.slideCount%s.options.slidesToShow*n*-1)):s.slideCount%s.options.slidesToShow!==0&&t+s.options.slidesToScroll>s.slideCount&&s.slideCount>s.options.slidesToShow&&(s.slideOffset=s.options.slidesToShow*s.slideWidth-s.slideCount%s.options.slidesToShow*s.slideWidth,r=s.slideCount%s.options.slidesToShow*n),s.slideCount<=s.options.slidesToShow&&(s.slideOffset=0,r=0),s.options.centerMode===!0&&s.options.infinite===!0?s.slideOffset+=s.slideWidth*Math.floor(s.options.slidesToShow/2)-s.slideWidth:s.options.centerMode===!0&&(s.slideOffset+=s.slideWidth*Math.floor(s.options.slidesToShow/2)),e=s.options.vertical===!1?t*s.slideWidth*-1+s.slideOffset:t*n*-1+r,s.options.variableWidth===!0&&(i=s.$slideTrack.children(".slick-slide").eq(s.slideCount<=s.options.slidesToShow||s.options.infinite===!1?t:t+s.options.slidesToShow),e=i[0]?-1*i[0].offsetLeft:0,s.options.centerMode===!0&&(i=s.$slideTrack.children(".slick-slide").eq(s.options.infinite===!1?t:t+s.options.slidesToShow+1),e=i[0]?-1*i[0].offsetLeft:0,e+=(s.$list.width()-i.outerWidth())/2)),e},e.prototype.init=function(){var e=this;t(e.$slider).hasClass("slick-initialized")||(t(e.$slider).addClass("slick-initialized"),e.buildOut(),e.setProps(),e.startLoad(),e.loadSlider(),e.initializeEvents(),e.checkResponsive()),null!==e.options.onInit&&e.options.onInit.call(this,e)},e.prototype.initArrowEvents=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.on("click.slick",{message:"previous"},t.changeSlide),t.$nextArrow.on("click.slick",{message:"next"},t.changeSlide))},e.prototype.initDotEvents=function(){var e=this;e.options.dots===!0&&e.slideCount>e.options.slidesToShow&&t("li",e.$dots).on("click.slick",{message:"index"},e.changeSlide),e.options.dots===!0&&e.options.pauseOnDotsHover===!0&&e.options.autoplay===!0&&t("li",e.$dots).on("mouseenter.slick",e.autoPlayClear).on("mouseleave.slick",e.autoPlay)},e.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.$list.on("touchstart.slick mousedown.slick",{action:"start"},e.swipeHandler),e.$list.on("touchmove.slick mousemove.slick",{action:"move"},e.swipeHandler),e.$list.on("touchend.slick mouseup.slick",{action:"end"},e.swipeHandler),e.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},e.swipeHandler),e.options.pauseOnHover===!0&&e.options.autoplay===!0&&(e.$list.on("mouseenter.slick",e.autoPlayClear),e.$list.on("mouseleave.slick",e.autoPlay)),e.options.accessibility===!0&&e.$list.on("keydown.slick",e.keyHandler),e.options.focusOnSelect===!0&&t(e.options.slide,e.$slideTrack).on("click.slick",e.selectHandler),t(window).on("orientationchange.slick.slick-"+e.instanceUid,function(){e.checkResponsive(),e.setPosition()}),t(window).on("resize.slick.slick-"+e.instanceUid,function(){t(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout(function(){e.windowWidth=t(window).width(),e.checkResponsive(),e.setPosition()},50))}),t(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),t(document).on("ready.slick.slick-"+e.instanceUid,e.setPosition)},e.prototype.initUI=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.show(),t.$nextArrow.show()),t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&t.$dots.show(),t.options.autoplay===!0&&t.autoPlay()},e.prototype.keyHandler=function(t){var e=this;37===t.keyCode?e.changeSlide({data:{message:"previous"}}):39===t.keyCode&&e.changeSlide({data:{message:"next"}})},e.prototype.lazyLoad=function(){function e(e){t("img[data-lazy]",e).each(function(){var e=t(this),n=t(this).attr("data-lazy");e.load(function(){e.animate({opacity:1},200)}).css({opacity:0}).attr("src",n).removeAttr("data-lazy").removeClass("slick-loading")})}var n,i,s,r,o=this;o.options.centerMode===!0?o.options.infinite===!0?(s=o.currentSlide+(o.options.slidesToShow/2+1),r=s+o.options.slidesToShow+2):(s=Math.max(0,o.currentSlide-(o.options.slidesToShow/2+1)),r=2+(o.options.slidesToShow/2+1)+o.currentSlide):(s=o.options.infinite?o.options.slidesToShow+o.currentSlide:o.currentSlide,r=s+o.options.slidesToShow,o.options.fade===!0&&(s>0&&s--,r<=o.slideCount&&r++)),n=o.$slider.find(".slick-slide").slice(s,r),e(n),o.slideCount<=o.options.slidesToShow?(i=o.$slider.find(".slick-slide"),e(i)):o.currentSlide>=o.slideCount-o.options.slidesToShow?(i=o.$slider.find(".slick-cloned").slice(0,o.options.slidesToShow),e(i)):0===o.currentSlide&&(i=o.$slider.find(".slick-cloned").slice(-1*o.options.slidesToShow),e(i))},e.prototype.loadSlider=function(){var t=this;t.setPosition(),t.$slideTrack.css({opacity:1}),t.$slider.removeClass("slick-loading"),t.initUI(),"progressive"===t.options.lazyLoad&&t.progressiveLazyLoad()},e.prototype.postSlide=function(t){var e=this;null!==e.options.onAfterChange&&e.options.onAfterChange.call(this,e,t),e.animating=!1,e.setPosition(),e.swipeLeft=null,e.options.autoplay===!0&&e.paused===!1&&e.autoPlay()},e.prototype.progressiveLazyLoad=function(){var e,n,i=this;e=t("img[data-lazy]").length,e>0&&(n=t("img[data-lazy]",i.$slider).first(),n.attr("src",n.attr("data-lazy")).removeClass("slick-loading").load(function(){n.removeAttr("data-lazy"),i.progressiveLazyLoad()}).error(function(){n.removeAttr("data-lazy"),i.progressiveLazyLoad()}))},e.prototype.refresh=function(){var e=this,n=e.currentSlide;e.destroy(),t.extend(e,e.initials),e.currentSlide=n,e.init()},e.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.options.focusOnSelect===!0&&t(e.options.slide,e.$slideTrack).on("click.slick",e.selectHandler),e.setSlideClasses(0),e.setPosition(),null!==e.options.onReInit&&e.options.onReInit.call(this,e)},e.prototype.removeSlide=function(t,e){var n=this;return"boolean"==typeof t?(e=t,t=e===!0?0:n.slideCount-1):t=e===!0?--t:t,n.slideCount<1||0>t||t>n.slideCount-1?!1:(n.unload(),n.$slideTrack.children(this.options.slide).eq(t).remove(),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slidesCache=n.$slides,void n.reinit())},e.prototype.setCSS=function(t){var e,n,i=this,s={};i.options.rtl===!0&&(t=-t),e="left"==i.positionProp?t+"px":"0px",n="top"==i.positionProp?t+"px":"0px",s[i.positionProp]=t,i.transformsEnabled===!1?i.$slideTrack.css(s):(s={},i.cssTransitions===!1?(s[i.animType]="translate("+e+", "+n+")",i.$slideTrack.css(s)):(s[i.animType]="translate3d("+e+", "+n+", 0px)",i.$slideTrack.css(s)))
},e.prototype.setDimensions=function(){var e=this;e.options.vertical===!1?e.options.centerMode===!0&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),e.options.centerMode===!0&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),e.options.vertical===!1&&e.options.variableWidth===!1?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):e.options.variableWidth===!0?(e.slideWidth=0,e.$slideTrack.children(".slick-slide").each(function(){e.slideWidth+=Math.ceil(t(this).outerWidth(!0))}),e.$slideTrack.width(Math.ceil(e.slideWidth)+1)):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var n=e.$slides.first().outerWidth(!0)-e.$slides.first().width();e.options.variableWidth===!1&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-n)},e.prototype.setFade=function(){var e,n=this;n.$slides.each(function(i,s){e=n.slideWidth*i*-1,t(s).css({position:"relative",left:e,top:0,zIndex:800,opacity:0})}),n.$slides.eq(n.currentSlide).css({zIndex:900,opacity:1})},e.prototype.setHeight=function(){var t=this;if(1===t.options.slidesToShow&&t.options.adaptiveHeight===!0&&t.options.vertical===!1){var e=t.$slides.eq(t.currentSlide).outerHeight(!0);t.$list.css("height",e)}},e.prototype.setPosition=function(){var t=this;t.setDimensions(),t.setHeight(),t.options.fade===!1?t.setCSS(t.getLeft(t.currentSlide)):t.setFade()},e.prototype.setProps=function(){var t=this,e=document.body.style;t.positionProp=t.options.vertical===!0?"top":"left","top"===t.positionProp?t.$slider.addClass("slick-vertical"):t.$slider.removeClass("slick-vertical"),(void 0!==e.WebkitTransition||void 0!==e.MozTransition||void 0!==e.msTransition)&&t.options.useCSS===!0&&(t.cssTransitions=!0),void 0!==e.OTransform&&(t.animType="OTransform",t.transformType="-o-transform",t.transitionType="OTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.MozTransform&&(t.animType="MozTransform",t.transformType="-moz-transform",t.transitionType="MozTransition",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(t.animType=!1)),void 0!==e.webkitTransform&&(t.animType="webkitTransform",t.transformType="-webkit-transform",t.transitionType="webkitTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.msTransform&&(t.animType="msTransform",t.transformType="-ms-transform",t.transitionType="msTransition",void 0===e.msTransform&&(t.animType=!1)),void 0!==e.transform&&t.animType!==!1&&(t.animType="transform",t.transformType="transform",t.transitionType="transition"),t.transformsEnabled=null!==t.animType&&t.animType!==!1},e.prototype.setSlideClasses=function(t){var e,n,i,s,r=this;r.$slider.find(".slick-slide").removeClass("slick-active").removeClass("slick-center"),n=r.$slider.find(".slick-slide"),r.options.centerMode===!0?(e=Math.floor(r.options.slidesToShow/2),r.options.infinite===!0&&(t>=e&&t<=r.slideCount-1-e?r.$slides.slice(t-e,t+e+1).addClass("slick-active"):(i=r.options.slidesToShow+t,n.slice(i-e+1,i+e+2).addClass("slick-active")),0===t?n.eq(n.length-1-r.options.slidesToShow).addClass("slick-center"):t===r.slideCount-1&&n.eq(r.options.slidesToShow).addClass("slick-center")),r.$slides.eq(t).addClass("slick-center")):t>=0&&t<=r.slideCount-r.options.slidesToShow?r.$slides.slice(t,t+r.options.slidesToShow).addClass("slick-active"):n.length<=r.options.slidesToShow?n.addClass("slick-active"):(s=r.slideCount%r.options.slidesToShow,i=r.options.infinite===!0?r.options.slidesToShow+t:t,r.options.slidesToShow==r.options.slidesToScroll&&r.slideCount-t<r.options.slidesToShow?n.slice(i-(r.options.slidesToShow-s),i+s).addClass("slick-active"):n.slice(i,i+r.options.slidesToShow).addClass("slick-active")),"ondemand"===r.options.lazyLoad&&r.lazyLoad()},e.prototype.setupInfinite=function(){var e,n,i,s=this;if((s.options.fade===!0||s.options.vertical===!0)&&(s.options.centerMode=!1),s.options.infinite===!0&&s.options.fade===!1&&(n=null,s.slideCount>s.options.slidesToShow)){for(i=s.options.centerMode===!0?s.options.slidesToShow+1:s.options.slidesToShow,e=s.slideCount;e>s.slideCount-i;e-=1)n=e-1,t(s.$slides[n]).clone(!0).attr("id","").attr("index",n-s.slideCount).prependTo(s.$slideTrack).addClass("slick-cloned");for(e=0;i>e;e+=1)n=e,t(s.$slides[n]).clone(!0).attr("id","").attr("index",n+s.slideCount).appendTo(s.$slideTrack).addClass("slick-cloned");s.$slideTrack.find(".slick-cloned").find("[id]").each(function(){t(this).attr("id","")})}},e.prototype.selectHandler=function(e){var n=this,i=parseInt(t(e.target).parents(".slick-slide").attr("index"));i||(i=0),n.slideCount<=n.options.slidesToShow||n.slideHandler(i)},e.prototype.slideHandler=function(t,e){var n,i,s,r,o,a=null,l=this;return e=e||!1,l.animating===!0&&l.options.waitForAnimate===!0?!1:(e===!1&&l.asNavFor(t),n=t,a=l.getLeft(n),r=l.getLeft(l.currentSlide),o=l.slideCount%l.options.slidesToScroll!==0?l.options.slidesToScroll:0,l.currentLeft=null===l.swipeLeft?r:l.swipeLeft,l.options.infinite===!1&&l.options.centerMode===!1&&(0>t||t>l.slideCount-l.options.slidesToShow+o)?(l.options.fade===!1&&(n=l.currentSlide,l.animateSlide(r,function(){l.postSlide(n)})),!1):l.options.infinite===!1&&l.options.centerMode===!0&&(0>t||t>l.slideCount-l.options.slidesToScroll)?(l.options.fade===!1&&(n=l.currentSlide,l.animateSlide(r,function(){l.postSlide(n)})),!1):(l.options.autoplay===!0&&clearInterval(l.autoPlayTimer),i=0>n?l.slideCount%l.options.slidesToScroll!==0?l.slideCount-l.slideCount%l.options.slidesToScroll:l.slideCount+n:n>=l.slideCount?l.slideCount%l.options.slidesToScroll!==0?0:n-l.slideCount:n,l.animating=!0,null!==l.options.onBeforeChange&&t!==l.currentSlide&&l.options.onBeforeChange.call(this,l,l.currentSlide,i),s=l.currentSlide,l.currentSlide=i,l.setSlideClasses(l.currentSlide),l.updateDots(),l.updateArrows(),l.options.fade===!0?(l.fadeSlide(s,i,function(){l.postSlide(i)}),!1):void l.animateSlide(a,function(){l.postSlide(i)})))},e.prototype.startLoad=function(){var t=this;t.options.arrows===!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.hide(),t.$nextArrow.hide()),t.options.dots===!0&&t.slideCount>t.options.slidesToShow&&t.$dots.hide(),t.$slider.addClass("slick-loading")},e.prototype.swipeDirection=function(){var t,e,n,i,s=this;return t=s.touchObject.startX-s.touchObject.curX,e=s.touchObject.startY-s.touchObject.curY,n=Math.atan2(e,t),i=Math.round(180*n/Math.PI),0>i&&(i=360-Math.abs(i)),45>=i&&i>=0?"left":360>=i&&i>=315?"left":i>=135&&225>=i?"right":"vertical"},e.prototype.swipeEnd=function(e){var n,i,s=this;if(s.dragging=!1,void 0===s.touchObject.curX)return!1;if(s.touchObject.swipeLength>=s.touchObject.minSwipe)switch(t(e.target).on("click.slick",function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t(e.target).off("click.slick")}),s.options.swipeToSlide===!0?(i=Math.round(s.touchObject.swipeLength/s.slideWidth),n=i):n=s.options.slidesToScroll,s.swipeDirection()){case"left":s.slideHandler(s.currentSlide+n),s.touchObject={};break;case"right":s.slideHandler(s.currentSlide-n),s.touchObject={}}else s.touchObject.startX!==s.touchObject.curX&&(s.slideHandler(s.currentSlide),s.touchObject={})},e.prototype.swipeHandler=function(t){var e=this;if(!(e.options.swipe===!1||"ontouchend"in document&&e.options.swipe===!1||e.options.draggable===!1&&-1!==t.type.indexOf("mouse")))switch(e.touchObject.fingerCount=t.originalEvent&&void 0!==t.originalEvent.touches?t.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,t.data.action){case"start":e.swipeStart(t);break;case"move":e.swipeMove(t);break;case"end":e.swipeEnd(t)}},e.prototype.swipeMove=function(t){var e,n,i,s,r=this;return s=void 0!==t.originalEvent?t.originalEvent.touches:null,e=r.getLeft(r.currentSlide),!r.dragging||s&&1!==s.length?!1:(r.touchObject.curX=void 0!==s?s[0].pageX:t.clientX,r.touchObject.curY=void 0!==s?s[0].pageY:t.clientY,r.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(r.touchObject.curX-r.touchObject.startX,2))),n=r.swipeDirection(),"vertical"!==n?(void 0!==t.originalEvent&&r.touchObject.swipeLength>4&&t.preventDefault(),i=r.touchObject.curX>r.touchObject.startX?1:-1,r.swipeLeft=r.options.vertical===!1?e+r.touchObject.swipeLength*i:e+r.touchObject.swipeLength*(r.$list.height()/r.listWidth)*i,r.options.fade===!0||r.options.touchMove===!1?!1:r.animating===!0?(r.swipeLeft=null,!1):void r.setCSS(r.swipeLeft)):void 0)},e.prototype.swipeStart=function(t){var e,n=this;return 1!==n.touchObject.fingerCount||n.slideCount<=n.options.slidesToShow?(n.touchObject={},!1):(void 0!==t.originalEvent&&void 0!==t.originalEvent.touches&&(e=t.originalEvent.touches[0]),n.touchObject.startX=n.touchObject.curX=void 0!==e?e.pageX:t.clientX,n.touchObject.startY=n.touchObject.curY=void 0!==e?e.pageY:t.clientY,void(n.dragging=!0))},e.prototype.unfilterSlides=function(){var t=this;null!==t.$slidesCache&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.appendTo(t.$slideTrack),t.reinit())},e.prototype.unload=function(){var e=this;t(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&(e.$prevArrow.remove(),e.$nextArrow.remove()),e.$slides.removeClass("slick-slide slick-active slick-visible").css("width","")},e.prototype.updateArrows=function(){var t=this;t.options.arrows===!0&&t.options.infinite!==!0&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.removeClass("slick-disabled"),t.$nextArrow.removeClass("slick-disabled"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled"),t.$nextArrow.removeClass("slick-disabled")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&(t.$nextArrow.addClass("slick-disabled"),t.$prevArrow.removeClass("slick-disabled")))},e.prototype.updateDots=function(){var t=this;null!==t.$dots&&(t.$dots.find("li").removeClass("slick-active"),t.$dots.find("li").eq(Math.floor(t.currentSlide/t.options.slidesToScroll)).addClass("slick-active"))},t.fn.slick=function(t){var n=this;return n.each(function(n,i){i.slick=new e(i,t)})},t.fn.slickAdd=function(t,e,n){var i=this;return i.each(function(i,s){s.slick.addSlide(t,e,n)})},t.fn.slickCurrentSlide=function(){var t=this;return t.get(0).slick.getCurrent()},t.fn.slickFilter=function(t){var e=this;return e.each(function(e,n){n.slick.filterSlides(t)})},t.fn.slickGoTo=function(t){var e=this;return e.each(function(e,n){n.slick.changeSlide({data:{message:"index",index:parseInt(t)}})})},t.fn.slickNext=function(){var t=this;return t.each(function(t,e){e.slick.changeSlide({data:{message:"next"}})})},t.fn.slickPause=function(){var t=this;return t.each(function(t,e){e.slick.autoPlayClear(),e.slick.paused=!0})},t.fn.slickPlay=function(){var t=this;return t.each(function(t,e){e.slick.paused=!1,e.slick.autoPlay()})},t.fn.slickPrev=function(){var t=this;return t.each(function(t,e){e.slick.changeSlide({data:{message:"previous"}})})},t.fn.slickRemove=function(t,e){var n=this;return n.each(function(n,i){i.slick.removeSlide(t,e)})},t.fn.slickGetOption=function(t){var e=this;return e.get(0).slick.options[t]},t.fn.slickSetOption=function(t,e,n){var i=this;return i.each(function(i,s){s.slick.options[t]=e,n===!0&&(s.slick.unload(),s.slick.reinit())})},t.fn.slickUnfilter=function(){var t=this;return t.each(function(t,e){e.slick.unfilterSlides()})},t.fn.unslick=function(){var t=this;return t.each(function(t,e){e.slick&&e.slick.destroy()})},t.fn.getSlick=function(){var t=null,e=this;return e.each(function(e,n){t=n.slick}),t}}),define("app/views/activities/global",["require","jquery","underscore","backbone","context","app/modals/activities/photo-modal","slick_carousel"],function(t){{var e=t("jquery"),n=(t("underscore"),t("backbone")),i=t("context"),s=t("app/modals/activities/photo-modal");t("slick_carousel")}return n.View.extend({el:"#site-wrapper",initialize:function(){var t=this;this.listenTo(i,"activity:openModal",function(e){t.openModal(e)})},events:{"click .bbm-modal .arrow-left":"prevSlide","click .bbm-modal .arrow-right":"nextSlide"},openModal:function(t){var n=this;return this.modal=new s({model:t}),this.$el.append(this.modal.render().el),this.$(".bbm-modal img").css("max-height",.8*e(window).height()),this.carousel=this.$(".bbm-modal .swiper-wrapper").slick({draggable:!1,arrows:!1,onInit:function(){var t=n.$(".bbm-modal").height();n.$(".bbm-modal .swiper-slide").css("line-height",t+"px")}}),this},prevSlide:function(t){t.preventDefault(),this.carousel.slickPrev()},nextSlide:function(t){t.preventDefault(),this.carousel.slickNext()}})}),define("handlebarsHelpers",["require","jquery","handlebars"],function(t){var e=(t("jquery"),t("handlebars"));e.registerHelper("if_eq",function(t,e,n){return t==e?n.fn(this):n.inverse(this)}),e.registerHelper("if_gt",function(t,e,n){return t>e?n.fn(this):n.inverse(this)}),e.registerHelper("if_lt",function(t,e,n){return e>t?n.fn(this):n.inverse(this)}),e.registerHelper("pluralize",function(t,e,n){return 1===t?e:n}),e.registerHelper("print_bool",function(t){return t?"true":"false"}),e.registerHelper("value_lookup",function(t,e){return e[t]}),e.registerHelper("threshold_class",function(t,e,n){return Number(t)<=Number(n[e])?"positive":"negative"}),e.registerHelper("eachRange",function(t,e,n,i){for(var s="",r=t;e>r;r++)s+=i.fn(n[r]);return s}),e.registerHelper("if_present",function(t,e){return void 0===t?"":e.fn(this)}),e.registerHelper("format_number",function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),e.registerHelper("format_number_from_value_lookup",function(t,e){return e[t]?e[t].toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):void 0})}),define("app/models/activities/activity",["require","jquery","underscore","backbone"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"));return e.Model.extend({initialize:function(t,e){return this.attributes=t,e.url&&(this.url=e.url),this}})}),define("app/utils/HandlebarsHelpers",["require","jquery","handlebars"],function(t){var e=(t("jquery"),t("handlebars"));e.registerHelper("if_eq",function(t,e,n){return t==e?n.fn(this):n.inverse(this)}),e.registerHelper("if_gt",function(t,e,n){return t>e?n.fn(this):n.inverse(this)}),e.registerHelper("if_lt",function(t,e,n){return e>t?n.fn(this):n.inverse(this)}),e.registerHelper("pluralize",function(t,e,n){return 1===t?e:n}),e.registerHelper("print_bool",function(t){return t?"true":"false"}),e.registerHelper("value_lookup",function(t,e){return e[t]}),e.registerHelper("threshold_class",function(t,e,n){return Number(t)<=Number(n[e])?"positive":"negative"}),e.registerHelper("eachRange",function(t,e,n,i){for(var s="",r=t;e>r;r++)s+=i.fn(n[r]);return s}),e.registerHelper("if_present",function(t,e){return void 0===t?"":e.fn(this)}),e.registerHelper("format_number",function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),e.registerHelper("format_number_from_value_lookup",function(t,e){return e[t]?e[t].toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):void 0})}),define("app/views/comments/comment",["require","jquery","underscore","backbone","handlebars","handlebarsTemplates","app/utils/HandlebarsHelpers"],function(t){{var e=(t("jquery"),t("underscore"),t("backbone")),n=(t("handlebars"),t("handlebarsTemplates"));t("app/utils/HandlebarsHelpers")}return e.View.extend({className:"comment",template:n.comment,initialize:function(t){this.model=t.model,this.model.collection.bind("reset",this.removeFromDom,this)},events:{"click .delete-comment":"deleteComment"},render:function(){return this.$el.html(this.template(this.model.attributes)),this},deleteComment:function(t){t.preventDefault(),t.stopPropagation();var e=this,n=this.model.url+"?comment_id="+this.model.get("comment_id");this.model.collection.remove(this.model),this.model.destroy({url:n}).done(function(){e.remove()})},removeFromDom:function(){this.remove()}})}),define("app/models/comments/comment",["require","jquery","underscore","backbone"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"));return e.Model.extend({idAttribute:"comment_id",initialize:function(t,e){this.url=e.url},validate:function(t){return""===t.comment?"error":void 0}})}),define("app/collections/comments/comments",["require","jquery","underscore","backbone","app/models/comments/comment"],function(t){var e=(t("jquery"),t("underscore"),t("backbone")),n=t("app/models/comments/comment");return e.Collection.extend({initialize:function(t,e){this.url=e.url},comparator:function(t){return Date.parse(t.get("posted_at"))},model:n})}),define("app/views/comments/comments",["require","jquery","underscore","backbone","handlebars","handlebarsTemplates","app/views/comments/comment","app/models/comments/comment","app/collections/comments/comments"],function(t){var e=(t("jquery"),t("underscore")),n=t("backbone"),i=(t("handlebars"),t("handlebarsTemplates"),t("app/views/comments/comment")),s=t("app/models/comments/comment"),r=t("app/collections/comments/comments");return n.View.extend({el:".comments",initialize:function(t){this.activity=t.activity,this.programId=t.programId,this.objId=this.activity.get("id"),this.commentUrl="/programs/"+this.programId+"/activities/"+this.objId+"/comments",this.collection=new r([],{url:this.commentUrl}),this.initializeModels(),this.collection.bind("add",this.onModelAdded,this)},render:function(){var t=this;return e.each(this.collection.models,function(e){t.$el.append(new i({model:e,activityId:t.activityId,programId:t.programId}).render().el)}),this},initializeModels:function(){var t=this.activity.get("comments"),n=[],i=this;e.each(t,function(t){n.push(new s(t,{url:i.commentUrl}))}),this.collection.add(n)},onModelAdded:function(t){return this.$el.append(new i({model:t,activityId:this.activityId,programId:this.programId}).render().el),this},showAllComments:function(){var t=this;this.collection.fetch({reset:!0,data:{type:this.activity.get("type")}}).done(function(){t.render()})},showOriginalComments:function(){this.collection.reset(),this.initializeModels()}})}),define("app/views/comments/new_comment",["require","jquery","underscore","backbone","handlebars","handlebarsTemplates","app/models/comments/comment"],function(t){var e=t("jquery"),n=(t("underscore"),t("backbone")),i=(t("handlebars"),t("handlebarsTemplates")),s=t("app/models/comments/comment");return n.View.extend({initialize:function(t){this.activity=t.activity,this.collection=t.collection},template:i["new-comment"],events:{"click .add-comment":"createComment"},render:function(){return this.$el.html(this.template(this.activity.attributes)),this},createComment:function(t){t.preventDefault(),t.stopPropagation();var e=this,n=new s({comment:this.$(".new-comment-field").val()},{url:this.collection.url});n.isValid()&&(n.set({type:this.activity.get("type"),id:this.activity.get("id")}),n.save().done(function(t){n.set(t),e.collection.add([n]),e.$(".new-comment-field").val("")}).fail(function(){}))},commentFocus:function(){this.$(".new-comment-field").focus(),e("body").scrollTo(this.$(".new-comment-field"),{duration:1e4,offsetTop:"50"})}})}),define("app/models/activities/like",["require","jquery","underscore","backbone"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"));return e.Model.extend({initialize:function(t,e){this.programId=e.programId},url:function(){return"/programs/"+this.programId+"/activities/"+this.id+"/like"}})}),define("app/views/activities/activity",["require","jquery","underscore","backbone","handlebars","handlebarsTemplates","handlebarsHelpers","context","app/models/activities/activity","app/views/comments/comments","app/views/comments/new_comment","app/models/activities/like"],function(t){var e=t("jquery"),n=(t("underscore"),t("backbone")),i=(t("handlebars"),t("handlebarsTemplates")),s=(t("handlebarsHelpers"),t("context")),r=t("app/models/activities/activity"),o=t("app/views/comments/comments"),a=t("app/views/comments/new_comment"),l=t("app/models/activities/like");return n.View.extend({className:"activity",template:i.activity,events:{"click .activity_like_button":"likeActivity","click .start-comment":"focusComment","click .more-comments":"showAdditionalComments","click .less-comments":"hideAdditionalComments","click .swiper-container img":"openModal","click .arrow-left":"prevSlide","click .arrow-right":"nextSlide"},initialize:function(t){this.programId=t.programId,void 0===t.model?this.model=new r:(this.model=t.model,this.model.set("imageCount",t.model.get("images").length)),this.objId=this.model.get("activity_id"),this.carousel=null,this.listenTo(s,"navigation:collapsed",this.initCarousel)},render:function(){this.model.get("comments_count")>3&&this.model.set("additional_comments",this.model.get("comments_count")-3),this.$el.html(this.template(this.model.attributes));var t=this.$(".comments");return this.comments=new o({el:t,activity:this.model,programId:this.programId}),this.comments.render(),this.newComment=new a({el:this.$(".new-comment"),activity:this.model,collection:this.comments.collection}),this.newComment.render(),this},likeActivity:function(t){t.stopPropagation(),t.preventDefault();var n=this,i=new l({id:this.objId},{programId:this.programId});i.save().done(function(){var i=n.model.get("like_count")+1;n.$(".like-count").text(i);var s=n.$(".like-label");s.text(1==i?" Like":" Likes"),e(t.target).replaceWith("Liked")})},focusComment:function(t){t.preventDefault(),t.stopPropagation(),this.newComment.commentFocus()},showAdditionalComments:function(t){t.preventDefault(),t.stopPropagation(),this.comments.showAllComments(),e(t.target).text("Hide Comments").removeClass("more-comments").addClass("less-comments")},hideAdditionalComments:function(t){t.preventDefault(),t.stopPropagation(),this.comments.showOriginalComments();var n="View "+this.model.get("additional_comments")+" More Comments";e(t.target).text(n).removeClass("less-comments").addClass("more-comments")},openModal:function(t){t.preventDefault(),t.stopPropagation(),e(window).width()/parseFloat(e("body").css("font-size"))>30&&s.trigger("activity:openModal",this.model)},prevSlide:function(t){t.preventDefault(),this.carousel.slickPrev()},nextSlide:function(t){t.preventDefault(),this.carousel.slickNext()},initializeCarousel:function(){this.carousel=this.$el.find(".swiper-wrapper").slick({draggable:!1,arrows:!1,onInit:function(){var t=self.$(".swiper-container").height();self.$(".swiper-slide").css("line-height",t+"px")},onReInit:function(){var t=self.$(".swiper-wrapper").width();console.log(t),self.$(".swiper-slide").css("width",width+"px")}})},resizeCarousel:function(){this.carousel.slickSetOption("a","b",!0)}})}),define("app/views/activities/incomplete_activity",["require","jquery","underscore","backbone","handlebars","handlebarsTemplates"],function(t){var e=(t("jquery"),t("underscore"),t("backbone")),n=(t("handlebars"),t("handlebarsTemplates"));return e.View.extend({className:"activity incomplete",template:n.incomplete_activities,initialize:function(t){return this.model=t.model,this},render:function(){return this.$el.html(this.template(this.model.attributes)),this}})}),define("app/views/activities/loading",["require","jquery","underscore","backbone","handlebars","handlebarsTemplates"],function(t){var e=(t("jquery"),t("underscore"),t("backbone")),n=(t("handlebars"),t("handlebarsTemplates"));return e.View.extend({className:"isLoading",template:n.loading(),initialize:function(){this.active=!1},render:function(){return this.$el.html(this.template),this.active=!0,this},removeFromDOM:function(){this.remove(),this.active=!1}})}),function(t){if("object"==typeof exports)module.exports=t(require("underscore"),require("backbone"));else if("function"==typeof define&&define.amd)define("backbone.paginator",["underscore","backbone"],t);else if("undefined"!=typeof _&&"undefined"!=typeof Backbone){var e=Backbone.PageableCollection,n=t(_,Backbone);Backbone.PageableCollection.noConflict=function(){return Backbone.PageableCollection=e,n}}}(function(t,e){function n(e,n){if(!t.isNumber(e)||t.isNaN(e)||!t.isFinite(e)||~~e!==e)throw new TypeError("`"+n+"` must be a finite integer");return e}function i(t){for(var e,n,i,s,r={},o=decodeURIComponent,a=t.split("&"),l=0,c=a.length;c>l;l++){var h=a[l];e=h.split("="),n=e[0],i=e[1]||!0,n=o(n),i=o(i),s=r[n],f(s)?s.push(i):r[n]=s?[s,i]:i}return r}function s(t,e,n){var i=t._events[e];if(i&&i.length){var s=i[i.length-1],r=s.callback;s.callback=function(){try{r.apply(this,arguments),n()}catch(t){throw t}finally{s.callback=r}}}else n()}var r=t.extend,o=t.omit,a=t.clone,l=t.each,c=t.pick,h=t.contains,u=t.isEmpty,d=t.pairs,p=t.invert,f=t.isArray,m=t.isFunction,g=t.isObject,v=t.keys,y=t.isUndefined,b=Math.ceil,_=Math.floor,w=Math.max,x=e.Collection.prototype,k=/[\s'"]/g,S=/[<>\s'"]/g,C=e.PageableCollection=e.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(t,e){x.constructor.apply(this,arguments),e=e||{};var n=this.mode=e.mode||this.mode||T.mode,i=r({},T.queryParams,this.queryParams,e.queryParams||{});i.directions=r({},T.queryParams.directions,this.queryParams.directions,i.directions||{}),this.queryParams=i;var s=this.state=r({},T.state,this.state,e.state||{});s.currentPage=null==s.currentPage?s.firstPage:s.currentPage,f(t)||(t=t?[t]:[]),t=t.slice(),"server"==n||null!=s.totalRecords||u(t)||(s.totalRecords=t.length),this.switchMode(n,r({fetch:!1,resetState:!1,models:t},e));var o=e.comparator;if(s.sortKey&&!o&&this.setSorting(s.sortKey,s.order,e),"server"!=n){var l=this.fullCollection;o&&e.full&&(this.comparator=null,l.comparator=o),e.full&&l.sort(),t&&!u(t)&&(this.reset(t,r({silent:!0},e)),this.getPage(s.currentPage),t.splice.apply(t,[0,t.length].concat(this.models)))}this._initState=a(this.state)},_makeFullCollection:function(t,n){var i,s,r,o=["url","model","sync","comparator"],a=this.constructor.prototype,l={};for(i=0,s=o.length;s>i;i++)r=o[i],y(a[r])||(l[r]=a[r]);var c=new(e.Collection.extend(l))(t,n);for(i=0,s=o.length;s>i;i++)r=o[i],this[r]!==a[r]&&(c[r]=this[r]);return c},_makeCollectionEventHandler:function(t,e){return function(n,i,o,c){var h=t._handlers;l(v(h),function(n){var i=h[n];t.off(n,i),e.off(n,i)});var u=a(t.state),d=u.firstPage,p=0===d?u.currentPage:u.currentPage-1,f=u.pageSize,m=p*f,g=m+f;if("add"==n){var _,w,x,k,c=c||{};if(o==e)w=e.indexOf(i),w>=m&&g>w&&(k=t,_=x=w-m);else{_=t.indexOf(i),w=m+_,k=e;var x=y(c.at)?w:c.at+m}if(c.onRemove||(++u.totalRecords,delete c.onRemove),t.state=t._checkState(u),k){k.add(i,r({},c||{},{at:x}));var S=_>=f?i:!y(c.at)&&g>x&&t.length>f?t.at(f):null;S&&s(o,n,function(){t.remove(S,{onAdd:!0})})}}if("remove"==n)if(c.onAdd)delete c.onAdd;else{if(--u.totalRecords){var C=u.totalPages=b(u.totalRecords/f);u.lastPage=0===d?C-1:C||d,u.currentPage>C&&(u.currentPage=u.lastPage)}else u.totalRecords=null,u.totalPages=null;t.state=t._checkState(u);var T,E=c.index;o==t?((T=e.at(g))?s(t,n,function(){t.push(T,{onRemove:!0})}):!t.length&&u.totalRecords&&t.reset(e.models.slice(m-f,g-f),r({},c,{parse:!1})),e.remove(i)):E>=m&&g>E&&((T=e.at(g-1))&&s(t,n,function(){t.push(T,{onRemove:!0})}),t.remove(i),!t.length&&u.totalRecords&&t.reset(e.models.slice(m-f,g-f),r({},c,{parse:!1})))}if("reset"==n)if(c=o,o=i,o==t&&null==c.from&&null==c.to){var A=e.models.slice(0,m),P=e.models.slice(m+t.models.length);e.reset(A.concat(t.models).concat(P),c)}else o==e&&((u.totalRecords=e.models.length)||(u.totalRecords=null,u.totalPages=null),"client"==t.mode&&(u.lastPage=u.currentPage=u.firstPage),t.state=t._checkState(u),t.reset(e.models.slice(m,g),r({},c,{parse:!1})));"sort"==n&&(c=o,o=i,o===e&&t.reset(e.models.slice(m,g),r({},c,{parse:!1}))),l(v(h),function(n){var i=h[n];l([t,e],function(t){t.on(n,i);var e=t._events[n]||[];e.unshift(e.pop())})})}},_checkState:function(t){var e=this.mode,i=this.links,s=t.totalRecords,r=t.pageSize,o=t.currentPage,a=t.firstPage,l=t.totalPages;if(null!=s&&null!=r&&null!=o&&null!=a&&("infinite"==e?i:!0)){if(s=n(s,"totalRecords"),r=n(r,"pageSize"),o=n(o,"currentPage"),a=n(a,"firstPage"),1>r)throw new RangeError("`pageSize` must be >= 1");if(l=t.totalPages=b(s/r),0>a||a>1)throw new RangeError("`firstPage must be 0 or 1`");if(t.lastPage=0===a?w(0,l-1):l||a,"infinite"==e){if(!i[o+""])throw new RangeError("No link found for page "+o)}else if(a>o||l>0&&(a?o>l:o>=l))throw new RangeError("`currentPage` must be firstPage <= currentPage "+(a?">":">=")+" totalPages if "+a+"-based. Got "+o+".")}return t},setPageSize:function(t,e){t=n(t,"pageSize"),e=e||{first:!1};var i=this.state,s=b(i.totalRecords/t),a=s?w(i.firstPage,_(s*i.currentPage/i.totalPages)):i.firstPage;return i=this.state=this._checkState(r({},i,{pageSize:t,currentPage:e.first?i.firstPage:a,totalPages:s})),this.getPage(i.currentPage,o(e,["first"]))},switchMode:function(e,n){if(!h(["server","client","infinite"],e))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');n=n||{fetch:!0,resetState:!0};var i=this.state=n.resetState?a(this._initState):this._checkState(r({},this.state));this.mode=e;var s,c=this,u=this.fullCollection,d=this._handlers=this._handlers||{};if("server"==e||u)"server"==e&&u&&(l(v(d),function(t){s=d[t],c.off(t,s),u.off(t,s)}),delete this._handlers,this._fullComparator=u.comparator,delete this.fullCollection);else{u=this._makeFullCollection(n.models||[],n),u.pageableCollection=this,this.fullCollection=u;var p=this._makeCollectionEventHandler(this,u);l(["add","remove","reset","sort"],function(e){d[e]=s=t.bind(p,{},e),c.on(e,s),u.on(e,s)}),u.comparator=this._fullComparator}if("infinite"==e)for(var f=this.links={},m=i.firstPage,g=b(i.totalRecords/i.pageSize),y=0===m?w(0,g-1):g||m,_=i.firstPage;y>=_;_++)f[_]=this.url;else this.links&&delete this.links;return n.fetch?this.fetch(o(n,"fetch","resetState")):this},hasPreviousPage:function(){var t=this.state,e=t.currentPage;return"infinite"!=this.mode?e>t.firstPage:!!this.links[e-1]},hasNextPage:function(){var t=this.state,e=this.state.currentPage;return"infinite"!=this.mode?e<t.lastPage:!!this.links[e+1]},getFirstPage:function(t){return this.getPage("first",t)},getPreviousPage:function(t){return this.getPage("prev",t)},getNextPage:function(t){return this.getPage("next",t)},getLastPage:function(t){return this.getPage("last",t)},getPage:function(t,e){var i=this.mode,s=this.fullCollection;e=e||{fetch:!1};var a=this.state,l=a.firstPage,c=a.currentPage,h=a.lastPage,d=a.pageSize,p=t;switch(t){case"first":p=l;break;case"prev":p=c-1;break;case"next":p=c+1;break;case"last":p=h;break;default:p=n(t,"index")}this.state=this._checkState(r({},a,{currentPage:p})),e.from=c,e.to=p;var f=(0===l?p:p-1)*d,m=s&&s.length?s.models.slice(f,f+d):[];return"client"!=i&&("infinite"!=i||u(m))||e.fetch?("infinite"==i&&(e.url=this.links[p]),this.fetch(o(e,"fetch"))):(this.reset(m,o(e,"fetch")),this)},getPageByOffset:function(t,e){if(0>t)throw new RangeError("`offset must be > 0`");t=n(t);var i=_(t/this.state.pageSize);return 0!==this.state.firstPage&&i++,i>this.state.lastPage&&(i=this.state.lastPage),this.getPage(i,e)},sync:function(t,n,i){var s=this;if("infinite"==s.mode){var o=i.success,a=s.state.currentPage;i.success=function(t,e,n){var l=s.links,c=s.parseLinks(t,r({xhr:n},i));c.first&&(l[s.state.firstPage]=c.first),c.prev&&(l[a-1]=c.prev),c.next&&(l[a+1]=c.next),o&&o(t,e,n)}}return(x.sync||e.sync).call(s,t,n,i)},parseLinks:function(t,e){var n={},i=e.xhr.getResponseHeader("Link");if(i){var s=["first","prev","next"];l(i.split(","),function(t){var e=t.split(";"),i=e[0].replace(S,""),r=e.slice(1);l(r,function(t){var e=t.split("="),r=e[0].replace(k,""),o=e[1].replace(k,"");"rel"==r&&h(s,o)&&(n[o]=i)})})}return n},parse:function(t,e){var n=this.parseState(t,a(this.queryParams),a(this.state),e);
return n&&(this.state=this._checkState(r({},this.state,n))),this.parseRecords(t,e)},parseState:function(e,n,i){if(e&&2===e.length&&g(e[0])&&f(e[1])){var s=a(i),r=e[0];return l(d(o(n,"directions")),function(e){var n=e[0],i=e[1],o=r[i];y(o)||t.isNull(o)||(s[n]=r[i])}),r.order&&(s.order=1*p(n.directions)[r.order]),s}},parseRecords:function(t){return t&&2===t.length&&g(t[0])&&f(t[1])?t[1]:t},fetch:function(t){t=t||{};var e=this._checkState(this.state),n=this.mode;"infinite"!=n||t.url||(t.url=this.links[e.currentPage]);var s=t.data||{},l=t.url||this.url||"";m(l)&&(l=l.call(this));var h=l.indexOf("?");-1!=h&&(r(s,i(l.slice(h+1))),l=l.slice(0,h)),t.url=l,t.data=s;var u,p,f,g,b="client"==this.mode?c(this.queryParams,"sortKey","order"):o(c(this.queryParams,v(T.queryParams)),"directions"),_=d(b),w=a(this);for(u=0;u<_.length;u++)p=_[u],f=p[0],g=p[1],g=m(g)?g.call(w):g,null!=e[f]&&null!=g&&(s[g]=e[f]);if(e.sortKey&&e.order){var k=m(b.order)?b.order.call(w):b.order;s[k]=this.queryParams.directions[e.order+""]}else e.sortKey||delete s[b.order];var S=d(o(this.queryParams,v(T.queryParams)));for(u=0;u<S.length;u++)p=S[u],g=p[1],g=m(g)?g.call(w):g,null!=g&&(s[p[0]]=g);if("server"!=n){var C=this,E=this.fullCollection,A=t.success;return t.success=function(e,i,s){s=s||{},y(t.silent)?delete s.silent:s.silent=t.silent;var o=e.models;"client"==n?E.reset(o,s):(E.add(o,r({at:E.length},r(s,{parse:!1}))),C.trigger("reset",C,s)),A&&A(e,i,s)},x.fetch.call(this,r({},t,{silent:!0}))}return x.fetch.call(this,t)},_makeComparator:function(t,e,n){var i=this.state;return t=t||i.sortKey,e=e||i.order,t&&e?(n||(n=function(t,e){return t.get(e)}),function(i,s){var r,o=n(i,t),a=n(s,t);return 1===e&&(r=o,o=a,a=r),o===a?0:a>o?-1:1}):void 0},setSorting:function(t,e,n){var i=this.state;i.sortKey=t,i.order=e=e||i.order;var s=this.fullCollection,o=!1,a=!1;t||(o=a=!0);var l=this.mode;n=r({side:"client"==l?l:"server",full:!0},n);var c=this._makeComparator(t,e,n.sortValue),h=n.full,u=n.side;return"client"==u?h?(s&&(s.comparator=c),o=!0):(this.comparator=c,a=!0):"server"!=u||h||(this.comparator=c),o&&(this.comparator=null),a&&s&&(s.comparator=null),this}}),T=C.prototype;return C}),define("app/collections/activities/activities",["require","jquery","underscore","backbone","backbone.paginator","app/models/activities/activity"],function(t){var e=(t("jquery"),t("underscore"),t("backbone")),n=(t("backbone.paginator"),t("app/models/activities/activity"));return e.PageableCollection.extend({initialize:function(t){this.url=t.url,this.currentPage=0},model:n,state:{pageSize:5,sortKey:"updated",order:1},queryParams:{totalPages:null,totalRecords:null,pageSize:"rows",sortKey:"sort",order:"order",directions:{"-1":"asc",1:"desc"}}})}),define("app/models/activities/incomplete_activity",["require","jquery","underscore","backbone"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"));return e.Model.extend({initialize:function(t,e){return this.url=e.url,this}})}),function(t){"function"==typeof define&&define.amd?define("libs/expanding",["jquery"],t):t(jQuery)}(function(t){function e(t){window.console&&console.warn&&console.warn(t)}var n=function(e,i){n._registry.push(this),this.$textarea=e,this.$textCopy=t("<span />"),this.$clone=t("<pre class='expanding-clone'><br /></pre>").prepend(this.$textCopy),this._resetStyles(),this._setCloneStyles(),this._setTextareaStyles(),e.wrap(t("<div class='expanding-wrapper' style='position:relative' />")).after(this.$clone),this.attach(),this.update(),i.update&&e.bind("update.expanding",i.update)};n._registry=[],n.getExpandingInstance=function(e){var i=t.map(n._registry,function(t){return t.$textarea[0]}),s=t.inArray(e,i);return s>-1?n._registry[s]:null};var i=function(){var t=-1;if("Microsoft Internet Explorer"===navigator.appName){var e=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})");null!==n.exec(e)&&(t=parseFloat(RegExp.$1))}return t}(),s="oninput"in document.createElement("input")&&9!==i;n.prototype={attach:function(){var t="input.expanding change.expanding",e=this;s||(t+=" keyup.expanding"),this.$textarea.bind(t,function(){e.update()})},update:function(){this.$textCopy.text(this.$textarea.val().replace(/\r\n/g,"\n")),this.$textarea.triggerHandler("update.expanding")},destroy:function(){this.$clone.remove(),this.$textarea.unwrap().attr("style",this._oldTextareaStyles||""),delete this._oldTextareaStyles;var e=t.inArray(this,n._registry);e>-1&&n._registry.splice(e,1),this.$textarea.unbind("input.expanding change.expanding keyup.expanding update.expanding")},_resetStyles:function(){this._oldTextareaStyles=this.$textarea.attr("style"),this.$textarea.add(this.$clone).css({margin:0,webkitBoxSizing:"border-box",mozBoxSizing:"border-box",boxSizing:"border-box",width:"100%"})},_setCloneStyles:function(){var t={display:"block",border:"0 solid",visibility:"hidden",minHeight:this.$textarea.outerHeight()};"off"===this.$textarea.attr("wrap")?t.overflowX="scroll":t.whiteSpace="pre-wrap",this.$clone.css(t),this._copyTextareaStylesToClone()},_copyTextareaStylesToClone:function(){var e=this,n=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","wordWrap","word-break","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","paddingLeft","paddingRight","paddingTop","paddingBottom","maxHeight"];t.each(n,function(t,n){var i=e.$textarea.css(n);e.$clone.css(n)!==i&&(e.$clone.css(n,i),"maxHeight"===n&&"none"!==i&&e.$clone.css("overflow","hidden"))})},_setTextareaStyles:function(){this.$textarea.css({position:"absolute",top:0,left:0,height:"100%",resize:"none",overflow:"auto"})}},t.expanding=t.extend({autoInitialize:!0,initialSelector:"textarea.expanding",opts:{update:function(){}}},t.expanding||{}),t.fn.expanding=function(i){if("destroy"===i)return this.each(function(){var t=n.getExpandingInstance(this);t&&t.destroy()}),this;if("active"===i)return!!this.filter(function(){return!!n.getExpandingInstance(this)}).length;var s=t.extend({},t.expanding.opts,i);return this.filter("textarea").each(function(){var i=this.offsetWidth>0||this.offsetHeight>0,r=n.getExpandingInstance(this);i&&!r?new n(t(this),s):(i||e("ExpandingTextareas: attempt to initialize an invisible textarea. Call expanding() again once it has been inserted into the page and/or is visible."),r&&e("ExpandingTextareas: attempt to initialize a textarea that has already been initialized. Subsequent calls are ignored."))}),this},t(function(){t.expanding.autoInitialize&&t(t.expanding.initialSelector).expanding()})}),function(t){function e(t,e,n){switch(arguments.length){case 2:return null!=t?t:e;case 3:return null!=t?t:null!=e?e:n;default:throw new Error("Implement me")}}function n(t,e){return Ce.call(t,e)}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function s(t){be.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function r(t,e){var n=!0;return d(function(){return n&&(s(t),n=!1),e.apply(this,arguments)},e)}function o(t,e){vn[t]||(s(e),vn[t]=!0)}function a(t,e){return function(n){return m(t.call(this,n),e)}}function l(t,e){return function(n){return this.localeData().ordinal(t.call(this,n),e)}}function c(){}function h(t,e){e!==!1&&D(t),p(this,t),this._d=new Date(+t._d)}function u(t){var e=S(t),n=e.year||0,i=e.quarter||0,s=e.month||0,r=e.week||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,h=e.millisecond||0;this._milliseconds=+h+1e3*c+6e4*l+36e5*a,this._days=+o+7*r,this._months=+s+3*i+12*n,this._data={},this._locale=be.localeData(),this._bubble()}function d(t,e){for(var i in e)n(e,i)&&(t[i]=e[i]);return n(e,"toString")&&(t.toString=e.toString),n(e,"valueOf")&&(t.valueOf=e.valueOf),t}function p(t,e){var n,i,s;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),Ie.length>0)for(n in Ie)i=Ie[n],s=e[i],"undefined"!=typeof s&&(t[i]=s);return t}function f(t){return 0>t?Math.ceil(t):Math.floor(t)}function m(t,e,n){for(var i=""+Math.abs(t),s=t>=0;i.length<e;)i="0"+i;return(s?n?"+":"":"-")+i}function g(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function v(t,e){var n;return e=F(e,t),t.isBefore(e)?n=g(t,e):(n=g(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function y(t,e){return function(n,i){var s,r;return null===i||isNaN(+i)||(o(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),r=n,n=i,i=r),n="string"==typeof n?+n:n,s=be.duration(n,i),b(this,s,t),this}}function b(t,e,n,i){var s=e._milliseconds,r=e._days,o=e._months;i=null==i?!0:i,s&&t._d.setTime(+t._d+s*n),r&&pe(t,"Date",de(t,"Date")+r*n),o&&ue(t,de(t,"Month")+o*n),i&&be.updateOffset(t,r||o)}function _(t){return"[object Array]"===Object.prototype.toString.call(t)}function w(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function x(t,e,n){var i,s=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0;for(i=0;s>i;i++)(n&&t[i]!==e[i]||!n&&T(t[i])!==T(e[i]))&&o++;return o+r}function k(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=hn[t]||un[e]||e}return t}function S(t){var e,i,s={};for(i in t)n(t,i)&&(e=k(i),e&&(s[e]=t[i]));return s}function C(e){var n,i;if(0===e.indexOf("week"))n=7,i="day";else{if(0!==e.indexOf("month"))return;n=12,i="month"}be[e]=function(s,r){var o,a,l=be._locale[e],c=[];if("number"==typeof s&&(r=s,s=t),a=function(t){var e=be().utc().set(i,t);return l.call(be._locale,e,s||"")},null!=r)return a(r);for(o=0;n>o;o++)c.push(a(o));return c}}function T(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function E(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function A(t,e,n){return ae(be([t,11,31+e-n]),e,n).week}function P(t){return L(t)?366:365}function L(t){return t%4===0&&t%100!==0||t%400===0}function D(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[Ee]<0||t._a[Ee]>11?Ee:t._a[Ae]<1||t._a[Ae]>E(t._a[Te],t._a[Ee])?Ae:t._a[Pe]<0||t._a[Pe]>23?Pe:t._a[Le]<0||t._a[Le]>59?Le:t._a[De]<0||t._a[De]>59?De:t._a[qe]<0||t._a[qe]>999?qe:-1,t._pf._overflowDayOfYear&&(Te>e||e>Ae)&&(e=Ae),t._pf.overflow=e)}function q(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function N(t){return t?t.toLowerCase().replace("_","-"):t}function I(t){for(var e,n,i,s,r=0;r<t.length;){for(s=N(t[r]).split("-"),e=s.length,n=N(t[r+1]),n=n?n.split("-"):null;e>0;){if(i=M(s.slice(0,e).join("-")))return i;if(n&&n.length>=e&&x(s,n,!0)>=e-1)break;e--}r++}return null}function M(t){var e=null;if(!Ne[t]&&Me)try{e=be.locale(),require("./locale/"+t),be.locale(e)}catch(n){}return Ne[t]}function F(t,e){return e._isUTC?be(t).zone(e._offset||0):be(t).local()}function O(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function $(t){var e,n,i=t.match(je);for(e=0,n=i.length;n>e;e++)i[e]=gn[i[e]]?gn[i[e]]:O(i[e]);return function(s){var r="";for(e=0;n>e;e++)r+=i[e]instanceof Function?i[e].call(s,t):i[e];return r}}function j(t,e){return t.isValid()?(e=R(e,t.localeData()),dn[e]||(dn[e]=$(e)),dn[e](t)):t.localeData().invalidDate()}function R(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(Re.lastIndex=0;i>=0&&Re.test(t);)t=t.replace(Re,n),Re.lastIndex=0,i-=1;return t}function H(t,e){var n,i=e._strict;switch(t){case"Q":return Qe;case"DDDD":return Je;case"YYYY":case"GGGG":case"gggg":return i?tn:Be;case"Y":case"G":case"g":return nn;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?en:We;case"S":if(i)return Qe;case"SS":if(i)return Ze;case"SSS":if(i)return Je;case"DDD":return ze;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ue;case"a":case"A":return e._locale._meridiemParse;case"X":return Xe;case"Z":case"ZZ":return Ye;case"T":return Ge;case"SSSS":return Ve;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?Ze:He;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return He;case"Do":return Ke;default:return n=new RegExp(K(X(t.replace("\\","")),"i"))}}function z(t){t=t||"";var e=t.match(Ye)||[],n=e[e.length-1]||[],i=(n+"").match(ln)||["-",0,0],s=+(60*i[1])+T(i[2]);return"+"===i[0]?-s:s}function B(t,e,n){var i,s=n._a;switch(t){case"Q":null!=e&&(s[Ee]=3*(T(e)-1));break;case"M":case"MM":null!=e&&(s[Ee]=T(e)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(e),null!=i?s[Ee]=i:n._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(s[Ae]=T(e));break;case"Do":null!=e&&(s[Ae]=T(parseInt(e,10)));break;case"DDD":case"DDDD":null!=e&&(n._dayOfYear=T(e));break;case"YY":s[Te]=be.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":s[Te]=T(e);break;case"a":case"A":n._isPm=n._locale.isPM(e);break;case"H":case"HH":case"h":case"hh":s[Pe]=T(e);break;case"m":case"mm":s[Le]=T(e);break;case"s":case"ss":s[De]=T(e);break;case"S":case"SS":case"SSS":case"SSSS":s[qe]=T(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=z(e);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(e),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=e;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":t=t.substr(0,1);case"gggg":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(n._w=n._w||{},n._w[t]=T(e));break;case"gg":case"GG":n._w=n._w||{},n._w[t]=be.parseTwoDigitYear(e)}}function W(t){var n,i,s,r,o,a,l;n=t._w,null!=n.GG||null!=n.W||null!=n.E?(o=1,a=4,i=e(n.GG,t._a[Te],ae(be(),1,4).year),s=e(n.W,1),r=e(n.E,1)):(o=t._locale._week.dow,a=t._locale._week.doy,i=e(n.gg,t._a[Te],ae(be(),o,a).year),s=e(n.w,1),null!=n.d?(r=n.d,o>r&&++s):r=null!=n.e?n.e+o:o),l=le(i,s,r,a,o),t._a[Te]=l.year,t._dayOfYear=l.dayOfYear}function V(t){var n,i,s,r,o=[];if(!t._d){for(s=Y(t),t._w&&null==t._a[Ae]&&null==t._a[Ee]&&W(t),t._dayOfYear&&(r=e(t._a[Te],s[Te]),t._dayOfYear>P(r)&&(t._pf._overflowDayOfYear=!0),i=ie(r,0,t._dayOfYear),t._a[Ee]=i.getUTCMonth(),t._a[Ae]=i.getUTCDate()),n=0;3>n&&null==t._a[n];++n)t._a[n]=o[n]=s[n];for(;7>n;n++)t._a[n]=o[n]=null==t._a[n]?2===n?1:0:t._a[n];t._d=(t._useUTC?ie:ne).apply(null,o),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()+t._tzm)}}function U(t){var e;t._d||(e=S(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],V(t))}function Y(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function G(t){if(t._f===be.ISO_8601)return void Z(t);t._a=[],t._pf.empty=!0;var e,n,i,s,r,o=""+t._i,a=o.length,l=0;for(i=R(t._f,t._locale).match(je)||[],e=0;e<i.length;e++)s=i[e],n=(o.match(H(s,t))||[])[0],n&&(r=o.substr(0,o.indexOf(n)),r.length>0&&t._pf.unusedInput.push(r),o=o.slice(o.indexOf(n)+n.length),l+=n.length),gn[s]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(s),B(s,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=a-l,o.length>0&&t._pf.unusedInput.push(o),t._isPm&&t._a[Pe]<12&&(t._a[Pe]+=12),t._isPm===!1&&12===t._a[Pe]&&(t._a[Pe]=0),V(t),D(t)}function X(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,s){return e||n||i||s})}function K(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(t){var e,n,s,r,o;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(r=0;r<t._f.length;r++)o=0,e=p({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._pf=i(),e._f=t._f[r],G(e),q(e)&&(o+=e._pf.charsLeftOver,o+=10*e._pf.unusedTokens.length,e._pf.score=o,(null==s||s>o)&&(s=o,n=e));d(t,n||e)}function Z(t){var e,n,i=t._i,s=sn.exec(i);if(s){for(t._pf.iso=!0,e=0,n=on.length;n>e;e++)if(on[e][1].exec(i)){t._f=on[e][0]+(s[6]||" ");break}for(e=0,n=an.length;n>e;e++)if(an[e][1].exec(i)){t._f+=an[e][0];break}i.match(Ye)&&(t._f+="Z"),G(t)}else t._isValid=!1}function J(t){Z(t),t._isValid===!1&&(delete t._isValid,be.createFromInputFallback(t))}function te(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function ee(e){var n,i=e._i;i===t?e._d=new Date:w(i)?e._d=new Date(+i):null!==(n=Fe.exec(i))?e._d=new Date(+n[1]):"string"==typeof i?J(e):_(i)?(e._a=te(i.slice(0),function(t){return parseInt(t,10)}),V(e)):"object"==typeof i?U(e):"number"==typeof i?e._d=new Date(i):be.createFromInputFallback(e)}function ne(t,e,n,i,s,r,o){var a=new Date(t,e,n,i,s,r,o);return 1970>t&&a.setFullYear(t),a}function ie(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function se(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function re(t,e,n,i,s){return s.relativeTime(e||1,!!n,t,i)}function oe(t,e,n){var i=be.duration(t).abs(),s=Se(i.as("s")),r=Se(i.as("m")),o=Se(i.as("h")),a=Se(i.as("d")),l=Se(i.as("M")),c=Se(i.as("y")),h=s<pn.s&&["s",s]||1===r&&["m"]||r<pn.m&&["mm",r]||1===o&&["h"]||o<pn.h&&["hh",o]||1===a&&["d"]||a<pn.d&&["dd",a]||1===l&&["M"]||l<pn.M&&["MM",l]||1===c&&["y"]||["yy",c];return h[2]=e,h[3]=+t>0,h[4]=n,re.apply({},h)}function ae(t,e,n){var i,s=n-e,r=n-t.day();return r>s&&(r-=7),s-7>r&&(r+=7),i=be(t).add(r,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function le(t,e,n,i,s){var r,o,a=ie(t,0,1).getUTCDay();return a=0===a?7:a,n=null!=n?n:s,r=s-a+(a>i?7:0)-(s>a?7:0),o=7*(e-1)+(n-s)+r+1,{year:o>0?t:t-1,dayOfYear:o>0?o:P(t-1)+o}}function ce(e){var n=e._i,i=e._f;return e._locale=e._locale||be.localeData(e._l),null===n||i===t&&""===n?be.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),be.isMoment(n)?new h(n,!0):(i?_(i)?Q(e):G(e):ee(e),new h(e)))}function he(t,e){var n,i;if(1===e.length&&_(e[0])&&(e=e[0]),!e.length)return be();for(n=e[0],i=1;i<e.length;++i)e[i][t](n)&&(n=e[i]);return n}function ue(t,e){var n;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),E(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function de(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function pe(t,e,n){return"Month"===e?ue(t,n):t._d["set"+(t._isUTC?"UTC":"")+e](n)}function fe(t,e){return function(n){return null!=n?(pe(this,t,n),be.updateOffset(this,e),this):de(this,t)}}function me(t){return 400*t/146097}function ge(t){return 146097*t/400}function ve(t){be.duration.fn[t]=function(){return this._data[t]}}function ye(t){"undefined"==typeof ender&&(_e=ke.moment,ke.moment=t?r("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",be):be)}for(var be,_e,we,xe="2.8.3",ke="undefined"!=typeof global?global:this,Se=Math.round,Ce=Object.prototype.hasOwnProperty,Te=0,Ee=1,Ae=2,Pe=3,Le=4,De=5,qe=6,Ne={},Ie=[],Me="undefined"!=typeof module&&module.exports,Fe=/^\/?Date\((\-?\d+)/i,Oe=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,$e=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,je=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Re=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,He=/\d\d?/,ze=/\d{1,3}/,Be=/\d{1,4}/,We=/[+\-]?\d{1,6}/,Ve=/\d+/,Ue=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ye=/Z|[\+\-]\d\d:?\d\d/gi,Ge=/T/i,Xe=/[\+\-]?\d+(\.\d{1,3})?/,Ke=/\d{1,2}/,Qe=/\d/,Ze=/\d\d/,Je=/\d{3}/,tn=/\d{4}/,en=/[+-]?\d{6}/,nn=/[+-]?\d+/,sn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,rn="YYYY-MM-DDTHH:mm:ssZ",on=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],an=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ln=/([\+\-]|\d\d)/gi,cn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),hn={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},un={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},dn={},pn={s:45,m:45,h:22,d:26,M:11},fn="DDD w W M D d".split(" "),mn="M D H h m s w W".split(" "),gn={M:function(){return this.month()+1},MMM:function(t){return this.localeData().monthsShort(this,t)},MMMM:function(t){return this.localeData().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.localeData().weekdaysMin(this,t)},ddd:function(t){return this.localeData().weekdaysShort(this,t)},dddd:function(t){return this.localeData().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return m(this.year()%100,2)},YYYY:function(){return m(this.year(),4)},YYYYY:function(){return m(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+m(Math.abs(t),6)},gg:function(){return m(this.weekYear()%100,2)},gggg:function(){return m(this.weekYear(),4)},ggggg:function(){return m(this.weekYear(),5)},GG:function(){return m(this.isoWeekYear()%100,2)},GGGG:function(){return m(this.isoWeekYear(),4)},GGGGG:function(){return m(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return T(this.milliseconds()/100)},SS:function(){return m(T(this.milliseconds()/10),2)},SSS:function(){return m(this.milliseconds(),3)},SSSS:function(){return m(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+m(T(t/60),2)+":"+m(T(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+m(T(t/60),2)+m(T(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},vn={},yn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];fn.length;)we=fn.pop(),gn[we+"o"]=l(gn[we],we);for(;mn.length;)we=mn.pop(),gn[we+we]=a(gn[we],2);gn.DDDD=a(gn.DDD,3),d(c.prototype,{set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,i;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(n=be.utc([2e3,e]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=new RegExp(i.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=be([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,i){var s=this._relativeTime[n];return"function"==typeof s?s(t,e,n,i):s.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return ae(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),be=function(e,n,s,r){var o;return"boolean"==typeof s&&(r=s,s=t),o={},o._isAMomentObject=!0,o._i=e,o._f=n,o._l=s,o._strict=r,o._isUTC=!1,o._pf=i(),ce(o)},be.suppressDeprecationWarnings=!1,be.createFromInputFallback=r("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i)}),be.min=function(){var t=[].slice.call(arguments,0);return he("isBefore",t)},be.max=function(){var t=[].slice.call(arguments,0);return he("isAfter",t)},be.utc=function(e,n,s,r){var o;return"boolean"==typeof s&&(r=s,s=t),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=s,o._i=e,o._f=n,o._strict=r,o._pf=i(),ce(o).utc()},be.unix=function(t){return be(1e3*t)},be.duration=function(t,e){var i,s,r,o,a=t,l=null;return be.isDuration(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(a={},e?a[e]=t:a.milliseconds=t):(l=Oe.exec(t))?(i="-"===l[1]?-1:1,a={y:0,d:T(l[Ae])*i,h:T(l[Pe])*i,m:T(l[Le])*i,s:T(l[De])*i,ms:T(l[qe])*i}):(l=$e.exec(t))?(i="-"===l[1]?-1:1,r=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*i},a={y:r(l[2]),M:r(l[3]),d:r(l[4]),h:r(l[5]),m:r(l[6]),s:r(l[7]),w:r(l[8])}):"object"==typeof a&&("from"in a||"to"in a)&&(o=v(be(a.from),be(a.to)),a={},a.ms=o.milliseconds,a.M=o.months),s=new u(a),be.isDuration(t)&&n(t,"_locale")&&(s._locale=t._locale),s},be.version=xe,be.defaultFormat=rn,be.ISO_8601=function(){},be.momentProperties=Ie,be.updateOffset=function(){},be.relativeTimeThreshold=function(e,n){return pn[e]===t?!1:n===t?pn[e]:(pn[e]=n,!0)},be.lang=r("moment.lang is deprecated. Use moment.locale instead.",function(t,e){return be.locale(t,e)}),be.locale=function(t,e){var n;return t&&(n="undefined"!=typeof e?be.defineLocale(t,e):be.localeData(t),n&&(be.duration._locale=be._locale=n)),be._locale._abbr},be.defineLocale=function(t,e){return null!==e?(e.abbr=t,Ne[t]||(Ne[t]=new c),Ne[t].set(e),be.locale(t),Ne[t]):(delete Ne[t],null)},be.langData=r("moment.langData is deprecated. Use moment.localeData instead.",function(t){return be.localeData(t)}),be.localeData=function(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return be._locale;if(!_(t)){if(e=M(t))return e;t=[t]}return I(t)},be.isMoment=function(t){return t instanceof h||null!=t&&n(t,"_isAMomentObject")},be.isDuration=function(t){return t instanceof u};for(we=yn.length-1;we>=0;--we)C(yn[we]);be.normalizeUnits=function(t){return k(t)},be.invalid=function(t){var e=be.utc(0/0);return null!=t?d(e._pf,t):e._pf.userInvalidated=!0,e},be.parseZone=function(){return be.apply(null,arguments).parseZone()},be.parseTwoDigitYear=function(t){return T(t)+(T(t)>68?1900:2e3)},d(be.fn=h.prototype,{clone:function(){return be(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=be(this).utc();return 0<t.year()&&t.year()<=9999?j(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):j(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return q(this)},isDSTShifted:function(){return this._a?this.isValid()&&x(this._a,(this._isUTC?be.utc(this._a):be(this._a)).toArray())>0:!1},parsingFlags:function(){return d({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(t){return this.zone(0,t)},local:function(t){return this._isUTC&&(this.zone(0,t),this._isUTC=!1,t&&this.add(this._dateTzOffset(),"m")),this},format:function(t){var e=j(this,t||be.defaultFormat);return this.localeData().postformat(e)},add:y(1,"add"),subtract:y(-1,"subtract"),diff:function(t,e,n){var i,s,r,o=F(t,this),a=6e4*(this.zone()-o.zone());return e=k(e),"year"===e||"month"===e?(i=432e5*(this.daysInMonth()+o.daysInMonth()),s=12*(this.year()-o.year())+(this.month()-o.month()),r=this-be(this).startOf("month")-(o-be(o).startOf("month")),r-=6e4*(this.zone()-be(this).startOf("month").zone()-(o.zone()-be(o).startOf("month").zone())),s+=r/i,"year"===e&&(s/=12)):(i=this-o,s="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-a)/864e5:"week"===e?(i-a)/6048e5:i),n?s:f(s)},from:function(t,e){return be.duration({to:this,from:t}).locale(this.locale()).humanize(!e)},fromNow:function(t){return this.from(be(),t)},calendar:function(t){var e=t||be(),n=F(e,this).startOf("day"),i=this.diff(n,"days",!0),s=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(s,this))},isLeapYear:function(){return L(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=se(t,this.localeData()),this.add(t-e,"d")):e},month:fe("Month",!0),startOf:function(t){switch(t=k(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=k(t),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(t,e){return e=k("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=be.isMoment(t)?t:be(t),+this>+t):+this.clone().startOf(e)>+be(t).startOf(e)},isBefore:function(t,e){return e=k("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=be.isMoment(t)?t:be(t),+t>+this):+this.clone().startOf(e)<+be(t).startOf(e)
<<<<<<< HEAD
},isSame:function(t,e){return e=k(e||"millisecond"),"millisecond"===e?(t=be.isMoment(t)?t:be(t),+this===+t):+this.clone().startOf(e)===+F(t,this).startOf(e)},min:r("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(t){return t=be.apply(null,arguments),this>t?this:t}),max:r("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(t){return t=be.apply(null,arguments),t>this?this:t}),zone:function(t,e){var n,i=this._offset||0;return null==t?this._isUTC?i:this._dateTzOffset():("string"==typeof t&&(t=z(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(n=this._dateTzOffset()),this._offset=t,this._isUTC=!0,null!=n&&this.subtract(n,"m"),i!==t&&(!e||this._changeInProgress?b(this,be.duration(i-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,be.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?be(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return E(this.year(),this.month())},dayOfYear:function(t){var e=Se((be(this).startOf("day")-be(this).startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=ae(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")},isoWeekYear:function(t){var e=ae(this,1,4).year;return null==t?e:this.add(t-e,"y")},week:function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},isoWeek:function(t){var e=ae(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},weekday:function(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return A(this.year(),1,4)},weeksInYear:function(){var t=this.localeData()._week;return A(this.year(),t.dow,t.doy)},get:function(t){return t=k(t),this[t]()},set:function(t,e){return t=k(t),"function"==typeof this[t]&&this[t](e),this},locale:function(e){var n;return e===t?this._locale._abbr:(n=be.localeData(e),null!=n&&(this._locale=n),this)},lang:r("moment().lang() is deprecated. Use moment().localeData() instead.",function(e){return e===t?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),be.fn.millisecond=be.fn.milliseconds=fe("Milliseconds",!1),be.fn.second=be.fn.seconds=fe("Seconds",!1),be.fn.minute=be.fn.minutes=fe("Minutes",!1),be.fn.hour=be.fn.hours=fe("Hours",!0),be.fn.date=fe("Date",!0),be.fn.dates=r("dates accessor is deprecated. Use date instead.",fe("Date",!0)),be.fn.year=fe("FullYear",!0),be.fn.years=r("years accessor is deprecated. Use year instead.",fe("FullYear",!0)),be.fn.days=be.fn.day,be.fn.months=be.fn.month,be.fn.weeks=be.fn.week,be.fn.isoWeeks=be.fn.isoWeek,be.fn.quarters=be.fn.quarter,be.fn.toJSON=be.fn.toISOString,d(be.duration.fn=u.prototype,{_bubble:function(){var t,e,n,i=this._milliseconds,s=this._days,r=this._months,o=this._data,a=0;o.milliseconds=i%1e3,t=f(i/1e3),o.seconds=t%60,e=f(t/60),o.minutes=e%60,n=f(e/60),o.hours=n%24,s+=f(n/24),a=f(me(s)),s-=f(ge(a)),r+=f(s/30),s%=30,a+=f(r/12),r%=12,o.days=s,o.months=r,o.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return f(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*T(this._months/12)},humanize:function(t){var e=oe(this,!t,this.localeData());return t&&(e=this.localeData().pastFuture(+this,e)),this.localeData().postformat(e)},add:function(t,e){var n=be.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=be.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=k(t),this[t.toLowerCase()+"s"]()},as:function(t){var e,n;if(t=k(t),"month"===t||"year"===t)return e=this._days+this._milliseconds/864e5,n=this._months+12*me(e),"month"===t?n:n/12;switch(e=this._days+ge(this._months/12),t){case"week":return e/7+this._milliseconds/6048e5;case"day":return e+this._milliseconds/864e5;case"hour":return 24*e+this._milliseconds/36e5;case"minute":return 24*e*60+this._milliseconds/6e4;case"second":return 24*e*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+t)}},lang:be.fn.lang,locale:be.fn.locale,toIsoString:r("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),s=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||s||r?"T":"")+(i?i+"H":"")+(s?s+"M":"")+(r?r+"S":""):"P0D"},localeData:function(){return this._locale}}),be.duration.fn.toString=be.duration.fn.toISOString;for(we in cn)n(cn,we)&&ve(we.toLowerCase());be.duration.fn.asMilliseconds=function(){return this.as("ms")},be.duration.fn.asSeconds=function(){return this.as("s")},be.duration.fn.asMinutes=function(){return this.as("m")},be.duration.fn.asHours=function(){return this.as("h")},be.duration.fn.asDays=function(){return this.as("d")},be.duration.fn.asWeeks=function(){return this.as("weeks")},be.duration.fn.asMonths=function(){return this.as("M")},be.duration.fn.asYears=function(){return this.as("y")},be.locale("en",{ordinal:function(t){var e=t%10,n=1===T(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),Me?module.exports=be:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(t,e,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(ke.moment=_e),be}),ye(!0)):ye()}.call(this),function(t,e){var n=1e3,i=!1,s=t([]),r=function(n,i){var r=n.data("livestampdata");"number"==typeof i&&(i*=1e3),n.removeAttr("data-livestamp").removeData("livestamp"),i=e(i),e.isMoment(i)&&!isNaN(+i)&&(r=t.extend({},{original:n.contents()},r),r.moment=e(i),n.data("livestampdata",r).empty(),s.push(n[0]))},o=function(){i||(a.update(),setTimeout(o,n))},a={update:function(){t("[data-livestamp]").each(function(){var e=t(this);r(e,e.data("livestamp"))});var n=[];s.each(function(){var i=t(this),s=i.data("livestampdata");if(void 0===s)n.push(this);else if(e.isMoment(s.moment)){var r=i.html(),s=s.moment.fromNow();if(r!=s){var o=t.Event("change.livestamp");i.trigger(o,[r,s]),o.isDefaultPrevented()||i.html(s)}}}),s=s.not(n)},pause:function(){i=!0},resume:function(){i=!1,o()},interval:function(t){return void 0===t?n:void(n=t)}},l={add:function(n,i){return"number"==typeof i&&(i*=1e3),i=e(i),e.isMoment(i)&&!isNaN(+i)&&(n.each(function(){r(t(this),i)}),a.update()),n},destroy:function(e){return s=s.not(e),e.each(function(){var n=t(this),i=n.data("livestampdata");return void 0===i?e:void n.html(i.original?i.original:"").removeData("livestampdata")}),e},isLivestamp:function(t){return void 0!==t.data("livestampdata")}};t.livestamp=a,t(function(){a.resume()}),t.fn.livestamp=function(t,e){return l[t]||(e=t,t="add"),l[t](this,e)}}(jQuery,moment),define("livestamp",["moment"],function(t){return function(){var e;return e||t.Livestamp}}(this)),define("app/views/activities/activities",["require","jquery","underscore","backbone","handlebars","handlebarsTemplates","app/views/activities/activity","app/views/activities/incomplete_activity","app/views/activities/loading","app/collections/activities/activities","app/models/activities/incomplete_activity","libs/expanding","livestamp","slick_carousel"],function(t){{var e=t("jquery"),n=t("underscore"),i=t("backbone"),s=(t("handlebars"),t("handlebarsTemplates"),t("app/views/activities/activity")),r=t("app/views/activities/incomplete_activity"),o=t("app/views/activities/loading"),a=t("app/collections/activities/activities"),l=t("app/models/activities/incomplete_activity");t("libs/expanding"),t("livestamp"),t("slick_carousel")}return i.View.extend({el:".activities-holder",initialize:function(t){this.activityUrl=t.url,this.programId=t.programId,this.collection=new a({url:this.activityUrl}),this.isLoading=new o,this.allModelsLoaded=!1,this.incompleteActivityUrl=t.incompleteActivityUrl;var n=this;e(window).on("scroll.wall",function(){return n.allModelsLoaded?(e(window).off("scroll.wall"),!1):(!n.isLoading.active&&e(window).scrollTop()>n.$el.position().top+n.$el.height()-1500&&(n.$el.append(n.isLoading.render().el),n.collection.getNextPage().done(function(){n.render()}).fail(function(){return n.stopOnError(),!1})),!0)})},events:{},fetch:function(){var t=this;if(this.incompleteActivityUrl){var e=new l({current_program:this.programId},{url:this.incompleteActivityUrl});e.fetch().done(function(){e.get("incomplete")>0&&t.$el.prepend(new r({model:e}).render().el)})}return this.$el.append(t.isLoading.render().el),this.collection.fetch().done(function(){t.render()}).fail(function(){return t.stopOnError(),!1}),this},render:function(){var t=this;0===this.collection.models.length?(t.allModelsLoaded=!0,t.endOfFeed()):(this.collection.currentPage+=1,n.each(this.collection.models,function(e){void 0!==e.get("type")&&(this.activity=new s({model:e,programId:t.programId}),t.$el.append(this.activity.render().el),this.activity.$el.find("textarea").expanding(),this.activity.initializeCarousel())}),t.isLoading.removeFromDOM())},endOfFeed:function(){this.isLoading.removeFromDOM(),this.$el.append(0===this.collection.currentPage?"<div class='activity alert info'>No Activity was found, please try different search criteria.</div>":"<div class='activity alert info'>You have reached the end of the feed!</div>")},stopOnError:function(){this.isLoading.removeFromDOM(),this.$el.append('<div class="activity alert error">Additional activities cannot be loaded due to an error on the server. Please contact Tech Support</div>'),e(window).off("scroll.wall")}})}),define("app/views/shared/filterableTable",["require","backbone","jquery","handlebarsTemplates","context"],function(t){var e=t("backbone"),n=t("jquery"),i=t("handlebarsTemplates"),s=t("context");return e.View.extend({el:"table.table",collectionClass:void 0,template:"",loadingHTML:"<tr><td><i class='fa fa-spin fa-spinner'></i></td></tr>",bodySelector:"tbody",events:{"click .sortable-column-header":"_applySortableColumn"},initialize:function(){return this.collection=new this.collectionClass,this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"add",this.render),this.listenTo(s,"filter:query",this.applyFilter),this},render:function(){var t=this.$el.find(this.bodySelector),e={rows:this.collection.toJSON()};return t.html(this.loadingHTML),t.html(i[this.template](e)),this},applyFilter:function(t){var e=this.$(this.bodySelector);e.html(this.loadingHTML),this.collection.queryString=t,this.collection.fetch({reset:!0})},_applySortableColumn:function(t){t.stopPropagation(),t.preventDefault();var e=n(t.currentTarget),i=e.attr("rel"),r="asc",o="desc";e.hasClass("asc")?(r="desc",o="asc"):e.hasClass("desc")&&(r="asc",o="desc"),e.addClass("current"),e.addClass(r),e.removeClass(o),s.trigger("filter:set",[{name:"direction",value:r},{name:"sort",value:i}])}})}),define("app/collections/checkins/checkin_stores",["require","backbone"],function(t){var e=t("backbone");return e.Collection.extend({queryString:"",url:function(){return window.location.pathname+".json?"+this.queryString}})}),define("app/views/checkins/table",["require","app/views/shared/filterableTable","app/collections/checkins/checkin_stores"],function(t){var e=t("app/views/shared/filterableTable"),n=t("app/collections/checkins/checkin_stores");return e.extend({collectionClass:n,template:"checkins/store"})}),define("app/views/utils/paginator",["require","backbone","context"],function(t){var e=t("backbone"),n=t("context");return e.View.extend({el:".pagination-holder",events:{"click .page":"applyPageChange"},initialize:function(t){this.url=t.url,this.listenTo(n,"filter:query",this.render)},render:function(t){var e=this;e.$el.html("<i class='fa fa-spin fa-spinner'></i>"),$.ajax({url:e.url+"?"+t}).done(function(t){console.log("Here I am"),e.$el.html(t)})},applyPageChange:function(t){t.preventDefault();var e=$.trim($(t.currentTarget).text());n.trigger("filter:set",[{name:"page",value:e}])}})}),define("app/views/filter/activeFilterItem",["require","backbone","handlebarsTemplates","context"],function(t){var e=t("backbone"),n=t("handlebarsTemplates"),i=t("context");return e.View.extend({className:"active-filter flexible",initialize:function(t){this.options=t},events:{"click .btn":"clearHandler"},render:function(){return this.$el.html(n.filter_active_item(this.options)),this},clearHandler:function(t){t.stopPropagation(),t.preventDefault(),this.clear(),i.trigger("filter:request")},clear:function(){i.trigger(this.options.param+":filter:clear",this.options),this.remove()},getQueryValue:function(){return this.options.value}})}),define("app/views/filter/component",["require","backbone","context","handlebarsTemplates","app/views/filter/activeFilterItem"],function(t){var e=t("backbone"),n=t("context"),i=t("handlebarsTemplates"),s=t("app/views/filter/activeFilterItem"),r={templateName:"filters/list_component",openClassName:"open",events:{"click .filter-item":"toggleOpen","click .filter-list-item":"addFilterHandler","click .active-filter":"resetItem",'change input[type="date"]':"handleDateChange",'blur input[type="date"]':"handleDateBlur"},render:function(){return this.activeFilters=[],this.filterParam=this.model.get("name"),this.$el.html(i[this.templateName](this.model.toJSON())),this.listenTo(n,this.filterParam+":filter:clear",this.restoreFilter),this},clear:function(){this.$el.find(".active-filter").remove()},toggleOpen:function(t){t&&(t.preventDefault(),t.stopPropagation());var e=this.$el.find(".expand-indicator"),n=this.$el.find(".filter-list");e.toggleClass(this.openClassName),n.toggleClass(this.openClassName)},addFilterHandler:function(t){t.preventDefault(),t.stopPropagation(),this._addFilterFromLink(this.$el.find(t.currentTarget)),n.trigger("filter:request")},addFilterByValue:function(t){var e=this.$el.find(this._buildFilterItemLink(t));this._addFilterFromLink(e)},_addFilterFromLink:function(t){t&&(this._addFilter(t.text(),t.data("value")),t.hide())},_addFilter:function(t,e){var n=new s({param:this.filterParam,label:t,value:e}).render();n.$el.appendTo(this.$el.find(".filter-item")),this.activeFilters.push(n)},_buildFilterItemLink:function(t){return".filter-list-item[data-value='"+t+"']"},restoreFilter:function(t){this.$el.find(this._buildFilterItemLink(t.value)).show()}};return e.View.extend(r)}),define("app/views/filter/singleAnswerComponent",["require","app/views/filter/component"],function(t){var e=t("app/views/filter/component").extend({_addFilterFromLink:function(t){var n=this.$el.find(".active-filter");0===n.length&&(e.__super__._addFilterFromLink.call(this,t),this.toggleOpen())}});return e}),define("app/views/filter/dateComponent",["require","context","app/views/filter/component"],function(t){var e=t("context"),n=t("app/views/filter/component").extend({templateName:"filters/date_component",addFilterHandler:function(t){t.preventDefault(),t.stopPropagation()},handleDateChange:function(t){var e=t.currentTarget.value;e&&(this.clear(),this._addFilter(e,e))},handleDateBlur:function(t){this.handleDateChange(t),this.toggleOpen(),e.trigger("filter:request")}});return n}),define("app/views/filter/filterControl",["require","backbone","jquery","context","handlebarsTemplates","app/views/filter/singleAnswerComponent","app/views/filter/dateComponent","app/views/filter/component"],function(t){var e=t("backbone"),n=t("jquery"),i=t("context"),s=t("handlebarsTemplates")["filters/spinner_component"],r=t("app/views/filter/singleAnswerComponent"),o=t("app/views/filter/dateComponent"),a=t("app/views/filter/component"),l={el:"#site-filter",openClass:"open",events:{"click .clear-filters":"clearFilters"},initialize:function(t){this.components={};var r=this.parseQueryString(),o=!1;if(!t||!t.collection)return!1;if(o=this.renderFilterCollection(t.collection,r),t.url){var a=this,l=n(s()),c=new(e.Collection.extend({url:t.url}));a.$el.append(l),c.fetch().then(function(){l.remove()}).done(function(){a.renderFilterCollection(c,r)})}this._applyQSGlobal(r),this.listenTo(i,"filter:request",this.handleFilterRequest),this.listenTo(i,"filter:request:queryString",this.handleFilterRequestQueryString),this.listenTo(i,"filter:set",this.setFromExternal),o&&i.trigger("filter:toggle")},render:function(){},clearFilters:function(){for(var t in this.components)this.components[t].clear();this.broadCastQueryString()},renderFilterCollection:function(t,e){var n,i=this,s=!1;return t.each(function(t){n=i.selectComponentView(t).render(),i.$el.append(n.$el),i.components[n.filterParam]=n,i._applyQS(n,e)===!0&&(s=!0)}),s},selectComponentView:function(t){var e=a;return"date"===t.get("type")?e=o:-1===t.get("name").indexOf("[]")&&(e=r),new e({model:t})},_applyQS:function(t,e){var n=!1;if(e[t.filterParam]){n=!0;var i=0,s=e[t.filterParam];for(i;i<s.length;i++)t.addFilterByValue(s[i])}return n},_applyQSGlobal:function(t){for(var e=this.$el.find("input.global"),n=e.length;n--;)t[e[n].name]&&(e[n].value=t[e[n].name][0])},handleFilterRequest:function(){this.$el.find('input[name="page"]').val(1),this.broadCastQueryString()},handleFilterRequestQueryString:function(){i.trigger("filter:queryString",this.$el.serialize())},broadCastQueryString:function(){i.router.navigate(window.location.pathname+"?"+this.$el.serialize(),{trigger:!1}),i.trigger("filter:query",this.$el.serialize())},setFromExternal:function(t){var e,n=0,i=0;for(i=0;i<t.length;i++)e=this.$el.find('input[name="'+t[i].name+'"]'),e&&(e.val(t[i].value),n++);n>0&&this.broadCastQueryString()},parseQueryString:function(){for(var t=decodeURI(window.location.search.substring(1)).split("&"),e={},n=0;n<t.length;n++){var i=t[n].split("=");e[i[0]]||(e[i[0]]=[]),e[i[0]].push(i[1])}return e}};return e.View.extend(l)}),define("app/views/filter/main",["require","backbone","context","app/views/filter/filterControl"],function(t){var e=t("backbone"),n=(t("context"),t("app/views/filter/filterControl")),i={init:function(t,i){!t&&window.filterBootstrap&&(t=new e.Collection(window.filterBootstrap.filters),i=window.filterBootstrap.filters_url),new n({collection:t,url:i})}};return i}),define("app/views/checkins/checkin",["require","app/views/checkins/table","app/views/utils/paginator","app/views/filter/main"],function(t){var e=t("app/views/checkins/table"),n=t("app/views/utils/paginator"),i=t("app/views/filter/main");return{init:function(){(new e).collection.reset(window.bootstrap),new n({url:"stores/pagination"}),i.init()}}}),define("app/collections/teams/members",["require","backbone"],function(t){var e=t("backbone");return e.Collection.extend({queryString:"",url:function(){return window.location.pathname+".json?"+this.queryString}})}),define("app/views/teams/table",["require","app/views/shared/filterableTable","app/collections/teams/members"],function(t){var e=t("app/views/shared/filterableTable"),n=t("app/collections/teams/members");return e.extend({collectionClass:n,template:"teams_table_rows"})}),define("app/views/teams/main",["require","app/views/teams/table","app/views/utils/paginator","app/views/filter/main"],function(t){var e=t("app/views/teams/table"),n=t("app/views/utils/paginator"),i=t("app/views/filter/main");return{init:function(){(new e).collection.reset(window.bootstrap),new n({url:"teams/pagination"}),i.init()}}}),define("app/views/stores/table",["require","app/views/shared/filterableTable","app/collections/checkins/checkin_stores"],function(t){var e=t("app/views/shared/filterableTable"),n=t("app/collections/checkins/checkin_stores");return e.extend({collectionClass:n,template:"stores/table_rows"})}),define("app/views/stores/main",["require","app/views/stores/table","app/views/utils/paginator","app/views/filter/main"],function(t){var e=t("app/views/stores/table"),n=t("app/views/utils/paginator"),i=t("app/views/filter/main");return{init:function(){(new e).collection.reset(window.bootstrap),new n({url:"stores/pagination"}),i.init()}}}),define("app/views/store_profile/section_loader",["require","handlebarsTemplates","underscore","backbone"],function(t){var e=t("handlebarsTemplates"),n=t("underscore"),i={collectionClass:void 0,rowsTemplate:"",failHTML:"<p>There was an error fetching the requested data. Please contact TechSupport</p>",initialize:function(){this.collection=new this.collectionClass},render:function(){var t=this;t.collection.fetch().done(function(){t.success.apply(t,arguments)}).fail(function(){t.failure.apply(t,arguments)})},success:function(){var t={rows:this.collection.toJSON()};n.extend(t,this.additionalData()),this.$el.find(".body").html(e[this.rowsTemplate](t)),this.afterRender()},afterRender:function(){},failure:function(){this.$el.find(".body").html(this.failHTML),this.afterRender()},additionalData:function(){return{}}};return t("backbone").View.extend(i)}),define("app/views/store_profile/personnel",["require","app/views/store_profile/section_loader","context","backbone"],function(t){var e=t("app/views/store_profile/section_loader"),n=t("context"),i=t("backbone"),s={el:"#personnel",collectionClass:i.Collection.extend({url:function(){return n.personnel.links.self}}),rowsTemplate:"store_profile/personnel_rows"};return e.extend(s)}),define("app/views/store_profile/alerts",["require","app/views/store_profile/section_loader","context","backbone"],function(t){var e=t("app/views/store_profile/section_loader"),n=t("context"),i=t("backbone"),s=e.extend({el:"#alerts",collectionClass:i.Collection.extend({url:function(){return n.alerts.links.open},parse:function(t){return this.count=t.count,t.items}}),rowsTemplate:"store_profile/alerts_rows",additionalData:function(){return n.alerts},afterRender:function(){this.$el.find(".counter").text(this.collection.count+" ")}});return s}),define("app/views/utils/expandWrapperView",["require","backbone","jquery"],function(t){var e=t("backbone"),n=t("jquery"),i={events:{"click .click-target":"expand"},expand:function(t){t.stopPropagation(),t.preventDefault();var e=n(t.currentTarget),i=e.parents(".expand-container");i.toggleClass("active")}};return e.View.extend(i)}),define("app/views/store_profile/openAlerts",["require","app/views/shared/filterableTable","backbone"],function(t){var e=t("app/views/shared/filterableTable"),n=t("backbone"),i=e.extend({el:"#openAlerts",loadingHTML:"<div class='item'><i class='fa fa-spin fa-spinner'></i></div>",collectionClass:n.Collection.extend({queryString:"",url:function(){return"test_url?"+this.queryString}}),template:"store_profile/open_alerts_rows",bodySelector:".body",initialize:function(t){return i.__super__.initialize.apply(this,arguments),this.count=t.count,this},render:function(){return this.$el.find(".counter").text(this.count+" "),i.__super__.render.apply(this,arguments)}});return i}),define("app/views/store_profile/resolvedAlerts",["require","backbone","app/views/store_profile/openAlerts"],function(t){var e=t("backbone"),n=t("app/views/store_profile/openAlerts").extend({el:"#resolvedAlerts",collectionClass:e.Collection.extend({queryString:"",url:function(){return"test_url?"+this.queryString}}),template:"store_profile/resolved_alerts_rows"});return n}),define("app/views/store_profile/main",["require","slick_carousel","context","underscore","jquery","app/views/activities/activities","app/views/store_profile/personnel","app/views/store_profile/alerts","app/views/utils/expandWrapperView","app/views/store_profile/openAlerts","app/views/store_profile/resolvedAlerts"],function(t){t("slick_carousel");var e=t("context"),n=t("underscore"),i=t("jquery"),s=t("app/views/activities/activities"),r=t("app/views/store_profile/personnel"),o=t("app/views/store_profile/alerts"),a=t("app/views/utils/expandWrapperView"),l=t("app/views/store_profile/openAlerts"),c=t("app/views/store_profile/resolvedAlerts"),h={init:function(){n.extend(e,window.bootstrap),(new r).render(),(new o).render();var t=new a;t.setElement("#site-canvas").render(),i("#images .image-container").slick({slidesToShow:3,slidesToScroll:1,centerMode:!0,focusOnSelect:!0,variableWidth:!0})},activity:function(){var t="/programs/"+e.programId+"/activities/posts?customer_store="+e.requestParameters[1],n=new s({url:t,programId:e.programId});n.fetch()},history:function(){n.extend(e,window.bootstrap),new l({count:window.bootstrap.open.count}).collection.reset(window.bootstrap.open.items),new c({count:window.bootstrap.resolved.count}).collection.reset(window.bootstrap.resolved.items)}};return h}),function(){var t,e,n,i,s,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,n,i,s,r,o;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),r=t.childNodes,o=[],i=0,s=r.length;s>i;i++)n=r[i],o.push(this.add_option(n,e,t.disabled));return o},t.prototype.add_option=function(t,e,n){return"OPTION"===t.nodeName.toUpperCase()?(""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:n===!0?n:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},t.prototype.escapeExpression=function(t){var e,n;return null==t||t===!1?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(n,function(t){return e[t]||"&amp;"})):t},t}(),i.select_to_array=function(t){var e,n,s,r,o;for(n=new i,o=t.childNodes,s=0,r=o.length;r>s;s++)e=o[s],n.add_node(e);return n.parsed},e=function(){function t(e,n){this.form_field=e,this.options=null!=n?n:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},t.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(){var t=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return t.blur_test()},100))},t.prototype.results_option_build=function(t){var e,n,i,s,r;for(e="",r=this.results_data,i=0,s=r.length;s>i;i++)n=r[i],e+=n.group?this.result_add_group(n):this.result_add_option(n),(null!=t?t.first:void 0)&&(n.selected&&this.is_multiple?this.choice_build(n):n.selected&&!this.is_multiple&&this.single_set_selected_text(n.text));return e},t.prototype.result_add_option=function(t){var e,n;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),n=document.createElement("li"),n.className=e.join(" "),n.style.cssText=t.style,n.setAttribute("data-option-array-index",t.array_index),n.innerHTML=t.search_text,this.outerHTML(n)):""},t.prototype.result_add_group=function(t){var e;return(t.search_match||t.group_match)&&t.active_options>0?(e=document.createElement("li"),e.className="group-result",e.innerHTML=t.search_text,this.outerHTML(e)):""},t.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},t.prototype.reset_single_select_options=function(){var t,e,n,i,s;for(i=this.results_data,s=[],e=0,n=i.length;n>e;e++)t=i[e],s.push(t.selected?t.selected=!1:void 0);return s},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},t.prototype.winnow_results=function(){var t,e,n,i,s,r,o,a,l,c,h,u;for(this.no_results_clear(),i=0,r=this.get_search_text(),t=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),l=new RegExp(t,"i"),n=this.get_search_regex(t),u=this.results_data,c=0,h=u.length;h>c;c++)e=u[c],e.search_match=!1,s=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(s=this.results_data[e.group_array_index],0===s.active_options&&s.search_match&&(i+=1),s.active_options+=1),(!e.group||this.group_search)&&(e.search_text=e.group?e.label:e.text,e.search_match=this.search_string_match(e.search_text,n),e.search_match&&!e.group&&(i+=1),e.search_match?(r.length&&(o=e.search_text.search(l),a=e.search_text.substr(0,o+r.length)+"</em>"+e.search_text.substr(o+r.length),e.search_text=a.substr(0,o)+"<em>"+a.substr(o)),null!=s&&(s.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));
return this.result_clear_highlight(),1>i&&r.length?(this.update_results_content(""),this.no_results(r)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.get_search_regex=function(t){var e;return e=this.search_contains?"":"^",new RegExp(e+t,"i")},t.prototype.search_string_match=function(t,e){var n,i,s,r;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(i=t.replace(/\[|\]/g,"").split(" "),i.length))for(s=0,r=i.length;r>s;s++)if(n=i[s],e.test(n))return!0},t.prototype.choices_count=function(){var t,e,n,i;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,i=this.form_field.options,e=0,n=i.length;n>e;e++)t=i[e],t.selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){return t.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},t.prototype.keyup_checker=function(t){var e,n;switch(e=null!=(n=t.which)?n:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.clipboard_event_checker=function(){var t=this;return setTimeout(function(){return t.results_search()},50)},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return this.is_multiple&&!this.display_selected_options&&t.selected?!1:!this.display_disabled_options&&t.disabled?!1:t.empty?!1:!0},t.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},t.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},t.prototype.search_results_touchend=function(t){return this.touch_started?this.search_results_mouseup(t):void 0},t.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:(e=document.createElement("div"),e.appendChild(t),e.innerHTML)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),t=jQuery,t.fn.extend({chosen:function(i){return e.browser_is_supported()?this.each(function(){var e,s;e=t(this),s=e.data("chosen"),"destroy"===i&&s instanceof n?s.destroy():s instanceof n||e.data("chosen",new n(this,i))}):this}}),n=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},n.prototype.set_up_html=function(){var e,n;return e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),n={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(n.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",n),this.container.html(this.is_multiple?'<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>':'<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},n.prototype.register_observers=function(){var t=this;return this.container.bind("touchstart.chosen",function(e){t.container_mousedown(e)}),this.container.bind("touchend.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.search_results.bind("touchstart.chosen",function(e){t.search_results_touchstart(e)}),this.search_results.bind("touchmove.chosen",function(e){t.search_results_touchmove(e)}),this.search_results.bind("touchend.chosen",function(e){t.search_results_touchend(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.form_field_jq.bind("chosen:close.chosen",function(e){t.input_blur(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.search_field.bind("cut.chosen",function(e){t.clipboard_event_checker(e)}),this.search_field.bind("paste.chosen",function(e){t.clipboard_event_checker(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},n.prototype.destroy=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},n.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},n.prototype.container_mousedown=function(e){return this.is_disabled||(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null!=e&&t(e.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},n.prototype.container_mouseup=function(t){return"ABBR"!==t.target.nodeName||this.is_disabled?void 0:this.results_reset(t)},n.prototype.search_results_mousewheel=function(t){var e;return t.originalEvent&&(e=t.originalEvent.deltaY||-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e?(t.preventDefault(),"DOMMouseScroll"===t.type&&(e=40*e),this.search_results.scrollTop(e+this.search_results.scrollTop())):void 0},n.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},n.prototype.close_field=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},n.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},n.prototype.test_active_click=function(e){var n;return n=t(e.target).closest(".chosen-container"),n.length&&this.container[0]===n[0]?this.active_field=!0:this.close_field()},n.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=i.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},n.prototype.result_do_highlight=function(t){var e,n,i,s,r;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),i=parseInt(this.search_results.css("maxHeight"),10),r=this.search_results.scrollTop(),s=i+r,n=this.result_highlight.position().top+this.search_results.scrollTop(),e=n+this.result_highlight.outerHeight(),e>=s)return this.search_results.scrollTop(e-i>0?e-i:0);if(r>n)return this.search_results.scrollTop(n)}},n.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},n.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},n.prototype.update_results_content=function(t){return this.search_results.html(t)},n.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},n.prototype.set_tab_index=function(){var t;return this.form_field.tabIndex?(t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t):void 0},n.prototype.set_label_behavior=function(){var e=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()}):void 0},n.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},n.prototype.search_results_mouseup=function(e){var n;return n=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),n.length?(this.result_highlight=n,this.result_select(e),this.search_field.focus()):void 0},n.prototype.search_results_mouseover=function(e){var n;return n=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),n?this.result_do_highlight(n):void 0},n.prototype.search_results_mouseout=function(e){return t(e.target).hasClass("active-result")?this.result_clear_highlight():void 0},n.prototype.choice_build=function(e){var n,i,s=this;return n=t("<li />",{"class":"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?n.addClass("search-choice-disabled"):(i=t("<a />",{"class":"search-choice-close","data-option-array-index":e.array_index}),i.bind("click.chosen",function(t){return s.choice_destroy_link_click(t)}),n.append(i)),this.search_container.before(n)},n.prototype.choice_destroy_link_click=function(e){return e.preventDefault(),e.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(t(e.target))},n.prototype.choice_destroy=function(t){return this.result_deselect(t[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()):void 0},n.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},n.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},n.prototype.result_select=function(t){var e,n;return this.result_highlight?(e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),n=this.results_data[e[0].getAttribute("data-option-array-index")],n.selected=!0,this.form_field.options[n.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(n):this.single_set_selected_text(n.text),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},n.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},n.prototype.result_deselect=function(t){var e;return e=this.results_data[t],this.form_field.options[e.options_index].disabled?!1:(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},n.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},n.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},n.prototype.winnow_results_set_highlight=function(){var t,e;return e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),t=e.length?e.first():this.search_results.find(".active-result").first(),null!=t?this.result_do_highlight(t):void 0},n.prototype.no_results=function(e){var n;return n=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),n.find("span").first().html(e),this.search_results.append(n),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},n.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},n.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},n.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},n.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},n.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},n.prototype.keydown_checker=function(t){var e,n;switch(e=null!=(n=t.which)?n:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:this.results_showing&&t.preventDefault();break;case 32:this.disable_search&&t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},n.prototype.search_field_scale=function(){var e,n,i,s,r,o,a,l,c;if(this.is_multiple){for(i=0,a=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,c=o.length;c>l;l++)s=o[l],r+=s+":"+this.search_field.css(s)+";";return e=t("<div />",{style:r}),e.text(this.search_field.val()),t("body").append(e),a=e.width()+25,e.remove(),n=this.container.outerWidth(),a>n-10&&(a=n-10),this.search_field.css({width:a+"px"})}},n}(e)}.call(this),define("chosen",function(){}),define("app/views/stores/intel/edit",["require","backbone","chosen","libs/expanding"],function(t){{var e=t("backbone");t("chosen"),t("libs/expanding")}return e.View.extend({el:".store-intel",initialize:function(){},render:function(){return this.$el.find("select").chosen({disable_search:!0,width:"100%"}),this.$el.find("textarea:visible").expanding(),this}})}),define("app/models/checkins/show/form",["require","backbone"],function(t){var e=t("backbone");return e.Model.extend({initialize:function(t){this.programId=t.programId,this.checkinId=t.checkinId,this.data=""},url:function(){return"/programs/"+this.programId+"/checkins/"+this.checkinId+"/save?"+this.data}})}),function(t,e){if("function"==typeof define&&define.amd)define("serializeObject",["exports","jquery"],function(t,n){return e(t,n)});else if("undefined"!=typeof exports){var n=require("jquery");e(exports,n)}else e(t,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e){function n(t,n){function s(t,e,n){return t[e]=n,t}function r(t,e){for(var n,r=t.match(i.key);void 0!==(n=r.pop());)if(i.push.test(n)){var a=o(t.replace(/\[\]$/,""));e=s([],a,e)}else i.fixed.test(n)?e=s([],n,e):i.named.test(n)&&(e=s({},n,e));return e}function o(t){return void 0===p[t]&&(p[t]=0),p[t]++}function a(t){switch(e('[name="'+t.name+'"]',n).attr("type")){case"checkbox":return"on"===t.value?!0:t.value;default:return t.value}}function l(e){if(!i.validate.test(e.name))return this;var n=r(e.name,a(e));return d=t.extend(!0,d,n),this}function c(e){if(!t.isArray(e))throw new Error("formSerializer.addPairs expects an Array");for(var n=0,i=e.length;i>n;n++)this.addPair(e[n]);return this}function h(){return d}function u(){return JSON.stringify(h())}var d={},p={};this.addPair=l,this.addPairs=c,this.serialize=h,this.serializeJSON=u}var i={validate:/^[a-z_][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i};return n.patterns=i,n.serializeObject=function(){return this.length>1?new Error("jquery-serialize-object can only serialize one form at a time"):new n(e,this).addPairs(this.serializeArray()).serialize()},n.serializeJSON=function(){return this.length>1?new Error("jquery-serialize-object can only serialize one form at a time"):new n(e,this).addPairs(this.serializeArray()).serializeJSON()},"undefined"!=typeof e.fn&&(e.fn.serializeObject=n.serializeObject,e.fn.serializeJSON=n.serializeJSON),t.FormSerializer=n,n}),define("app/views/checkins/show/form",["require","backbone","context","app/models/checkins/show/form","serializeObject","chosen","libs/expanding"],function(t){{var e=t("backbone"),n=t("context"),i=t("app/models/checkins/show/form");t("serializeObject"),t("chosen"),t("libs/expanding")}return e.View.extend({el:".checkin-form",events:{"blur input[type!=radio]":"saveState","change textarea":"saveState","change input[type=radio]":"saveState","change input[type=hidden]":"saveState","change select":"saveState","blur input.inventory":"updateTotal","click [data-show-element]":"showElement","click [data-hide-element]":"hideElement"},initialize:function(t){this.model=new i(t),this.images={},this.inventoryTotal=this.$el.find("input.inventory-total"),this.inventories=this.$el.find("input.inventory"),this.listenTo(n,"image:added",this.imageAdded),this.listenTo(n,"image:updated",this.imageUpdated),this.listenTo(n,"image:deleted",this.imageDeleted)},render:function(){return this.$el.find("select").chosen({disable_search:!0,width:"100%"}),this.$el.find("textarea:visible").expanding(),this},saveState:function(t){var e=this.$el.find(t.currentTarget);if(void 0!==e){var i=e.serializeObject();$.isEmptyObject(i)&&(i[e.attr("name")]=e.val()),this.model.save(i,{patch:!0}),n.trigger("hidden:update")}},updateTotal:function(){if(void 0!==this.inventoryTotal){var t=0,e=this;this.inventories.each(function(){t+=e.extractInt($(this))}),this.inventoryTotal.val(t).trigger("change")}},extractInt:function(t){var e=parseInt(t.val(),10);return-1===e||isNaN(e)?0:e},showElement:function(t){var e=this.$el.find(t.currentTarget);this.$el.find(e.data("show-element")).show("fast","linear")},hideElement:function(t){var e=this.$el.find(t.currentTarget);this.$el.find(e.data("hide-element")).hide("fast","linear").val("").trigger("change")},addImage:function(t){var e=t.get("input");return this.images[e]=this.images[e]||{},this.images[e][t.get("uuid")]=this.getImageParams(t),this},removeImage:function(t){var e=t.get("input"),n=t.get("uuid");return this.images.removed=this.images.removed||{},this.images.removed[n]=this.images[e][n],delete this.images[e][n],this},setImageInputValue:function(t){var e=t.get("input");this.$el.find(e).val(JSON.stringify(this.images[e])).trigger("change:nosave"),this.$el.find("#remove_images").val(JSON.stringify(this.images.removed))},getImageParams:function(t){return{id:t.get("id"),label:t.get("label"),temp_location:t.get("temp_location")}},imageAdded:function(t){this.addImage(t).setImageInputValue(t)},imageUpdated:function(t){this.removeImage(t).addImage(t).setImageInputValue(t)},imageDeleted:function(t){this.removeImage(t).setImageInputValue(t)}})}),function(t){"function"==typeof define&&define.amd?define("jquery-validate",["jquery"],t):t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var n=t.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new t.validator(e,this[0]),t.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){n.settings.submitHandler&&(n.submitButton=e.target),t(e.target).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.submit(function(e){function i(){var i,s;return n.settings.submitHandler?(n.submitButton&&(i=t("<input type='hidden'/>").attr("name",n.submitButton.name).val(t(n.submitButton).val()).appendTo(n.currentForm)),s=n.settings.submitHandler.call(n,n.currentForm,e),n.submitButton&&i.remove(),void 0!==s?s:!1):!0}return n.settings.debug&&e.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)},valid:function(){var e,n;return t(this[0]).is("form")?e=this.validate().form():(e=!0,n=t(this[0].form).validate(),this.each(function(){e=n.element(this)&&e})),e},removeAttrs:function(e){var n={},i=this;return t.each(e.split(/\s/),function(t,e){n[e]=i.attr(e),i.removeAttr(e)}),n},rules:function(e,n){var i,s,r,o,a,l,c=this[0];if(e)switch(i=t.data(c.form,"validator").settings,s=i.rules,r=t.validator.staticRules(c),e){case"add":t.extend(r,t.validator.normalizeRule(n)),delete r.messages,s[c.name]=r,n.messages&&(i.messages[c.name]=t.extend(i.messages[c.name],n.messages));break;case"remove":return n?(l={},t.each(n.split(/\s/),function(e,n){l[n]=r[n],delete r[n],"required"===n&&t(c).removeAttr("aria-required")}),l):(delete s[c.name],r)}return o=t.validator.normalizeRules(t.extend({},t.validator.classRules(c),t.validator.attributeRules(c),t.validator.dataRules(c),t.validator.staticRules(c)),c),o.required&&(a=o.required,delete o.required,o=t.extend({required:a},o),t(c).attr("aria-required","true")),o.remote&&(a=o.remote,delete o.remote,o=t.extend(o,{remote:a})),o}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,n){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=n,this.init()},t.validator.format=function(e,n){return 1===arguments.length?function(){var n=t.makeArray(arguments);return n.unshift(e),t.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=t.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),t.each(n,function(t,n){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return n})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).addClass(n).removeClass(i):t(e).addClass(n).removeClass(i)},unhighlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).removeClass(n).addClass(i):t(e).removeClass(n).addClass(i)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var n=t.data(this[0].form,"validator"),i="on"+e.type.replace(/^validate/,""),s=n.settings;s[i]&&!this.is(s.ignore)&&s[i].call(n,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,i=this.groups={};t.each(this.settings.groups,function(e,n){"string"==typeof n&&(n=n.split(/\s/)),t.each(n,function(t,n){i[n]=e})}),n=this.settings.rules,t.each(n,function(e,i){n[e]=t.validator.normalizeRule(i)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",e).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var n=this.clean(e),i=this.validationTargetFor(n),s=!0;return this.lastElement=i,void 0===i?delete this.invalid[n.name]:(this.prepareElement(i),this.currentElements=t(i),s=this.check(i)!==!1,s?delete this.invalid[i.name]:this.invalid[i.name]=!0),t(e).attr("aria-invalid",!s),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),s},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var n in e)this.errorList.push({message:e[n],element:this.findByName(n)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")
},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,n=0;for(e in t)n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,n={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in n||!e.objectLength(t(this).rules())?!1:(n[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var n,i=t(e),s=e.type;return"radio"===s||"checkbox"===s?t("input[name='"+e.name+"']:checked").val():"number"===s&&"undefined"!=typeof e.validity?e.validity.badInput?!1:i.val():(n=i.val(),"string"==typeof n?n.replace(/\r/g,""):n)},check:function(e){e=this.validationTargetFor(this.clean(e));var n,i,s,r=t(e).rules(),o=t.map(r,function(t,e){return e}).length,a=!1,l=this.elementValue(e);for(i in r){s={method:i,parameters:r[i]};try{if(n=t.validator.methods[i].call(this,l,e,s.parameters),"dependency-mismatch"===n&&1===o){a=!0;continue}if(a=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!n)return this.formatAndAdd(e,s),!1}catch(c){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+s.method+"' method.",c),c}}if(!a)return this.objectLength(r)&&this.successList.push(e),!0},customDataMessage:function(e,n){return t(e).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var n=this.settings.messages[t];return n&&(n.constructor===String?n:n[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t];return void 0},defaultMessage:function(e,n){return this.findDefined(this.customMessage(e.name,n),this.customDataMessage(e,n),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[n],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,n){var i=this.defaultMessage(e,n.method),s=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,n.parameters,e):s.test(i)&&(i=t.validator.format(i.replace(s,"{$1}"),n.parameters)),this.errorList.push({message:i,element:e,method:n.method}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,n;for(t=0;this.errorList[t];t++)n=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,n){var i,s,r,o=this.errorsFor(e),a=this.idOrName(e),l=t(e).attr("aria-describedby");o.length?(o.removeClass(this.settings.validClass).addClass(this.settings.errorClass),o.html(n)):(o=t("<"+this.settings.errorElement+">").attr("id",a+"-error").addClass(this.settings.errorClass).html(n||""),i=o,this.settings.wrapper&&(i=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement(i,t(e)):i.insertAfter(e),o.is("label")?o.attr("for",a):0===o.parents("label[for='"+a+"']").length&&(r=o.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),l?l.match(new RegExp("\\b"+r+"\\b"))||(l+=" "+r):l=r,t(e).attr("aria-describedby",l),s=this.groups[e.name],s&&t.each(this.groups,function(e,n){n===s&&t("[name='"+e+"']",this.currentForm).attr("aria-describedby",o.attr("id"))}))),!n&&this.settings.success&&(o.text(""),"string"==typeof this.settings.success?o.addClass(this.settings.success):this.settings.success(o,e)),this.toShow=this.toShow.add(o)},errorsFor:function(e){var n=this.idOrName(e),i=t(e).attr("aria-describedby"),s="label[for='"+n+"'], label[for='"+n+"'] *";return i&&(s=s+", #"+i.replace(/\s+/g,", #")),this.errors().filter(s)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,n){switch(n.nodeName.toLowerCase()){case"select":return t("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t){return t},string:function(e,n){return!!t(e,n.form).length},"function":function(t,e){return t(e)}},optional:function(e){var n=this.elementValue(e);return!t.validator.methods.required.call(this,n,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,n){e.constructor===String?this.classRuleSettings[e]=n:t.extend(this.classRuleSettings,e)},classRules:function(e){var n={},i=t(e).attr("class");return i&&t.each(i.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(n,t.validator.classRuleSettings[this])}),n},attributeRules:function(e){var n,i,s={},r=t(e),o=e.getAttribute("type");for(n in t.validator.methods)"required"===n?(i=e.getAttribute(n),""===i&&(i=!0),i=!!i):i=r.attr(n),/min|max/.test(n)&&(null===o||/number|range|text/.test(o))&&(i=Number(i)),i||0===i?s[n]=i:o===n&&"range"!==o&&(s[n]=!0);return s.maxlength&&/-1|2147483647|524288/.test(s.maxlength)&&delete s.maxlength,s},dataRules:function(e){var n,i,s={},r=t(e);for(n in t.validator.methods)i=r.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),void 0!==i&&(s[n]=i);return s},staticRules:function(e){var n={},i=t.data(e.form,"validator");return i.settings.rules&&(n=t.validator.normalizeRule(i.settings.rules[e.name])||{}),n},normalizeRules:function(e,n){return t.each(e,function(i,s){if(s===!1)return void delete e[i];if(s.param||s.depends){var r=!0;switch(typeof s.depends){case"string":r=!!t(s.depends,n.form).length;break;case"function":r=s.depends.call(n,n)}r?e[i]=void 0!==s.param?s.param:!0:delete e[i]}}),t.each(e,function(i,s){e[i]=t.isFunction(s)?s(n):s}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var n;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(n=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(n[0]),Number(n[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var n={};t.each(e.split(/\s/),function(){n[this]=!0}),e=n}return e},addMethod:function(e,n,i){t.validator.methods[e]=n,t.validator.messages[e]=void 0!==i?i:t.validator.messages[e],n.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var s=t(n).val();return s&&s.length>0}return this.checkable(n)?this.getLength(e,n)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var n,i,s=0,r=0,o=!1;if(t=t.replace(/\D/g,""),t.length<13||t.length>19)return!1;for(n=t.length-1;n>=0;n--)i=t.charAt(n),r=parseInt(i,10),o&&(r*=2)>9&&(r-=9),s+=r,o=!o;return s%10===0},minlength:function(e,n,i){var s=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||s>=i},maxlength:function(e,n,i){var s=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||i>=s},rangelength:function(e,n,i){var s=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||s>=i[0]&&s<=i[1]},min:function(t,e,n){return this.optional(e)||t>=n},max:function(t,e,n){return this.optional(e)||n>=t},range:function(t,e,n){return this.optional(e)||t>=n[0]&&t<=n[1]},equalTo:function(e,n,i){var s=t(i);return this.settings.onfocusout&&s.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(n).valid()}),e===s.val()},remote:function(e,n,i){if(this.optional(n))return"dependency-mismatch";var s,r,o=this.previousValue(n);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),o.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=o.message,i="string"==typeof i&&{url:i}||i,o.old===e?o.valid:(o.old=e,s=this,this.startRequest(n),r={},r[n.name]=e,t.ajax(t.extend(!0,{url:i,mode:"abort",port:"validate"+n.name,dataType:"json",data:r,context:s.currentForm,success:function(i){var r,a,l,c=i===!0||"true"===i;s.settings.messages[n.name].remote=o.originalMessage,c?(l=s.formSubmitted,s.prepareElement(n),s.formSubmitted=l,s.successList.push(n),delete s.invalid[n.name],s.showErrors()):(r={},a=i||s.defaultMessage(n,"remote"),r[n.name]=o.message=t.isFunction(a)?a(e):a,s.invalid[n.name]=!0,s.showErrors(r)),o.valid=c,s.stopRequest(n,c)}},i)),"pending")}}}),t.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var e,n={};t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,i){var s=t.port;"abort"===t.mode&&(n[s]&&n[s].abort(),n[s]=i)}):(e=t.ajax,t.ajax=function(i){var s=("mode"in i?i:t.ajaxSettings).mode,r=("port"in i?i:t.ajaxSettings).port;return"abort"===s?(n[r]&&n[r].abort(),n[r]=e.apply(this,arguments),n[r]):e.apply(this,arguments)}),t.extend(t.fn,{validateDelegate:function(e,n,i){return this.bind(n,function(n){var s=t(n.target);return s.is(e)?i.apply(s,arguments):void 0})}})}),define("app/views/utils/validation",["require","jquery","backbone","jquery-validate"],function(t){{var e=t("jquery"),n=t("backbone");t("jquery-validate")}return n.View.extend({events:{"blur input[type!=radio]":"saveState","change textarea":"saveState","change input[type=radio]":"saveState","change input[type=hidden]":"validate","change:nosave input[type=hidden]":"validate","change select":"validate"},initialize:function(t){this.errorPlacementClass=t.errorPlacementClass,this.validationRun=!1},render:function(t){this.setElement(t);var e=this;return this.validator=this.$el.validate({ignore:[],errorPlacement:function(){},highlight:function(t,n,i){e.highlight(t,n,i)},unhighlight:function(t,n,i){e.unhighlight(t,n,i)}}),this},validate:function(){this.validCalled&&this.valid()},valid:function(){return this.validCalled=!0,this.$el.valid()},highlight:function(t,n,i){var s=this.$el.find(t),r=s.data("error-for");s=void 0!==r?e(r):s.closest(this.errorPlacementClass),s.addClass(n).removeClass(i)},unhighlight:function(t,n,i){var s=this.$el.find(t),r=s.data("error-for");s=void 0!==r?e(r):s.closest(this.errorPlacementClass),s.removeClass(n).addClass(i)}})}),define("app/models/s3uploader/file",["require","backbone"],function(t){var e=t("backbone");return e.Model.extend({initialize:function(t){this.url=t.url,this.attributes["X-Requested-With"]="xhr",$.extend(this.attributes,t.policy),this.set({key:this.get("key").replace("{timestamp}",(new Date).getTime()).replace("{unique_id}",Math.random().toString(36).substr(2,16))})},parse:function(t){return{temp_location:t.getElementsByTagName("Location")[0].textContent}},sync:function(t,n,i){if("create"==t){var s=new FormData;_.each(n.attributes,function(t,e){"file"===e&&s.append("content-type",t.type),"url"!==e&&"source"!==e&&"input"!==e&&s.append(e,t)}),_.defaults(i||(i={}),{data:s,processData:!1,contentType:!1,dataType:"xml",xhr:function(){var t=$.ajaxSettings.xhr();return t.upload.onprogress=function(t){t.lengthComputable&&n.trigger("progress",(t.loaded/t.total*100).toFixed(2))},t.upload.onload=function(){n.trigger("complete",100)},t}})}return this._xhr=e.sync.call(this,t,n,i),this._xhr},abort:function(){this._xhr.abort()}})}),define("app/views/s3uploader/image",["require","backbone","context","handlebarsTemplates"],function(t){var e=t("backbone"),n=t("context"),i=t("handlebarsTemplates");return e.View.extend({template:i["s3uploader/image"],events:{"blur input":"updated","click button":"deleted"},initialize:function(t){this.model=t.model},render:function(t){return void 0!==t?this.setElement(t):this.$el.html(this.template(this.model.toJSON())),this.model.set({uuid:Math.random().toString(36).substring(7),id:this.$el.data("id"),label:this.$el.find(".description input").val()}),n.trigger("image:added",this.model),this},updated:function(t){this.model.set({label:t.target.value}),n.trigger("image:updated",this.model)},deleted:function(){n.trigger("image:deleted",this.model),this.remove()}})}),define("app/views/s3uploader/upload",["require","backbone","handlebarsTemplates"],function(t){var e=t("backbone"),n=t("handlebarsTemplates");return e.View.extend({template:n["s3uploader/upload"],events:{"click .cancel":"cancel"},initialize:function(t){this.model=t.model,this.model.on("progress",this.updateProgress,this).on("complete",this.cleanup,this)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.progressBar=this.$el.find(".progress .bar"),this.percentage=this.$el.find(".percentage"),this},updateProgress:function(t){this.progressBar.width(t+"%"),this.percentage.text(t+"%")},cancel:function(t){this.model.abort(),this.cleanup(t)},cleanup:function(){this.remove()}})}),define("app/views/s3uploader/file",["require","backbone","handlebarsTemplates","context","serializeObject","app/models/s3uploader/file","app/views/s3uploader/image","app/views/s3uploader/upload"],function(t){var e=t("backbone"),n=t("handlebarsTemplates"),i=(t("context"),t("serializeObject"),t("app/models/s3uploader/file")),s=t("app/views/s3uploader/image"),r=t("app/views/s3uploader/upload");return e.View.extend({template:n["s3uploader/image"],events:{"change input[type=file]":"fileChanged"},initialize:function(){},render:function(t){var n=this;return this.setElement(t),this.form=this.$el.find("form.s3_uploader"),this.viewer=this.$el.find(".viewer"),this.$el.find(".holder").each(function(){new s({model:(new e.Model).set({input:n.$el.data("input")})}).render(this)}),this},fileChanged:function(t){var e=t.target.files[0],n=this;if(void 0!==e){var s=new FileReader;s.onload=function(t){var s=new i({url:n.form.attr("action"),policy:n.form.serializeObject(),source:t.target.result,input:n.$el.data("input")});n.viewer.append(new r({model:s}).render().$el),s.save({file:e}).success(function(){s.set({source:t.target.result}),n.fileUploaded(s)}),n.clearFileInput()},s.readAsDataURL(e)}},fileUploaded:function(t){this.viewer.append(new s({model:t}).render().$el)},clearFileInput:function(){var t=this.$el.find("input:file");t.replaceWith(t.val("").clone(!0))}})}),define("app/views/checkins/show/checkin",["require","backbone","handlebarsTemplates","context","app/views/checkins/show/form","app/views/utils/validation","app/views/s3uploader/file"],function(t){var e=t("backbone"),n=(t("handlebarsTemplates"),t("context")),i=t("app/views/checkins/show/form"),s=t("app/views/utils/validation"),r=t("app/views/s3uploader/file");return e.View.extend({el:".checkin",events:{"click .checkin-form-btn":"validateForm"},initialize:function(t){this.options=t,this.listenTo(n,"file:added",this.addImage)},render:function(){return this.formView=new i(this.options).render().$el,this.formValidation=new s({errorPlacementClass:".question"}).render(this.formView),this.$el.find(".body.images").each(function(){(new r).render(this)}),this},validateForm:function(){this.formValidation.valid()&&this.formView.submit()}})}),define("app/models/dashboards/alerts/section",["require","jquery","underscore","backbone"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"));return e.Model.extend({})}),define("app/collections/dashboards/alerts/sections",["require","jquery","underscore","backbone","app/models/dashboards/alerts/section"],function(t){var e=(t("jquery"),t("underscore"),t("backbone")),n=t("app/models/dashboards/alerts/section");return e.Collection.extend({initialize:function(t){this.programId=t.programId},url:function(){return"/programs/"+this.programId+"/dashboards/alerts/sections.json"},model:n})}),define("app/models/dashboards/alerts/alert",["require","jquery","underscore","backbone"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"));return e.Model.extend({url:function(){return"alerts/"+this.id+"/count"}})}),define("app/collections/dashboards/alerts/alerts",["require","jquery","underscore","backbone","app/models/dashboards/alerts/alert"],function(t){var e=(t("jquery"),t("underscore"),t("backbone")),n=t("app/models/dashboards/alerts/alert");return e.Collection.extend({initialize:function(t){this.programId=t.programId,this.id=t.id},url:function(){return"/programs/"+this.programId+"/dashboards/alerts/sections/"+this.id+"/alerts.json"},model:n})}),define("app/views/dashboards/alerts/index/group",["require","backbone","handlebars","handlebarsTemplates","context"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=t("context");return e.View.extend({tagName:"tr",template:n["dashboards/alerts/index/group"],events:{"click .expander":"toggleAlertViews"},initialize:function(t){this.options=t,this.model=t.model,this.totalAlertCount=0,this.listenTo(i,"alert_group_"+this.options.groupId+":count_update",this.updateTotalAlertCount,this)},render:function(){return this.$el.append(this.template(this.model.toJSON())),this},toggleAlertViews:function(){var t=this.$el.find(".expander i");t.hasClass("fa-caret-up")?(t.removeClass("fa-caret-up").addClass("fa-caret-down"),i.trigger("alert_group_"+this.options.groupId+":hide")):t.hasClass("fa-caret-down")&&(t.removeClass("fa-caret-down").addClass("fa-caret-up"),i.trigger("alert_group_"+this.options.groupId+":show"))},updateTotalAlertCount:function(t){this.totalAlertCount+=t,this.$el.find(".alert-count").text(this.totalAlertCount)}})}),define("app/views/dashboards/alerts/index/alert",["require","backbone","handlebars","handlebarsTemplates","context"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=t("context");return e.View.extend({template:n["dashboards/alerts/index/alert"],initialize:function(t){this.options=t,this.model=t.model},render:function(){var t=this;return this.setElement(this.template(this.model.toJSON())),this.model.fetch({success:function(e){t.$el.find(".alert-count").empty().text(e.get("count")),i.trigger("alert_group_"+t.options.groupId+":count_update",e.get("count"))}}),this.setGroupEvent(),this},showView:function(){this.$el.removeClass("hide")},hideView:function(){this.$el.addClass("hide")},setGroupEvent:function(){void 0!==this.options.groupId&&(this.listenTo(i,"alert_group_"+this.options.groupId+":show",this.showView,this),this.listenTo(i,"alert_group_"+this.options.groupId+":hide",this.hideView,this))}})}),define("app/views/dashboards/alerts/index/alerts",["require","backbone","handlebars","handlebarsTemplates","app/models/dashboards/alerts/alert","app/collections/dashboards/alerts/alerts","app/views/dashboards/alerts/index/group","app/views/dashboards/alerts/index/alert"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=t("app/models/dashboards/alerts/alert"),s=t("app/collections/dashboards/alerts/alerts"),r=t("app/views/dashboards/alerts/index/group"),o=t("app/views/dashboards/alerts/index/alert");return e.View.extend({tagName:"tbody",className:"alerts",template:n["dashboards/alerts/index/alerts"],loadingTemplate:n.loading,initialize:function(t){this.options=t,this.collection=new s({programId:this.options.programId,id:this.options.id})},render:function(){var t=this;return this.$el.html(this.loadingTemplate()),this.collection.fetch({success:function(e){t.$el.empty(),e.each(function(e){"group"==e.get("type")?t.createAlertGroupView(e):"alert"==e.get("type")&&t.createAlertView(e)})}}),this},createAlertGroupView:function(t){var e=this,n=t.get("id");this.$el.append(new r({groupId:n,model:t}).render().$el),_.each(t.get("alerts"),function(t){t=new i(t),e.$el.append(new o({programId:e.options.programId,groupId:n,model:t}).render().$el)})},createAlertView:function(t){this.$el.append(new o({programId:this.options.programId,model:t}).render().$el)}})}),define("app/views/dashboards/alerts/index/section",["require","backbone","handlebars","handlebarsTemplates","app/views/dashboards/alerts/index/alerts"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=t("app/views/dashboards/alerts/index/alerts");return e.View.extend({className:"section",template:n["dashboards/alerts/index/section"],initialize:function(t){this.options=t,this.model=t.model},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.find("table").append(new i({programId:this.options.programId,id:this.model.get("id")}).render().$el),this}})}),define("app/views/dashboards/alerts/index/sections",["require","backbone","app/collections/dashboards/alerts/sections","app/views/dashboards/alerts/index/section"],function(t){var e=t("backbone"),n=t("app/collections/dashboards/alerts/sections"),i=t("app/views/dashboards/alerts/index/section");return e.View.extend({className:"alerts-sections",initialize:function(t){this.options=t,this.collection=new n({programId:this.options.programId})},render:function(){var t=this;return this.collection.fetch({success:function(e){e.each(function(e){t.$el.append(new i({programId:t.options.programId,model:e}).render().$el)})}}),this}})}),define("app/views/utils/loading",["require","backbone","handlebars","handlebarsTemplates"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates"));return e.View.extend({template:n.loading,initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this}})}),define("app/views/utils/pagination",["require","backbone","handlebarsTemplates","context"],function(t){var e=t("backbone"),n=t("handlebarsTemplates"),i=t("context");return e.View.extend({template:n.pagination,events:{"click .page":"applyPageChange"},initialize:function(t){this.config=t,this.model={},this.setupPages(),this.setupText()},render:function(){return this.setElement(this.template(this.model)),this},setupPages:function(){this.firstPage(),this.closePages(),this.currentPage(),this.lastPage()},setupText:function(){this.infoText(),this.totalCount()},firstPage:function(){this.config.totalPages>1&&this.config.currentPage>1&&(this.model.firstPage=1)},closePages:function(){if(this.config.totalPages>1){this.model.pages=[],this.model.pages.push(this.config.currentPage),this.model.showPages=!0;for(var t=0;this.model.pages.length!=this.config.maxShown&&(this.config.totalPages-1>this.model.pages[t]&&this.model.pages.push(this.model.pages[t]+1),this.model.pages[0]>2&&this.model.pages.unshift(this.model.pages[0]-1),t=this.model.pages.length-1,this.config.totalPages-1!=this.model.pages[t]||1!=this.model.pages[0]););this.model.pages[0]>2&&(this.model.lessPages=!0),this.config.totalPages-1>this.model.pages[t]&&(this.model.morePages=!0)}},currentPage:function(){this.model.currentPage=this.config.currentPage},lastPage:function(){this.config.totalPages>1&&this.config.currentPage<this.config.totalPages&&(this.model.lastPage=this.config.totalPages)},infoText:function(){this.model.infoText=1==this.config.totalPages?"All":this.pageStartCount()+" - "+this.pageEndCount()},pageStartCount:function(){return this.config.pageCount*(this.config.currentPage-1)+1},pageEndCount:function(){return this.config.totalPages==this.config.currentPage?this.config.totalCount:this.config.pageCount*this.config.currentPage},totalCount:function(){this.model.totalCount=this.config.totalCount},applyPageChange:function(t){t.preventDefault();var e=$.trim($(t.currentTarget).text());i.trigger("filter:set",[{name:"page",value:e}])}})}),define("app/models/dashboards/alerts/store",["require","jquery","underscore","backbone"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"));return e.Model.extend({})}),define("app/models/dashboards/alerts/stores",["require","jquery","underscore","backbone"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"));return e.Model.extend({initialize:function(t){this.queryString="",this.alertId=t.id},url:function(){return this.alertId+"/stores.json?"+this.queryString}})}),define("app/collections/dashboards/alerts/filters",["require","backbone"],function(t){var e=t("backbone");return e.Collection.extend({initialize:function(t){this.alertId=t.id},url:function(){return this.alertId+"/filters.json"}})}),define("app/views/dashboards/alerts/show/store",["require","backbone","handlebars","handlebarsTemplates"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates"));return e.View.extend({tagName:"tr",template:n["dashboards/alerts/show/store"],initialize:function(t){this.model=t.model},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})}),define("app/views/dashboards/alerts/show/stores",["require","backbone","handlebarsTemplates","context","app/views/filter/main","app/views/utils/loading","app/views/utils/pagination","app/models/dashboards/alerts/store","app/models/dashboards/alerts/stores","app/collections/dashboards/alerts/filters","app/views/dashboards/alerts/show/store"],function(t){var e=t("backbone"),n=t("handlebarsTemplates"),i=t("context"),s=t("app/views/filter/main"),r=t("app/views/utils/loading"),o=t("app/views/utils/pagination"),a=t("app/models/dashboards/alerts/store"),l=t("app/models/dashboards/alerts/stores"),c=t("app/collections/dashboards/alerts/filters"),h=t("app/views/dashboards/alerts/show/store");return e.View.extend({el:".dashboard",template:n["dashboards/alerts/show/stores"],initialize:function(t){this.options=t,this.model=new l({id:t.id}),this.filters=new c({id:t.id}),this.loadingView=new r,this.listenTo(i,"filter:query",this.applyFilter)},render:function(){var t=this;return this.$el.html(this.loadingView.render().$el),this.filters.fetch({success:function(e){t.addFilters(e)}}),this.model.fetch({data:{page:this.options.page},processData:!0,success:function(e){t.constructView(e)}}),this},constructView:function(t){var e=this;this.$el.html(e.template(t.toJSON())),this.addPages();var n=this.$el.find("tbody");_.each(t.get("stores"),function(t){n.append(new h({model:new a(t)}).render().$el)})},addPages:function(){this.$el.prepend(new o(this.model.get("pagination")).render().$el)},addFilters:function(t){s.init(t)},applyFilter:function(t){var e=this;this.$el.empty(),this.$el.append(this.loadingView.render().$el),this.model.queryString=t,this.model.fetch({success:function(t){e.constructView(t)}})}})}),define("app/models/reports/report",["require","jquery","underscore","backbone"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"));return e.Model.extend({initialize:function(t){this.queryString="",this.programId=t.programId},url:function(){return"/programs/"+this.programId+"/reports.json?"+this.queryString}})}),define("app/collections/reports/filters",["require","backbone"],function(t){var e=t("backbone");return e.Collection.extend({initialize:function(t){this.programId=t.programId},url:function(){return"/programs/"+this.programId+"/reports/filters.json"}})}),define("app/views/reports/widgets/bar_chart",["require","backbone","handlebars","handlebarsTemplates","context"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=t("context");return e.View.extend({template:n["reports/widgets/bar_chart"],initialize:function(t){this.model=t},render:function(){return this.setElement(this.template(this.model)),this.listenTo(i,"filter:queryString",this.updateViewBreakDownLink),i.trigger("filter:request:queryString"),this},updateViewBreakDownLink:function(t){var e=void 0!==this.model.report_filters.account?this.model.report_filters.account.id:"all";this.$el.find("a.breakdown-link").attr("href","reports/"+e+"/info/"+this.model.widget_id+"?"+t)
}})}),function(){var t=this,e=t.Chart,n=function(t){this.canvas=t.canvas,this.ctx=t;this.width=t.canvas.width,this.height=t.canvas.height;return this.aspectRatio=this.width/this.height,i.retinaScale(this),this};n.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},n.types={};var i=n.helpers={},s=i.each=function(t,e,n){var i=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var s;for(s=0;s<t.length;s++)e.apply(n,[t[s],s].concat(i))}else for(var r in t)e.apply(n,[t[r],r].concat(i))},r=i.clone=function(t){var e={};return s(t,function(n,i){t.hasOwnProperty(i)&&(e[i]=n)}),e},o=i.extend=function(t){return s(Array.prototype.slice.call(arguments,1),function(e){s(e,function(n,i){e.hasOwnProperty(i)&&(t[i]=n)})}),t},a=i.merge=function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift({}),o.apply(null,t)},l=i.indexOf=function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},c=(i.where=function(t,e){var n=[];return i.each(t,function(t){e(t)&&n.push(t)}),n},i.findNextWhere=function(t,e,n){n||(n=-1);for(var i=n+1;i<t.length;i++){var s=t[i];if(e(s))return s}},i.findPreviousWhere=function(t,e,n){n||(n=t.length);for(var i=n-1;i>=0;i--){var s=t[i];if(e(s))return s}},i.inherits=function(t){var e=this,n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},i=function(){this.constructor=n};return i.prototype=e.prototype,n.prototype=new i,n.extend=c,t&&o(n.prototype,t),n.__super__=e.prototype,n}),h=i.noop=function(){},u=i.uid=function(){var t=0;return function(){return"chart-"+t++}}(),d=i.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},p=i.amd="function"==typeof define&&define.amd,f=i.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},m=i.max=function(t){return Math.max.apply(Math,t)},g=i.min=function(t){return Math.min.apply(Math,t)},v=(i.cap=function(t,e,n){if(f(e)){if(t>e)return e}else if(f(n)&&n>t)return n;return t},i.getDecimalPlaces=function(t){return t%1!==0&&f(t)?t.toString().split(".")[1].length:0}),y=i.radians=function(t){return t*(Math.PI/180)},b=(i.getAngleFromPoint=function(t,e){var n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i),r=2*Math.PI+Math.atan2(i,n);return 0>n&&0>i&&(r+=2*Math.PI),{angle:r,distance:s}},i.aliasPixel=function(t){return t%2===0?0:.5}),_=(i.splineCurve=function(t,e,n,i){var s=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),r=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)),o=i*s/(s+r),a=i*r/(s+r);return{inner:{x:e.x-o*(n.x-t.x),y:e.y-o*(n.y-t.y)},outer:{x:e.x+a*(n.x-t.x),y:e.y+a*(n.y-t.y)}}},i.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),w=(i.calculateScaleRange=function(t,e,n,i,s){var r=2,o=Math.floor(e/(1.5*n)),a=r>=o,l=m(t),c=g(t);l===c&&(l+=.5,c>=.5&&!i?c-=.5:l+=.5);for(var h=Math.abs(l-c),u=_(h),d=Math.ceil(l/(1*Math.pow(10,u)))*Math.pow(10,u),p=i?0:Math.floor(c/(1*Math.pow(10,u)))*Math.pow(10,u),f=d-p,v=Math.pow(10,u),y=Math.round(f/v);(y>o||o>2*y)&&!a;)if(y>o)v*=2,y=Math.round(f/v),y%1!==0&&(a=!0);else if(s&&u>=0){if(v/2%1!==0)break;v/=2,y=Math.round(f/v)}else v/=2,y=Math.round(f/v);return a&&(y=r,v=f/y),{steps:y,stepValue:v,min:p,max:p+y*v}},i.template=function(t,e){function n(t,e){var n=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):i[t]=i[t];return e?n(e):n}if(t instanceof Function)return t(e);var i={};return n(t,e)}),x=(i.generateLabels=function(t,e,n,i){var r=new Array(e);return labelTemplateString&&s(r,function(e,s){r[s]=w(t,{value:n+i*(s+1)})}),r},i.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-0.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-0.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-0.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-0.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n)))},easeOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin(2*(1*t-e)*Math.PI/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:2==(t/=.5)?1:(n||(n=.3*1.5),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),1>t?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n):i*Math.pow(2,-10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-x.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*x.easeInBounce(2*t):.5*x.easeOutBounce(2*t-1)+.5}}),k=i.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),S=(i.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),i.animationLoop=function(t,e,n,i,s,r){var o=0,a=x[n]||x.linear,l=function(){o++;var n=o/e,c=a(n);t.call(r,c,n,o),i.call(r,c,n),e>o?r.animationFrame=k(l):s.apply(r)};k(l)},i.getRelativePosition=function(t){var e,n,i=t.originalEvent||t,s=t.currentTarget||t.srcElement,r=s.getBoundingClientRect();return i.touches?(e=i.touches[0].clientX-r.left,n=i.touches[0].clientY-r.top):(e=i.clientX-r.left,n=i.clientY-r.top),{x:e,y:n}},i.addEvent=function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}),C=i.removeEvent=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=h},T=(i.bindEvents=function(t,e,n){t.events||(t.events={}),s(e,function(e){t.events[e]=function(){n.apply(t,arguments)},S(t.chart.canvas,e,t.events[e])})},i.unbindEvents=function(t,e){s(e,function(e,n){C(t.chart.canvas,n,e)})}),E=i.getMaximumWidth=function(t){var e=t.parentNode;return e.clientWidth},A=i.getMaximumHeight=function(t){var e=t.parentNode;return e.clientHeight},P=(i.getMaximumSize=i.getMaximumWidth,i.retinaScale=function(t){var e=t.ctx,n=t.canvas.width,i=t.canvas.height;window.devicePixelRatio&&(e.canvas.style.width=n+"px",e.canvas.style.height=i+"px",e.canvas.height=i*window.devicePixelRatio,e.canvas.width=n*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio))}),L=i.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},D=i.fontString=function(t,e,n){return e+" "+t+"px "+n},q=i.longestText=function(t,e,n){t.font=e;var i=0;return s(n,function(e){var n=t.measureText(e).width;i=n>i?n:i}),i},N=i.drawRoundedRectangle=function(t,e,n,i,s,r){t.beginPath(),t.moveTo(e+r,n),t.lineTo(e+i-r,n),t.quadraticCurveTo(e+i,n,e+i,n+r),t.lineTo(e+i,n+s-r),t.quadraticCurveTo(e+i,n+s,e+i-r,n+s),t.lineTo(e+r,n+s),t.quadraticCurveTo(e,n+s,e,n+s-r),t.lineTo(e,n+r),t.quadraticCurveTo(e,n,e+r,n),t.closePath()};n.instances={},n.Type=function(t,e,i){this.options=e,this.chart=i,this.id=u(),n.instances[this.id]=this,e.responsive&&this.resize(),this.initialize.call(this,t)},o(n.Type.prototype,{initialize:function(){return this},clear:function(){return L(this.chart),this},stop:function(){return i.cancelAnimFrame.call(t,this.animationFrame),this},resize:function(t){this.stop();var e=this.chart.canvas,n=E(this.chart.canvas),i=this.options.maintainAspectRatio?n/this.chart.aspectRatio:void 0!==this.scale&&this.options.horizontalBar?this.scale.calculateHeightHorizontalBar():A(this.chart.canvas);return e.width=this.chart.width=n,e.height=this.chart.height=i,P(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:h,render:function(t){return t&&this.reflow(),this.options.animation&&!t?i.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return w(this.options.legendTemplate,this)},destroy:function(){this.clear(),T(this,this.events),delete n.instances[this.id]},showTooltip:function(t,e){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var r=function(t){var e=!1;return t.length!==this.activeElements.length?e=!0:(s(t,function(t,n){t!==this.activeElements[n]&&(e=!0)},this),e)}.call(this,t);if(r||e){if(this.activeElements=t,this.draw(),t.length>0)if(this.datasets&&this.datasets.length>1){for(var o,a,c=this.datasets.length-1;c>=0&&(o=this.datasets[c].points||this.datasets[c].bars||this.datasets[c].segments,a=l(o,t[0]),-1===a);c--);var h=[],u=[],d=function(){var t,e,n,s,r,o=[],l=[],c=[];return i.each(this.datasets,function(e){t=e.points||e.bars||e.segments,t[a]&&t[a].hasValue()&&o.push(t[a])}),i.each(o,function(t){l.push(t.x),c.push(t.y),h.push(i.template(this.options.multiTooltipTemplate,t)),u.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),r=g(c),n=m(c),s=g(l),e=m(l),{x:s>this.chart.width/2?s:e,y:(r+n)/2}}.call(this,a);new n.MultiTooltip({x:d.x,y:d.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:h,legendColors:u,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx}).draw()}else s(t,function(t){var e=t.tooltipPosition();new n.Tooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:w(this.options.tooltipTemplate,t),chart:this.chart}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),n.Type.extend=function(t){var e=this,i=function(){return e.apply(this,arguments)};if(i.prototype=r(e.prototype),o(i.prototype,t),i.extend=n.Type.extend,t.name||e.prototype.name){var s=t.name||e.prototype.name,l=n.defaults[e.prototype.name]?r(n.defaults[e.prototype.name]):{};n.defaults[s]=o(l,t.defaults),n.types[s]=i,n.prototype[s]=function(t,e){var r=a(n.defaults.global,n.defaults[s],e||{});return new i(t,r,this)}}else d("Name not provided for this chart, so it hasn't been registered");return e},n.Element=function(t){o(this,t),this.initialize.apply(this,arguments),this.save()},o(n.Element.prototype,{initialize:function(){},restore:function(t){return t?s(t,function(t){this[t]=this._saved[t]},this):o(this,this._saved),this},save:function(){return this._saved=r(this),delete this._saved._saved,this},update:function(t){return s(t,function(t,e){this._saved[e]=this[e],this[e]=t},this),this},transition:function(t,e){return s(t,function(t,n){this[n]=(t-this._saved[n])*e+this._saved[n]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return f(this.value)}}),n.Element.extend=c,n.Point=n.Element.extend({display:!0,inRange:function(t,e){var n=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(e-this.y,2)<Math.pow(n,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),n.Arc=n.Element.extend({inRange:function(t,e){var n=i.getAngleFromPoint(this,{x:t,y:e}),s=n.angle>=this.startAngle&&n.angle<=this.endAngle,r=n.distance>=this.innerRadius&&n.distance<=this.outerRadius;return s&&r},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,e=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*e,y:this.y+Math.sin(t)*e}},draw:function(t){var e=this.ctx;e.beginPath(),e.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),e.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),e.closePath(),e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.fillStyle=this.fillColor,e.fill(),e.lineJoin="bevel",this.showStroke&&e.stroke()}}),n.Rectangle=n.Element.extend({draw:function(){var t=this.ctx,e=this.width/2,n=this.x-e,i=this.x+e,s=this.base-(this.base-this.y),r=this.strokeWidth/2;this.showStroke&&(n+=r,i-=r,s+=r),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(n,this.base),t.lineTo(n,s),t.lineTo(i,s),t.lineTo(i,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,e){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&e>=this.y&&e<=this.base}}),n.HorizontalRectangle=n.Element.extend({draw:function(){var t=this.ctx,e=this.height/2,n=this.y-e,i=this.y+e,s=this.x,r=this.strokeWidth/2;this.showStroke&&(n+=r,i-=r,s+=r),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(this.left,i),t.lineTo(this.left,n),t.lineTo(s,n),t.lineTo(s,i),t.fill(),this.showStroke&&t.stroke()},inRange:function(t,e){return e>=this.y-this.height/2&&e<=this.y+this.height/2&&t>=this.left&&t<=this.x}}),n.Tooltip=n.Element.extend({draw:function(){var t=this.chart.ctx;t.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var e=2,n=t.measureText(this.text).width+2*this.xPadding,i=this.fontSize+2*this.yPadding,s=i+this.caretHeight+e;this.x+n/2>this.chart.width?this.xAlign="left":this.x-n/2<0&&(this.xAlign="right"),this.y-s<0&&(this.yAlign="below");var r=this.x-n/2,o=this.y-s;switch(t.fillStyle=this.fillColor,this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-e),t.lineTo(this.x+this.caretHeight,this.y-(e+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(e+this.caretHeight)),t.closePath(),t.fill();break;case"below":o=this.y+e+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+e),t.lineTo(this.x+this.caretHeight,this.y+e+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+e+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":r=this.x-n+(this.cornerRadius+this.caretHeight);break;case"right":r=this.x-(this.cornerRadius+this.caretHeight)}N(t,r,o,n,i,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,r+n/2,o+i/2)}}),n.MultiTooltip=n.Element.extend({initialize:function(){this.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=D(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,e=q(this.ctx,this.font,this.labels)+this.fontSize+3,n=m([e,t]);this.width=n+2*this.xPadding;var i=this.height/2;this.y-i<0?this.y=i:this.y+i>this.chart.height&&(this.y=this.chart.height-i),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var e=this.y-this.height/2+this.yPadding,n=t-1;return 0===t?e+this.titleFontSize/2:e+(1.5*this.fontSize*n+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){N(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,i.each(this.labels,function(e,n){t.fillStyle=this.textColor,t.fillText(e,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(n+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[n].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}),n.Scale=n.Element.extend({initialize:function(){this.ChangeYLabel=!0,this.fit()},buildCalculatedLabels:function(){this.calculatedLabels=[];for(var t=v(this.stepValue),e=0;e<=this.steps;e++)this.calculatedLabels.push(w(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},buildYLabels:function(){this.buildCalculatedLabels(),this.horizontalBar?this.ChangeYLabel&&(this.ChangeYLabel=!1,this.yLabels=this.xLabels,this.xLabels=this.calculatedLabels):this.yLabels=this.calculatedLabels,this.yLabelWidth=this.display&&this.showLabels?q(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,e=this.endPoint-this.startPoint;for(this.calculateYRange(e),this.buildYLabels(),this.calculateXLabelRotation();e>this.endPoint-this.startPoint;)e=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(e),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,e,n=this.ctx.measureText(this.xLabels[0]).width,i=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=i/2+3,this.xScalePaddingLeft=n/2>this.yLabelWidth+10?n/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var s,r=q(this.ctx,this.font,this.xLabels);this.xLabelWidth=r;for(var o=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>o&&0===this.xLabelRotation||this.xLabelWidth>o&&this.xLabelRotation<=90&&this.xLabelRotation>0;)s=Math.cos(y(this.xLabelRotation)),t=s*n,e=s*i,t+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=s*r;this.xLabelRotation>0&&(this.endPoint-=Math.sin(y(this.xLabelRotation))*r+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:h,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var e=this.drawingArea()/(this.min-this.max);return this.endPoint-e*(t-this.min)},calculateX:function(t){var e=this.valuesCount;this.horizontalBar&&(e=this.steps);var n=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),i=n/(e-(this.offsetGridLines?0:1)),s=i*t+this.xScalePaddingLeft;return this.offsetGridLines&&(s+=i/2),Math.round(s)},update:function(t){i.extend(this,t),this.fit()},draw:function(){var t=this.ctx,e=(this.endPoint-this.startPoint)/(this.horizontalBar?this.yLabels.length:this.steps),n=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,s(this.yLabels,function(s,r){var o=this.endPoint-e*r,a=Math.round(o);this.horizontalBar&&(o-=e/2),t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(s,n-10,o),t.beginPath(),r>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),a+=i.aliasPixel(t.lineWidth),t.moveTo(n,a),t.lineTo(this.width,a),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(n-5,a),t.lineTo(n,a),t.stroke(),t.closePath()},this),s(this.xLabels,function(e,n){var i=this.calculateX(1)-this.calculateX(0),s=this.calculateX(n)+b(this.lineWidth)-(this.horizontalBar?i/2:0),r=this.calculateX(n-(this.offsetGridLines?.5:0))+b(this.lineWidth),o=this.xLabelRotation>0;t.beginPath(),n>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),t.moveTo(r,this.endPoint),t.lineTo(r,this.startPoint-3),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(r,this.endPoint),t.lineTo(r,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(s,o?this.endPoint+12:this.endPoint+8),t.rotate(-1*y(this.xLabelRotation)),t.font=this.font,t.textAlign=o?"right":"center",t.textBaseline=o?"middle":"top",t.fillText(e,0,0),t.restore()},this))}}),n.RadialScale=n.Element.extend({initialize:function(){this.size=g([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var e=this.drawingArea/(this.max-this.min);return(t-this.min)*e},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(w(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,e,n,i,s,r,o,a,l,c,h,u,d=g([this.height/2-this.pointLabelFontSize-5,this.width/2]),p=this.width,m=0;for(this.ctx.font=D(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e=0;e<this.valuesCount;e++)t=this.getPointPosition(e,d),n=this.ctx.measureText(w(this.templateString,{value:this.labels[e]})).width+5,0===e||e===this.valuesCount/2?(i=n/2,t.x+i>p&&(p=t.x+i,s=e),t.x-i<m&&(m=t.x-i,o=e)):e<this.valuesCount/2?t.x+n>p&&(p=t.x+n,s=e):e>this.valuesCount/2&&t.x-n<m&&(m=t.x-n,o=e);l=m,c=Math.ceil(p-this.width),r=this.getIndexAngle(s),a=this.getIndexAngle(o),h=c/Math.sin(r+Math.PI/2),u=l/Math.sin(a+Math.PI/2),h=f(h)?h:0,u=f(u)?u:0,this.drawingArea=d-(u+h)/2,this.setCenterPoint(u,h)},setCenterPoint:function(t,e){var n=this.width-e-this.drawingArea,i=t+this.drawingArea;this.xCenter=(i+n)/2,this.yCenter=this.height/2},getIndexAngle:function(t){var e=2*Math.PI/this.valuesCount;return t*e-Math.PI/2},getPointPosition:function(t,e){var n=this.getIndexAngle(t);return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(s(this.yLabels,function(e,n){if(n>0){var i,s=n*(this.drawingArea/this.steps),r=this.yCenter-s;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,s,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var o=0;o<this.valuesCount;o++)i=this.getPointPosition(o,this.calculateCenterOffset(this.min+n*this.stepValue)),0===o?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var a=t.measureText(e).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-a/2-this.backdropPaddingX,r-this.fontSize/2-this.backdropPaddingY,a+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(e,this.xCenter,r)}}},this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var e=this.valuesCount-1;e>=0;e--){if(this.angleLineWidth>0){var n=this.getPointPosition(e,this.calculateCenterOffset(this.max));t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(n.x,n.y),t.stroke(),t.closePath()}var i=this.getPointPosition(e,this.calculateCenterOffset(this.max)+5);t.font=D(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var r=this.labels.length,o=this.labels.length/2,a=o/2,l=a>e||e>r-a,c=e===a||e===r-a;t.textAlign=0===e?"center":e===o?"center":o>e?"left":"right",t.textBaseline=c?"middle":l?"bottom":"top",t.fillText(this.labels[e],i.x,i.y)}}}}}),i.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){s(n.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),p?define("chartjs",[],function(){return n}):"object"==typeof module&&module.exports&&(module.exports=n),t.Chart=n,n.noConflict=function(){return t.Chart=e,n}}.call(this),function(){var t=this,e=t.Chart,n=e.helpers,i={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,horizontalBar:!1,barHeight:20,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Bar",defaults:i,initialize:function(t){var i=this.options;this.ScaleClass=e.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,e,n){var s=this.calculateBaseWidth(),r=this.calculateX(n)-s/2,o=this.calculateBarWidth(t);return r+o*e+e*i.barDatasetSpacing+o/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*i.barValueSpacing},calculateBarWidth:function(t){var e=this.calculateBaseWidth()-(t-1)*i.barDatasetSpacing;return e/t},calculateHeightHorizontalBar:function(){return(2*i.barValueSpacing+i.barHeight)*this.yLabels.length+this.startPoint+(this.height-this.endPoint)},calculateBaseHeight:function(){return this.horizontalBar?i.barValueSpacing+i.barHeight/2:(this.startPoint-this.endPoint)/this.yLabels.length+2*i.barValueSpacing},calculateBarHeight:function(t){var e=this.calculateBaseHeight()-(t-1)*i.barDatasetSpacing;return e/t},calculateBarWidthHorizontalBar:function(t){return this.calculateBarHeight(t)},calculateXHorizontalBar:function(t){var e=(this.width-Math.round(this.xScalePaddingLeft)-this.xScalePaddingRight)/(this.max-this.min);return Math.round(this.xScalePaddingLeft)+e*(t-this.min);var e},calculateYHorizontalBar:function(t,e,n){var s=this.calculateBaseHeight(),r=this.endPoint+n*((this.startPoint-this.endPoint)/this.yLabels.length)-s/2,o=this.calculateBarHeight(t);return r+o*(e-1)-e*i.barDatasetSpacing+o/2}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)});var s=this.options.horizontalBar?e.HorizontalRectangle:e.Rectangle;this.BarClass=s.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),n.each(t.datasets,function(e){var i={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,bars:[]};this.datasets.push(i),n.each(e.data,function(n,s){i.bars.push(new this.BarClass({value:n,label:t.labels[s],datasetLabel:e.label,strokeColor:e.strokeColor,fillColor:e.fillColor[s%e.fillColor.length],highlightFill:e.highlightFill||e.fillColor[s%e.fillColor.length],highlightStroke:e.highlightStroke||e.strokeColor}))},this)},this),this.buildScale(t.labels),this.options.horizontalBar?this.BarClass.prototype.left=Math.round(this.scale.xScalePaddingLeft):this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,e,i){if(this.options.horizontalBar)var s={x:this.scale.calculateXHorizontalBar(t.value),y:this.scale.calculateYHorizontalBar(this.datasets.length,i,e),height:this.scale.calculateBarHeight(this.datasets.length)};else var s={width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,i,e),y:this.scale.endPoint};n.extend(t,s),t.save()},this),this.resize(this.render,!0)},update:function(){this.scale.update(),n.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(t){n.each(this.datasets,function(e,i){n.each(e.bars,t,this,i)},this)},getBarsAtEvent:function(t){for(var e,i=[],s=n.getRelativePosition(t),r=function(t){i.push(t.bars[e])},o=0;o<this.datasets.length;o++)for(e=0;e<this.datasets[o].bars.length;e++)if(this.datasets[o].bars[e].inRange(s.x,s.y))return n.each(this.datasets,r),i;return i},buildScale:function(t){var e=this,i=function(){var t=[];return e.eachBars(function(e){t.push(e.value)}),t},s={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=n.calculateScaleRange(i(),t,this.fontSize,this.beginAtZero,this.integersOnly);
=======
},isSame:function(t,e){return e=k(e||"millisecond"),"millisecond"===e?(t=be.isMoment(t)?t:be(t),+this===+t):+this.clone().startOf(e)===+F(t,this).startOf(e)},min:r("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(t){return t=be.apply(null,arguments),this>t?this:t}),max:r("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(t){return t=be.apply(null,arguments),t>this?this:t}),zone:function(t,e){var n,i=this._offset||0;return null==t?this._isUTC?i:this._dateTzOffset():("string"==typeof t&&(t=z(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(n=this._dateTzOffset()),this._offset=t,this._isUTC=!0,null!=n&&this.subtract(n,"m"),i!==t&&(!e||this._changeInProgress?b(this,be.duration(i-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,be.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?be(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return E(this.year(),this.month())},dayOfYear:function(t){var e=Se((be(this).startOf("day")-be(this).startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=ae(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")},isoWeekYear:function(t){var e=ae(this,1,4).year;return null==t?e:this.add(t-e,"y")},week:function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},isoWeek:function(t){var e=ae(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},weekday:function(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return A(this.year(),1,4)},weeksInYear:function(){var t=this.localeData()._week;return A(this.year(),t.dow,t.doy)},get:function(t){return t=k(t),this[t]()},set:function(t,e){return t=k(t),"function"==typeof this[t]&&this[t](e),this},locale:function(e){var n;return e===t?this._locale._abbr:(n=be.localeData(e),null!=n&&(this._locale=n),this)},lang:r("moment().lang() is deprecated. Use moment().localeData() instead.",function(e){return e===t?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),be.fn.millisecond=be.fn.milliseconds=fe("Milliseconds",!1),be.fn.second=be.fn.seconds=fe("Seconds",!1),be.fn.minute=be.fn.minutes=fe("Minutes",!1),be.fn.hour=be.fn.hours=fe("Hours",!0),be.fn.date=fe("Date",!0),be.fn.dates=r("dates accessor is deprecated. Use date instead.",fe("Date",!0)),be.fn.year=fe("FullYear",!0),be.fn.years=r("years accessor is deprecated. Use year instead.",fe("FullYear",!0)),be.fn.days=be.fn.day,be.fn.months=be.fn.month,be.fn.weeks=be.fn.week,be.fn.isoWeeks=be.fn.isoWeek,be.fn.quarters=be.fn.quarter,be.fn.toJSON=be.fn.toISOString,d(be.duration.fn=u.prototype,{_bubble:function(){var t,e,n,i=this._milliseconds,s=this._days,r=this._months,o=this._data,a=0;o.milliseconds=i%1e3,t=f(i/1e3),o.seconds=t%60,e=f(t/60),o.minutes=e%60,n=f(e/60),o.hours=n%24,s+=f(n/24),a=f(me(s)),s-=f(ge(a)),r+=f(s/30),s%=30,a+=f(r/12),r%=12,o.days=s,o.months=r,o.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return f(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*T(this._months/12)},humanize:function(t){var e=oe(this,!t,this.localeData());return t&&(e=this.localeData().pastFuture(+this,e)),this.localeData().postformat(e)},add:function(t,e){var n=be.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=be.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=k(t),this[t.toLowerCase()+"s"]()},as:function(t){var e,n;if(t=k(t),"month"===t||"year"===t)return e=this._days+this._milliseconds/864e5,n=this._months+12*me(e),"month"===t?n:n/12;switch(e=this._days+ge(this._months/12),t){case"week":return e/7+this._milliseconds/6048e5;case"day":return e+this._milliseconds/864e5;case"hour":return 24*e+this._milliseconds/36e5;case"minute":return 24*e*60+this._milliseconds/6e4;case"second":return 24*e*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+t)}},lang:be.fn.lang,locale:be.fn.locale,toIsoString:r("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),s=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||s||r?"T":"")+(i?i+"H":"")+(s?s+"M":"")+(r?r+"S":""):"P0D"},localeData:function(){return this._locale}}),be.duration.fn.toString=be.duration.fn.toISOString;for(we in cn)n(cn,we)&&ve(we.toLowerCase());be.duration.fn.asMilliseconds=function(){return this.as("ms")},be.duration.fn.asSeconds=function(){return this.as("s")},be.duration.fn.asMinutes=function(){return this.as("m")},be.duration.fn.asHours=function(){return this.as("h")},be.duration.fn.asDays=function(){return this.as("d")},be.duration.fn.asWeeks=function(){return this.as("weeks")},be.duration.fn.asMonths=function(){return this.as("M")},be.duration.fn.asYears=function(){return this.as("y")},be.locale("en",{ordinal:function(t){var e=t%10,n=1===T(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),Me?module.exports=be:"function"==typeof define&&define.amd?(define("moment",["require","exports","module"],function(t,e,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(ke.moment=_e),be}),ye(!0)):ye()}.call(this),function(t,e){var n=1e3,i=!1,s=t([]),r=function(n,i){var r=n.data("livestampdata");"number"==typeof i&&(i*=1e3),n.removeAttr("data-livestamp").removeData("livestamp"),i=e(i),e.isMoment(i)&&!isNaN(+i)&&(r=t.extend({},{original:n.contents()},r),r.moment=e(i),n.data("livestampdata",r).empty(),s.push(n[0]))},o=function(){i||(a.update(),setTimeout(o,n))},a={update:function(){t("[data-livestamp]").each(function(){var e=t(this);r(e,e.data("livestamp"))});var n=[];s.each(function(){var i=t(this),s=i.data("livestampdata");if(void 0===s)n.push(this);else if(e.isMoment(s.moment)){var r=i.html(),s=s.moment.fromNow();if(r!=s){var o=t.Event("change.livestamp");i.trigger(o,[r,s]),o.isDefaultPrevented()||i.html(s)}}}),s=s.not(n)},pause:function(){i=!0},resume:function(){i=!1,o()},interval:function(t){return void 0===t?n:void(n=t)}},l={add:function(n,i){return"number"==typeof i&&(i*=1e3),i=e(i),e.isMoment(i)&&!isNaN(+i)&&(n.each(function(){r(t(this),i)}),a.update()),n},destroy:function(e){return s=s.not(e),e.each(function(){var n=t(this),i=n.data("livestampdata");return void 0===i?e:void n.html(i.original?i.original:"").removeData("livestampdata")}),e},isLivestamp:function(t){return void 0!==t.data("livestampdata")}};t.livestamp=a,t(function(){a.resume()}),t.fn.livestamp=function(t,e){return l[t]||(e=t,t="add"),l[t](this,e)}}(jQuery,moment),define("livestamp",["moment"],function(t){return function(){var e;return e||t.Livestamp}}(this)),define("app/views/activities/activities",["require","jquery","underscore","backbone","handlebars","handlebarsTemplates","app/views/activities/activity","app/views/activities/incomplete_activity","app/views/activities/loading","app/collections/activities/activities","app/models/activities/incomplete_activity","libs/expanding","livestamp","slick_carousel"],function(t){{var e=t("jquery"),n=t("underscore"),i=t("backbone"),s=(t("handlebars"),t("handlebarsTemplates"),t("app/views/activities/activity")),r=t("app/views/activities/incomplete_activity"),o=t("app/views/activities/loading"),a=t("app/collections/activities/activities"),l=t("app/models/activities/incomplete_activity");t("libs/expanding"),t("livestamp"),t("slick_carousel")}return i.View.extend({el:".activities-holder",initialize:function(t){this.activityUrl=t.url,this.programId=t.programId,this.collection=new a({url:this.activityUrl}),this.isLoading=new o,this.allModelsLoaded=!1,this.incompleteActivityUrl=t.incompleteActivityUrl;var n=this;e(window).on("scroll.wall",function(){return n.allModelsLoaded?(e(window).off("scroll.wall"),!1):(!n.isLoading.active&&e(window).scrollTop()>n.$el.position().top+n.$el.height()-1500&&(n.$el.append(n.isLoading.render().el),n.collection.getNextPage().done(function(){n.render()}).fail(function(){return n.stopOnError(),!1})),!0)})},events:{},fetch:function(){var t=this;if(this.incompleteActivityUrl){var e=new l({current_program:this.programId},{url:this.incompleteActivityUrl});e.fetch().done(function(){e.get("incomplete")>0&&t.$el.prepend(new r({model:e}).render().el)})}return this.$el.append(t.isLoading.render().el),this.collection.fetch().done(function(){t.render()}).fail(function(){return t.stopOnError(),!1}),this},render:function(){var t=this;0===this.collection.models.length?(t.allModelsLoaded=!0,t.endOfFeed()):(this.collection.currentPage+=1,n.each(this.collection.models,function(e){void 0!==e.get("type")&&(this.activity=new s({model:e,programId:t.programId}),t.$el.append(this.activity.render().el),this.activity.$el.find("textarea").expanding(),this.activity.initializeCarousel())}),t.isLoading.removeFromDOM())},endOfFeed:function(){this.isLoading.removeFromDOM(),this.$el.append(0===this.collection.currentPage?"<div class='activity alert info'>No Activity was found, please try different search criteria.</div>":"<div class='activity alert info'>You have reached the end of the feed!</div>")},stopOnError:function(){this.isLoading.removeFromDOM(),this.$el.append('<div class="activity alert error">Additional activities cannot be loaded due to an error on the server. Please contact Tech Support</div>'),e(window).off("scroll.wall")}})}),define("app/views/shared/filterableTable",["require","backbone","jquery","handlebarsTemplates","context"],function(t){var e=t("backbone"),n=t("jquery"),i=t("handlebarsTemplates"),s=t("context");return e.View.extend({el:"table.table",collectionClass:void 0,template:"",loadingHTML:"<tr><td><i class='fa fa-spin fa-spinner'></i></td></tr>",bodySelector:"tbody",events:{"click .sortable-column-header":"_applySortableColumn"},initialize:function(){return this.collection=new this.collectionClass,this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"add",this.render),this.listenTo(s,"filter:query",this.applyFilter),this},render:function(){var t=this.$el.find(this.bodySelector),e={rows:this.collection.toJSON()};return t.html(this.loadingHTML),t.html(i[this.template](e)),this},applyFilter:function(t){var e=this.$(this.bodySelector);e.html(this.loadingHTML),this.collection.queryString=t,this.collection.fetch({reset:!0})},_applySortableColumn:function(t){t.stopPropagation(),t.preventDefault();var e=n(t.currentTarget),i=e.attr("rel"),r="asc",o="desc";e.hasClass("asc")?(r="desc",o="asc"):e.hasClass("desc")&&(r="asc",o="desc"),e.addClass("current"),e.addClass(r),e.removeClass(o),s.trigger("filter:set",[{name:"direction",value:r},{name:"sort",value:i}])}})}),define("app/collections/checkins/checkin_stores",["require","backbone"],function(t){var e=t("backbone");return e.Collection.extend({queryString:"",url:function(){return window.location.pathname+".json?"+this.queryString}})}),define("app/views/checkins/table",["require","app/views/shared/filterableTable","app/collections/checkins/checkin_stores"],function(t){var e=t("app/views/shared/filterableTable"),n=t("app/collections/checkins/checkin_stores");return e.extend({collectionClass:n,template:"checkins/store"})}),define("app/views/utils/paginator",["require","backbone","context"],function(t){var e=t("backbone"),n=t("context");return e.View.extend({el:".pagination-holder",events:{"click .page":"applyPageChange"},initialize:function(t){this.url=t.url,this.listenTo(n,"filter:query",this.render)},render:function(t){var e=this;e.$el.html("<i class='fa fa-spin fa-spinner'></i>"),$.ajax({url:e.url+"?"+t}).done(function(t){console.log("Here I am"),e.$el.html(t)})},applyPageChange:function(t){t.preventDefault();var e=$.trim($(t.currentTarget).text());n.trigger("filter:set",[{name:"page",value:e}])}})}),define("app/views/filter/activeFilterItem",["require","backbone","handlebarsTemplates","context"],function(t){var e=t("backbone"),n=t("handlebarsTemplates"),i=t("context");return e.View.extend({className:"active-filter flexible",initialize:function(t){this.options=t},events:{"click .btn":"clearHandler"},render:function(){return this.$el.html(n.filter_active_item(this.options)),this},clearHandler:function(t){t.stopPropagation(),t.preventDefault(),this.clear(),i.trigger("filter:request")},clear:function(){i.trigger(this.options.param+":filter:clear",this.options),this.remove()},getQueryValue:function(){return this.options.value}})}),define("app/views/filter/component",["require","backbone","context","handlebarsTemplates","app/views/filter/activeFilterItem"],function(t){var e=t("backbone"),n=t("context"),i=t("handlebarsTemplates"),s=t("app/views/filter/activeFilterItem"),r={templateName:"filters/list_component",openClassName:"open",events:{"click .filter-item":"toggleOpen","click .filter-list-item":"addFilterHandler","click .active-filter":"resetItem",'change input[type="date"]':"handleDateChange",'blur input[type="date"]':"handleDateBlur"},render:function(){return this.activeFilters=[],this.filterParam=this.model.get("name"),this.$el.html(i[this.templateName](this.model.toJSON())),this.listenTo(n,this.filterParam+":filter:clear",this.restoreFilter),this},clear:function(){this.$el.find(".active-filter").remove()},toggleOpen:function(t){t&&(t.preventDefault(),t.stopPropagation());var e=this.$el.find(".expand-indicator"),n=this.$el.find(".filter-list");e.toggleClass(this.openClassName),n.toggleClass(this.openClassName)},addFilterHandler:function(t){t.preventDefault(),t.stopPropagation(),this._addFilterFromLink(this.$el.find(t.currentTarget)),n.trigger("filter:request")},addFilterByValue:function(t){var e=this.$el.find(this._buildFilterItemLink(t));this._addFilterFromLink(e)},_addFilterFromLink:function(t){t&&(this._addFilter(t.text(),t.data("value")),t.hide())},_addFilter:function(t,e){var n=new s({param:this.filterParam,label:t,value:e}).render();n.$el.appendTo(this.$el.find(".filter-item")),this.activeFilters.push(n)},_buildFilterItemLink:function(t){return".filter-list-item[data-value='"+t+"']"},restoreFilter:function(t){this.$el.find(this._buildFilterItemLink(t.value)).show()}};return e.View.extend(r)}),define("app/views/filter/singleAnswerComponent",["require","app/views/filter/component"],function(t){var e=t("app/views/filter/component").extend({_addFilterFromLink:function(t){var n=this.$el.find(".active-filter");0===n.length&&(e.__super__._addFilterFromLink.call(this,t),this.toggleOpen())}});return e}),define("app/views/filter/dateComponent",["require","context","app/views/filter/component"],function(t){var e=t("context"),n=t("app/views/filter/component").extend({templateName:"filters/date_component",addFilterHandler:function(t){t.preventDefault(),t.stopPropagation()},handleDateChange:function(t){var e=t.currentTarget.value;e&&(this.clear(),this._addFilter(e,e))},handleDateBlur:function(t){this.handleDateChange(t),this.toggleOpen(),e.trigger("filter:request")}});return n}),define("app/views/filter/filterControl",["require","backbone","jquery","context","handlebarsTemplates","app/views/filter/singleAnswerComponent","app/views/filter/dateComponent","app/views/filter/component"],function(t){var e=t("backbone"),n=t("jquery"),i=t("context"),s=t("handlebarsTemplates")["filters/spinner_component"],r=t("app/views/filter/singleAnswerComponent"),o=t("app/views/filter/dateComponent"),a=t("app/views/filter/component"),l={el:"#site-filter",openClass:"open",events:{"click .clear-filters":"clearFilters"},initialize:function(t){this.components={};var r=this.parseQueryString(),o=!1;if(!t||!t.collection)return!1;if(o=this.renderFilterCollection(t.collection,r),t.url){var a=this,l=n(s()),c=new(e.Collection.extend({url:t.url}));a.$el.append(l),c.fetch().then(function(){l.remove()}).done(function(){a.renderFilterCollection(c,r)})}this._applyQSGlobal(r),this.listenTo(i,"filter:request",this.handleFilterRequest),this.listenTo(i,"filter:request:queryString",this.handleFilterRequestQueryString),this.listenTo(i,"filter:set",this.setFromExternal),o&&i.trigger("filter:toggle")},render:function(){},clearFilters:function(){for(var t in this.components)this.components[t].clear();this.broadCastQueryString()},renderFilterCollection:function(t,e){var n,i=this,s=!1;return t.each(function(t){n=i.selectComponentView(t).render(),i.$el.append(n.$el),i.components[n.filterParam]=n,i._applyQS(n,e)===!0&&(s=!0)}),s},selectComponentView:function(t){var e=a;return"date"===t.get("type")?e=o:-1===t.get("name").indexOf("[]")&&(e=r),new e({model:t})},_applyQS:function(t,e){var n=!1;if(e[t.filterParam]){n=!0;var i=0,s=e[t.filterParam];for(i;i<s.length;i++)t.addFilterByValue(s[i])}return n},_applyQSGlobal:function(t){for(var e=this.$el.find("input.global"),n=e.length;n--;)t[e[n].name]&&(e[n].value=t[e[n].name][0])},handleFilterRequest:function(){this.$el.find('input[name="page"]').val(1),this.broadCastQueryString()},handleFilterRequestQueryString:function(){i.trigger("filter:queryString",this.$el.serialize())},broadCastQueryString:function(){i.router.navigate(window.location.pathname+"?"+this.$el.serialize(),{trigger:!1}),i.trigger("filter:query",this.$el.serialize())},setFromExternal:function(t){var e,n=0,i=0;for(i=0;i<t.length;i++)e=this.$el.find('input[name="'+t[i].name+'"]'),e&&(e.val(t[i].value),n++);n>0&&this.broadCastQueryString()},parseQueryString:function(){for(var t=decodeURI(window.location.search.substring(1)).split("&"),e={},n=0;n<t.length;n++){var i=t[n].split("=");e[i[0]]||(e[i[0]]=[]),e[i[0]].push(i[1])}return e}};return e.View.extend(l)}),define("app/views/filter/main",["require","backbone","context","app/views/filter/filterControl"],function(t){var e=t("backbone"),n=(t("context"),t("app/views/filter/filterControl")),i={init:function(t,i){!t&&window.filterBootstrap&&(t=new e.Collection(window.filterBootstrap.filters),i=window.filterBootstrap.filters_url),new n({collection:t,url:i})}};return i}),define("app/views/checkins/checkin",["require","app/views/checkins/table","app/views/utils/paginator","app/views/filter/main"],function(t){var e=t("app/views/checkins/table"),n=t("app/views/utils/paginator"),i=t("app/views/filter/main");return{init:function(){(new e).collection.reset(window.bootstrap),new n({url:"stores/pagination"}),i.init()}}}),define("app/collections/teams/members",["require","backbone"],function(t){var e=t("backbone");return e.Collection.extend({queryString:"",url:function(){return window.location.pathname+".json?"+this.queryString}})}),define("app/views/teams/table",["require","app/views/shared/filterableTable","app/collections/teams/members"],function(t){var e=t("app/views/shared/filterableTable"),n=t("app/collections/teams/members");return e.extend({collectionClass:n,template:"teams_table_rows"})}),define("app/views/teams/main",["require","app/views/teams/table","app/views/utils/paginator","app/views/filter/main"],function(t){var e=t("app/views/teams/table"),n=t("app/views/utils/paginator"),i=t("app/views/filter/main");return{init:function(){(new e).collection.reset(window.bootstrap),new n({url:"teams/pagination"}),i.init()}}}),define("app/views/stores/table",["require","app/views/shared/filterableTable","app/collections/checkins/checkin_stores"],function(t){var e=t("app/views/shared/filterableTable"),n=t("app/collections/checkins/checkin_stores");return e.extend({collectionClass:n,template:"stores/table_rows"})}),define("app/views/stores/main",["require","app/views/stores/table","app/views/utils/paginator","app/views/filter/main"],function(t){var e=t("app/views/stores/table"),n=t("app/views/utils/paginator"),i=t("app/views/filter/main");return{init:function(){(new e).collection.reset(window.bootstrap),new n({url:"stores/pagination"}),i.init()}}}),define("app/views/store_profile/section_loader",["require","handlebarsTemplates","underscore","backbone"],function(t){var e=t("handlebarsTemplates"),n=t("underscore"),i={collectionClass:void 0,rowsTemplate:"",failHTML:"<p>There was an error fetching the requested data. Please contact TechSupport</p>",initialize:function(){this.collection=new this.collectionClass,this.listenTo(this.collection,"reset",this.resetCollection)},render:function(){var t=this;t.collection.fetch().done(function(){t.success.apply(t,arguments)}).fail(function(){t.failure.apply(t,arguments)})},success:function(){var t={rows:this.collection.toJSON()};n.extend(t,this.additionalData()),this.$el.find(".body").html(e[this.rowsTemplate](t)),this.afterRender()},afterRender:function(){},failure:function(){this.$el.find(".body").html(this.failHTML),this.afterRender()},resetCollection:function(){this.$el.find(".body").html('<div class="item"><i class="fa fa-spinner fa-spin"></i></div>'),this.success()},additionalData:function(){return{}}};return t("backbone").View.extend(i)}),define("app/views/store_profile/personnel",["require","app/views/store_profile/section_loader","context","backbone"],function(t){var e=t("app/views/store_profile/section_loader"),n=t("context"),i=t("backbone"),s={el:"#personnel",collectionClass:i.Collection.extend({url:function(){return n.personnel.links.self}}),rowsTemplate:"store_profile/personnel_rows"};return e.extend(s)}),define("app/views/store_profile/alerts",["require","app/views/store_profile/section_loader","context","backbone"],function(t){var e=t("app/views/store_profile/section_loader"),n=t("context"),i=t("backbone"),s=e.extend({el:"#alerts",events:{"click .resolve":"resolveAlert"},collectionClass:i.Collection.extend({url:function(){return n.alerts.links.open},parse:function(t){return this.count=t.count,t.items}}),rowsTemplate:"store_profile/alerts_rows",additionalData:function(){return n.alerts},afterRender:function(){this.$el.find(".counter").text(this.collection.count+" ")},resolveAlert:function(t){t.stopPropagation(),t.preventDefault();var e=t.currentTarget.href.split("/"),n=this.$el.find(t.currentTarget),i=e[e.length-1],s=this,r=this.collection.get(i);r.url=t.currentTarget.href,r.set({resolved:!0}),n.parent().html("<i class='fa fa-spin fa-spinner'></i>"),r.save().done(function(){s.collection.fetch({reset:!0})}).fail(function(){s.html("There is a problem. Please contact Tech Support")})}});return s}),define("app/views/utils/expandWrapperView",["require","backbone","jquery"],function(t){var e=t("backbone"),n=t("jquery"),i={events:{"click .click-target":"expand"},expand:function(t){t.stopPropagation(),t.preventDefault();var e=n(t.currentTarget),i=e.parents(".expand-container");i.toggleClass("active")}};return e.View.extend(i)}),define("app/views/store_profile/openAlerts",["require","app/views/shared/filterableTable","backbone"],function(t){var e=t("app/views/shared/filterableTable"),n=t("backbone"),i=e.extend({el:"#openAlerts",loadingHTML:"<div class='item'><i class='fa fa-spin fa-spinner'></i></div>",collectionClass:n.Collection.extend({queryString:"",url:function(){return"test_url?"+this.queryString}}),template:"store_profile/open_alerts_rows",bodySelector:".body",initialize:function(t){return i.__super__.initialize.apply(this,arguments),this.count=t.count,this},render:function(){return this.$el.find(".counter").text(this.count+" "),i.__super__.render.apply(this,arguments)}});return i}),define("app/views/store_profile/resolvedAlerts",["require","backbone","app/views/store_profile/openAlerts"],function(t){var e=t("backbone"),n=t("app/views/store_profile/openAlerts").extend({el:"#resolvedAlerts",collectionClass:e.Collection.extend({queryString:"",url:function(){return"test_url?"+this.queryString}}),template:"store_profile/resolved_alerts_rows"});return n}),define("app/views/store_profile/main",["require","slick_carousel","context","underscore","jquery","app/views/activities/activities","app/views/store_profile/personnel","app/views/store_profile/alerts","app/views/utils/expandWrapperView","app/views/store_profile/openAlerts","app/views/store_profile/resolvedAlerts"],function(t){t("slick_carousel");var e=t("context"),n=t("underscore"),i=t("jquery"),s=t("app/views/activities/activities"),r=t("app/views/store_profile/personnel"),o=t("app/views/store_profile/alerts"),a=t("app/views/utils/expandWrapperView"),l=t("app/views/store_profile/openAlerts"),c=t("app/views/store_profile/resolvedAlerts"),h={init:function(){n.extend(e,window.bootstrap),(new r).render(),(new o).render();var t=new a;t.setElement("#site-canvas").render(),i("#images .image-container").slick({slidesToShow:3,slidesToScroll:1,centerMode:!0,focusOnSelect:!0,variableWidth:!0})},activity:function(){var t="/programs/"+e.programId+"/activities/posts?customer_store="+e.requestParameters[1],n=new s({url:t,programId:e.programId});n.fetch()},history:function(){n.extend(e,window.bootstrap),new l({count:window.bootstrap.open.count}).collection.reset(window.bootstrap.open.items),new c({count:window.bootstrap.resolved.count}).collection.reset(window.bootstrap.resolved.items)}};return h}),function(){var t,e,n,i,s,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,n,i,s,r,o;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),r=t.childNodes,o=[],i=0,s=r.length;s>i;i++)n=r[i],o.push(this.add_option(n,e,t.disabled));return o},t.prototype.add_option=function(t,e,n){return"OPTION"===t.nodeName.toUpperCase()?(""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:n===!0?n:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},t.prototype.escapeExpression=function(t){var e,n;return null==t||t===!1?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(n,function(t){return e[t]||"&amp;"})):t},t}(),i.select_to_array=function(t){var e,n,s,r,o;for(n=new i,o=t.childNodes,s=0,r=o.length;r>s;s++)e=o[s],n.add_node(e);return n.parsed},e=function(){function t(e,n){this.form_field=e,this.options=null!=n?n:{},t.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return t.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},t.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||t.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||t.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||t.default_no_result_text},t.prototype.mouse_enter=function(){return this.mouse_on_container=!0},t.prototype.mouse_leave=function(){return this.mouse_on_container=!1},t.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},t.prototype.input_blur=function(){var t=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return t.blur_test()},100))},t.prototype.results_option_build=function(t){var e,n,i,s,r;for(e="",r=this.results_data,i=0,s=r.length;s>i;i++)n=r[i],e+=n.group?this.result_add_group(n):this.result_add_option(n),(null!=t?t.first:void 0)&&(n.selected&&this.is_multiple?this.choice_build(n):n.selected&&!this.is_multiple&&this.single_set_selected_text(n.text));return e},t.prototype.result_add_option=function(t){var e,n;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),n=document.createElement("li"),n.className=e.join(" "),n.style.cssText=t.style,n.setAttribute("data-option-array-index",t.array_index),n.innerHTML=t.search_text,this.outerHTML(n)):""},t.prototype.result_add_group=function(t){var e;return(t.search_match||t.group_match)&&t.active_options>0?(e=document.createElement("li"),e.className="group-result",e.innerHTML=t.search_text,this.outerHTML(e)):""},t.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},t.prototype.reset_single_select_options=function(){var t,e,n,i,s;for(i=this.results_data,s=[],e=0,n=i.length;n>e;e++)t=i[e],s.push(t.selected?t.selected=!1:void 0);return s},t.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},t.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()
},t.prototype.winnow_results=function(){var t,e,n,i,s,r,o,a,l,c,h,u;for(this.no_results_clear(),i=0,r=this.get_search_text(),t=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),l=new RegExp(t,"i"),n=this.get_search_regex(t),u=this.results_data,c=0,h=u.length;h>c;c++)e=u[c],e.search_match=!1,s=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(s=this.results_data[e.group_array_index],0===s.active_options&&s.search_match&&(i+=1),s.active_options+=1),(!e.group||this.group_search)&&(e.search_text=e.group?e.label:e.text,e.search_match=this.search_string_match(e.search_text,n),e.search_match&&!e.group&&(i+=1),e.search_match?(r.length&&(o=e.search_text.search(l),a=e.search_text.substr(0,o+r.length)+"</em>"+e.search_text.substr(o+r.length),e.search_text=a.substr(0,o)+"<em>"+a.substr(o)),null!=s&&(s.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),1>i&&r.length?(this.update_results_content(""),this.no_results(r)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},t.prototype.get_search_regex=function(t){var e;return e=this.search_contains?"":"^",new RegExp(e+t,"i")},t.prototype.search_string_match=function(t,e){var n,i,s,r;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(i=t.replace(/\[|\]/g,"").split(" "),i.length))for(s=0,r=i.length;r>s;s++)if(n=i[s],e.test(n))return!0},t.prototype.choices_count=function(){var t,e,n,i;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,i=this.form_field.options,e=0,n=i.length;n>e;e++)t=i[e],t.selected&&(this.selected_option_count+=1);return this.selected_option_count},t.prototype.choices_click=function(t){return t.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},t.prototype.keyup_checker=function(t){var e,n;switch(e=null!=(n=t.which)?n:t.keyCode,this.search_field_scale(),e){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(t.preventDefault(),this.results_showing)return this.result_select(t);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},t.prototype.clipboard_event_checker=function(){var t=this;return setTimeout(function(){return t.results_search()},50)},t.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},t.prototype.include_option_in_results=function(t){return this.is_multiple&&!this.display_selected_options&&t.selected?!1:!this.display_disabled_options&&t.disabled?!1:t.empty?!1:!0},t.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},t.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},t.prototype.search_results_touchend=function(t){return this.touch_started?this.search_results_mouseup(t):void 0},t.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:(e=document.createElement("div"),e.appendChild(t),e.innerHTML)},t.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},t.default_multiple_text="Select Some Options",t.default_single_text="Select an Option",t.default_no_result_text="No results match",t}(),t=jQuery,t.fn.extend({chosen:function(i){return e.browser_is_supported()?this.each(function(){var e,s;e=t(this),s=e.data("chosen"),"destroy"===i&&s instanceof n?s.destroy():s instanceof n||e.data("chosen",new n(this,i))}):this}}),n=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},n.prototype.set_up_html=function(){var e,n;return e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),n={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(n.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",n),this.container.html(this.is_multiple?'<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>':'<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},n.prototype.register_observers=function(){var t=this;return this.container.bind("touchstart.chosen",function(e){t.container_mousedown(e)}),this.container.bind("touchend.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.search_results.bind("touchstart.chosen",function(e){t.search_results_touchstart(e)}),this.search_results.bind("touchmove.chosen",function(e){t.search_results_touchmove(e)}),this.search_results.bind("touchend.chosen",function(e){t.search_results_touchend(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.form_field_jq.bind("chosen:close.chosen",function(e){t.input_blur(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.search_field.bind("cut.chosen",function(e){t.clipboard_event_checker(e)}),this.search_field.bind("paste.chosen",function(e){t.clipboard_event_checker(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},n.prototype.destroy=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},n.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},n.prototype.container_mousedown=function(e){return this.is_disabled||(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null!=e&&t(e.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},n.prototype.container_mouseup=function(t){return"ABBR"!==t.target.nodeName||this.is_disabled?void 0:this.results_reset(t)},n.prototype.search_results_mousewheel=function(t){var e;return t.originalEvent&&(e=t.originalEvent.deltaY||-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e?(t.preventDefault(),"DOMMouseScroll"===t.type&&(e=40*e),this.search_results.scrollTop(e+this.search_results.scrollTop())):void 0},n.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},n.prototype.close_field=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},n.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},n.prototype.test_active_click=function(e){var n;return n=t(e.target).closest(".chosen-container"),n.length&&this.container[0]===n[0]?this.active_field=!0:this.close_field()},n.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=i.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},n.prototype.result_do_highlight=function(t){var e,n,i,s,r;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),i=parseInt(this.search_results.css("maxHeight"),10),r=this.search_results.scrollTop(),s=i+r,n=this.result_highlight.position().top+this.search_results.scrollTop(),e=n+this.result_highlight.outerHeight(),e>=s)return this.search_results.scrollTop(e-i>0?e-i:0);if(r>n)return this.search_results.scrollTop(n)}},n.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},n.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},n.prototype.update_results_content=function(t){return this.search_results.html(t)},n.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},n.prototype.set_tab_index=function(){var t;return this.form_field.tabIndex?(t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t):void 0},n.prototype.set_label_behavior=function(){var e=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()}):void 0},n.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},n.prototype.search_results_mouseup=function(e){var n;return n=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),n.length?(this.result_highlight=n,this.result_select(e),this.search_field.focus()):void 0},n.prototype.search_results_mouseover=function(e){var n;return n=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),n?this.result_do_highlight(n):void 0},n.prototype.search_results_mouseout=function(e){return t(e.target).hasClass("active-result")?this.result_clear_highlight():void 0},n.prototype.choice_build=function(e){var n,i,s=this;return n=t("<li />",{"class":"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?n.addClass("search-choice-disabled"):(i=t("<a />",{"class":"search-choice-close","data-option-array-index":e.array_index}),i.bind("click.chosen",function(t){return s.choice_destroy_link_click(t)}),n.append(i)),this.search_container.before(n)},n.prototype.choice_destroy_link_click=function(e){return e.preventDefault(),e.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(t(e.target))},n.prototype.choice_destroy=function(t){return this.result_deselect(t[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()):void 0},n.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},n.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},n.prototype.result_select=function(t){var e,n;return this.result_highlight?(e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),n=this.results_data[e[0].getAttribute("data-option-array-index")],n.selected=!0,this.form_field.options[n.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(n):this.single_set_selected_text(n.text),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[n.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},n.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},n.prototype.result_deselect=function(t){var e;return e=this.results_data[t],this.form_field.options[e.options_index].disabled?!1:(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},n.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},n.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},n.prototype.winnow_results_set_highlight=function(){var t,e;return e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),t=e.length?e.first():this.search_results.find(".active-result").first(),null!=t?this.result_do_highlight(t):void 0},n.prototype.no_results=function(e){var n;return n=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),n.find("span").first().html(e),this.search_results.append(n),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},n.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},n.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},n.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},n.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},n.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},n.prototype.keydown_checker=function(t){var e,n;switch(e=null!=(n=t.which)?n:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:this.results_showing&&t.preventDefault();break;case 32:this.disable_search&&t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},n.prototype.search_field_scale=function(){var e,n,i,s,r,o,a,l,c;if(this.is_multiple){for(i=0,a=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,c=o.length;c>l;l++)s=o[l],r+=s+":"+this.search_field.css(s)+";";return e=t("<div />",{style:r}),e.text(this.search_field.val()),t("body").append(e),a=e.width()+25,e.remove(),n=this.container.outerWidth(),a>n-10&&(a=n-10),this.search_field.css({width:a+"px"})}},n}(e)}.call(this),define("chosen",function(){}),define("app/views/stores/intel/edit",["require","backbone","chosen","libs/expanding"],function(t){{var e=t("backbone");t("chosen"),t("libs/expanding")}return e.View.extend({el:".store-intel",initialize:function(){},render:function(){return this.$el.find("select").chosen({disable_search:!0,width:"100%"}),this.$el.find("textarea:visible").expanding(),this}})}),define("app/models/checkins/show/form",["require","backbone"],function(t){var e=t("backbone");return e.Model.extend({initialize:function(t){this.programId=t.programId,this.checkinId=t.checkinId,this.data=""},url:function(){return"/programs/"+this.programId+"/checkins/"+this.checkinId+"/save?"+this.data}})}),function(t,e){if("function"==typeof define&&define.amd)define("serializeObject",["exports","jquery"],function(t,n){return e(t,n)});else if("undefined"!=typeof exports){var n=require("jquery");e(exports,n)}else e(t,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e){function n(t,n){function s(t,e,n){return t[e]=n,t}function r(t,e){for(var n,r=t.match(i.key);void 0!==(n=r.pop());)if(i.push.test(n)){var a=o(t.replace(/\[\]$/,""));e=s([],a,e)}else i.fixed.test(n)?e=s([],n,e):i.named.test(n)&&(e=s({},n,e));return e}function o(t){return void 0===p[t]&&(p[t]=0),p[t]++}function a(t){switch(e('[name="'+t.name+'"]',n).attr("type")){case"checkbox":return"on"===t.value?!0:t.value;default:return t.value}}function l(e){if(!i.validate.test(e.name))return this;var n=r(e.name,a(e));return d=t.extend(!0,d,n),this}function c(e){if(!t.isArray(e))throw new Error("formSerializer.addPairs expects an Array");for(var n=0,i=e.length;i>n;n++)this.addPair(e[n]);return this}function h(){return d}function u(){return JSON.stringify(h())}var d={},p={};this.addPair=l,this.addPairs=c,this.serialize=h,this.serializeJSON=u}var i={validate:/^[a-z_][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i};return n.patterns=i,n.serializeObject=function(){return this.length>1?new Error("jquery-serialize-object can only serialize one form at a time"):new n(e,this).addPairs(this.serializeArray()).serialize()},n.serializeJSON=function(){return this.length>1?new Error("jquery-serialize-object can only serialize one form at a time"):new n(e,this).addPairs(this.serializeArray()).serializeJSON()},"undefined"!=typeof e.fn&&(e.fn.serializeObject=n.serializeObject,e.fn.serializeJSON=n.serializeJSON),t.FormSerializer=n,n}),define("app/views/checkins/show/form",["require","backbone","context","app/models/checkins/show/form","serializeObject","chosen","libs/expanding"],function(t){{var e=t("backbone"),n=t("context"),i=t("app/models/checkins/show/form");t("serializeObject"),t("chosen"),t("libs/expanding")}return e.View.extend({el:".checkin-form",events:{"blur input[type!=radio]":"saveState","change textarea":"saveState","change input[type=radio]":"saveState","change input[type=hidden]":"saveState","change select":"saveState","blur input.inventory":"updateTotal","click [data-show-element]":"showElement","click [data-hide-element]":"hideElement"},initialize:function(t){this.model=new i(t),this.images={},this.inventoryTotal=this.$el.find("input.inventory-total"),this.inventories=this.$el.find("input.inventory"),this.listenTo(n,"image:added",this.imageAdded),this.listenTo(n,"image:updated",this.imageUpdated),this.listenTo(n,"image:deleted",this.imageDeleted)},render:function(){return this.$el.find("select").chosen({disable_search:!0,width:"100%"}),this.$el.find("textarea:visible").expanding(),this},saveState:function(t){var e=this.$el.find(t.currentTarget);if(void 0!==e){var i=e.serializeObject();$.isEmptyObject(i)&&(i[e.attr("name")]=e.val()),this.model.save(i,{patch:!0}),n.trigger("hidden:update")}},updateTotal:function(){if(void 0!==this.inventoryTotal){var t=0,e=this;this.inventories.each(function(){t+=e.extractInt($(this))}),this.inventoryTotal.val(t).trigger("change")}},extractInt:function(t){var e=parseInt(t.val(),10);return-1===e||isNaN(e)?0:e},showElement:function(t){var e=this.$el.find(t.currentTarget);this.$el.find(e.data("show-element")).show("fast","linear")},hideElement:function(t){var e=this.$el.find(t.currentTarget);this.$el.find(e.data("hide-element")).hide("fast","linear").val("").trigger("change")},addImage:function(t){var e=t.get("input");return this.images[e]=this.images[e]||{},this.images[e][t.get("uuid")]=this.getImageParams(t),this},removeImage:function(t){var e=t.get("input"),n=t.get("uuid");return this.images.removed=this.images.removed||{},this.images.removed[n]=this.images[e][n],delete this.images[e][n],this},setImageInputValue:function(t){var e=t.get("input");this.$el.find(e).val(JSON.stringify(this.images[e])),this.$el.find("#remove_images").val(JSON.stringify(this.images.removed))},getImageParams:function(t){return{id:t.get("id"),label:t.get("label"),temp_location:t.get("temp_location")}},imageAdded:function(t){this.addImage(t).setImageInputValue(t)},imageUpdated:function(t){this.removeImage(t).addImage(t).setImageInputValue(t)},imageDeleted:function(t){this.removeImage(t).setImageInputValue(t)}})}),function(t){"function"==typeof define&&define.amd?define("jquery-validate",["jquery"],t):t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var n=t.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new t.validator(e,this[0]),t.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){n.settings.submitHandler&&(n.submitButton=e.target),t(e.target).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.submit(function(e){function i(){var i,s;return n.settings.submitHandler?(n.submitButton&&(i=t("<input type='hidden'/>").attr("name",n.submitButton.name).val(t(n.submitButton).val()).appendTo(n.currentForm)),s=n.settings.submitHandler.call(n,n.currentForm,e),n.submitButton&&i.remove(),void 0!==s?s:!1):!0}return n.settings.debug&&e.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)},valid:function(){var e,n;return t(this[0]).is("form")?e=this.validate().form():(e=!0,n=t(this[0].form).validate(),this.each(function(){e=n.element(this)&&e})),e},removeAttrs:function(e){var n={},i=this;return t.each(e.split(/\s/),function(t,e){n[e]=i.attr(e),i.removeAttr(e)}),n},rules:function(e,n){var i,s,r,o,a,l,c=this[0];if(e)switch(i=t.data(c.form,"validator").settings,s=i.rules,r=t.validator.staticRules(c),e){case"add":t.extend(r,t.validator.normalizeRule(n)),delete r.messages,s[c.name]=r,n.messages&&(i.messages[c.name]=t.extend(i.messages[c.name],n.messages));break;case"remove":return n?(l={},t.each(n.split(/\s/),function(e,n){l[n]=r[n],delete r[n],"required"===n&&t(c).removeAttr("aria-required")}),l):(delete s[c.name],r)}return o=t.validator.normalizeRules(t.extend({},t.validator.classRules(c),t.validator.attributeRules(c),t.validator.dataRules(c),t.validator.staticRules(c)),c),o.required&&(a=o.required,delete o.required,o=t.extend({required:a},o),t(c).attr("aria-required","true")),o.remote&&(a=o.remote,delete o.remote,o=t.extend(o,{remote:a})),o}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,n){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=n,this.init()},t.validator.format=function(e,n){return 1===arguments.length?function(){var n=t.makeArray(arguments);return n.unshift(e),t.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=t.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),t.each(n,function(t,n){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return n})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).addClass(n).removeClass(i):t(e).addClass(n).removeClass(i)},unhighlight:function(e,n,i){"radio"===e.type?this.findByName(e.name).removeClass(n).addClass(i):t(e).removeClass(n).addClass(i)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var n=t.data(this[0].form,"validator"),i="on"+e.type.replace(/^validate/,""),s=n.settings;s[i]&&!this.is(s.ignore)&&s[i].call(n,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n,i=this.groups={};t.each(this.settings.groups,function(e,n){"string"==typeof n&&(n=n.split(/\s/)),t.each(n,function(t,n){i[n]=e})}),n=this.settings.rules,t.each(n,function(e,i){n[e]=t.validator.normalizeRule(i)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",e).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()
},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var n=this.clean(e),i=this.validationTargetFor(n),s=!0;return this.lastElement=i,void 0===i?delete this.invalid[n.name]:(this.prepareElement(i),this.currentElements=t(i),s=this.check(i)!==!1,s?delete this.invalid[i.name]:this.invalid[i.name]=!0),t(e).attr("aria-invalid",!s),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),s},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var n in e)this.errorList.push({message:e[n],element:this.findByName(n)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,n=0;for(e in t)n++;return n},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,n={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in n||!e.objectLength(t(this).rules())?!1:(n[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var n,i=t(e),s=e.type;return"radio"===s||"checkbox"===s?t("input[name='"+e.name+"']:checked").val():"number"===s&&"undefined"!=typeof e.validity?e.validity.badInput?!1:i.val():(n=i.val(),"string"==typeof n?n.replace(/\r/g,""):n)},check:function(e){e=this.validationTargetFor(this.clean(e));var n,i,s,r=t(e).rules(),o=t.map(r,function(t,e){return e}).length,a=!1,l=this.elementValue(e);for(i in r){s={method:i,parameters:r[i]};try{if(n=t.validator.methods[i].call(this,l,e,s.parameters),"dependency-mismatch"===n&&1===o){a=!0;continue}if(a=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!n)return this.formatAndAdd(e,s),!1}catch(c){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+s.method+"' method.",c),c}}if(!a)return this.objectLength(r)&&this.successList.push(e),!0},customDataMessage:function(e,n){return t(e).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var n=this.settings.messages[t];return n&&(n.constructor===String?n:n[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t];return void 0},defaultMessage:function(e,n){return this.findDefined(this.customMessage(e.name,n),this.customDataMessage(e,n),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[n],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,n){var i=this.defaultMessage(e,n.method),s=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,n.parameters,e):s.test(i)&&(i=t.validator.format(i.replace(s,"{$1}"),n.parameters)),this.errorList.push({message:i,element:e,method:n.method}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,n;for(t=0;this.errorList[t];t++)n=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,n){var i,s,r,o=this.errorsFor(e),a=this.idOrName(e),l=t(e).attr("aria-describedby");o.length?(o.removeClass(this.settings.validClass).addClass(this.settings.errorClass),o.html(n)):(o=t("<"+this.settings.errorElement+">").attr("id",a+"-error").addClass(this.settings.errorClass).html(n||""),i=o,this.settings.wrapper&&(i=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement(i,t(e)):i.insertAfter(e),o.is("label")?o.attr("for",a):0===o.parents("label[for='"+a+"']").length&&(r=o.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),l?l.match(new RegExp("\\b"+r+"\\b"))||(l+=" "+r):l=r,t(e).attr("aria-describedby",l),s=this.groups[e.name],s&&t.each(this.groups,function(e,n){n===s&&t("[name='"+e+"']",this.currentForm).attr("aria-describedby",o.attr("id"))}))),!n&&this.settings.success&&(o.text(""),"string"==typeof this.settings.success?o.addClass(this.settings.success):this.settings.success(o,e)),this.toShow=this.toShow.add(o)},errorsFor:function(e){var n=this.idOrName(e),i=t(e).attr("aria-describedby"),s="label[for='"+n+"'], label[for='"+n+"'] *";return i&&(s=s+", #"+i.replace(/\s+/g,", #")),this.errors().filter(s)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,n){switch(n.nodeName.toLowerCase()){case"select":return t("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t){return t},string:function(e,n){return!!t(e,n.form).length},"function":function(t,e){return t(e)}},optional:function(e){var n=this.elementValue(e);return!t.validator.methods.required.call(this,n,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,n){e.constructor===String?this.classRuleSettings[e]=n:t.extend(this.classRuleSettings,e)},classRules:function(e){var n={},i=t(e).attr("class");return i&&t.each(i.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(n,t.validator.classRuleSettings[this])}),n},attributeRules:function(e){var n,i,s={},r=t(e),o=e.getAttribute("type");for(n in t.validator.methods)"required"===n?(i=e.getAttribute(n),""===i&&(i=!0),i=!!i):i=r.attr(n),/min|max/.test(n)&&(null===o||/number|range|text/.test(o))&&(i=Number(i)),i||0===i?s[n]=i:o===n&&"range"!==o&&(s[n]=!0);return s.maxlength&&/-1|2147483647|524288/.test(s.maxlength)&&delete s.maxlength,s},dataRules:function(e){var n,i,s={},r=t(e);for(n in t.validator.methods)i=r.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),void 0!==i&&(s[n]=i);return s},staticRules:function(e){var n={},i=t.data(e.form,"validator");return i.settings.rules&&(n=t.validator.normalizeRule(i.settings.rules[e.name])||{}),n},normalizeRules:function(e,n){return t.each(e,function(i,s){if(s===!1)return void delete e[i];if(s.param||s.depends){var r=!0;switch(typeof s.depends){case"string":r=!!t(s.depends,n.form).length;break;case"function":r=s.depends.call(n,n)}r?e[i]=void 0!==s.param?s.param:!0:delete e[i]}}),t.each(e,function(i,s){e[i]=t.isFunction(s)?s(n):s}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var n;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(n=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(n[0]),Number(n[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var n={};t.each(e.split(/\s/),function(){n[this]=!0}),e=n}return e},addMethod:function(e,n,i){t.validator.methods[e]=n,t.validator.messages[e]=void 0!==i?i:t.validator.messages[e],n.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var s=t(n).val();return s&&s.length>0}return this.checkable(n)?this.getLength(e,n)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var n,i,s=0,r=0,o=!1;if(t=t.replace(/\D/g,""),t.length<13||t.length>19)return!1;for(n=t.length-1;n>=0;n--)i=t.charAt(n),r=parseInt(i,10),o&&(r*=2)>9&&(r-=9),s+=r,o=!o;return s%10===0},minlength:function(e,n,i){var s=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||s>=i},maxlength:function(e,n,i){var s=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||i>=s},rangelength:function(e,n,i){var s=t.isArray(e)?e.length:this.getLength(e,n);return this.optional(n)||s>=i[0]&&s<=i[1]},min:function(t,e,n){return this.optional(e)||t>=n},max:function(t,e,n){return this.optional(e)||n>=t},range:function(t,e,n){return this.optional(e)||t>=n[0]&&t<=n[1]},equalTo:function(e,n,i){var s=t(i);return this.settings.onfocusout&&s.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(n).valid()}),e===s.val()},remote:function(e,n,i){if(this.optional(n))return"dependency-mismatch";var s,r,o=this.previousValue(n);return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),o.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=o.message,i="string"==typeof i&&{url:i}||i,o.old===e?o.valid:(o.old=e,s=this,this.startRequest(n),r={},r[n.name]=e,t.ajax(t.extend(!0,{url:i,mode:"abort",port:"validate"+n.name,dataType:"json",data:r,context:s.currentForm,success:function(i){var r,a,l,c=i===!0||"true"===i;s.settings.messages[n.name].remote=o.originalMessage,c?(l=s.formSubmitted,s.prepareElement(n),s.formSubmitted=l,s.successList.push(n),delete s.invalid[n.name],s.showErrors()):(r={},a=i||s.defaultMessage(n,"remote"),r[n.name]=o.message=t.isFunction(a)?a(e):a,s.invalid[n.name]=!0,s.showErrors(r)),o.valid=c,s.stopRequest(n,c)}},i)),"pending")}}}),t.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var e,n={};t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,i){var s=t.port;"abort"===t.mode&&(n[s]&&n[s].abort(),n[s]=i)}):(e=t.ajax,t.ajax=function(i){var s=("mode"in i?i:t.ajaxSettings).mode,r=("port"in i?i:t.ajaxSettings).port;return"abort"===s?(n[r]&&n[r].abort(),n[r]=e.apply(this,arguments),n[r]):e.apply(this,arguments)}),t.extend(t.fn,{validateDelegate:function(e,n,i){return this.bind(n,function(n){var s=t(n.target);return s.is(e)?i.apply(s,arguments):void 0})}})}),define("app/models/s3uploader/file",["require","backbone"],function(t){var e=t("backbone");return e.Model.extend({initialize:function(t){this.url=t.url,this.attributes["X-Requested-With"]="xhr",$.extend(this.attributes,t.policy),this.set({key:this.get("key").replace("{timestamp}",(new Date).getTime()).replace("{unique_id}",Math.random().toString(36).substr(2,16))})},parse:function(t){return{temp_location:t.getElementsByTagName("Location")[0].textContent}},sync:function(t,n,i){if("create"==t){var s=new FormData;_.each(n.attributes,function(t,e){"file"===e&&s.append("content-type",t.type),"url"!==e&&"source"!==e&&"input"!==e&&s.append(e,t)}),_.defaults(i||(i={}),{data:s,processData:!1,contentType:!1,dataType:"xml",xhr:function(){var t=$.ajaxSettings.xhr();return t.upload.onprogress=function(t){t.lengthComputable&&n.trigger("progress",(t.loaded/t.total*100).toFixed(2))},t.upload.onload=function(){n.trigger("complete",100)},t}})}return this._xhr=e.sync.call(this,t,n,i),this._xhr},abort:function(){this._xhr.abort()}})}),define("app/views/s3uploader/image",["require","backbone","context","handlebarsTemplates"],function(t){var e=t("backbone"),n=t("context"),i=t("handlebarsTemplates");return e.View.extend({template:i["s3uploader/image"],events:{"blur input":"updated","click button":"deleted"},initialize:function(t){this.model=t.model},render:function(t){return void 0!==t?this.setElement(t):this.$el.html(this.template(this.model.toJSON())),this.model.set({uuid:Math.random().toString(36).substring(7),id:this.$el.data("id"),label:this.$el.find(".description input").val()}),n.trigger("image:added",this.model),this},updated:function(t){this.model.set({label:t.target.value}),n.trigger("image:updated",this.model)},deleted:function(){n.trigger("image:deleted",this.model),this.remove()}})}),define("app/views/s3uploader/upload",["require","backbone","handlebarsTemplates"],function(t){var e=t("backbone"),n=t("handlebarsTemplates");return e.View.extend({template:n["s3uploader/upload"],events:{"click .cancel":"cancel"},initialize:function(t){this.model=t.model,this.model.on("progress",this.updateProgress,this).on("complete",this.cleanup,this)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.progressBar=this.$el.find(".progress .bar"),this.percentage=this.$el.find(".percentage"),this},updateProgress:function(t){this.progressBar.width(t+"%"),this.percentage.text(t+"%")},cancel:function(t){this.model.abort(),this.cleanup(t)},cleanup:function(){this.remove()}})}),define("app/views/s3uploader/file",["require","backbone","handlebarsTemplates","context","serializeObject","app/models/s3uploader/file","app/views/s3uploader/image","app/views/s3uploader/upload"],function(t){var e=t("backbone"),n=t("handlebarsTemplates"),i=(t("context"),t("serializeObject"),t("app/models/s3uploader/file")),s=t("app/views/s3uploader/image"),r=t("app/views/s3uploader/upload");return e.View.extend({template:n["s3uploader/image"],events:{"change input[type=file]":"fileChanged"},initialize:function(){},render:function(t){var n=this;return this.setElement(t),this.form=this.$el.find("form.s3_uploader"),this.viewer=this.$el.find(".viewer"),this.$el.find(".holder").each(function(){new s({model:(new e.Model).set({input:n.$el.data("input")})}).render(this)}),this},fileChanged:function(t){var e=t.target.files[0],n=this;if(void 0!==e){var s=new FileReader;s.onload=function(t){var s=new i({url:n.form.attr("action"),policy:n.form.serializeObject(),source:t.target.result,input:n.$el.data("input")});n.viewer.append(new r({model:s}).render().$el),s.save({file:e}).success(function(){s.set({source:t.target.result}),n.fileUploaded(s)}),n.clearFileInput()},s.readAsDataURL(e)}},fileUploaded:function(t){this.viewer.append(new s({model:t}).render().$el)},clearFileInput:function(){var t=this.$el.find("input:file");t.replaceWith(t.val("").clone(!0))}})}),define("app/views/checkins/show/checkin",["require","backbone","context","app/views/checkins/show/form","jquery-validate","app/views/s3uploader/file"],function(t){var e=t("backbone"),n=t("context"),i=t("app/views/checkins/show/form"),s=(t("jquery-validate"),t("app/views/s3uploader/file"));return e.View.extend({el:".checkin",events:{"click .checkin-form-btn":"validateForm"},initialize:function(t){this.options=t,this.listenTo(n,"file:added",this.addImage)},render:function(){var t=this;return this.formView=new i(this.options).render().$el,this.validator=this.formView.validate({ignore:[],errorPlacement:function(){},highlight:function(e,i,s){var r=this,o=t.formView.find(e),a=o.data("error-for");void 0!==a?(o=t.$el.find(a),t.listenToOnce(n,"hidden:update",function(){r.element(e)})):o=o.closest(".question"),o.addClass(i).removeClass(s)},unhighlight:function(e,n,i){var s=t.formView.find(e),r=s.data("error-for");s=void 0!==r?t.$el.find(r):s.closest(".question"),s.removeClass(n).addClass(i)}}),this.$el.find(".body.images").each(function(){(new s).render(this)}),this},validateForm:function(){this.formView.valid()&&this.formView.submit()}})}),define("app/models/dashboards/alerts/section",["require","jquery","underscore","backbone"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"));return e.Model.extend({})}),define("app/collections/dashboards/alerts/sections",["require","jquery","underscore","backbone","app/models/dashboards/alerts/section"],function(t){var e=(t("jquery"),t("underscore"),t("backbone")),n=t("app/models/dashboards/alerts/section");return e.Collection.extend({initialize:function(t){this.programId=t.programId},url:function(){return"/programs/"+this.programId+"/dashboards/alerts/sections.json"},model:n})}),define("app/models/dashboards/alerts/alert",["require","jquery","underscore","backbone"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"));return e.Model.extend({url:function(){return"alerts/"+this.id+"/count"}})}),define("app/collections/dashboards/alerts/alerts",["require","jquery","underscore","backbone","app/models/dashboards/alerts/alert"],function(t){var e=(t("jquery"),t("underscore"),t("backbone")),n=t("app/models/dashboards/alerts/alert");return e.Collection.extend({initialize:function(t){this.programId=t.programId,this.id=t.id},url:function(){return"/programs/"+this.programId+"/dashboards/alerts/sections/"+this.id+"/alerts.json"},model:n})}),define("app/views/dashboards/alerts/index/group",["require","backbone","handlebars","handlebarsTemplates","context"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=t("context");return e.View.extend({tagName:"tr",template:n["dashboards/alerts/index/group"],events:{"click .expander":"toggleAlertViews"},initialize:function(t){this.options=t,this.model=t.model,this.totalAlertCount=0,this.listenTo(i,"alert_group_"+this.options.groupId+":count_update",this.updateTotalAlertCount,this)},render:function(){return this.$el.append(this.template(this.model.toJSON())),this},toggleAlertViews:function(){var t=this.$el.find(".expander i");t.hasClass("fa-caret-up")?(t.removeClass("fa-caret-up").addClass("fa-caret-down"),i.trigger("alert_group_"+this.options.groupId+":hide")):t.hasClass("fa-caret-down")&&(t.removeClass("fa-caret-down").addClass("fa-caret-up"),i.trigger("alert_group_"+this.options.groupId+":show"))},updateTotalAlertCount:function(t){this.totalAlertCount+=t,this.$el.find(".alert-count").text(this.totalAlertCount)}})}),define("app/views/dashboards/alerts/index/alert",["require","backbone","handlebars","handlebarsTemplates","context"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=t("context");return e.View.extend({template:n["dashboards/alerts/index/alert"],initialize:function(t){this.options=t,this.model=t.model},render:function(){var t=this;return this.setElement(this.template(this.model.toJSON())),this.model.fetch({success:function(e){t.$el.find(".alert-count").empty().text(e.get("count")),i.trigger("alert_group_"+t.options.groupId+":count_update",e.get("count"))}}),this.setGroupEvent(),this},showView:function(){this.$el.removeClass("hide")},hideView:function(){this.$el.addClass("hide")},setGroupEvent:function(){void 0!==this.options.groupId&&(this.listenTo(i,"alert_group_"+this.options.groupId+":show",this.showView,this),this.listenTo(i,"alert_group_"+this.options.groupId+":hide",this.hideView,this))}})}),define("app/views/dashboards/alerts/index/alerts",["require","backbone","handlebars","handlebarsTemplates","app/models/dashboards/alerts/alert","app/collections/dashboards/alerts/alerts","app/views/dashboards/alerts/index/group","app/views/dashboards/alerts/index/alert"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=t("app/models/dashboards/alerts/alert"),s=t("app/collections/dashboards/alerts/alerts"),r=t("app/views/dashboards/alerts/index/group"),o=t("app/views/dashboards/alerts/index/alert");return e.View.extend({tagName:"tbody",className:"alerts",template:n["dashboards/alerts/index/alerts"],loadingTemplate:n.loading,initialize:function(t){this.options=t,this.collection=new s({programId:this.options.programId,id:this.options.id})},render:function(){var t=this;return this.$el.html(this.loadingTemplate()),this.collection.fetch({success:function(e){t.$el.empty(),e.each(function(e){"group"==e.get("type")?t.createAlertGroupView(e):"alert"==e.get("type")&&t.createAlertView(e)})}}),this},createAlertGroupView:function(t){var e=this,n=t.get("id");this.$el.append(new r({groupId:n,model:t}).render().$el),_.each(t.get("alerts"),function(t){t=new i(t),e.$el.append(new o({programId:e.options.programId,groupId:n,model:t}).render().$el)})},createAlertView:function(t){this.$el.append(new o({programId:this.options.programId,model:t}).render().$el)}})}),define("app/views/dashboards/alerts/index/section",["require","backbone","handlebars","handlebarsTemplates","app/views/dashboards/alerts/index/alerts"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=t("app/views/dashboards/alerts/index/alerts");return e.View.extend({className:"section",template:n["dashboards/alerts/index/section"],initialize:function(t){this.options=t,this.model=t.model},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.find("table").append(new i({programId:this.options.programId,id:this.model.get("id")}).render().$el),this}})}),define("app/views/dashboards/alerts/index/sections",["require","backbone","app/collections/dashboards/alerts/sections","app/views/dashboards/alerts/index/section"],function(t){var e=t("backbone"),n=t("app/collections/dashboards/alerts/sections"),i=t("app/views/dashboards/alerts/index/section");return e.View.extend({className:"alerts-sections",initialize:function(t){this.options=t,this.collection=new n({programId:this.options.programId})},render:function(){var t=this;return this.collection.fetch({success:function(e){e.each(function(e){t.$el.append(new i({programId:t.options.programId,model:e}).render().$el)})}}),this}})}),define("app/views/utils/loading",["require","backbone","handlebars","handlebarsTemplates"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates"));return e.View.extend({template:n.loading,initialize:function(){},render:function(){return this.$el.html(this.template(this.model)),this}})}),define("app/views/utils/pagination",["require","backbone","handlebarsTemplates","context"],function(t){var e=t("backbone"),n=t("handlebarsTemplates"),i=t("context");return e.View.extend({template:n.pagination,events:{"click .page":"applyPageChange"},initialize:function(t){this.config=t,this.model={},this.setupPages(),this.setupText()},render:function(){return this.setElement(this.template(this.model)),this},setupPages:function(){this.firstPage(),this.closePages(),this.currentPage(),this.lastPage()},setupText:function(){this.infoText(),this.totalCount()},firstPage:function(){this.config.totalPages>1&&this.config.currentPage>1&&(this.model.firstPage=1)},closePages:function(){if(this.config.totalPages>1){this.model.pages=[],this.model.pages.push(this.config.currentPage),this.model.showPages=!0;for(var t=0;this.model.pages.length!=this.config.maxShown&&(this.config.totalPages-1>this.model.pages[t]&&this.model.pages.push(this.model.pages[t]+1),this.model.pages[0]>2&&this.model.pages.unshift(this.model.pages[0]-1),t=this.model.pages.length-1,this.config.totalPages-1!=this.model.pages[t]||1!=this.model.pages[0]););this.model.pages[0]>2&&(this.model.lessPages=!0),this.config.totalPages-1>this.model.pages[t]&&(this.model.morePages=!0)}},currentPage:function(){this.model.currentPage=this.config.currentPage},lastPage:function(){this.config.totalPages>1&&this.config.currentPage<this.config.totalPages&&(this.model.lastPage=this.config.totalPages)},infoText:function(){this.model.infoText=1==this.config.totalPages?"All":this.pageStartCount()+" - "+this.pageEndCount()},pageStartCount:function(){return this.config.pageCount*(this.config.currentPage-1)+1},pageEndCount:function(){return this.config.totalPages==this.config.currentPage?this.config.totalCount:this.config.pageCount*this.config.currentPage},totalCount:function(){this.model.totalCount=this.config.totalCount},applyPageChange:function(t){t.preventDefault();var e=$.trim($(t.currentTarget).text());i.trigger("filter:set",[{name:"page",value:e}])}})}),define("app/models/dashboards/alerts/store",["require","jquery","underscore","backbone"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"));return e.Model.extend({})}),define("app/models/dashboards/alerts/stores",["require","jquery","underscore","backbone"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"));return e.Model.extend({initialize:function(t){this.queryString="",this.alertId=t.id},url:function(){return this.alertId+"/stores.json?"+this.queryString}})}),define("app/collections/dashboards/alerts/filters",["require","backbone"],function(t){var e=t("backbone");return e.Collection.extend({initialize:function(t){this.alertId=t.id},url:function(){return this.alertId+"/filters.json"}})}),define("app/views/dashboards/alerts/show/store",["require","backbone","handlebars","handlebarsTemplates"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates"));return e.View.extend({tagName:"tr",template:n["dashboards/alerts/show/store"],initialize:function(t){this.model=t.model},render:function(){return this.$el.html(this.template(this.model.toJSON())),this}})}),define("app/views/dashboards/alerts/show/stores",["require","backbone","handlebarsTemplates","context","app/views/filter/main","app/views/utils/loading","app/views/utils/pagination","app/models/dashboards/alerts/store","app/models/dashboards/alerts/stores","app/collections/dashboards/alerts/filters","app/views/dashboards/alerts/show/store"],function(t){var e=t("backbone"),n=t("handlebarsTemplates"),i=t("context"),s=t("app/views/filter/main"),r=t("app/views/utils/loading"),o=t("app/views/utils/pagination"),a=t("app/models/dashboards/alerts/store"),l=t("app/models/dashboards/alerts/stores"),c=t("app/collections/dashboards/alerts/filters"),h=t("app/views/dashboards/alerts/show/store");return e.View.extend({el:".dashboard",template:n["dashboards/alerts/show/stores"],initialize:function(t){this.options=t,this.model=new l({id:t.id}),this.filters=new c({id:t.id}),this.loadingView=new r,this.listenTo(i,"filter:query",this.applyFilter)},render:function(){var t=this;return this.$el.html(this.loadingView.render().$el),this.filters.fetch({success:function(e){t.addFilters(e)}}),this.model.fetch({data:{page:this.options.page},processData:!0,success:function(e){t.constructView(e)}}),this},constructView:function(t){var e=this;this.$el.html(e.template(t.toJSON())),this.addPages();var n=this.$el.find("tbody");_.each(t.get("stores"),function(t){n.append(new h({model:new a(t)}).render().$el)})},addPages:function(){this.$el.prepend(new o(this.model.get("pagination")).render().$el)},addFilters:function(t){s.init(t)},applyFilter:function(t){var e=this;this.$el.empty(),this.$el.append(this.loadingView.render().$el),this.model.queryString=t,this.model.fetch({success:function(t){e.constructView(t)}})}})}),define("app/models/reports/report",["require","jquery","underscore","backbone"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"));return e.Model.extend({initialize:function(t){this.queryString="",this.programId=t.programId},url:function(){return"/programs/"+this.programId+"/reports.json?"+this.queryString}})}),define("app/collections/reports/filters",["require","backbone"],function(t){var e=t("backbone");return e.Collection.extend({initialize:function(t){this.programId=t.programId},url:function(){return"/programs/"+this.programId+"/reports/filters.json"}})}),define("app/views/reports/widgets/bar_chart",["require","backbone","handlebars","handlebarsTemplates","context"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=t("context");return e.View.extend({template:n["reports/widgets/bar_chart"],initialize:function(t){this.model=t},render:function(){return this.setElement(this.template(this.model)),this.listenTo(i,"filter:queryString",this.updateViewBreakDownLink),i.trigger("filter:request:queryString"),this
},updateViewBreakDownLink:function(t){var e=void 0!==this.model.report_filters.account?this.model.report_filters.account.id:"all";this.$el.find("a.breakdown-link").attr("href","reports/"+e+"/info/"+this.model.widget_id+"?"+t)}})}),function(){var t=this,e=t.Chart,n=function(t){this.canvas=t.canvas,this.ctx=t;this.width=t.canvas.width,this.height=t.canvas.height;return this.aspectRatio=this.width/this.height,i.retinaScale(this),this};n.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},n.types={};var i=n.helpers={},s=i.each=function(t,e,n){var i=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var s;for(s=0;s<t.length;s++)e.apply(n,[t[s],s].concat(i))}else for(var r in t)e.apply(n,[t[r],r].concat(i))},r=i.clone=function(t){var e={};return s(t,function(n,i){t.hasOwnProperty(i)&&(e[i]=n)}),e},o=i.extend=function(t){return s(Array.prototype.slice.call(arguments,1),function(e){s(e,function(n,i){e.hasOwnProperty(i)&&(t[i]=n)})}),t},a=i.merge=function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift({}),o.apply(null,t)},l=i.indexOf=function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},c=(i.where=function(t,e){var n=[];return i.each(t,function(t){e(t)&&n.push(t)}),n},i.findNextWhere=function(t,e,n){n||(n=-1);for(var i=n+1;i<t.length;i++){var s=t[i];if(e(s))return s}},i.findPreviousWhere=function(t,e,n){n||(n=t.length);for(var i=n-1;i>=0;i--){var s=t[i];if(e(s))return s}},i.inherits=function(t){var e=this,n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},i=function(){this.constructor=n};return i.prototype=e.prototype,n.prototype=new i,n.extend=c,t&&o(n.prototype,t),n.__super__=e.prototype,n}),h=i.noop=function(){},u=i.uid=function(){var t=0;return function(){return"chart-"+t++}}(),d=i.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},p=i.amd="function"==typeof define&&define.amd,f=i.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},m=i.max=function(t){return Math.max.apply(Math,t)},g=i.min=function(t){return Math.min.apply(Math,t)},v=(i.cap=function(t,e,n){if(f(e)){if(t>e)return e}else if(f(n)&&n>t)return n;return t},i.getDecimalPlaces=function(t){return t%1!==0&&f(t)?t.toString().split(".")[1].length:0}),y=i.radians=function(t){return t*(Math.PI/180)},b=(i.getAngleFromPoint=function(t,e){var n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i),r=2*Math.PI+Math.atan2(i,n);return 0>n&&0>i&&(r+=2*Math.PI),{angle:r,distance:s}},i.aliasPixel=function(t){return t%2===0?0:.5}),_=(i.splineCurve=function(t,e,n,i){var s=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),r=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)),o=i*s/(s+r),a=i*r/(s+r);return{inner:{x:e.x-o*(n.x-t.x),y:e.y-o*(n.y-t.y)},outer:{x:e.x+a*(n.x-t.x),y:e.y+a*(n.y-t.y)}}},i.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),w=(i.calculateScaleRange=function(t,e,n,i,s){var r=2,o=Math.floor(e/(1.5*n)),a=r>=o,l=m(t),c=g(t);l===c&&(l+=.5,c>=.5&&!i?c-=.5:l+=.5);for(var h=Math.abs(l-c),u=_(h),d=Math.ceil(l/(1*Math.pow(10,u)))*Math.pow(10,u),p=i?0:Math.floor(c/(1*Math.pow(10,u)))*Math.pow(10,u),f=d-p,v=Math.pow(10,u),y=Math.round(f/v);(y>o||o>2*y)&&!a;)if(y>o)v*=2,y=Math.round(f/v),y%1!==0&&(a=!0);else if(s&&u>=0){if(v/2%1!==0)break;v/=2,y=Math.round(f/v)}else v/=2,y=Math.round(f/v);return a&&(y=r,v=f/y),{steps:y,stepValue:v,min:p,max:p+y*v}},i.template=function(t,e){function n(t,e){var n=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):i[t]=i[t];return e?n(e):n}if(t instanceof Function)return t(e);var i={};return n(t,e)}),x=(i.generateLabels=function(t,e,n,i){var r=new Array(e);return labelTemplateString&&s(r,function(e,s){r[s]=w(t,{value:n+i*(s+1)})}),r},i.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-0.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-0.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-0.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-0.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n)))},easeOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin(2*(1*t-e)*Math.PI/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:2==(t/=.5)?1:(n||(n=.3*1.5),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),1>t?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n):i*Math.pow(2,-10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-x.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*x.easeInBounce(2*t):.5*x.easeOutBounce(2*t-1)+.5}}),k=i.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),S=(i.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),i.animationLoop=function(t,e,n,i,s,r){var o=0,a=x[n]||x.linear,l=function(){o++;var n=o/e,c=a(n);t.call(r,c,n,o),i.call(r,c,n),e>o?r.animationFrame=k(l):s.apply(r)};k(l)},i.getRelativePosition=function(t){var e,n,i=t.originalEvent||t,s=t.currentTarget||t.srcElement,r=s.getBoundingClientRect();return i.touches?(e=i.touches[0].clientX-r.left,n=i.touches[0].clientY-r.top):(e=i.clientX-r.left,n=i.clientY-r.top),{x:e,y:n}},i.addEvent=function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}),C=i.removeEvent=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=h},T=(i.bindEvents=function(t,e,n){t.events||(t.events={}),s(e,function(e){t.events[e]=function(){n.apply(t,arguments)},S(t.chart.canvas,e,t.events[e])})},i.unbindEvents=function(t,e){s(e,function(e,n){C(t.chart.canvas,n,e)})}),E=i.getMaximumWidth=function(t){var e=t.parentNode;return e.clientWidth},A=i.getMaximumHeight=function(t){var e=t.parentNode;return e.clientHeight},P=(i.getMaximumSize=i.getMaximumWidth,i.retinaScale=function(t){var e=t.ctx,n=t.canvas.width,i=t.canvas.height;window.devicePixelRatio&&(e.canvas.style.width=n+"px",e.canvas.style.height=i+"px",e.canvas.height=i*window.devicePixelRatio,e.canvas.width=n*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio))}),L=i.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},D=i.fontString=function(t,e,n){return e+" "+t+"px "+n},q=i.longestText=function(t,e,n){t.font=e;var i=0;return s(n,function(e){var n=t.measureText(e).width;i=n>i?n:i}),i},N=i.drawRoundedRectangle=function(t,e,n,i,s,r){t.beginPath(),t.moveTo(e+r,n),t.lineTo(e+i-r,n),t.quadraticCurveTo(e+i,n,e+i,n+r),t.lineTo(e+i,n+s-r),t.quadraticCurveTo(e+i,n+s,e+i-r,n+s),t.lineTo(e+r,n+s),t.quadraticCurveTo(e,n+s,e,n+s-r),t.lineTo(e,n+r),t.quadraticCurveTo(e,n,e+r,n),t.closePath()};n.instances={},n.Type=function(t,e,i){this.options=e,this.chart=i,this.id=u(),n.instances[this.id]=this,e.responsive&&this.resize(),this.initialize.call(this,t)},o(n.Type.prototype,{initialize:function(){return this},clear:function(){return L(this.chart),this},stop:function(){return i.cancelAnimFrame.call(t,this.animationFrame),this},resize:function(t){this.stop();var e=this.chart.canvas,n=E(this.chart.canvas),i=this.options.maintainAspectRatio?n/this.chart.aspectRatio:void 0!==this.scale&&this.options.horizontalBar?this.scale.calculateHeightHorizontalBar():A(this.chart.canvas);return e.width=this.chart.width=n,e.height=this.chart.height=i,P(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:h,render:function(t){return t&&this.reflow(),this.options.animation&&!t?i.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return w(this.options.legendTemplate,this)},destroy:function(){this.clear(),T(this,this.events),delete n.instances[this.id]},showTooltip:function(t,e){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var r=function(t){var e=!1;return t.length!==this.activeElements.length?e=!0:(s(t,function(t,n){t!==this.activeElements[n]&&(e=!0)},this),e)}.call(this,t);if(r||e){if(this.activeElements=t,this.draw(),t.length>0)if(this.datasets&&this.datasets.length>1){for(var o,a,c=this.datasets.length-1;c>=0&&(o=this.datasets[c].points||this.datasets[c].bars||this.datasets[c].segments,a=l(o,t[0]),-1===a);c--);var h=[],u=[],d=function(){var t,e,n,s,r,o=[],l=[],c=[];return i.each(this.datasets,function(e){t=e.points||e.bars||e.segments,t[a]&&t[a].hasValue()&&o.push(t[a])}),i.each(o,function(t){l.push(t.x),c.push(t.y),h.push(i.template(this.options.multiTooltipTemplate,t)),u.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),r=g(c),n=m(c),s=g(l),e=m(l),{x:s>this.chart.width/2?s:e,y:(r+n)/2}}.call(this,a);new n.MultiTooltip({x:d.x,y:d.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:h,legendColors:u,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx}).draw()}else s(t,function(t){var e=t.tooltipPosition();new n.Tooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:w(this.options.tooltipTemplate,t),chart:this.chart}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),n.Type.extend=function(t){var e=this,i=function(){return e.apply(this,arguments)};if(i.prototype=r(e.prototype),o(i.prototype,t),i.extend=n.Type.extend,t.name||e.prototype.name){var s=t.name||e.prototype.name,l=n.defaults[e.prototype.name]?r(n.defaults[e.prototype.name]):{};n.defaults[s]=o(l,t.defaults),n.types[s]=i,n.prototype[s]=function(t,e){var r=a(n.defaults.global,n.defaults[s],e||{});return new i(t,r,this)}}else d("Name not provided for this chart, so it hasn't been registered");return e},n.Element=function(t){o(this,t),this.initialize.apply(this,arguments),this.save()},o(n.Element.prototype,{initialize:function(){},restore:function(t){return t?s(t,function(t){this[t]=this._saved[t]},this):o(this,this._saved),this},save:function(){return this._saved=r(this),delete this._saved._saved,this},update:function(t){return s(t,function(t,e){this._saved[e]=this[e],this[e]=t},this),this},transition:function(t,e){return s(t,function(t,n){this[n]=(t-this._saved[n])*e+this._saved[n]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return f(this.value)}}),n.Element.extend=c,n.Point=n.Element.extend({display:!0,inRange:function(t,e){var n=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(e-this.y,2)<Math.pow(n,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),n.Arc=n.Element.extend({inRange:function(t,e){var n=i.getAngleFromPoint(this,{x:t,y:e}),s=n.angle>=this.startAngle&&n.angle<=this.endAngle,r=n.distance>=this.innerRadius&&n.distance<=this.outerRadius;return s&&r},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,e=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*e,y:this.y+Math.sin(t)*e}},draw:function(t){var e=this.ctx;e.beginPath(),e.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),e.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),e.closePath(),e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.fillStyle=this.fillColor,e.fill(),e.lineJoin="bevel",this.showStroke&&e.stroke()}}),n.Rectangle=n.Element.extend({draw:function(){var t=this.ctx,e=this.width/2,n=this.x-e,i=this.x+e,s=this.base-(this.base-this.y),r=this.strokeWidth/2;this.showStroke&&(n+=r,i-=r,s+=r),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(n,this.base),t.lineTo(n,s),t.lineTo(i,s),t.lineTo(i,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,e){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&e>=this.y&&e<=this.base}}),n.HorizontalRectangle=n.Element.extend({draw:function(){var t=this.ctx,e=this.height/2,n=this.y-e,i=this.y+e,s=this.x,r=this.strokeWidth/2;this.showStroke&&(n+=r,i-=r,s+=r),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(this.left,i),t.lineTo(this.left,n),t.lineTo(s,n),t.lineTo(s,i),t.fill(),this.showStroke&&t.stroke()},inRange:function(t,e){return e>=this.y-this.height/2&&e<=this.y+this.height/2&&t>=this.left&&t<=this.x}}),n.Tooltip=n.Element.extend({draw:function(){var t=this.chart.ctx;t.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var e=2,n=t.measureText(this.text).width+2*this.xPadding,i=this.fontSize+2*this.yPadding,s=i+this.caretHeight+e;this.x+n/2>this.chart.width?this.xAlign="left":this.x-n/2<0&&(this.xAlign="right"),this.y-s<0&&(this.yAlign="below");var r=this.x-n/2,o=this.y-s;switch(t.fillStyle=this.fillColor,this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-e),t.lineTo(this.x+this.caretHeight,this.y-(e+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(e+this.caretHeight)),t.closePath(),t.fill();break;case"below":o=this.y+e+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+e),t.lineTo(this.x+this.caretHeight,this.y+e+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+e+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":r=this.x-n+(this.cornerRadius+this.caretHeight);break;case"right":r=this.x-(this.cornerRadius+this.caretHeight)}N(t,r,o,n,i,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,r+n/2,o+i/2)}}),n.MultiTooltip=n.Element.extend({initialize:function(){this.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=D(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,e=q(this.ctx,this.font,this.labels)+this.fontSize+3,n=m([e,t]);this.width=n+2*this.xPadding;var i=this.height/2;this.y-i<0?this.y=i:this.y+i>this.chart.height&&(this.y=this.chart.height-i),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var e=this.y-this.height/2+this.yPadding,n=t-1;return 0===t?e+this.titleFontSize/2:e+(1.5*this.fontSize*n+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){N(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,i.each(this.labels,function(e,n){t.fillStyle=this.textColor,t.fillText(e,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(n+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[n].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}),n.Scale=n.Element.extend({initialize:function(){this.ChangeYLabel=!0,this.fit()},buildCalculatedLabels:function(){this.calculatedLabels=[];for(var t=v(this.stepValue),e=0;e<=this.steps;e++)this.calculatedLabels.push(w(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},buildYLabels:function(){this.buildCalculatedLabels(),this.horizontalBar?this.ChangeYLabel&&(this.ChangeYLabel=!1,this.yLabels=this.xLabels,this.xLabels=this.calculatedLabels):this.yLabels=this.calculatedLabels,this.yLabelWidth=this.display&&this.showLabels?q(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,e=this.endPoint-this.startPoint;for(this.calculateYRange(e),this.buildYLabels(),this.calculateXLabelRotation();e>this.endPoint-this.startPoint;)e=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(e),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,e,n=this.ctx.measureText(this.xLabels[0]).width,i=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=i/2+3,this.xScalePaddingLeft=n/2>this.yLabelWidth+10?n/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var s,r=q(this.ctx,this.font,this.xLabels);this.xLabelWidth=r;for(var o=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>o&&0===this.xLabelRotation||this.xLabelWidth>o&&this.xLabelRotation<=90&&this.xLabelRotation>0;)s=Math.cos(y(this.xLabelRotation)),t=s*n,e=s*i,t+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=s*r;this.xLabelRotation>0&&(this.endPoint-=Math.sin(y(this.xLabelRotation))*r+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:h,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var e=this.drawingArea()/(this.min-this.max);return this.endPoint-e*(t-this.min)},calculateX:function(t){var e=this.valuesCount;this.horizontalBar&&(e=this.steps);var n=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),i=n/(e-(this.offsetGridLines?0:1)),s=i*t+this.xScalePaddingLeft;return this.offsetGridLines&&(s+=i/2),Math.round(s)},update:function(t){i.extend(this,t),this.fit()},draw:function(){var t=this.ctx,e=(this.endPoint-this.startPoint)/(this.horizontalBar?this.yLabels.length:this.steps),n=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,s(this.yLabels,function(s,r){var o=this.endPoint-e*r,a=Math.round(o);this.horizontalBar&&(o-=e/2),t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(s,n-10,o),t.beginPath(),r>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),a+=i.aliasPixel(t.lineWidth),t.moveTo(n,a),t.lineTo(this.width,a),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(n-5,a),t.lineTo(n,a),t.stroke(),t.closePath()},this),s(this.xLabels,function(e,n){var i=this.calculateX(1)-this.calculateX(0),s=this.calculateX(n)+b(this.lineWidth)-(this.horizontalBar?i/2:0),r=this.calculateX(n-(this.offsetGridLines?.5:0))+b(this.lineWidth),o=this.xLabelRotation>0;t.beginPath(),n>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),t.moveTo(r,this.endPoint),t.lineTo(r,this.startPoint-3),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(r,this.endPoint),t.lineTo(r,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(s,o?this.endPoint+12:this.endPoint+8),t.rotate(-1*y(this.xLabelRotation)),t.font=this.font,t.textAlign=o?"right":"center",t.textBaseline=o?"middle":"top",t.fillText(e,0,0),t.restore()},this))}}),n.RadialScale=n.Element.extend({initialize:function(){this.size=g([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var e=this.drawingArea/(this.max-this.min);return(t-this.min)*e},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(w(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,e,n,i,s,r,o,a,l,c,h,u,d=g([this.height/2-this.pointLabelFontSize-5,this.width/2]),p=this.width,m=0;for(this.ctx.font=D(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e=0;e<this.valuesCount;e++)t=this.getPointPosition(e,d),n=this.ctx.measureText(w(this.templateString,{value:this.labels[e]})).width+5,0===e||e===this.valuesCount/2?(i=n/2,t.x+i>p&&(p=t.x+i,s=e),t.x-i<m&&(m=t.x-i,o=e)):e<this.valuesCount/2?t.x+n>p&&(p=t.x+n,s=e):e>this.valuesCount/2&&t.x-n<m&&(m=t.x-n,o=e);l=m,c=Math.ceil(p-this.width),r=this.getIndexAngle(s),a=this.getIndexAngle(o),h=c/Math.sin(r+Math.PI/2),u=l/Math.sin(a+Math.PI/2),h=f(h)?h:0,u=f(u)?u:0,this.drawingArea=d-(u+h)/2,this.setCenterPoint(u,h)},setCenterPoint:function(t,e){var n=this.width-e-this.drawingArea,i=t+this.drawingArea;this.xCenter=(i+n)/2,this.yCenter=this.height/2},getIndexAngle:function(t){var e=2*Math.PI/this.valuesCount;return t*e-Math.PI/2},getPointPosition:function(t,e){var n=this.getIndexAngle(t);return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(s(this.yLabels,function(e,n){if(n>0){var i,s=n*(this.drawingArea/this.steps),r=this.yCenter-s;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,s,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var o=0;o<this.valuesCount;o++)i=this.getPointPosition(o,this.calculateCenterOffset(this.min+n*this.stepValue)),0===o?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var a=t.measureText(e).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-a/2-this.backdropPaddingX,r-this.fontSize/2-this.backdropPaddingY,a+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(e,this.xCenter,r)}}},this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var e=this.valuesCount-1;e>=0;e--){if(this.angleLineWidth>0){var n=this.getPointPosition(e,this.calculateCenterOffset(this.max));t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(n.x,n.y),t.stroke(),t.closePath()}var i=this.getPointPosition(e,this.calculateCenterOffset(this.max)+5);t.font=D(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var r=this.labels.length,o=this.labels.length/2,a=o/2,l=a>e||e>r-a,c=e===a||e===r-a;t.textAlign=0===e?"center":e===o?"center":o>e?"left":"right",t.textBaseline=c?"middle":l?"bottom":"top",t.fillText(this.labels[e],i.x,i.y)}}}}}),i.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){s(n.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),p?define("chartjs",[],function(){return n}):"object"==typeof module&&module.exports&&(module.exports=n),t.Chart=n,n.noConflict=function(){return t.Chart=e,n}}.call(this),function(){var t=this,e=t.Chart,n=e.helpers,i={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,horizontalBar:!1,barHeight:20,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Bar",defaults:i,initialize:function(t){var i=this.options;this.ScaleClass=e.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,e,n){var s=this.calculateBaseWidth(),r=this.calculateX(n)-s/2,o=this.calculateBarWidth(t);return r+o*e+e*i.barDatasetSpacing+o/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*i.barValueSpacing},calculateBarWidth:function(t){var e=this.calculateBaseWidth()-(t-1)*i.barDatasetSpacing;return e/t},calculateHeightHorizontalBar:function(){return(2*i.barValueSpacing+i.barHeight)*this.yLabels.length+this.startPoint+(this.height-this.endPoint)},calculateBaseHeight:function(){return this.horizontalBar?i.barValueSpacing+i.barHeight/2:(this.startPoint-this.endPoint)/this.yLabels.length+2*i.barValueSpacing},calculateBarHeight:function(t){var e=this.calculateBaseHeight()-(t-1)*i.barDatasetSpacing;return e/t},calculateBarWidthHorizontalBar:function(t){return this.calculateBarHeight(t)},calculateXHorizontalBar:function(t){var e=(this.width-Math.round(this.xScalePaddingLeft)-this.xScalePaddingRight)/(this.max-this.min);return Math.round(this.xScalePaddingLeft)+e*(t-this.min);var e},calculateYHorizontalBar:function(t,e,n){var s=this.calculateBaseHeight(),r=this.endPoint+n*((this.startPoint-this.endPoint)/this.yLabels.length)-s/2,o=this.calculateBarHeight(t);return r+o*(e-1)-e*i.barDatasetSpacing+o/2}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)});var s=this.options.horizontalBar?e.HorizontalRectangle:e.Rectangle;this.BarClass=s.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),n.each(t.datasets,function(e){var i={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,bars:[]};this.datasets.push(i),n.each(e.data,function(n,s){i.bars.push(new this.BarClass({value:n,label:t.labels[s],datasetLabel:e.label,strokeColor:e.strokeColor,fillColor:e.fillColor[s%e.fillColor.length],highlightFill:e.highlightFill||e.fillColor[s%e.fillColor.length],highlightStroke:e.highlightStroke||e.strokeColor}))},this)},this),this.buildScale(t.labels),this.options.horizontalBar?this.BarClass.prototype.left=Math.round(this.scale.xScalePaddingLeft):this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,e,i){if(this.options.horizontalBar)var s={x:this.scale.calculateXHorizontalBar(t.value),y:this.scale.calculateYHorizontalBar(this.datasets.length,i,e),height:this.scale.calculateBarHeight(this.datasets.length)};else var s={width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,i,e),y:this.scale.endPoint};n.extend(t,s),t.save()},this),this.resize(this.render,!0)},update:function(){this.scale.update(),n.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(t){n.each(this.datasets,function(e,i){n.each(e.bars,t,this,i)},this)},getBarsAtEvent:function(t){for(var e,i=[],s=n.getRelativePosition(t),r=function(t){i.push(t.bars[e])},o=0;o<this.datasets.length;o++)for(e=0;e<this.datasets[o].bars.length;e++)if(this.datasets[o].bars[e].inRange(s.x,s.y))return n.each(this.datasets,r),i;return i},buildScale:function(t){var e=this,i=function(){var t=[];return e.eachBars(function(e){t.push(e.value)}),t},s={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=n.calculateScaleRange(i(),t,this.fontSize,this.beginAtZero,this.integersOnly);
>>>>>>> -added alert resolution to the store_profile index page
n.extend(this,e)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale,horizontalBar:this.options.horizontalBar};this.options.scaleOverride&&n.extend(s,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(s)},addData:function(t,e){n.each(t,function(t,n){this.datasets[n].bars.push(new this.BarClass({value:t,label:e,x:this.scale.calculateBarX(this.datasets.length,n,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[n].strokeColor,fillColor:this.datasets[n].fillColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(t){t.bars.shift()},this),this.update()},reflow:function(){n.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var e=t||1;this.clear();this.chart.ctx;this.scale.draw(e),n.each(this.datasets,function(t,i){n.each(t.bars,function(t,n){if(t.hasValue()){if(this.options.horizontalBar){t.left=Math.round(this.scale.xScalePaddingLeft);var s={x:this.scale.calculateXHorizontalBar(t.value),y:this.scale.calculateYHorizontalBar(this.datasets.length,i,n),width:this.scale.calculateBarWidthHorizontalBar(this.datasets.length),height:this.options.barHeight}}else{t.base=this.scale.endPoint;var s={x:this.scale.calculateBarX(this.datasets.length,i,n),y:this.scale.calculateY(t.value),height:this.scale.calculateBarWidth(this.datasets.length)}}t.transition(s,e).draw()}},this)},this)}})}.call(this),function(){var t=this,e=t.Chart,n=e.helpers,i={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Doughnut",defaults:i,initialize:function(t){this.segments=[],this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=e.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(t){t.restore(["fillColor"])}),n.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.calculateTotal(t),n.each(t,function(t,e){this.addData(t,e,!0)},this),this.render()},getSegmentsAtEvent:function(t){var e=[],i=n.getRelativePosition(t);return n.each(this.segments,function(t){t.inRange(i.x,i.y)&&e.push(t)},this),e},addData:function(t,e,n){var i=e||this.segments.length;this.segments.splice(i,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label})),n||(this.reflow(),this.update())},calculateCircumference:function(t){return 2*Math.PI*(t/this.total)},calculateTotal:function(t){this.total=0,n.each(t,function(t){this.total+=t.value},this)},update:function(){this.calculateTotal(this.segments),n.each(this.activeElements,function(t){t.restore(["fillColor"])}),n.each(this.segments,function(t){t.save()}),this.render()},removeData:function(t){var e=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,n.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var e=t?t:1;this.clear(),n.each(this.segments,function(t,n){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},e),t.endAngle=t.startAngle+t.circumference,t.draw(),0===n&&(t.startAngle=1.5*Math.PI),n<this.segments.length-1&&(this.segments[n+1].startAngle=t.endAngle)},this)}}),e.types.Doughnut.extend({name:"Pie",defaults:n.merge(i,{percentageInnerCutout:0})})}.call(this),function(){var t=this,e=t.Chart,n=e.helpers,i={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Line",defaults:i,initialize:function(t){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),n.each(t.datasets,function(e){var i={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(i),n.each(e.data,function(n,s){i.points.push(new this.PointClass({value:n,label:t.labels[s],datasetLabel:e.label,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this),this.buildScale(t.labels),this.eachPoints(function(t,e){n.extend(t,{x:this.scale.calculateX(e),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(t){n.each(this.datasets,function(e){n.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=[],i=n.getRelativePosition(t);return n.each(this.datasets,function(t){n.each(t.points,function(t){t.inRange(i.x,i.y)&&e.push(t)})},this),e},buildScale:function(t){var i=this,s=function(){var t=[];return i.eachPoints(function(e){t.push(e.value)}),t},r={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=n.calculateScaleRange(s(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,e)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(r,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new e.Scale(r)},addData:function(t,e){n.each(t,function(t,n){this.datasets[n].points.push(new this.PointClass({value:t,label:e,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[n].pointStrokeColor,fillColor:this.datasets[n].pointColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(t){t.points.shift()},this),this.update()},reflow:function(){var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var e=t||1;this.clear();var i=this.chart.ctx,s=function(t){return null!==t.value},r=function(t,e,i){return n.findNextWhere(e,s,i)||t},o=function(t,e,i){return n.findPreviousWhere(e,s,i)||t};this.scale.draw(e),n.each(this.datasets,function(t){var a=n.where(t.points,s);n.each(t.points,function(t,n){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(n)},e)},this),this.options.bezierCurve&&n.each(a,function(t,e){var i=e>0&&e<a.length-1?this.options.bezierCurveTension:0;t.controlPoints=n.splineCurve(o(t,a,e),t,r(t,a,e),i),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this),i.lineWidth=this.options.datasetStrokeWidth,i.strokeStyle=t.strokeColor,i.beginPath(),n.each(a,function(t,e){if(0===e)i.moveTo(t.x,t.y);else if(this.options.bezierCurve){var n=o(t,a,e);i.bezierCurveTo(n.controlPoints.outer.x,n.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else i.lineTo(t.x,t.y)},this),i.stroke(),this.options.datasetFill&&a.length>0&&(i.lineTo(a[a.length-1].x,this.scale.endPoint),i.lineTo(a[0].x,this.scale.endPoint),i.fillStyle=t.fillColor,i.closePath(),i.fill()),n.each(a,function(t){t.draw()})},this)}})}.call(this),function(){var t=this,e=t.Chart,n=e.helpers,i={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"PolarArea",defaults:i,initialize:function(t){this.segments=[],this.SegmentArc=e.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:t.length}),this.updateScaleRange(t),this.scale.update(),n.each(t,function(t,e){this.addData(t,e,!0)},this),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(t){t.restore(["fillColor"])}),n.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.render()},getSegmentsAtEvent:function(t){var e=[],i=n.getRelativePosition(t);return n.each(this.segments,function(t){t.inRange(i.x,i.y)&&e.push(t)},this),e},addData:function(t,e,n){var i=e||this.segments.length;this.segments.splice(i,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),n||(this.reflow(),this.update())},removeData:function(t){var e=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,n.each(t,function(t){this.total+=t.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var e=[];n.each(t,function(t){e.push(t.value)});var i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(e,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,i,{size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),n.each(this.segments,function(t){t.save()}),this.render()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),n.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),n.each(this.segments,function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})},this)},draw:function(t){var e=t||1;this.clear(),n.each(this.segments,function(t,n){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},e),t.endAngle=t.startAngle+t.circumference,0===n&&(t.startAngle=1.5*Math.PI),n<this.segments.length-1&&(this.segments[n+1].startAngle=t.endAngle),t.draw()},this),this.scale.draw()}})}.call(this),function(){var t=this,e=t.Chart,n=e.helpers;e.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(t){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(t),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),n.each(t.datasets,function(e){var i={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(i),n.each(e.data,function(n,s){var r;this.scale.animation||(r=this.scale.getPointPosition(s,this.scale.calculateCenterOffset(n))),i.points.push(new this.PointClass({value:n,label:t.labels[s],datasetLabel:e.label,x:this.options.animation?this.scale.xCenter:r.x,y:this.options.animation?this.scale.yCenter:r.y,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(t){n.each(this.datasets,function(e){n.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=n.getRelativePosition(t),i=n.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},e),s=2*Math.PI/this.scale.valuesCount,r=Math.round((i.angle-1.5*Math.PI)/s),o=[];return(r>=this.scale.valuesCount||0>r)&&(r=0),i.distance<=this.scale.drawingArea&&n.each(this.datasets,function(t){o.push(t.points[r])}),o},buildScale:function(t){this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:t.labels,valuesCount:t.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(t.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var e=function(){var e=[];return n.each(t,function(t){t.data?e=e.concat(t.data):n.each(t.points,function(t){e.push(t.value)})}),e}(),i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(e,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,i)},addData:function(t,e){this.scale.valuesCount++,n.each(t,function(t,n){var i=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[n].points.push(new this.PointClass({value:t,label:e,x:i.x,y:i.y,strokeColor:this.datasets[n].pointStrokeColor,fillColor:this.datasets[n].pointColor}))},this),this.scale.labels.push(e),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),n.each(this.datasets,function(t){t.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(t){t.save()}),this.reflow(),this.render()},reflow:function(){n.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var e=t||1,i=this.chart.ctx;this.clear(),this.scale.draw(),n.each(this.datasets,function(t){n.each(t.points,function(t,n){t.hasValue()&&t.transition(this.scale.getPointPosition(n,this.scale.calculateCenterOffset(t.value)),e)},this),i.lineWidth=this.options.datasetStrokeWidth,i.strokeStyle=t.strokeColor,i.beginPath(),n.each(t.points,function(t,e){0===e?i.moveTo(t.x,t.y):i.lineTo(t.x,t.y)},this),i.closePath(),i.stroke(),i.fillStyle=t.fillColor,i.fill(),n.each(t.points,function(t){t.hasValue()&&t.draw()})},this)}})}.call(this),define("libs/charts/donut_chart",["require","jquery","chartjs"],function(t){{var e=t("jquery");t("chartjs")}return function(t,n,i){var s=_.extend({segmentShowStroke:!1,percentageInnerCutout:65,showPercentage:!1,showImage:!1,animation:!1,legendColors:{Yes:"#3FB586",No:"#d6d6d6",Maybe:"red"},tooltipTemplate:"<%= value+'%' %>"},i),r=[];e.each(n,function(t,e){r.push({value:e,color:s.legendColors[t]})}),new Chart(t.getContext("2d")).Doughnut(r,s)}}),define("app/views/reports/widgets/donut_chart",["require","backbone","handlebars","handlebarsTemplates","context","libs/charts/donut_chart"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=t("context"),s=t("libs/charts/donut_chart");return e.View.extend({tagName:"span",template:n["reports/widgets/donut_chart"],initialize:function(t){this.model=t},render:function(){return _.size(this.model.results.percentages)>0&&(this.setElement(this.template(this.model)),s(this.$el.find("canvas")[0],this.model.results.percentages,this.model.config),this.listenTo(i,"filter:queryString",this.updateViewBreakDownLink),i.trigger("filter:request:queryString")),this},updateViewBreakDownLink:function(t){var e=void 0!==this.model.report_filters.account?this.model.report_filters.account.id:"all";this.$el.find("a.breakdown-link").attr("href","reports/"+e+"/info/"+this.model.widget_id+"?"+t)}})}),define("app/views/reports/widgets/horizontal_bar_chart",["require","backbone","handlebars","handlebarsTemplates","chartjs","context"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=(t("chartjs"),t("context"));return e.View.extend({tagName:"span",template:n["reports/widgets/horizontal_bar_chart"],initialize:function(t){this.model=t,this.chartOptions=_.extend({scaleFontSize:14,animation:!1,scaleShowLabels:!0,scaleOverride:!0,scaleSteps:10,scaleStepWidth:10,scaleStartValue:0,inGraphDataShow:!0,inGraphDataTmpl:"<%=v3+'%'%>",scaleLabel:"<%= value+'%' %>",horizontalBar:!0,responsive:!0,barValueSpacing:10,maintainAspectRatio:!1,showTooltips:!0,tooltipTemplate:"<%= value+'%' %>"},this.model.config)},render:function(){return _.size(this.model.results.percentages)>0&&(this.$el.html(this.template(this.model)),this.setupHorizontalBarChart(),this.listenTo(i,"filter:queryString",this.updateViewBreakDownLink),i.trigger("filter:request:queryString")),this},setupHorizontalBarChart:function(){var t=this,e=this.$el.find("canvas"),n=[],s=[],r=[],o=[];$.each(this.chartOptions.legendOrder.reverse(),function(e,i){n.push(i),s.push(t.chartOptions.legendColors[i]),r.push(t.chartOptions.legendColors[i]),o.push(t.model.results.percentages[i])}),this.data={labels:n,datasets:[{fillColor:s,strokeColor:r,data:o,title:"horizontal chart"}]},this.listenTo(i,"report post render",function(){new Chart(e[0].getContext("2d")).Bar(t.data,t.chartOptions)})},updateViewBreakDownLink:function(t){var e=void 0!==this.model.report_filters.account?this.model.report_filters.account.id:"all";this.$el.find("a.breakdown-link").attr("href","reports/"+e+"/info/"+this.model.widget_id+"?"+t)}})}),define("app/views/reports/widgets/leading_row",["require","backbone","handlebars","handlebarsTemplates"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates"));return e.View.extend({template:n["reports/widgets/leading_row"],initialize:function(t){this.model=t},render:function(){return this.setElement(this.template(this.model)),this}})}),define("app/views/reports/widgets/list_icon",["require","backbone","handlebars","handlebarsTemplates"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates"));return e.View.extend({template:n["reports/widgets/list_icon"],initialize:function(t){this.model=t},render:function(){return this.setElement(this.template(this.model)),this}})}),define("app/views/reports/widgets/metric_icon",["require","backbone","handlebars","handlebarsTemplates"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates"));return e.View.extend({template:n["reports/widgets/metric_icon"],initialize:function(t){this.model=t},render:function(){return this.setElement(this.template(this.model)),this}})}),define("app/views/reports/widgets/multi_question_totals",["require","backbone","handlebars","handlebarsTemplates"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates"));return e.View.extend({template:n["reports/widgets/multi_question_totals"],initialize:function(t){this.model=t},render:function(){return this.setElement(this.template(this.model)),this}})}),define("app/views/reports/widgets/overview_icon",["require","backbone","handlebars","handlebarsTemplates","context"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=t("context");return e.View.extend({template:n["reports/widgets/overview_icon"],initialize:function(t){this.model=t},render:function(){return this.setElement(this.template(this.model)),this.listenTo(i,"filter:queryString",this.updateViewBreakDownLink),i.trigger("filter:request:queryString"),this},updateViewBreakDownLink:function(t){var e=void 0!==this.model.report_filters.account?this.model.report_filters.account.id:"all";this.$el.find("a.breakdown-link").attr("href","reports/"+e+"/info/"+this.model.widget_id+"?"+t)}})}),define("app/views/reports/widgets/percent_icon",["require","backbone","handlebars","handlebarsTemplates"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates"));return e.View.extend({template:n["reports/widgets/percent_icon"],initialize:function(t){this.model=t},render:function(){return this.setElement(this.template(this.model)),this}})}),define("app/views/reports/widgets/quadrant_chart",["require","backbone","handlebars","handlebarsTemplates"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates"));return e.View.extend({tagName:"span",template:n["reports/widgets/quadrant_chart"],initialize:function(t){this.model=t},render:function(){return _.size(this.model.results.percentages)>0&&this.setElement(this.template(this.model)),this}})}),define("app/views/reports/widgets/range_chart",["require","backbone","handlebars","handlebarsTemplates"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates"));return e.View.extend({tagName:"span",template:n["reports/widgets/range_chart"],initialize:function(t){this.model=t},render:function(){return _.size(this.model.results.percentages)>0&&this.setElement(this.template(this.model)),this}})}),define("app/views/reports/widgets/resolution_row",["require","backbone","handlebars","handlebarsTemplates","context"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=t("context");return e.View.extend({template:n["reports/widgets/resolution_row"],initialize:function(t){this.model=t},render:function(){return this.setElement(this.template(this.model)),this.listenTo(i,"filter:queryString",this.updateViewBreakDownLink),i.trigger("filter:request:queryString"),this},updateViewBreakDownLink:function(t){var e=void 0!==this.model.report_filters.account?this.model.report_filters.account.id:"all";this.$el.find("a.breakdown-link").attr("href","reports/"+e+"/info/"+this.model.widget_id+"?"+t)}})}),define("app/views/reports/index/widget",["require","backbone","handlebars","handlebarsTemplates","handlebarsHelpers","app/views/reports/widgets/bar_chart","app/views/reports/widgets/donut_chart","app/views/reports/widgets/horizontal_bar_chart","app/views/reports/widgets/leading_row","app/views/reports/widgets/list_icon","app/views/reports/widgets/metric_icon","app/views/reports/widgets/multi_question_totals","app/views/reports/widgets/overview_icon","app/views/reports/widgets/percent_icon","app/views/reports/widgets/quadrant_chart","app/views/reports/widgets/range_chart","app/views/reports/widgets/resolution_row"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=(t("handlebarsHelpers"),t("app/views/reports/widgets/bar_chart")),s=t("app/views/reports/widgets/donut_chart"),r=t("app/views/reports/widgets/horizontal_bar_chart"),o=t("app/views/reports/widgets/leading_row"),a=t("app/views/reports/widgets/list_icon"),l=t("app/views/reports/widgets/metric_icon"),c=t("app/views/reports/widgets/multi_question_totals"),h=t("app/views/reports/widgets/overview_icon"),u=t("app/views/reports/widgets/percent_icon"),d=t("app/views/reports/widgets/quadrant_chart"),p=t("app/views/reports/widgets/range_chart"),f=t("app/views/reports/widgets/resolution_row");return e.View.extend({tagName:"span",defaultTemplate:n["reports/widgets/default"],initialize:function(t){this.model=t},render:function(){var t=this.defaultTemplate(this.model);return 1==this.model.display_type?t=this.createDonutChart():2==this.model.display_type?t=this.createListIcon():3==this.model.display_type?t=this.createPercentIcon():4==this.model.display_type?t=this.createBarChart():5==this.model.display_type?t=this.createMetricIcon():6==this.model.display_type?t=this.createResolutionRow():7==this.model.display_type?t=this.createOverviewIcon():8==this.model.display_type?t=this.createHorizontalBarChart():9==this.model.display_type?t=this.createRangeChart():10==this.model.display_type?t=this.createMultiQuestionTotal():11==this.model.display_type?t=this.createQuadrantChart():12==this.model.display_type&&(t=this.createLeadingRow()),this.setElement(t),this},createDonutChart:function(){return new s(this.model).render().$el},createListIcon:function(){return new a(this.model).render().$el},createBarChart:function(){return new i(this.model).render().$el},createPercentIcon:function(){return new u(this.model).render().$el},createMetricIcon:function(){return new l(this.model).render().$el},createResolutionRow:function(){return new f(this.model).render().$el},createOverviewIcon:function(){return new h(this.model).render().$el},createHorizontalBarChart:function(){return new r(this.model).render().$el},createRangeChart:function(){return new p(this.model).render().$el},createMultiQuestionTotal:function(){return new c(this.model).render().$el},createQuadrantChart:function(){return new d(this.model).render().$el},createLeadingRow:function(){return new o(this.model).render().$el}})}),define("app/views/reports/index/subsection",["require","backbone","handlebars","handlebarsTemplates","app/views/reports/index/widget"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=t("app/views/reports/index/widget");return e.View.extend({template:n["reports/index/subsection"],initialize:function(t){this.model=t},render:function(){var t=this;return this.setElement(this.template(this.model)),$.each(this.model.widgets,function(e,n){t.addWidgets(t,n)}),this},addWidgets:function(t,e){t.$el.find(".widgets").append(new i(e).render().$el)}})}),define("app/views/reports/index/section",["require","backbone","handlebars","handlebarsTemplates","app/views/reports/index/subsection"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=t("app/views/reports/index/subsection");
return e.View.extend({template:n["reports/index/section"],initialize:function(t){this.model=t},render:function(){var t=this;return this.setElement(this.template(this.model)),$.each(this.model.subsections,function(e,n){t.addSubsection(t,n)}),this},addSubsection:function(t,e){t.$el.find(".subsections").append(new i(e).render().$el)}})}),define("app/views/reports/index/report",["require","backbone","handlebars","handlebarsTemplates","context","app/models/reports/report","app/collections/reports/filters","app/views/filter/main","app/views/utils/loading","app/views/reports/index/section"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates"),t("context")),i=t("app/models/reports/report"),s=t("app/collections/reports/filters"),r=t("app/views/filter/main"),o=t("app/views/utils/loading"),a=t("app/views/reports/index/section");return e.View.extend({el:".report",initialize:function(t){this.model=new i(t),this.filters=new s(t),this.listenTo(n,"filter:query",this.applyFilter),this.loadingView=new o},render:function(){var t=this;return void 0!==window.reportData?($.each(window.reportData.sections,function(e,n){t.addSection(t.$el,n)}),t.triggerPostRender()):(this.$el.append(this.loadingView.render().$el),this.filters.fetch({success:function(e){t.addFilters(e)}}),this.model.fetch({success:function(e){t.constructView(e)}})),this},addSection:function(t,e){t.append(new a(e).render().$el)},addFilters:function(t){r.init(t)},constructView:function(t){var e=this;$.each(t.get("sections"),function(t,n){e.addSection(e.$el,n)}),e.triggerPostRender(),this.loadingView.remove()},applyFilter:function(t){var e=this;this.$el.empty(),this.$el.append(this.loadingView.render().$el),this.model.queryString=t,this.model.fetch({success:function(t){e.constructView(t)}})},triggerPostRender:function(){n.trigger("report post render")}})}),define("app/views/reports/checkins/show/section",["require","backbone"],function(t){var e=t("backbone");return e.View.extend({el:".section",events:{"click .expand-indicator":"toggleBody"},initialize:function(t){this.setElement(t.el)},render:function(){return this},toggleBody:function(){this.$el.find(".expand-indicator").toggleClass("open"),this.$el.find(".body").slideToggle("fast")}})}),define("app/views/reports/checkins/show/report",["require","backbone","app/models/activities/activity","app/views/reports/checkins/show/section","app/views/comments/comments","app/views/comments/new_comment","libs/expanding"],function(t){{var e=t("backbone"),n=t("app/models/activities/activity"),i=t("app/views/reports/checkins/show/section"),s=t("app/views/comments/comments"),r=t("app/views/comments/new_comment");t("libs/expanding")}return e.View.extend({el:".checkin-report",initialize:function(t){this.programId=t.programId,this.activityModel=new n(window.checkinReportData.activity,{})},render:function(){return this.$el.find(".section").each(function(){new i({el:this}).render()}),this.comments=new s({el:this.$el.find(".comments"),activity:this.activityModel,programId:this.programId}).render(),this.newComment=new r({el:this.$el.find(".new-comment"),activity:this.activityModel,collection:this.comments.collection}).render(),this}})}),define("app/models/reports/info/info_list",["require","jquery","underscore","backbone"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"));return e.Model.extend({initialize:function(t){this.queryString=t.queryString,this.programId=t.programId,this.reportId=t.reportId,this.infoId=t.infoId},url:function(){return"/programs/"+this.programId+"/reports/"+this.reportId+"/info/"+this.infoId+".json?"+this.queryString}})}),define("app/views/reports/info/show/checkin",["require","backbone","handlebars","handlebarsTemplates"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates"));return e.View.extend({template:n["reports/info/show/checkin"],initialize:function(t){this.model=t},render:function(){return this.setElement(this.template(this.model)),this}})}),define("app/views/reports/info/show/list_item",["require","backbone","handlebars","handlebarsTemplates","app/views/reports/info/show/checkin"],function(t){var e=t("backbone"),n=(t("handlebars"),t("handlebarsTemplates")),i=t("app/views/reports/info/show/checkin");return e.View.extend({template:n["reports/info/show/list_item"],events:{"click .info-toggle":"toggleCheckins"},initialize:function(t){this.model=t},render:function(){var t=this;return this.setElement(this.template(this.model)),void 0!==this.model.checkins&&$.each(this.model.checkins,function(e,n){t.addCheckin(t,n)}),this},addCheckin:function(t,e){t.$el.last().find("td").append(new i(e).render().$el)},toggleCheckins:function(){this.$el.last().toggleClass("hide"),this.$el.find(".fa").toggleClass("fa-rotate-180")}})}),define("app/views/reports/info/show/info_list",["require","backbone","handlebarsTemplates","context","app/views/filter/main","app/views/utils/loading","app/views/utils/pagination","app/models/reports/info/info_list","app/views/reports/info/show/list_item"],function(t){var e=t("backbone"),n=t("handlebarsTemplates"),i=t("context"),s=t("app/views/filter/main"),r=t("app/views/utils/loading"),o=t("app/views/utils/pagination"),a=t("app/models/reports/info/info_list"),l=t("app/views/reports/info/show/list_item");return e.View.extend({el:".report-info",template:n["reports/info/show/info_list"],initialize:function(t){this.model=new a($.extend(t,{queryString:window.bootstrap})),this.listenTo(i,"filter:query",this.applyFilter),this.loadingView=new r},render:function(){var t=this;return this.$el.append(this.loadingView.render().$el),this.model.fetch({success:function(e){t.addFilters(e.get("filters")),t.constructView(e)}}),this},addFilters:function(t){s.init(t)},addPages:function(t){this.$el.find(".pages").append(new o(t).render().$el)},addListItem:function(t){this.$el.find(".list-items").append(new l(t).render().$el)},constructView:function(t){if(this.$el.append(this.template(t.toJSON())),this.addPages(t.get("pages")),t.get("list_items").length>0){var e=this;$.each(t.get("list_items"),function(t,n){e.addListItem(n)})}else this.$el.find(".list-items").append(n.no_results);this.loadingView.remove()},applyFilter:function(t){var e=this;this.$el.empty(),this.$el.append(this.loadingView.render().$el),this.model.queryString=t,this.model.fetch({success:function(t){e.$el.find(".report-info-list").remove(),e.constructView(t)}})}})}),define("app/views/global/content_view",["require","jquery","underscore","backbone"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"));return e.View.extend({el:".content",events:{"click .close-status-bar a":"closeAlert"},closeAlert:function(t){t.preventDefault(),t.stopPropagation(),self.$(".status-bar").addClass("hide-status-bar")}})}),define("app/collections/notifications/notifications",["require","jquery","underscore","backbone"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"));return e.Collection.extend({queryString:"",initialize:function(t){this.urlStart=t.url+".json?"},url:function(){return this.urlStart+this.queryString}})}),define("app/views/notifications/notification_list",["require","jquery","underscore","backbone","app/collections/notifications/notifications","app/views/shared/filterableTable","context"],function(t){{var e=(t("jquery"),t("underscore"),t("backbone"),t("app/collections/notifications/notifications")),n=t("app/views/shared/filterableTable");t("context")}return n.extend({template:"notifications/notification",initialize:function(t){return this.url=t.url,this.collection=new e({url:this.url}),this.pager=t.pager,this.listenTo(this.collection,"reset",this.render),this.listenTo(this.pager,"new_page",this.applyFilter),this},applyFilter:function(t){$tbody=this.$("tbody"),$tbody.html("<tr><td><i class='fa fa-spin fa-spinner'></i></td></tr>"),this.collection.queryString=t,this.collection.fetch({reset:!0})}})}),define("app/views/notifications/notification_paginator",["require","jquery","app/views/utils/paginator"],function(t){var e=t("jquery"),n=t("app/views/utils/paginator");return n.extend({applyPageChange:function(t){t.preventDefault(),t.stopPropagation();var n=e.trim(e(t.currentTarget).text()),i="page="+n;this.trigger("new_page",i),this.render(i)}})}),define("app/views/notifications/notification_section",["require","jquery","underscore","backbone","app/views/notifications/notification_list","app/views/notifications/notification_paginator","app/views/filter/filterControl"],function(t){{var e=(t("jquery"),t("underscore"),t("backbone")),n=t("app/views/notifications/notification_list"),i=t("app/views/notifications/notification_paginator");t("app/views/filter/filterControl")}return e.View.extend({initialize:function(t){this.el=t.el,this.url_action=t.url_action,this.bootstrap=t.bootstrap,this.url=window.location.pathname+"/"+this.url_action,this.emptyParams=t.emptyParams},start:function(){this.pager=new i({el:this.$(".pagination-holder"),url:this.url+"_page"}),new n({el:this.$("table"),url:this.url,emptyTemplateAttributes:this.emptyParams,pager:this.pager}).collection.reset(this.bootstrap)}})}),define("app/views/legal/shipping",["require","jquery","jquery-validate"],function(t){{var e=t("jquery");t("jquery-validate")}return{init:function(){e(".user-form").validate({ignore:[],errorPlacement:function(t,e){e.is(":radio")&&t.appendTo(e.parent().parent().find("p")),t.addClass("control-label")},rules:{"user[payment_address_attributes][state]":{required:!0},"user[address_attributes][state]":{required:!0},"user[shirt_size]":{required:!0},"user[shoe_size]":{required:!0}}})}}}),define("app/models/posts/post",["require","jquery","underscore","backbone","context"],function(t){var e=(t("jquery"),t("underscore")),n=t("backbone"),i=t("context");return n.Model.extend({containsFilter:!1,filters:[],paramRoot:"message",url:function(){return"/programs/"+i.programId+"/messages"},validate:function(t){var n=[];if(""===t["message[subject]"]&&n.push("message-subject"),""===t["message[content]"]&&n.push("message-content"),this.containsFilter){var i=!1;e.each(this.filters,function(e){""!==t[e]&&(i=!0)}),i||n.push("message-filters")}return n.length>0?n:void 0}})}),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("quill",[],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Quill=t()}}(function(){var t;return function e(t,n,i){function s(o,a){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return s(n?n:e)},c,c.exports,e,t,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({"M4+//f":[function(e,n,i){(function(e){(function(){function s(t,e,n){for(var i=(n||0)-1,s=t?t.length:0;++i<s;)if(t[i]===e)return i;return-1}function r(t,e){var n=typeof e;if(t=t.cache,"boolean"==n||null==e)return t[e]?0:-1;"number"!=n&&"string"!=n&&(n="object");var i="number"==n?e:re+e;return t=(t=t[n])&&t[i],"object"==n?t&&s(t,e)>-1?0:-1:t?0:-1}function o(t){var e=this.cache,n=typeof t;if("boolean"==n||null==t)e[t]=!0;else{"number"!=n&&"string"!=n&&(n="object");var i="number"==n?t:re+t,s=e[n]||(e[n]={});"object"==n?(s[i]||(s[i]=[])).push(t):s[i]=!0}}function a(t){var e=-1,n=t.length,i=t[0],s=t[n/2|0],r=t[n-1];if(i&&"object"==typeof i&&s&&"object"==typeof s&&r&&"object"==typeof r)return!1;var a=c();a["false"]=a["null"]=a["true"]=a.undefined=!1;var l=c();for(l.array=t,l.cache=a,l.push=o;++e<n;)l.push(t[e]);return l}function l(){return ne.pop()||[]}function c(){return ie.pop()||{array:null,cache:null,"false":!1,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1}}function h(t){t.length=0,ne.length<ae&&ne.push(t)}function u(t){var e=t.cache;e&&u(e),t.array=t.cache=t.object=t.number=t.string=null,ie.length<ae&&ie.push(t)}function d(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var i=-1,s=n-e||0,r=Array(0>s?0:s);++i<s;)r[i]=t[e+i];return r}function p(){}function f(t){function e(){if(i){var t=d(i);Ie.apply(t,arguments)}if(this instanceof e){var r=g(n.prototype),o=n.apply(r,t||arguments);return D(o)?o:r}return n.apply(s,t||arguments)}var n=t[0],i=t[2],s=t[4];return Be(e,t),e}function m(t,e,n,i,s){if(n){var r=n(t);if("undefined"!=typeof r)return r}var o=D(t);if(!o)return t;var a=Le.call(t);if(!_e[a])return t;var c=He[a];switch(a){case pe:case fe:return new c(+t);case ge:case be:return new c(t);case ye:return r=c(t.source,le.exec(t)),r.lastIndex=t.lastIndex,r}var u=We(t);if(e){var p=!i;i||(i=l()),s||(s=l());for(var f=i.length;f--;)if(i[f]==t)return s[f];r=u?c(t.length):{}}else r=u?d(t):Ye({},t);return u&&(Ne.call(t,"index")&&(r.index=t.index),Ne.call(t,"input")&&(r.input=t.input)),e?(i.push(t),s.push(r),(u?O:Ke)(t,function(t,o){r[o]=m(t,e,n,i,s)}),p&&(h(i),h(s)),r):r}function g(t){return D(t)?Oe(t):{}}function v(t,e,n){if("function"!=typeof t)return Q;if("undefined"==typeof e||!("prototype"in t))return t;var i=t.__bindData__;if("undefined"==typeof i&&(ze.funcNames&&(i=!t.name),i=i||!ze.funcDecomp,!i)){var s=qe.call(t);ze.funcNames||(i=!ce.test(s)),i||(i=he.test(s),Be(t,i))}if(i===!1||i!==!0&&1&i[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,s){return t.call(e,n,i,s)};case 4:return function(n,i,s,r){return t.call(e,n,i,s,r)}}return Y(t,e)}function y(t){function e(){var t=l?o:this;if(s){var f=d(s);Ie.apply(f,arguments)}if((r||h)&&(f||(f=d(arguments)),r&&Ie.apply(f,r),h&&f.length<a))return i|=16,y([n,u?i:-4&i,f,null,o,a]);if(f||(f=arguments),c&&(n=t[p]),this instanceof e){t=g(n.prototype);var m=n.apply(t,f);return D(m)?m:t}return n.apply(t,f)}var n=t[0],i=t[1],s=t[2],r=t[3],o=t[4],a=t[5],l=1&i,c=2&i,h=4&i,u=8&i,p=n;return Be(e,t),e}function b(t,e){var n=-1,i=k(),o=t?t.length:0,l=o>=oe&&i===s,c=[];if(l){var h=a(e);h?(i=r,e=h):l=!1}for(;++n<o;){var d=t[n];i(e,d)<0&&c.push(d)}return l&&u(e),c}function _(t,e,n,i){for(var s=(i||0)-1,r=t?t.length:0,o=[];++s<r;){var a=t[s];if(a&&"object"==typeof a&&"number"==typeof a.length&&(We(a)||C(a))){e||(a=_(a,e,n));var l=-1,c=a.length,h=o.length;for(o.length+=c;++l<c;)o[h++]=a[l]}else n||o.push(a)}return o}function w(t,e,n,i,s,r){if(n){var o=n(t,e);if("undefined"!=typeof o)return!!o}if(t===e)return 0!==t||1/t==1/e;var a=typeof t,c=typeof e;if(!(t!==t||t&&xe[a]||e&&xe[c]))return!1;if(null==t||null==e)return t===e;var u=Le.call(t),d=Le.call(e);if(u==ue&&(u=ve),d==ue&&(d=ve),u!=d)return!1;switch(u){case pe:case fe:return+t==+e;case ge:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case ye:case be:return t==String(e)}var p=u==de;if(!p){var f=Ne.call(t,"__wrapped__"),m=Ne.call(e,"__wrapped__");if(f||m)return w(f?t.__wrapped__:t,m?e.__wrapped__:e,n,i,s,r);if(u!=ve)return!1;var g=t.constructor,v=e.constructor;if(g!=v&&!(L(g)&&g instanceof g&&L(v)&&v instanceof v)&&"constructor"in t&&"constructor"in e)return!1}var y=!s;s||(s=l()),r||(r=l());for(var b=s.length;b--;)if(s[b]==t)return r[b]==e;var _=0;if(o=!0,s.push(t),r.push(e),p){if(b=t.length,_=e.length,o=_==b,o||i)for(;_--;){var x=b,k=e[_];if(i)for(;x--&&!(o=w(t[x],k,n,i,s,r)););else if(!(o=w(t[_],k,n,i,s,r)))break}}else Xe(e,function(e,a,l){return Ne.call(l,a)?(_++,o=Ne.call(t,a)&&w(t[a],e,n,i,s,r)):void 0}),o&&!i&&Xe(t,function(t,e,n){return Ne.call(n,e)?o=--_>-1:void 0});return s.pop(),r.pop(),y&&(h(s),h(r)),o}function x(t,e,n,i,s,r){var o=1&e,a=2&e,l=4&e,c=16&e,h=32&e;if(!a&&!L(t))throw new TypeError;c&&!n.length&&(e&=-17,c=n=!1),h&&!i.length&&(e&=-33,h=i=!1);var u=t&&t.__bindData__;if(u&&u!==!0)return u=d(u),u[2]&&(u[2]=d(u[2])),u[3]&&(u[3]=d(u[3])),!o||1&u[1]||(u[4]=s),!o&&1&u[1]&&(e|=8),!l||4&u[1]||(u[5]=r),c&&Ie.apply(u[2]||(u[2]=[]),n),h&&Me.apply(u[3]||(u[3]=[]),i),u[1]|=e,x.apply(null,u);var p=1==e||17===e?f:y;return p([t,e,n,i,s,r])}function k(){var t=(t=p.indexOf)===B?s:t;return t}function S(t){return"function"==typeof t&&De.test(t)}function C(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Le.call(t)==ue||!1}function T(t,e,n,i){return"boolean"!=typeof e&&null!=e&&(i=n,n=e,e=!1),m(t,e,"function"==typeof n&&v(n,i,1))}function E(t,e){return t?Ne.call(t,e):!1}function A(t){return t&&1===t.nodeType||!1}function P(t,e,n,i){return w(t,e,"function"==typeof n&&v(n,i,2))}function L(t){return"function"==typeof t}function D(t){return!(!t||!xe[typeof t])}function q(t){return"number"==typeof t||t&&"object"==typeof t&&Le.call(t)==ge||!1}function N(t){return"string"==typeof t||t&&"object"==typeof t&&Le.call(t)==be||!1}function I(t,e,n){var i={};if("function"!=typeof e){var s=[];Xe(t,function(t,e){s.push(e)}),s=b(s,_(arguments,!0,!1,1));for(var r=-1,o=s.length;++r<o;){var a=s[r];i[a]=t[a]}}else e=p.createCallback(e,n,3),Xe(t,function(t,n,s){e(t,n,s)||(i[n]=t)});return i}function M(t){for(var e=-1,n=Ue(t),i=n.length,s=Array(i);++e<i;)s[e]=t[n[e]];return s}function F(t,e,n){var i=!0;e=p.createCallback(e,n,3);var s=-1,r=t?t.length:0;if("number"==typeof r)for(;++s<r&&(i=!!e(t[s],s,t)););else Ke(t,function(t,n,s){return i=!!e(t,n,s)});return i}function O(t,e,n){var i=-1,s=t?t.length:0;if(e=e&&"undefined"==typeof n?e:v(e,n,3),"number"==typeof s)for(;++i<s&&e(t[i],i,t)!==!1;);else Ke(t,e);return t}function $(t,e){var n=d(arguments,2),i=-1,s="function"==typeof e,r=t?t.length:0,o=Array("number"==typeof r?r:0);return O(t,function(t){o[++i]=(s?e:t[e]).apply(t,n)}),o}function j(t,e,n){var i=-1,s=t?t.length:0;if(e=p.createCallback(e,n,3),"number"==typeof s)for(var r=Array(s);++i<s;)r[i]=e(t[i],i,t);else r=[],Ke(t,function(t,n,s){r[++i]=e(t,n,s)});return r}function R(t,e,n,i){if(!t)return n;var s=arguments.length<3;e=p.createCallback(e,i,4);var r=-1,o=t.length;if("number"==typeof o)for(s&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);else Ke(t,function(t,i,r){n=s?(s=!1,t):e(n,t,i,r)});return n}function H(t){return b(t,_(arguments,!0,!0,1))}function z(t,e,n,i){return"boolean"!=typeof e&&null!=e&&(i=n,n="function"!=typeof e&&i&&i[e]===t?null:e,e=!1),null!=n&&(t=j(t,n,i)),_(t,e)}function B(t,e,n){if("number"==typeof n){var i=t?t.length:0;n=0>n?Re(0,i+n):n||0}else if(n){var r=U(t,e);return t[r]===e?r:-1}return s(t,e,n)}function W(){for(var t=[],e=-1,n=arguments.length,i=l(),o=k(),c=o===s,d=l();++e<n;){var p=arguments[e];(We(p)||C(p))&&(t.push(p),i.push(c&&p.length>=oe&&a(e?t[e]:d)))}var f=t[0],m=-1,g=f?f.length:0,v=[];t:for(;++m<g;){var y=i[0];if(p=f[m],(y?r(y,p):o(d,p))<0){for(e=n,(y||d).push(p);--e;)if(y=i[e],(y?r(y,p):o(t[e],p))<0)continue t;v.push(p)}}for(;n--;)y=i[n],y&&u(y);return h(i),h(d),v}function V(t,e,n){var i=0,s=t?t.length:0;if("number"!=typeof e&&null!=e){var r=s;for(e=p.createCallback(e,n,3);r--&&e(t[r],r,t);)i++}else if(i=e,null==i||n)return t?t[s-1]:ee;return d(t,Re(0,s-i))}function U(t,e,n,i){var s=0,r=t?t.length:s;for(n=n?p.createCallback(n,i,1):Q,e=n(e);r>s;){var o=s+r>>>1;n(t[o])<e?s=o+1:r=o}return s}function Y(t,e){return arguments.length>2?x(t,17,d(arguments,2),null,e):x(t,1,null,null,e)}function G(t){if(!L(t))throw new TypeError;var e=d(arguments,1);return setTimeout(function(){t.apply(ee,e)},1)}function X(t){return x(t,16,d(arguments,1))}function K(t,e,n){var i=typeof t;if(null==t||"function"==i)return v(t,e,n);if("object"!=i)return J(t);var s=Ue(t),r=s[0],o=t[r];return 1!=s.length||o!==o||D(o)?function(e){for(var n=s.length,i=!1;n--&&(i=w(e[s[n]],t[s[n]],null,!0)););return i}:function(t){var e=t[r];return o===e&&(0!==o||1/o==1/e)}}function Q(t){return t}function Z(){}function J(t){return function(e){return e[t]}}function te(t){var e=++se;return String(null==t?"":t)+e}var ee,ne=[],ie=[],se=0,re=+new Date+"",oe=75,ae=40,le=/\w*$/,ce=/^\s*function[ \n\r\t]+\w/,he=/\bthis\b/,ue="[object Arguments]",de="[object Array]",pe="[object Boolean]",fe="[object Date]",me="[object Function]",ge="[object Number]",ve="[object Object]",ye="[object RegExp]",be="[object String]",_e={};_e[me]=!1,_e[ue]=_e[de]=_e[pe]=_e[fe]=_e[ge]=_e[ve]=_e[ye]=_e[be]=!0;var we={configurable:!1,enumerable:!1,value:null,writable:!1},xe={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},ke=xe[typeof window]&&window||this,Se=xe[typeof i]&&i&&!i.nodeType&&i,Ce=xe[typeof n]&&n&&!n.nodeType&&n,Te=Ce&&Ce.exports===Se&&Se,Ee=xe[typeof e]&&e;!Ee||Ee.global!==Ee&&Ee.window!==Ee||(ke=Ee);var Ae=[],Pe=Object.prototype,Le=Pe.toString,De=RegExp("^"+String(Le).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),qe=Function.prototype.toString,Ne=Pe.hasOwnProperty,Ie=Ae.push,Me=Ae.unshift,Fe=function(){try{var t={},e=S(e=Object.defineProperty)&&e,n=e(t,t,t)&&e}catch(i){}return n}(),Oe=S(Oe=Object.create)&&Oe,$e=S($e=Array.isArray)&&$e,je=S(je=Object.keys)&&je,Re=Math.max,He={};He[de]=Array,He[pe]=Boolean,He[fe]=Date,He[me]=Function,He[ve]=Object,He[ge]=Number,He[ye]=RegExp,He[be]=String;var ze=p.support={};ze.funcDecomp=!S(ke.WinRTError)&&he.test(function(){return this}),ze.funcNames="string"==typeof Function.name,Oe||(g=function(){function t(){}return function(e){if(D(e)){t.prototype=e;var n=new t;t.prototype=null}return n||ke.Object()}}());var Be=Fe?function(t,e){we.value=e,Fe(t,"__bindData__",we)}:Z,We=$e||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Le.call(t)==de||!1},Ve=function(t){var e,n=t,i=[];if(!n)return i;if(!xe[typeof t])return i;for(e in n)Ne.call(n,e)&&i.push(e);return i},Ue=je?function(t){return D(t)?je(t):[]}:Ve,Ye=function(t,e,n){var i,s=t,r=s;if(!s)return r;var o=arguments,a=0,l="number"==typeof n?2:o.length;if(l>3&&"function"==typeof o[l-2])var c=v(o[--l-1],o[l--],2);else l>2&&"function"==typeof o[l-1]&&(c=o[--l]);for(;++a<l;)if(s=o[a],s&&xe[typeof s])for(var h=-1,u=xe[typeof s]&&Ue(s),d=u?u.length:0;++h<d;)i=u[h],r[i]=c?c(r[i],s[i]):s[i];return r},Ge=function(t,e,n){var i,s=t,r=s;if(!s)return r;for(var o=arguments,a=0,l="number"==typeof n?2:o.length;++a<l;)if(s=o[a],s&&xe[typeof s])for(var c=-1,h=xe[typeof s]&&Ue(s),u=h?h.length:0;++c<u;)i=h[c],"undefined"==typeof r[i]&&(r[i]=s[i]);return r},Xe=function(t,e,n){var i,s=t,r=s;if(!s)return r;if(!xe[typeof s])return r;e=e&&"undefined"==typeof n?e:v(e,n,3);for(i in s)if(e(s[i],i,t)===!1)return r;return r},Ke=function(t,e,n){var i,s=t,r=s;if(!s)return r;if(!xe[typeof s])return r;e=e&&"undefined"==typeof n?e:v(e,n,3);for(var o=-1,a=xe[typeof s]&&Ue(s),l=a?a.length:0;++o<l;)if(i=a[o],e(s[i],i,t)===!1)return r;return r},Qe=j;p.assign=Ye,p.bind=Y,p.createCallback=K,p.defaults=Ge,p.defer=G,p.difference=H,p.flatten=z,p.forEach=O,p.forIn=Xe,p.forOwn=Ke,p.intersection=W,p.invoke=$,p.keys=Ue,p.map=j,p.omit=I,p.partial=X,p.pluck=Qe,p.property=J,p.values=M,p.collect=j,p.each=O,p.extend=Ye,p.clone=T,p.every=F,p.has=E,p.identity=Q,p.indexOf=B,p.isArguments=C,p.isArray=We,p.isElement=A,p.isEqual=P,p.isFunction=L,p.isNumber=q,p.isObject=D,p.isString=N,p.noop=Z,p.reduce=R,p.sortedIndex=U,p.uniqueId=te,p.all=F,p.foldl=R,p.inject=R,p.last=V,p.VERSION="2.4.1","function"==typeof t&&"object"==typeof t.amd&&t.amd?(ke._=p,t(function(){return p})):Se&&Ce?Te?(Ce.exports=p)._=p:Se._=p:ke._=p}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],lodash:[function(t,e){e.exports=t("M4+//f")},{}],3:[function(e,n,i){!function(){function e(){this._events={},this._conf&&n.call(this,this._conf)}function n(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function s(t){this._events={},this.newListener=!1,n.call(this,t)}function r(t,e,n,i){if(!n)return[];var s,o,a,l,c,h,u,d=[],p=e.length,f=e[i],m=e[i+1];if(i===p&&n._listeners){if("function"==typeof n._listeners)return t&&t.push(n._listeners),[n];for(s=0,o=n._listeners.length;o>s;s++)t&&t.push(n._listeners[s]);return[n]}if("*"===f||"**"===f||n[f]){if("*"===f){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(d=d.concat(r(t,e,n[a],i+1)));return d}if("**"===f){u=i+1===p||i+2===p&&"*"===m,u&&n._listeners&&(d=d.concat(r(t,e,n,p)));for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!u&&(d=d.concat(r(t,e,n[a],p))),d=d.concat(r(t,e,n[a],i))):d=d.concat(a===m?r(t,e,n[a],i+2):r(t,e,n[a],i)));return d}d=d.concat(r(t,e,n[f],i+1))}if(l=n["*"],l&&r(t,e,l,i+1),c=n["**"])if(p>i){c._listeners&&r(t,e,c,p);for(a in c)"_listeners"!==a&&c.hasOwnProperty(a)&&(a===m?r(t,e,c[a],i+2):a===f?r(t,e,c[a],i+1):(h={},h[a]=c[a],r(t,e,{"**":h},i+1)))}else c._listeners?r(t,e,c,p):c["*"]&&c["*"]._listeners&&r(t,e,c["*"],p);return d}function o(t,e){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var n=0,i=t.length;i>n+1;n++)if("**"===t[n]&&"**"===t[n+1])return;for(var s=this.listenerTree,r=t.shift();r;){if(s[r]||(s[r]={}),s=s[r],0===t.length){if(s._listeners){if("function"==typeof s._listeners)s._listeners=[s._listeners,e];else if(a(s._listeners)&&(s._listeners.push(e),!s._listeners.warned)){var o=l;"undefined"!=typeof this._events.maxListeners&&(o=this._events.maxListeners),o>0&&s._listeners.length>o&&(s._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",s._listeners.length),console.trace())}}else s._listeners=e;return!0}r=t.shift()}return!0}var a=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},l=10;s.prototype.delimiter=".",s.prototype.setMaxListeners=function(t){this._events||e.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},s.prototype.event="",s.prototype.once=function(t,e){return this.many(t,1,e),this},s.prototype.many=function(t,e,n){function i(){0===--e&&s.off(t,i),n.apply(this,arguments)}var s=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return i._origin=n,this.on(t,i),s},s.prototype.emit=function(){this._events||e.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var n=arguments.length,i=new Array(n-1),s=1;n>s;s++)i[s-1]=arguments[s];for(s=0,n=this._all.length;n>s;s++)this.event=t,this._all[s].apply(this,i)}if("error"===t&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var o;if(this.wildcard){o=[];var a="string"==typeof t?t.split(this.delimiter):t.slice();r.call(this,o,a,this.listenerTree,0)}else o=this._events[t];if("function"==typeof o){if(this.event=t,1===arguments.length)o.call(this);else if(arguments.length>1)switch(arguments.length){case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(var n=arguments.length,i=new Array(n-1),s=1;n>s;s++)i[s-1]=arguments[s];o.apply(this,i)}return!0}if(o){for(var n=arguments.length,i=new Array(n-1),s=1;n>s;s++)i[s-1]=arguments[s];for(var l=o.slice(),s=0,n=l.length;n>s;s++)this.event=t,l[s].apply(this,i);return l.length>0||!!this._all}return!!this._all},s.prototype.on=function(t,n){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof n)throw new Error("on only accepts instances of Function");if(this._events||e.call(this),this.emit("newListener",t,n),this.wildcard)return o.call(this,t,n),this;if(this._events[t]){if("function"==typeof this._events[t])this._events[t]=[this._events[t],n];else if(a(this._events[t])&&(this._events[t].push(n),!this._events[t].warned)){var i=l;"undefined"!=typeof this._events.maxListeners&&(i=this._events.maxListeners),i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}}else this._events[t]=n;return this},s.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},s.prototype.addListener=s.prototype.on,s.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var n,i=[];if(this.wildcard){var s="string"==typeof t?t.split(this.delimiter):t.slice();i=r.call(this,null,s,this.listenerTree,0)}else{if(!this._events[t])return this;n=this._events[t],i.push({_listeners:n})}for(var o=0;o<i.length;o++){var l=i[o];if(n=l._listeners,a(n)){for(var c=-1,h=0,u=n.length;u>h;h++)if(n[h]===e||n[h].listener&&n[h].listener===e||n[h]._origin&&n[h]._origin===e){c=h;break}if(0>c)continue;return this.wildcard?l._listeners.splice(c,1):this._events[t].splice(c,1),0===n.length&&(this.wildcard?delete l._listeners:delete this._events[t]),this}(n===e||n.listener&&n.listener===e||n._origin&&n._origin===e)&&(this.wildcard?delete l._listeners:delete this._events[t])}return this},s.prototype.offAny=function(t){var e,n=0,i=0;if(t&&this._all&&this._all.length>0){for(e=this._all,n=0,i=e.length;i>n;n++)if(t===e[n])return e.splice(n,1),this}else this._all=[];return this},s.prototype.removeListener=s.prototype.off,s.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||e.call(this),this;if(this.wildcard)for(var n="string"==typeof t?t.split(this.delimiter):t.slice(),i=r.call(this,null,n,this.listenerTree,0),s=0;s<i.length;s++){var o=i[s];o._listeners=null}else{if(!this._events[t])return this;this._events[t]=null}return this},s.prototype.listeners=function(t){if(this.wildcard){var n=[],i="string"==typeof t?t.split(this.delimiter):t.slice();return r.call(this,n,i,this.listenerTree,0),n}return this._events||e.call(this),this._events[t]||(this._events[t]=[]),a(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},s.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof t&&t.amd?t(function(){return s}):"object"==typeof i?i.EventEmitter2=s:window.EventEmitter2=s}()},{}],4:[function(t,e){e.exports=t("./lib/type")},{"./lib/type":8}],5:[function(t,e){var n=t("fast-diff"),i=t("./is"),s=t("./op"),r=String.fromCharCode(0),o=function(t){this.ops=i.array(t)?t:i.object(t)&&i.array(t.ops)?t.ops:[]};o.prototype.insert=function(t,e){var n={};if(i.string(t)){if(0===t.length)return this;n.insert=t}else i.number(t)&&(n.insert=t);return i.object(e)&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)},o.prototype["delete"]=function(t){return 0>=t?this:this.push({"delete":t})},o.prototype.retain=function(t,e){if(0>=t)return this;var n={retain:t};return i.object(e)&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)},o.prototype.push=function(t){var e=this.ops.length,n=this.ops[e-1];if(t=s.clone(t),i.object(n)){if(i.number(t["delete"])&&i.number(n["delete"]))return this.ops[e-1]={"delete":n["delete"]+t["delete"]},this;if(i.number(n["delete"])&&(i.string(t.insert)||i.number(t.insert))&&(e-=1,n=this.ops[e-1],!i.object(n)))return this.ops.unshift(t),this;if(i.equal(t.attributes,n.attributes)){if(i.string(t.insert)&&i.string(n.insert))return this.ops[e-1]={insert:n.insert+t.insert},i.object(t.attributes)&&(this.ops[e-1].attributes=t.attributes),this;if(i.number(t.retain)&&i.number(n.retain))return this.ops[e-1]={retain:n.retain+t.retain},i.object(t.attributes)&&(this.ops[e-1].attributes=t.attributes),this}}return this.ops.splice(e,0,t),this},o.prototype.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},o.prototype.length=function(){return this.ops.reduce(function(t,e){return t+s.length(e)},0)},o.prototype.slice=function(t,e){t=t||0,i.number(e)||(e=1/0);for(var n=new o,r=s.iterator(this.ops),a=0;e>a&&r.hasNext();){var l;t>a?l=r.next(t-a):(l=r.next(e-t),n.push(l)),a+=s.length(l)}return n},o.prototype.compose=function(t){var e=s.iterator(this.ops),n=s.iterator(t.ops);for(this.ops=[];e.hasNext()||n.hasNext();)if("insert"===n.peekType())this.push(n.next());
else if("delete"===e.peekType())this.push(e.next());else{var r=Math.min(e.peekLength(),n.peekLength()),o=e.next(r),a=n.next(r);if(i.number(a.retain)){var l={};i.number(o.retain)?l.retain=r:l.insert=o.insert;var c=s.attributes.compose(o.attributes,a.attributes,i.number(o.retain));c&&(l.attributes=c),this.push(l)}else i.number(a["delete"])&&i.number(o.retain)&&this.push(a)}return this.chop()},o.prototype.diff=function(t){var e=[this.ops,t.ops].map(function(e){return e.map(function(n){if(i.string(n.insert))return n.insert;if(i.number(n.insert))return r;var s=e===t.ops?"on":"with";throw new Error("diff() called "+s+" non-document")}).join("")}),a=n(e[0],e[1]),l=s.iterator(this.ops),c=s.iterator(t.ops),h=new o;return a.forEach(function(t){for(var e=t[1].length;e>0;){var i=0;switch(t[0]){case n.INSERT:i=Math.min(c.peekLength(),e),h.push(c.next(i));break;case n.DELETE:i=Math.min(e,l.peekLength()),l.next(i),h["delete"](i);break;case n.EQUAL:i=Math.min(l.peekLength(),c.peekLength(),e);var r=l.next(i),o=c.next(i);r.insert===o.insert?h.retain(i,s.attributes.diff(r.attributes,o.attributes)):h.push(o)["delete"](i)}e-=i}}),h.chop()},o.prototype.transform=function(t,e){if(e=!!e,i.number(t))return this.transformPosition(t,e);for(var n=s.iterator(this.ops),r=s.iterator(t.ops),a=new o;n.hasNext()||r.hasNext();)if("insert"!==n.peekType()||!e&&"insert"===r.peekType())if("insert"===r.peekType())a.push(r.next());else{var l=Math.min(n.peekLength(),r.peekLength()),c=n.next(l),h=r.next(l);if(c["delete"])continue;h["delete"]?a.push(h):a.retain(l,s.attributes.transform(c.attributes,h.attributes,e))}else a.retain(s.length(n.next()));return a.chop()},o.prototype.transformPosition=function(t,e){e=!!e;for(var n=s.iterator(this.ops),i=0;n.hasNext()&&t>=i;){var r=n.peekLength(),o=n.peekType();n.next(),"delete"!==o?("insert"===o&&(t>i||!e)&&(t+=r),i+=r):t-=Math.min(r,t-i)}return t},e.exports=o},{"./is":6,"./op":7,"fast-diff":9}],6:[function(t,e){e.exports={equal:function(t,e){if(t===e)return!0;if(null==t&&null==e)return!0;if(null==t||null==e)return!1;if(Object.keys(t).length!=Object.keys(e).length)return!1;for(var n in t)if(t[n]!==e[n])return!1;return!0},array:function(t){return Array.isArray(t)},number:function(t){return"number"==typeof t?!0:"object"==typeof t&&"[object Number]"===Object.prototype.toString.call(t)?!0:!1},object:function(t){return t?"function"==typeof t||"object"==typeof t:!1},string:function(t){return"string"==typeof t?!0:"object"==typeof t&&"[object String]"===Object.prototype.toString.call(t)?!0:!1}}},{}],7:[function(t,e){function n(t){this.ops=t,this.index=0,this.offset=0}var i=t("./is"),s={attributes:{clone:function(t,e){return i.object(t)?Object.keys(t).reduce(function(n,i){return void 0===t[i]||null===t[i]&&!e||(n[i]=t[i]),n},{}):{}},compose:function(t,e,n){i.object(t)||(t={}),i.object(e)||(e={});var s=this.clone(e,n);for(var r in t)void 0!==t[r]&&void 0===e[r]&&(s[r]=t[r]);return Object.keys(s).length>0?s:void 0},diff:function(t,e){i.object(t)||(t={}),i.object(e)||(e={});var n=Object.keys(t).concat(Object.keys(e)).reduce(function(n,i){return t[i]!==e[i]&&(n[i]=void 0===e[i]?null:e[i]),n},{});return Object.keys(n).length>0?n:void 0},transform:function(t,e,n){if(!i.object(t))return e;if(!i.object(e))return void 0;if(!n)return e;var s=Object.keys(e).reduce(function(n,i){return void 0===t[i]&&(n[i]=e[i]),n},{});return Object.keys(s).length>0?s:void 0}},clone:function(t){var e=this.attributes.clone(t);return i.object(e.attributes)&&(e.attributes=this.attributes.clone(e.attributes,!0)),e},iterator:function(t){return new n(t)},length:function(t){return i.number(t["delete"])?t["delete"]:i.number(t.retain)?t.retain:i.string(t.insert)?t.insert.length:1}};n.prototype.hasNext=function(){return this.peekLength()<1/0},n.prototype.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var n=this.offset,r=s.length(e);if(t>=r-n?(t=r-n,this.index+=1,this.offset=0):this.offset+=t,i.number(e["delete"]))return{"delete":t};var o={};return e.attributes&&(o.attributes=e.attributes),i.number(e.retain)?o.retain=t:o.insert=i.string(e.insert)?e.insert.substr(n,t):e.insert,o}return{retain:1/0}},n.prototype.peekLength=function(){return this.ops[this.index]?s.length(this.ops[this.index])-this.offset:1/0},n.prototype.peekType=function(){return this.ops[this.index]?i.number(this.ops[this.index]["delete"])?"delete":i.number(this.ops[this.index].retain)?"retain":"insert":"retain"},e.exports=s},{"./is":6}],8:[function(t,e){var n=t("./delta");t("../package.json"),e.exports={Delta:n,name:"rich-text",uri:"http://sharejs.org/types/rich-text/v1",create:function(t){return new n(t)},apply:function(t,e){return t=new n(t),e=new n(e),t.compose(e)},compose:function(t,e){return t=new n(t),e=new n(e),t.compose(e)},diff:function(t,e){return t=new n(t),e=new n(e),t.diff(e)},transform:function(t,e,i){return t=new n(t),e=new n(e),e.transform(t,"left"===i)}}},{"../package.json":10,"./delta":5}],9:[function(t,e){function n(t,e){if(t==e)return t?[[d,t]]:[];var n=o(t,e),s=t.substring(0,n);t=t.substring(n),e=e.substring(n),n=a(t,e);var r=t.substring(t.length-n);t=t.substring(0,t.length-n),e=e.substring(0,e.length-n);var l=i(t,e);return s&&l.unshift([d,s]),r&&l.push([d,r]),c(l),l}function i(t,e){var i;if(!t)return[[u,e]];if(!e)return[[h,t]];var r=t.length>e.length?t:e,o=t.length>e.length?e:t,a=r.indexOf(o);if(-1!=a)return i=[[u,r.substring(0,a)],[d,o],[u,r.substring(a+o.length)]],t.length>e.length&&(i[0][0]=i[2][0]=h),i;if(1==o.length)return[[h,t],[u,e]];var c=l(t,e);if(c){var p=c[0],f=c[1],m=c[2],g=c[3],v=c[4],y=n(p,m),b=n(f,g);return y.concat([[d,v]],b)}return s(t,e)}function s(t,e){for(var n=t.length,i=e.length,s=Math.ceil((n+i)/2),o=s,a=2*s,l=new Array(a),c=new Array(a),d=0;a>d;d++)l[d]=-1,c[d]=-1;l[o+1]=0,c[o+1]=0;for(var p=n-i,f=p%2!=0,m=0,g=0,v=0,y=0,b=0;s>b;b++){for(var _=-b+m;b-g>=_;_+=2){var w,x=o+_;w=_==-b||_!=b&&l[x-1]<l[x+1]?l[x+1]:l[x-1]+1;for(var k=w-_;n>w&&i>k&&t.charAt(w)==e.charAt(k);)w++,k++;if(l[x]=w,w>n)g+=2;else if(k>i)m+=2;else if(f){var S=o+p-_;if(S>=0&&a>S&&-1!=c[S]){var C=n-c[S];if(w>=C)return r(t,e,w,k)}}}for(var T=-b+v;b-y>=T;T+=2){var C,S=o+T;C=T==-b||T!=b&&c[S-1]<c[S+1]?c[S+1]:c[S-1]+1;for(var E=C-T;n>C&&i>E&&t.charAt(n-C-1)==e.charAt(i-E-1);)C++,E++;if(c[S]=C,C>n)y+=2;else if(E>i)v+=2;else if(!f){var x=o+p-T;if(x>=0&&a>x&&-1!=l[x]){var w=l[x],k=o+w-x;if(C=n-C,w>=C)return r(t,e,w,k)}}}}return[[h,t],[u,e]]}function r(t,e,i,s){var r=t.substring(0,i),o=e.substring(0,s),a=t.substring(i),l=e.substring(s),c=n(r,o),h=n(a,l);return c.concat(h)}function o(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),s=i,r=0;s>n;)t.substring(r,s)==e.substring(r,s)?(n=s,r=n):i=s,s=Math.floor((i-n)/2+n);return s}function a(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),s=i,r=0;s>n;)t.substring(t.length-s,t.length-r)==e.substring(e.length-s,e.length-r)?(n=s,r=n):i=s,s=Math.floor((i-n)/2+n);return s}function l(t,e){function n(t,e,n){for(var i,s,r,l,c=t.substring(n,n+Math.floor(t.length/4)),h=-1,u="";-1!=(h=e.indexOf(c,h+1));){var d=o(t.substring(n),e.substring(h)),p=a(t.substring(0,n),e.substring(0,h));u.length<p+d&&(u=e.substring(h-p,h)+e.substring(h,h+d),i=t.substring(0,n-p),s=t.substring(n+d),r=e.substring(0,h-p),l=e.substring(h+d))}return 2*u.length>=t.length?[i,s,r,l,u]:null}var i=t.length>e.length?t:e,s=t.length>e.length?e:t;if(i.length<4||2*s.length<i.length)return null;var r,l=n(i,s,Math.ceil(i.length/4)),c=n(i,s,Math.ceil(i.length/2));if(!l&&!c)return null;r=c?l&&l[4].length>c[4].length?l:c:l;var h,u,d,p;t.length>e.length?(h=r[0],u=r[1],d=r[2],p=r[3]):(d=r[0],p=r[1],h=r[2],u=r[3]);var f=r[4];return[h,u,d,p,f]}function c(t){t.push([d,""]);for(var e,n=0,i=0,s=0,r="",l="";n<t.length;)switch(t[n][0]){case u:s++,l+=t[n][1],n++;break;case h:i++,r+=t[n][1],n++;break;case d:i+s>1?(0!==i&&0!==s&&(e=o(l,r),0!==e&&(n-i-s>0&&t[n-i-s-1][0]==d?t[n-i-s-1][1]+=l.substring(0,e):(t.splice(0,0,[d,l.substring(0,e)]),n++),l=l.substring(e),r=r.substring(e)),e=a(l,r),0!==e&&(t[n][1]=l.substring(l.length-e)+t[n][1],l=l.substring(0,l.length-e),r=r.substring(0,r.length-e))),0===i?t.splice(n-s,i+s,[u,l]):0===s?t.splice(n-i,i+s,[h,r]):t.splice(n-i-s,i+s,[h,r],[u,l]),n=n-i-s+(i?1:0)+(s?1:0)+1):0!==n&&t[n-1][0]==d?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,s=0,i=0,r="",l=""}""===t[t.length-1][1]&&t.pop();var p=!1;for(n=1;n<t.length-1;)t[n-1][0]==d&&t[n+1][0]==d&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),p=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),p=!0)),n++;p&&c(t)}var h=-1,u=1,d=0,p=n;p.INSERT=u,p.DELETE=h,p.EQUAL=d,e.exports=p},{}],10:[function(t,e){e.exports={name:"rich-text",version:"1.0.2",description:"Format for representing rich text documents and changes.",author:{name:"Jason Chen",email:"jhchen7@gmail.com"},homepage:"https://github.com/ottypes/rich-text",main:"index.js",dependencies:{"fast-diff":"~1.0.0"},devDependencies:{chai:"~1.9.1",coveralls:"~2.11.1",grunt:"~0.4.5",istanbul:"~0.3.0",lodash:"~2.4.1",mocha:"~1.21.4","ot-fuzzer":"~1.0.0"},engines:{node:">=0.10"},license:"MIT",scripts:{test:"grunt test"},repository:{type:"git",url:"https://github.com/ottypes/rich-text"},bugs:{url:"https://github.com/ottypes/rich-text/issues"},keywords:["rich text","ot","operational transform","delta"],readme:"# Rich Text [![Build Status](https://travis-ci.org/ottypes/rich-text.svg?branch=master)](http://travis-ci.org/ottypes/rich-text) [![Coverage Status](https://img.shields.io/coveralls/ottypes/rich-text.svg)](https://coveralls.io/r/ottypes/rich-text)\n\nA format for representing rich text documents and changes. It aimes to be intuitive and human readable with the ability to express any change necessary to deal with rich text. A document can also be expressed with this format--as the change from an empty document.\n\n## Quick Example\n\n```js\nvar delta = new Delta([\n  { insert: 'Gandalf', attributes: { bold: true } },\n  { insert: ' the ' },\n  { insert: 'Grey', attributes: { color: '#ccc' } }\n]);\n\n// Keep the first 12 characters, delete the next 4, and insert a white 'White'\nvar death = new Delta().retain(12)\n                       .delete(4)\n                       .insert('White', { color: '#fff' });\n// this produces:\n// {\n//   ops: [\n//     { retain: 12 },\n//     { delete: '4 ' },\n//     { insert: 'White', attributes: { color: '#fff' } }\n//   ]\n// }\n\ndelta.compose(death);\n// delta is now:\n// {\n//   ops: [\n//     { insert: 'Gandalf ', attributes: { bold: true } },\n//     { insert: 'the ' },\n//     { insert: 'White', attributes: { color: '#fff' } }\n//   ]\n// }\n\n```\n\nThis format is suitable for [Operational Transform](https://en.wikipedia.org/wiki/Operational_transformation) and defines several functions to support this use case.\n\n## Contents\n\n#### [Operations](#operations-1)\n\n- [insert](#insert-operation)\n- [delete](#delete-operation)\n- [retain](#retain-operation)\n\n#### [Deltas](#deltas-1)\n\n- [`constructor`](#constructor)\n- [`insert`](#insert)\n- [`delete`](#delete)\n- [`retain`](#retain)\n- [`length`](#length)\n- [`slice`](#slice)\n- [`compose`](#compose)\n- [`transform`](#transform)\n\n#### [Documents](#documents-1)\n\n- [`diff`](#diff)\n\n\n## Operations\n\nOperations describe a singular change to a document. They can be an [`insert`](#insert-operation), [`delete`](#delete-operation) or [`retain`](#retain-operation). Note operations do not take an index. They always describe the change at the current index. Use retains to \"keep\" or \"skip\" certain parts of the document.\n\n### Insert Operation\n\nInsert operations have an `insert` key defined. A String value represents inserting text. A Number value represents inserting an embed, with the value corresponding to an embed type (such as an image or video).\n\nHere we will use 1 to represent images and 2 to represent videos, but your application can choose whatever mapping is convenient.\n\nIn both cases of text and embeds, an optional `attributes` key can be defined with an Object to describe additonal formatting information. Formats can be changed by the [retain](#retain) operation.\n\n```js\n// Insert a bolded \"Text\"\n{ insert: \"Text\", attributes: { bold: true } }\n\n// Insert a link\n{ insert: \"Google\", attributes: { href: 'https://www.google.com' } }\n\n// Insert an image\n{\n  insert: 1,\n  attributes: {\n    alt: \"Lab Octocat\",\n    src: 'https://octodex.github.com/images/labtocat.png'\n  }\n}\n\n// Insert a video\n{\n  insert: 2,\n  attributes: {\n    src: \"https://www.youtube.com/watch?v=dMH0bHeiRNg\",\n    width: 420,\n    height: 315\n  }\n}\n```\n\n### Delete Operation\n\nDelete operations have a Number `delete` key defined representing the number of characters to delete. All embeds have a length of 1.\n\n```js\n// Delete the next 10 characters\n{ delete: 10 }\n```\n\n### Retain Operation\n\nRetain operations have a Number `retain` key defined representing the number of characters to keep (other libraries might use the name keep or skip). An optional `attributes` key can be defined with an Object to describe formatting changes to the character range. A value of null in the `attributes` Object represents removal of that key.\n\n*Note: It is not necessary to retain the last characters of a document as this is implied.*\n\n```js\n// Keep the next 5 characters\n{ retain: 5 }\n\n// Keep and bold the next 5 characters\n{ retain: 5, attributes: { bold: true } }\n\n// Keep and unbold the next 5 characters\n// More specifically, remove the bold key in the attributes Object\n// in the next 5 characters\n{ retain: 5, attributes: { bold: null } }\n```\n\n\n## Deltas\n\nA Delta is made up of an array of operations. Unless otherwise specified all methods are self modifying and return `this` for chainability.\n\nAll methods also maintain the property that Deltas are represented in the most compact form. For example two consecutive insert operations of plain text will be merged into one.\n\n---\n\n### constructor\n\nCreates a new Delta object.\n\n#### Methods\n\n- `new Delta()`\n- `new Delta(ops)`\n- `new Delta(delta)`\n\n#### Parameters\n\n- `ops` - Array of operations\n- `delta` - Object with an `ops` key set to an array of operations\n\n*Note: No validity/sanity check is performed when constructed with ops or delta. The new delta's internal ops array will also be assigned to ops or delta.ops without deep copying.*\n\n#### Example\n\n```js\nvar delta = new Delta([\n  { insert: 'Hello World' },\n  { insert: '!', attributes: { bold: true }}\n]);\n\nvar packet = JSON.stringify(delta);\n\nvar other = new Delta(JSON.parse(packet));\n\nvar chained = new Delta().insert('Hello World').insert('!', { bold: true });\n```\n\n---\n\n### insert()\n\nAppends an insert operation.\n\n#### Methods\n\n- `insert(text, attributes)`\n- `insert(embed, attributes)`\n\n#### Parameters\n\n- `text` - String representing text to insert\n- `embed` - Number representing embed type to insert\n- `attributes` - Optional attributes to apply\n\n#### Example\n\n```js\ndelta.insert('Text', { bold: true, color: '#ccc' });\ndelta.insert(1, { src: 'https://octodex.github.com/images/labtocat.png' });\n```\n\n---\n\n### delete()\n\nAppends a delete operation.\n\n#### Methods\n\n- `delete(length)`\n\n#### Parameters\n\n- `length` - Number of characters to delete\n\n#### Example\n\n```js\ndelta.delete(5);\n```\n\n---\n\n### retain()\n\nAppends a retain operation.\n\n#### Methods\n\n- `retain(length, attributes)`\n\n#### Parameters\n\n- `length` - Number of characters to retain\n- `attributes` - Optional attributes to apply\n\n#### Example\n\n```js\ndelta.retain(4).retain(5, { color: '#0c6' });\n```\n\n---\n\n### length()\n\nReturns length of Delta.\n\n#### Methods\n\n- `length()`\n\n#### Example\n\n```js\nnew Delta().insert('Hello').length();  // Returns 5\n\nnew Delta().insert('A').retain(2).delete(1) // Returns 4\n```\n\n---\n\n### slice()\n\nReturns copy of delta with subset of operations.\n\n#### Methods\n\n- `slice()`\n- `slice(start)`\n- `slice(start, end)`\n\n#### Parameters\n\n- `start` - Start index of subset, defaults to 0\n- `end` - End index of subset, defaults to rest of operations\n\n#### Example\n\n```js\nvar delta = new Delta().insert('Hello', { bold: true }).insert(' World');\n\n// {\n//   ops: [\n//     { insert: 'Hello', attributes: { bold: true } },\n//     { insert: ' World' }\n//   ]\n// }\nvar copy = delta.slice();\n\n// { ops: [{ insert: 'World' }] }\nvar world = delta.slice(6);\n\n// { ops: [{ insert: ' ' }] }\nvar space = delta.slice(5, 6);\n```\n\n---\n\n### compose()\n\nCompose with another Delta, i.e. merge the operations of another Delta. This method is self modifying.\n\n#### Methods\n\n- `compose(other)`\n\n#### Parameters\n\n- `other` - Delta to compose\n\n#### Example\n\n```js\nvar a = new Delta().insert('abc');\nvar b = new Delta().retain(1).delete(1);\n\na.compose(b);  // a == new Delta().insert('ac');\n```\n\n### transform()\n\nTransform given Delta against own operations.\n\n#### Methods\n\n- `transform(other, priority)`\n- `transform(index)` - Alias for [`transformPosition`](#tranformposition)\n\n#### Parameters\n\n- `other` - Delta to transform\n- `priority` - Boolean used to break ties\n\n#### Returns\n\n- `Delta` - transformed Delta\n\n#### Example\n\n```js\nvar a = new Delta().insert('a');\nvar b = new Delta().insert('b');\n\nb = a.transform(b, true);  // new Delta().retain(1).insert('b');\n```\n\n---\n\n### transformPosition()\n\nTransform an index against the delta. Useful for representing cursor/selection positions.\n\n#### Methods\n\n- `transformPosition(index)`\n\n#### Parameters\n\n- `index` - index to transform\n\n#### Returns\n\n- `Number` - transformed index\n\n#### Example\n\n```js\nvar index = 12;\nvar transformedIndex = delta.transformPosition(index);\n```\n\n\n## Documents\n\nA Delta with only insert operations can be used to represent a rich text document. This can be thought of as a Delta applied to an empty document.\n\n---\n\n### diff()\n\nCalculates the difference between two documents expressed as a Delta.\n\n#### Methods\n\n- `diff(other)`\n\n#### Parameters\n\n- `other` - Document Delta to diff against\n\n#### Returns\n\n- `Delta` - difference between the two documents\n\n#### Example\n\n```js\nvar a = new Delta().insert('Hello');\nvar b = new Delta().insert('Hello!');\n\nvar diff = a.diff(b);  // { ops: [{ retain: 5 }, { insert: '!' }] }\n```\n",readmeFilename:"README.md",_id:"rich-text@1.0.2",_from:"rich-text@~1.0.2"}},{}],11:[function(t,e){e.exports={name:"quilljs",version:"0.18.1",description:"Cross browser rich text editor",author:"Jason Chen <jhchen7@gmail.com>",homepage:"http://quilljs.com",contributors:["Byron Milligan <byronner@gmail.com>","Keegan Poppen <keegan.poppen@gmail.com>"],main:"index.js",dependencies:{eventemitter2:"~0.4.13",lodash:"~2.4.1","rich-text":"~1.0.2"},devDependencies:{async:"~0.9.0","coffee-script":"~1.8.0",coffeeify:"~0.7.0",glob:"~4.0.4",grunt:"~0.4.3","grunt-browserify":"~2.1.0","grunt-contrib-clean":"~0.6.0","grunt-contrib-coffee":"~0.12.0","grunt-contrib-compress":"~0.12.0","grunt-contrib-concat":"~0.5.0","grunt-contrib-connect":"~0.8.0","grunt-contrib-copy":"~0.7.0","grunt-contrib-stylus":"~0.18.0","grunt-contrib-uglify":"~0.6.0","grunt-karma":"~0.9.0","grunt-lodash":"~0.3.0","grunt-protractor-runner":"~1.1.0","grunt-sauce-connect-launcher":"~0.3.0",harp:"~0.14.0",istanbul:"~0.3.0",jquery:"~2.1.1",karma:"~0.12.0","karma-chrome-launcher":"~0.1.2","karma-coffee-preprocessor":"~0.2.1","karma-coverage":"~0.2.0","karma-firefox-launcher":"~0.1.3","karma-html2js-preprocessor":"~0.1.0","karma-jasmine":"~0.2.0","karma-phantomjs-launcher":"~0.1.2","karma-safari-launcher":"~0.1.1","karma-sauce-launcher":"~0.2.2","load-grunt-tasks":"~0.6.0",protractor:"~1.3.1",stylus:"~0.49.2",watchify:"~0.10.2"},engines:{node:">=0.10"},license:"BSD-3-Clause",repository:{type:"git",url:"https://github.com/quilljs/quill"},bugs:{url:"https://github.com/quilljs/quill/issues"},scripts:{prepublish:"grunt coffee:quill",postpublish:"grunt clean:coffee",test:"grunt test"},keywords:["editor","rich text","wysiwyg"]}},{}],12:[function(t,e){var n,i,s,r,o,a,l,c;c=t("lodash"),n=t("rich-text").Delta,l=t("../lib/dom"),s=t("./format"),r=t("./line"),o=t("../lib/linked-list"),a=t("../lib/normalizer"),i=function(){function t(t,e){this.root=t,null==e&&(e={}),this.formats={},c.each(e.formats,c.bind(this.addFormat,this)),this.setHTML(this.root.innerHTML)}return t.prototype.addFormat=function(t,e){return c.isObject(e)||(e=s.FORMATS[t]),null!=this.formats[t]&&console.warn("Overwriting format",t,this.formats[t]),this.formats[t]=new s(this.root.ownerDocument,e)},t.prototype.appendLine=function(t){return this.insertLineBefore(t,null)},t.prototype.findLeafAt=function(t,e){var n,i,s;return s=this.findLineAt(t),n=s[0],i=s[1],null!=n?n.findLeafAt(i,e):[null,i]},t.prototype.findLine=function(t){for(var e;null!=t&&null==l.BLOCK_TAGS[t.tagName];)t=t.parentNode;return e=null!=t?this.lineMap[t.id]:null,(null!=e?e.node:void 0)===t?e:null},t.prototype.findLineAt=function(t){var e,n;if(!(this.lines.length>0))return[null,t];if(n=this.toDelta().length(),t===n)return[this.lines.last,this.lines.last.length];if(t>n)return[null,t-n];for(e=this.lines.first;null!=e;){if(t<e.length)return[e,t];t-=e.length,e=e.next}return[null,t]},t.prototype.insertLineBefore=function(t,e){var n;return n=new r(this,t),null!=e?(l(t.parentNode).isElement()||this.root.insertBefore(t,e.node),this.lines.insertAfter(e.prev,n)):(l(t.parentNode).isElement()||this.root.appendChild(t),this.lines.append(n)),this.lineMap[n.id]=n,n},t.prototype.mergeLines=function(t,e){return e.length>1&&(1===t.length&&l(t.leaves.last.node).remove(),c.each(l(e.node).childNodes(),function(e){return e.tagName!==l.DEFAULT_BREAK_TAG?t.node.appendChild(e):void 0})),this.removeLine(e),t.rebuild()},t.prototype.optimizeLines=function(){return c.each(this.lines.toArray(),function(t){return t.optimize(),!0})},t.prototype.rebuild=function(){var t,e,n;for(e=this.lines.toArray(),t=this.root.firstChild,null!=t&&null!=l.LIST_TAGS[t.tagName]&&(t=t.firstChild),c.each(e,function(e){return function(n){for(var i,s;n.node!==t;){if(n.node.parentNode!==e.root&&(null!=(s=n.node.parentNode)?s.parentNode:void 0)!==e.root)return e.removeLine(n);t=a.normalizeLine(t),i=e.insertLineBefore(t,n),t=l(t).nextLineNode(e.root)}return n.outerHTML!==t.outerHTML&&(n.node=a.normalizeLine(n.node),n.rebuild()),t=l(t).nextLineNode(e.root)}}(this)),n=[];null!=t;)t=a.normalizeLine(t),this.appendLine(t),n.push(t=l(t).nextLineNode(this.root));return n},t.prototype.removeLine=function(t){return null!=t.node.parentNode&&(l.LIST_TAGS[t.node.parentNode.tagName]&&1===t.node.parentNode.childNodes.length?l(t.node.parentNode).remove():l(t.node).remove()),delete this.lineMap[t.id],this.lines.remove(t)},t.prototype.setHTML=function(t){return t=a.stripComments(t),t=a.stripWhitespace(t),this.root.innerHTML=t,this.lines=new o,this.lineMap={},this.rebuild()},t.prototype.splitLine=function(t,e){var n,i,s,r;return e=Math.min(e,t.length-1),r=l(t.node).split(e,!0),n=r[0],i=r[1],t.node=n,t.rebuild(),s=this.insertLineBefore(i,t.next),s.formats=c.clone(t.formats),s.resetContent(),s},t.prototype.toDelta=function(){var t,e;return e=this.lines.toArray(),t=new n,e.forEach(function(e){return e.delta.ops.forEach(function(e){return t.push(e)})}),t},t}(),e.exports=i},{"../lib/dom":21,"../lib/linked-list":22,"../lib/normalizer":23,"./format":14,"./line":16,lodash:"M4+//f","rich-text":4}],13:[function(t,e){var n,i,s,r,o,a,l;l=t("lodash"),a=t("../lib/dom"),n=t("./document"),s=t("./line"),r=t("./renderer"),o=t("./selection"),i=function(){function t(t,e,i){this.iframeContainer=t,this.quill=e,this.options=null!=i?i:{},this.renderer=new r(this.iframeContainer,this.options),a(this.iframeContainer).on("focus",this.focus.bind(this)),this.root=this.renderer.root,this.doc=new n(this.root,this.options),this.delta=this.doc.toDelta(),this.selection=new o(this.doc,this.renderer.iframe,this.quill),this.timer=setInterval(l.bind(this.checkUpdate,this),this.options.pollInterval),this.options.readOnly||this.enable()}return t.sources={API:"api",SILENT:"silent",USER:"user"},t.prototype.disable=function(){return this.enable(!1)},t.prototype.enable=function(t){return null==t&&(t=!0),this.root.setAttribute("contenteditable",t)},t.prototype.applyDelta=function(e,n){var i;return i=this._update(),i&&(e=i.transform(e,!0),i=e.transform(i,!1)),e.ops.length>0&&(e=this._trackDelta(function(t){return function(){var n;return n=0,l.each(e.ops,function(e){return l.isString(e.insert)?(t._insertAt(n,e.insert,e.attributes),n+=e.insert.length):l.isNumber(e.insert)?(t._insertAt(n,a.EMBED_TEXT,e.attributes),n+=1):l.isNumber(e["delete"])?t._deleteAt(n,e["delete"]):l.isNumber(e.retain)?(l.each(e.attributes,function(i,s){return t._formatAt(n,e.retain,s,i)}),n+=e.retain):void 0}),t.selection.shiftAfter(0,0,l.bind(t.doc.optimizeLines,t.doc))}}(this)),this.delta=this.doc.toDelta(),this.innerHTML=this.root.innerHTML,e&&n!==t.sources.SILENT&&this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,e,n)),i&&i.ops.length>0&&n!==t.sources.SILENT?this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,i,t.sources.USER):void 0},t.prototype.checkUpdate=function(e){var n;return null==e&&(e="user"),null==this.renderer.iframe.parentNode||null==this.root.parentNode?clearInterval(this.timer):(n=this._update(),n&&(this.delta.compose(n),this.quill.emit(this.quill.constructor.events.TEXT_CHANGE,n,e)),n&&(e=t.sources.SILENT),this.selection.update(e))},t.prototype.focus=function(){return a.isIE(11)&&this.selection.setRange(this.selection.range),a.isIOS()&&this.renderer.iframe.focus(),this.root.focus()},t.prototype.getDelta=function(){return this.delta},t.prototype._deleteAt=function(t,e){return 0>=e?void 0:this.selection.shiftAfter(t,-1*e,function(n){return function(){var i,s,r,o,a,l,c;for(c=n.doc.findLineAt(t),r=c[0],l=c[1],i=r,o=r.length-l<=e&&l>0;null!=i&&e>0;)a=i.next,s=Math.min(i.length-l,e),0===l&&e>=i.length?n.doc.removeLine(i):i.deleteText(l,s),e-=s,i=a,l=0;return o&&r.next?n.doc.mergeLines(r,r.next):void 0}}(this))},t.prototype._formatAt=function(t,e,n,i){return this.selection.shiftAfter(t,0,function(s){return function(){var r,o,a,l,c;for(l=s.doc.findLineAt(t),o=l[0],a=l[1],c=[];null!=o&&e>0;)r=Math.min(e,o.length-a-1),o.formatText(a,r,n,i),e-=r,e>0&&o.format(n,i),e-=1,a=0,c.push(o=o.next);return c}}(this))},t.prototype._insertAt=function(t,e,n){return null==n&&(n={}),this.selection.shiftAfter(t,e.length,function(i){return function(){var s,r,o,c;return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),r=e.split("\n"),c=i.doc.findLineAt(t),s=c[0],o=c[1],l.each(r,function(t,e){var c;return null==s||s.length<=o?(e<r.length-1||t.length>0)&&(s=i.doc.appendLine(i.root.ownerDocument.createElement(a.DEFAULT_BLOCK_TAG)),o=0,s.insertText(o,t,n),s.format(n),c=null):(s.insertText(o,t,n),e<r.length-1&&(c=i.doc.splitLine(s,o+t.length),l.each(l.defaults({},n,s.formats),function(t,e){return s.format(e,n[e])}),o=0)),s=c})}}(this))},t.prototype._trackDelta=function(t){var e,n;return t(),n=this.doc.toDelta(),e=this.delta.diff(n)},t.prototype._update=function(){var t;return this.innerHTML===this.root.innerHTML?!1:(t=this._trackDelta(function(t){return function(){return t.selection.preserve(l.bind(t.doc.rebuild,t.doc)),t.selection.shiftAfter(0,0,l.bind(t.doc.optimizeLines,t.doc))}}(this)),this.innerHTML=this.root.innerHTML,t.ops.length>0?t:!1)},t}(),e.exports=i},{"../lib/dom":21,"./document":12,"./line":16,"./renderer":17,"./selection":18,lodash:"M4+//f"}],14:[function(t,e){var n,i,s;s=t("lodash"),i=t("../lib/dom"),n=function(){function t(t,e){this.document=t,this.config=e}return t.types={LINE:"line"},t.FORMATS={bold:{tag:"B",prepare:"bold"},italic:{tag:"I",prepare:"italic"},underline:{tag:"U",prepare:"underline"},strike:{tag:"S",prepare:"strikeThrough"},color:{style:"color","default":"rgb(0, 0, 0)",prepare:"foreColor"},background:{style:"backgroundColor","default":"rgb(255, 255, 255)",prepare:"backColor"},font:{style:"fontFamily","default":"'Helvetica', 'Arial', sans-serif",prepare:"fontName"},size:{style:"fontSize","default":"13px",prepare:function(t,e){return t.execCommand("fontSize",!1,i.convertFontSize(e))}},link:{tag:"A",attribute:"href"},image:{tag:"IMG",attribute:"src"},align:{type:t.types.LINE,style:"textAlign","default":"left"},bullet:{type:t.types.LINE,exclude:"list",parentTag:"UL",tag:"LI"},list:{type:t.types.LINE,exclude:"bullet",parentTag:"OL",tag:"LI"}},t.prototype.add=function(e,n){var r,o,a,l,c;return n?this.value(e)===n?e:(s.isString(this.config.parentTag)&&(a=this.document.createElement(this.config.parentTag),i(e).wrap(a),e.parentNode.tagName===(null!=(l=e.parentNode.previousSibling)?l.tagName:void 0)&&i(e.parentNode.previousSibling).merge(e.parentNode),e.parentNode.tagName===(null!=(c=e.parentNode.nextSibling)?c.tagName:void 0)&&i(e.parentNode).merge(e.parentNode.nextSibling)),s.isString(this.config.tag)&&(r=this.document.createElement(this.config.tag),null!=i.VOID_TAGS[r.tagName]?(null!=e.parentNode&&i(e).replace(r),e=r):this.isType(t.types.LINE)?e=i(e).switchTag(this.config.tag):(i(e).wrap(r),e=r)),(s.isString(this.config.style)||s.isString(this.config.attribute)||s.isString(this.config["class"]))&&(s.isString(this.config["class"])&&(e=this.remove(e)),i(e).isTextNode()&&(o=this.document.createElement(i.DEFAULT_INLINE_TAG),i(e).wrap(o),e=o),s.isString(this.config.style)&&n!==this.config["default"]&&(e.style[this.config.style]=n),s.isString(this.config.attribute)&&e.setAttribute(this.config.attribute,n),s.isString(this.config["class"])&&i(e).addClass(this.config["class"]+n)),e):this.remove(e)},t.prototype.isType=function(t){return t===this.config.type},t.prototype.match=function(t){var e,n,r,o,a;if(!i(t).isElement())return!1;if(s.isString(this.config.parentTag)&&(null!=(o=t.parentNode)?o.tagName:void 0)!==this.config.parentTag)return!1;if(s.isString(this.config.tag)&&t.tagName!==this.config.tag)return!1;if(s.isString(this.config.style)&&(!t.style[this.config.style]||t.style[this.config.style]===this.config["default"]))return!1;if(s.isString(this.config.attribute)&&!t.hasAttribute(this.config.attribute))return!1;if(s.isString(this.config["class"])){for(a=i(t).classes(),n=0,r=a.length;r>n;n++)if(e=a[n],0===e.indexOf(this.config["class"]))return!0;return!1}return!0},t.prototype.prepare=function(t){return s.isString(this.config.prepare)?this.document.execCommand(this.config.prepare,!1,t):s.isFunction(this.config.prepare)?this.config.prepare(this.document,t):void 0},t.prototype.remove=function(e){var n,r,o,a;if(!this.match(e))return e;if(s.isString(this.config.style)&&(e.style[this.config.style]="",e.getAttribute("style")||e.removeAttribute("style")),s.isString(this.config.attribute)&&e.removeAttribute(this.config.attribute),s.isString(this.config["class"])){for(a=i(e).classes(),r=0,o=a.length;o>r;r++)n=a[r],0===n.indexOf(this.config["class"])&&i(e).removeClass(n);e.getAttribute("class")||e.removeAttribute("class")}return s.isString(this.config.tag)&&(this.isType(t.types.LINE)?(s.isString(this.config.parentTag)&&(null!=e.previousSibling&&i(e).splitAncestors(e.parentNode.parentNode),null!=e.nextSibling&&i(e.nextSibling).splitAncestors(e.parentNode.parentNode)),e=i(e).switchTag(i.DEFAULT_BLOCK_TAG)):(e=i(e).switchTag(i.DEFAULT_INLINE_TAG),null!=i.EMBED_TAGS[this.config.tag]&&i(e).text(i.EMBED_TEXT))),s.isString(this.config.parentTag)&&i(e.parentNode).unwrap(),e.tagName!==i.DEFAULT_INLINE_TAG||e.hasAttributes()||(e=i(e).unwrap()),e},t.prototype.value=function(t){var e,n,r,o;if(!this.match(t))return void 0;if(s.isString(this.config.attribute))return t.getAttribute(this.config.attribute)||void 0;if(s.isString(this.config.style))return t.style[this.config.style]||void 0;
if(s.isString(this.config["class"])){for(o=i(t).classes(),n=0,r=o.length;r>n;n++)if(e=o[n],0===e.indexOf(this.config["class"]))return e.slice(this.config["class"].length)}else if(s.isString(this.config.tag))return!0;return void 0},t}(),e.exports=n},{"../lib/dom":21,lodash:"M4+//f"}],15:[function(t,e){var n,i,s,r,o,a={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=t("lodash"),r=t("../lib/dom"),n=t("./format"),s=t("../lib/linked-list"),i=function(t){function e(t,n){this.node=t,this.formats=o.clone(n),this.id=o.uniqueId(e.ID_PREFIX),this.text=r(this.node).text(),this.length=this.text.length}return l(e,t),e.ID_PREFIX="leaf-",e.isLeafNode=function(t){return r(t).isTextNode()||null==t.firstChild},e.prototype.deleteText=function(t,e){var n;return e>0?(this.text=this.text.slice(0,t)+this.text.slice(t+e),this.length=this.text.length,null!=r.EMBED_TAGS[this.node.tagName]?(n=this.node.ownerDocument.createTextNode(this.text),this.node=r(this.node).replace(n)):r(this.node).text(this.text)):void 0},e.prototype.insertText=function(t,e){var n;return this.text=this.text.slice(0,t)+e+this.text.slice(t),r(this.node).isTextNode()?r(this.node).text(this.text):(n=this.node.ownerDocument.createTextNode(e),this.node.tagName===r.DEFAULT_BREAK_TAG?this.node=r(this.node).replace(n):(this.node.appendChild(n),this.node=n)),this.length=this.text.length},e}(s.Node),e.exports=i},{"../lib/dom":21,"../lib/linked-list":22,"./format":14,lodash:"M4+//f"}],16:[function(t,e){var n,i,s,r,o,a,l,c,h={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var i in e)h.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};c=t("lodash"),n=t("rich-text").Delta,l=t("../lib/dom"),i=t("./format"),s=t("./leaf"),r=t("./line"),o=t("../lib/linked-list"),a=t("../lib/normalizer"),r=function(t){function e(t,n){this.doc=t,this.node=n,this.id=c.uniqueId(e.ID_PREFIX),this.formats={},l(this.node).addClass(e.CLASS_NAME),this.rebuild(),e.__super__.constructor.call(this,this.node)}return u(e,t),e.CLASS_NAME="line",e.ID_PREFIX="line-",e.prototype.buildLeaves=function(t,e){return c.each(l(t).childNodes(),function(t){return function(n){var r;return n=a.normalizeNode(n),r=c.clone(e),c.each(t.doc.formats,function(t,e){return!t.isType(i.types.LINE)&&t.match(n)?r[e]=t.value(n):void 0}),s.isLeafNode(n)?t.leaves.append(new s(n,r)):t.buildLeaves(n,r)}}(this))},e.prototype.deleteText=function(t,e){var n,i,s;if(e>0){for(s=this.findLeafAt(t),i=s[0],t=s[1];null!=i&&e>0;)n=Math.min(e,i.length-t),i.deleteText(t,n),e-=n,i=i.next,t=0;return this.rebuild()}},e.prototype.findLeaf=function(t){var e;for(e=this.leaves.first;null!=e;){if(e.node===t)return e;e=e.next}return null},e.prototype.findLeafAt=function(t,e){var n;if(null==e&&(e=!1),t>=this.length-1)return[this.leaves.last,this.leaves.last.length];for(n=this.leaves.first;null!=n;){if(t<n.length||t===n.length&&e)return[n,t];t-=n.length,n=n.next}return[this.leaves.last,t-this.leaves.last.length]},e.prototype.format=function(t,e){var n;return c.isObject(t)?n=t:(n={},n[t]=e),c.each(n,function(t){return function(e,n){var s,r;return r=t.doc.formats[n],r.isType(i.types.LINE)&&(r.config.exclude&&t.formats[r.config.exclude]&&(s=t.doc.formats[r.config.exclude],null!=s&&(t.node=s.remove(t.node),delete t.formats[r.config.exclude])),t.node=r.add(t.node,e)),e?t.formats[n]=e:delete t.formats[n]}}(this)),this.resetContent()},e.prototype.formatText=function(t,e,n,s){var r,o,a,c,h,u,d,p,f,m;if(p=this.findLeafAt(t),o=p[0],a=p[1],r=this.doc.formats[n],null!=r&&r.config.type!==i.types.LINE){for(;null!=o&&e>0;){if(h=o.next,s&&o.formats[n]!==s||!s&&null!=o.formats[n]){if(d=o.node,null!=o.formats[n])for(l(d).splitAncestors(this.node);!r.match(d);)d=d.parentNode;a>0&&(f=l(d).split(a),c=f[0],d=f[1]),o.length>a+e&&(m=l(d).split(e),d=m[0],u=m[1]),r.add(d,s)}e-=o.length-a,a=0,o=h}return this.rebuild()}},e.prototype.insertText=function(t,e,n){var i,s,r,o,a,h,u;return null==n&&(n={}),e.length>0?(h=this.findLeafAt(t),i=h[0],s=h[1],c.isEqual(i.formats,n)?(i.insertText(s,e),this.resetContent()):(o=c.reduce(n,function(t){return function(e,n,i){return t.doc.formats[i].add(e,n)}}(this),this.node.ownerDocument.createTextNode(e)),u=l(i.node).split(s),a=u[0],r=u[1],r&&(r=l(r).splitAncestors(this.node).get()),this.node.insertBefore(o,r),this.rebuild())):void 0},e.prototype.optimize=function(){return a.optimizeLine(this.node),this.rebuild()},e.prototype.rebuild=function(t){return null==t&&(t=!1),!t&&null!=this.outerHTML&&this.outerHTML===this.node.outerHTML&&c.all(this.leaves.toArray(),function(t){return function(e){return l(e.node).isAncestor(t.node)}}(this))?!1:(this.node=a.normalizeNode(this.node),0!==l(this.node).length()||this.node.querySelector(l.DEFAULT_BREAK_TAG)||this.node.appendChild(this.node.ownerDocument.createElement(l.DEFAULT_BREAK_TAG)),this.leaves=new o,this.formats=c.reduce(this.doc.formats,function(t){return function(e,n,s){return n.isType(i.types.LINE)&&(n.match(t.node)?e[s]=n.value(t.node):delete e[s]),e}}(this),this.formats),this.buildLeaves(this.node,{}),this.resetContent(),!0)},e.prototype.resetContent=function(){return this.node.id!==this.id&&(this.node.id=this.id),this.outerHTML=this.node.outerHTML,this.length=1,this.delta=new n,this.leaves.toArray().forEach(function(t){return function(e){return t.length+=e.length,null!=l.EMBED_TAGS[e.node.tagName]?t.delta.insert(1,e.formats):t.delta.insert(e.text,e.formats)}}(this)),this.delta.insert("\n",this.formats)},e}(o.Node),e.exports=r},{"../lib/dom":21,"../lib/linked-list":22,"../lib/normalizer":23,"./format":14,"./leaf":15,"./line":16,lodash:"M4+//f","rich-text":4}],17:[function(t,e){var n,i,s,r,o,a,l;l=t("lodash"),o=t("../lib/dom"),s=t("../lib/normalizer"),n={html:{height:"100%",width:"100%"},body:{"box-sizing":"border-box",cursor:"text","font-family":"'Helvetica', 'Arial', sans-serif","font-size":"13px",height:"100%","line-height":"1.42",margin:"0px","overflow-x":"hidden","overflow-y":"auto",padding:"12px 15px"},".editor-container":{height:"100%",outline:"none",position:"relative","tab-size":"4","white-space":"pre-wrap"},".editor-container div":{margin:"0",padding:"0"},".editor-container a":{"text-decoration":"underline"},".editor-container b":{"font-weight":"bold"},".editor-container i":{"font-style":"italic"},".editor-container s":{"text-decoration":"line-through"},".editor-container u":{"text-decoration":"underline"},".editor-container img":{"max-width":"100%"},".editor-container blockquote":{margin:"0 0 0 2em",padding:"0"},".editor-container ol":{margin:"0 0 0 2em",padding:"0","list-style-type":"decimal"},".editor-container ul":{margin:"0 0 0 2em",padding:"0","list-style-type":"disc"}},i=["decimal","lower-alpha","lower-roman"],a=".editor-container ol > li",l.each([1,2,3,4,5,6,7,8,9],function(t){return a+=" > ol",n[a]={"list-style-type":i[t%3]},a+=" > li"}),o.isIE(10)&&(n[o.DEFAULT_BREAK_TAG]={display:"none"}),r=function(){function t(e,i){var s;this.container=e,this.options=null!=i?i:{},this.container.innerHTML="",s=t.buildFrame(this.container),this.root=s[0],this.iframe=s[1],this.root.setAttribute("id",this.options.id),this.iframe.setAttribute("name",this.options.id),o(this.root).addClass("editor-container"),o(this.container).addClass("ql-container"),o.isIOS()&&o(this.container).styles({overflow:"auto","-webkit-overflow-scrolling":"touch"}),this.addStyles(n),null!=this.options.styles&&l.defer(l.bind(this.addStyles,this,this.options.styles))}return t.objToCss=function(t){return l.map(t,function(t,e){var n;return n=l.map(t,function(t,e){return""+e+": "+t+";"}).join(" "),""+e+" { "+n+" }"}).join("\n")},t.buildFrame=function(t){var e,n,i;return e=t.ownerDocument.createElement("iframe"),o(e).attributes({frameBorder:"0",height:"100%",width:"100%",title:"Quill Rich Text Editor",role:"presentation"}),t.appendChild(e),n=e.contentWindow.document,n.open(),n.write("<!DOCTYPE html>"),n.close(),i=n.createElement("div"),n.body.appendChild(i),[i,e]},t.prototype.addContainer=function(t,e){var n,i;return null==e&&(e=!1),i=e?this.root:null,n=this.root.ownerDocument.createElement("div"),o(n).addClass(t),this.root.parentNode.insertBefore(n,i),n},t.prototype.addStyles=function(e){var n,i;return"object"==typeof e?(i=this.root.ownerDocument.createElement("style"),i.type="text/css",e=t.objToCss(e),i.appendChild(this.root.ownerDocument.createTextNode(e)),this.root.ownerDocument.head.appendChild(i)):"string"==typeof e?(n=this.root.ownerDocument.createElement("link"),o(n).attributes({type:"text/css",rel:"stylesheet",href:e}),this.root.ownerDocument.head.appendChild(n)):void 0},t}(),e.exports=r},{"../lib/dom":21,"../lib/normalizer":23,lodash:"M4+//f"}],18:[function(t,e){var n,i,s,r,o,a;a=t("lodash"),o=t("../lib/dom"),n=t("./leaf"),i=t("../lib/normalizer"),s=t("../lib/range"),r=function(){function t(t,e,n){this.doc=t,this.iframe=e,this.emitter=n,this.document=this.doc.root.ownerDocument,this.focus=!1,this.range=new s(0,0),this.nullDelay=!1,this.update("silent")}return t.prototype.checkFocus=function(){return this.document.activeElement===this.doc.root&&document.activeElement===this.iframe},t.prototype.getRange=function(t){var e,n,i;return null==t&&(t=!1),this.checkFocus()?(n=this._getNativeRange(),null==n?null:(i=this._positionToIndex(n.startContainer,n.startOffset),e=n.startContainer===n.endContainer&&n.startOffset===n.endOffset?i:this._positionToIndex(n.endContainer,n.endOffset),new s(Math.min(i,e),Math.max(i,e)))):t?this.range:null},t.prototype.preserve=function(t){var e,n,i,s,r,o,a,l,c;return i=this._getNativeRange(),null!=i&&this.checkFocus()?(o=this._encodePosition(i.startContainer,i.startOffset),s=o[0],r=o[1],a=this._encodePosition(i.endContainer,i.endOffset),e=a[0],n=a[1],t(),l=this._decodePosition(s,r),s=l[0],r=l[1],c=this._decodePosition(e,n),e=c[0],n=c[1],this._setNativeRange(s,r,e,n)):t()},t.prototype.setRange=function(t,e){var n,i,s,r,o,a,l;return null!=t?(o=this._indexToPosition(t.start),s=o[0],r=o[1],t.isCollapsed()?(a=[s,r],n=a[0],i=a[1]):(l=this._indexToPosition(t.end),n=l[0],i=l[1]),this._setNativeRange(s,r,n,i)):this._setNativeRange(null),this.update(e)},t.prototype.shiftAfter=function(t,e,n){var i;return i=this.getRange(),n(),null!=i?(i.shift(t,e),this.setRange(i,"silent")):void 0},t.prototype.update=function(t){var e,n,i,r;return n=this.checkFocus(),i=this.getRange(!0),e="silent"!==t&&(!s.compare(i,this.range)||n!==this.focus),r=n?i:null,null!==r||"user"!==t||this.nullDelay?(this.nullDelay=!1,this.range=i,this.focus=n,e?this.emitter.emit(this.emitter.constructor.events.SELECTION_CHANGE,r,t):void 0):this.nullDelay=!0},t.prototype._decodePosition=function(t,e){var n;return o(t).isElement()&&(n=a.indexOf(o(t.parentNode).childNodes(),t),e+=n,t=t.parentNode),[t,e]},t.prototype._encodePosition=function(t,e){for(var n;;){if(o(t).isTextNode()||t.tagName===o.DEFAULT_BREAK_TAG||null!=o.EMBED_TAGS[t.tagName])return[t,e];if(e<t.childNodes.length)t=t.childNodes[e],e=0;else{if(0===t.childNodes.length)return null==i.TAGS[t.tagName]&&(n=t.ownerDocument.createTextNode(""),t.appendChild(n),t=n),[t,0];if(t=t.lastChild,!o(t).isElement())return[t,o(t).length()];if(t.tagName===o.DEFAULT_BREAK_TAG||null!=o.EMBED_TAGS[t.tagName])return[t,1];e=t.childNodes.length}}},t.prototype._getNativeRange=function(){var t,e;return e=this.document.getSelection(),(null!=e?e.rangeCount:void 0)>0&&(t=e.getRangeAt(0),o(t.startContainer).isAncestor(this.doc.root,!0)&&(t.startContainer===t.endContainer||o(t.endContainer).isAncestor(this.doc.root,!0)))?t:null},t.prototype._indexToPosition=function(t){var e,n,i;return 0===this.doc.lines.length?[this.doc.root,0]:(i=this.doc.findLeafAt(t,!0),e=i[0],n=i[1],this._decodePosition(e.node,n))},t.prototype._positionToIndex=function(t,e){var n,i,s,r,o,a;if(a=this._encodePosition(t,e),i=a[0],e=a[1],r=this.doc.findLine(i),null==r)return 0;for(n=r.findLeaf(i),o=0;null!=r.prev;)r=r.prev,o+=r.length;if(null==n)return o;for(s=0;null!=n.prev;)n=n.prev,s+=n.length;return o+s+e},t.prototype._setNativeRange=function(t,e,n,i){var s,r;return(r=this.document.getSelection())?null==t?(r.removeAllRanges(),this.doc.root.blur()):(this.checkFocus()||this.doc.root.focus(),s=this._getNativeRange(),null!=s&&t===s.startContainer&&e===s.startOffset&&n===s.endContainer&&i===s.endOffset||(r.removeAllRanges(),s=this.document.createRange(),s.setStart(t,e),s.setEnd(n,i),r.addRange(s),this.checkFocus())?void 0:this.doc.root.focus()):void 0},t}(),e.exports=r},{"../lib/dom":21,"../lib/normalizer":23,"../lib/range":25,"./leaf":15,lodash:"M4+//f"}],19:[function(t,e){t("./modules/authorship"),t("./modules/image-tooltip"),t("./modules/keyboard"),t("./modules/link-tooltip"),t("./modules/multi-cursor"),t("./modules/paste-manager"),t("./modules/toolbar"),t("./modules/tooltip"),t("./modules/undo-manager"),e.exports=t("./quill")},{"./modules/authorship":26,"./modules/image-tooltip":27,"./modules/keyboard":28,"./modules/link-tooltip":29,"./modules/multi-cursor":30,"./modules/paste-manager":31,"./modules/toolbar":32,"./modules/tooltip":33,"./modules/undo-manager":34,"./quill":35}],20:[function(t,e){var n,i,s,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};s=t("./dom"),i=t("./picker"),n=function(t){function e(){e.__super__.constructor.apply(this,arguments),s(this.container).addClass("ql-color-picker")}return o(e,t),e.prototype.buildItem=function(t,n,i){var s;return s=e.__super__.buildItem.call(this,t,n,i),s.style.backgroundColor=n.value,s},e}(i),e.exports=n},{"./dom":21,"./picker":24}],21:[function(t,e){var n,i,s,r,o,a=function(t,e){return function(){return t.apply(e,arguments)}},l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=t("lodash"),r=null,i=function(){function t(t){this.node=t,this.trigger=a(this.trigger,this)}return t.prototype.addClass=function(t){return this.hasClass(t)?void 0:(null!=this.node.classList?this.node.classList.add(t):null!=this.node.className&&(this.node.className=(this.node.className+" "+t).trim()),this)},t.prototype.attributes=function(t){var e,n,i,s,r,a;if(t)return o.each(t,function(t){return function(e,n){return t.node.setAttribute(n,e)}}(this)),this;if(null==this.node.attributes)return{};for(t={},a=this.node.attributes,n=s=0,r=a.length;r>s;n=++s)i=a[n],e=this.node.attributes[n],t[e.name]=e.value;return t},t.prototype.child=function(t){var e,n;for(e=this.node.firstChild,n=s(e).length();null!=e&&!(n>t);)t-=n,e=e.nextSibling,n=s(e).length();return null==e&&(e=this.node.lastChild,t=s(e).length()),[e,t]},t.prototype.childNodes=function(){return o.map(this.node.childNodes)},t.prototype.classes=function(){return this.node.className.split(/\s+/)},t.prototype.descendants=function(){return o.map(this.node.getElementsByTagName("*"))},t.prototype.get=function(){return this.node},t.prototype.hasClass=function(t){return null!=this.node.classList?this.node.classList.contains(t):null!=this.node.className?o.indexOf(this.classes(),t)>-1:!1},t.prototype.isAncestor=function(t,e){var n;if(null==e&&(e=!1),t===this.node)return e;for(n=this.node;n;){if(n===t)return!0;n=n.parentNode}return!1},t.prototype.isElement=function(){var t;return(null!=(t=this.node)?t.nodeType:void 0)===s.ELEMENT_NODE},t.prototype.isTextNode=function(){var t;return(null!=(t=this.node)?t.nodeType:void 0)===s.TEXT_NODE},t.prototype.length=function(){var t;return null==this.node?0:(t=this.text().length,this.isElement()&&(t+=this.node.querySelectorAll(o.keys(s.EMBED_TAGS).join(",")).length),t)},t.prototype.merge=function(t){var e;return e=s(t),this.isElement()?(e.moveChildren(this.node),this.normalize()):this.text(this.text()+e.text()),e.remove(),this},t.prototype.moveChildren=function(t){return o.each(this.childNodes(),function(e){return t.appendChild(e)}),this},t.prototype.nextLineNode=function(t){var e;return e=this.node.nextSibling,null==e&&this.node.parentNode!==t&&(e=this.node.parentNode.nextSibling),null!=e&&null!=s.LIST_TAGS[e.tagName]&&(e=e.firstChild),e},t.prototype.normalize=function(){var t,e,n,i;for(e=this.node.firstChild;null!=e;)i=e.nextSibling,t=s(e),null!=i&&s(i).isTextNode()&&(0===t.text().length?t.remove():t.isTextNode()&&(n=i.nextSibling,t.merge(i),i=n)),e=i;return this},t.prototype.on=function(t,e){return this.node.addEventListener(t,function(n){return function(i){var s,o;return s=!r||"keydown"!==t&&"keyup"!==t?i:r,o=e.call(n.node,s),o||(i.preventDefault(),i.stopPropagation()),o}}(this)),this},t.prototype.remove=function(){var t;return null!=(t=this.node.parentNode)&&t.removeChild(this.node),this.node=null,null},t.prototype.removeClass=function(t){var e;return this.hasClass(t)?null!=this.node.classList?this.node.classList.remove(t):(null!=this.node.className&&(e=this.classes(),e.splice(o.indexOf(e,t),1),this.node.className=e.join(" ")),this):void 0},t.prototype.replace=function(t){return this.node.parentNode.replaceChild(t,this.node),this.node=t,t},t.prototype.splitAncestors=function(t,e){var n,i,r,o;if(null==e&&(e=!1),this.node===t||this.node.parentNode===t)return this;if(null!=this.node.previousSibling||e){for(r=this.node.parentNode,i=r.cloneNode(!1),r.parentNode.insertBefore(i,r.nextSibling),o=this.node;null!=o;)n=o.nextSibling,i.appendChild(o),o=n;return s(i).splitAncestors(t)}return s(this.node.parentNode).splitAncestors(t)},t.prototype.split=function(t,e){var n,i,r,o,a,l,c,h,u,d;if(null==e&&(e=!1),c=this.length(),t=Math.max(0,t),t=Math.min(t,c),!e&&0===t)return[this.node.previousSibling,this.node,!1];if(!e&&t===c)return[this.node,this.node.nextSibling,!1];if(this.node.nodeType===s.TEXT_NODE)return n=this.node.splitText(t),[this.node,n,!0];for(a=this.node,h=this.node.cloneNode(!1),this.node.parentNode.insertBefore(h,a.nextSibling),u=this.child(t),i=u[0],t=u[1],d=s(i).split(t),r=d[0],o=d[1];null!==o;)l=o.nextSibling,h.appendChild(o),o=l;return[a,h,!0]},t.prototype.styles=function(t,e){var n,i;return null==e&&(e=!1),t?(e||(t=o.defaults(t,this.styles())),i=o.map(t,function(t,e){return""+e+": "+t}).join("; ")+";",this.node.setAttribute("style",i),this):(i=this.node.getAttribute("style")||"",n=o.reduce(i.split(";"),function(t,e){var n,i,s;return s=e.split(":"),n=s[0],i=s[1],n&&i&&(n=n.trim(),i=i.trim(),t[n.toLowerCase()]=i),t},{}))},t.prototype.switchTag=function(t){var e,n;return t=t.toUpperCase(),this.node.tagName===t?this:(n=this.node.ownerDocument.createElement(t),e=this.attributes(),null==s.VOID_TAGS[t]&&this.moveChildren(n),this.replace(n),this.attributes(e).get())},t.prototype.text=function(t){if(null!=t){switch(this.node.nodeType){case s.ELEMENT_NODE:this.node.textContent=t;break;case s.TEXT_NODE:this.node.data=t}return this}switch(this.node.nodeType){case s.ELEMENT_NODE:return this.node.tagName===s.DEFAULT_BREAK_TAG?"":null!=s.EMBED_TAGS[this.node.tagName]?s.EMBED_TEXT:null!=this.node.textContent?this.node.textContent:"";case s.TEXT_NODE:return this.node.data||"";default:return""}},t.prototype.textNodes=function(){var t,e,n;for(n=this.node.ownerDocument.createTreeWalker(this.node,NodeFilter.SHOW_TEXT,null,!1),e=[];t=n.nextNode();)e.push(t);return e},t.prototype.toggleClass=function(t,e){return null==e&&(e=!this.hasClass(t)),e?this.addClass(t):this.removeClass(t),this},t.prototype.trigger=function(t,e){var n,i,a;return null==e&&(e={}),o.indexOf(["keypress","keydown","keyup"],t)<0?(n=this.node.ownerDocument.createEvent("Event"),n.initEvent(t,e.bubbles,e.cancelable)):(n=this.node.ownerDocument.createEvent("KeyboardEvent"),r=o.clone(e),r.which=o.isNumber(e.key)?e.key:o.isString(e.key)?e.key.toUpperCase().charCodeAt(0):0,s.isIE(10)?(a=[],e.altKey&&a.push("Alt"),e.ctrlKey&&a.push("Control"),e.metaKey&&a.push("Meta"),e.shiftKey&&a.push("Shift"),n.initKeyboardEvent(t,e.bubbles,e.cancelable,this.window(),0,0,a.join(" "),null,null)):(i=o.isFunction(n.initKeyboardEvent)?"initKeyboardEvent":"initKeyEvent",n[i](t,e.bubbles,e.cancelable,this.window(),e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,0))),this.node.dispatchEvent(n),r=null,this},t.prototype.unwrap=function(){var t,e;return e=this.node.firstChild,t=this.node.nextSibling,o.each(this.childNodes(),function(e){return function(n){return e.node.parentNode.insertBefore(n,t)}}(this)),this.remove(),e},t.prototype.window=function(){return this.node.ownerDocument.defaultView||this.node.ownerDocument.parentWindow},t.prototype.wrap=function(t){var e;for(null!=this.node.parentNode&&this.node.parentNode.insertBefore(t,this.node),e=t;null!=e.firstChild;)e=t.firstChild;return e.appendChild(this.node),this},t}(),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype["default"]=function(){return this.node.querySelector("option[selected]")},e.prototype.option=function(t,e){var n,i,s,r,a,l;if(null==e&&(e=!0),s=o.isElement(t)?t.value:t){for(s=s.replace(/[^\w]+/g,""),l=this.node.children,i=r=0,a=l.length;a>r;i=++r)if(n=l[i],n.value.replace(/[^\w]+/g,"")===s){this.node.selectedIndex=i;break}}else this.node.selectedIndex=-1;return e&&this.trigger("change"),this},e.prototype.reset=function(t){var e;return null==t&&(t=!0),e=this["default"](),null!=e?e.selected=!0:this.node.selectedIndex=0,t&&this.trigger("change"),this},e.prototype.value=function(){return this.node.selectedIndex>-1?this.node.options[this.node.selectedIndex].value:""},e}(i),s=function(t){return"SELECT"===(null!=t?t.tagName:void 0)?new n(t):new i(t)},s=o.extend(s,{ELEMENT_NODE:1,NOBREAK_SPACE:"&nbsp;",TEXT_NODE:3,ZERO_WIDTH_NOBREAK_SPACE:"",DEFAULT_BLOCK_TAG:"DIV",DEFAULT_BREAK_TAG:"BR",DEFAULT_INLINE_TAG:"SPAN",EMBED_TEXT:"!",FONT_SIZES:{"10px":1,"13px":2,"16px":3,"18px":4,"24px":5,"32px":6,"48px":7},KEYS:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},BLOCK_TAGS:{ADDRESS:"ADDRESS",ARTICLE:"ARTICLE",ASIDE:"ASIDE",AUDIO:"AUDIO",BLOCKQUOTE:"BLOCKQUOTE",CANVAS:"CANVAS",DD:"DD",DIV:"DIV",DL:"DL",FIGCAPTION:"FIGCAPTION",FIGURE:"FIGURE",FOOTER:"FOOTER",FORM:"FORM",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",HEADER:"HEADER",HGROUP:"HGROUP",LI:"LI",OL:"OL",OUTPUT:"OUTPUT",P:"P",PRE:"PRE",SECTION:"SECTION",TABLE:"TABLE",TBODY:"TBODY",TD:"TD",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TR:"TR",UL:"UL",VIDEO:"VIDEO"},EMBED_TAGS:{IMG:"IMG"},LINE_TAGS:{DIV:"DIV",LI:"LI"},LIST_TAGS:{OL:"OL",UL:"UL"},VOID_TAGS:{AREA:"AREA",BASE:"BASE",BR:"BR",COL:"COL",COMMAND:"COMMAND",EMBED:"EMBED",HR:"HR",IMG:"IMG",INPUT:"INPUT",KEYGEN:"KEYGEN",LINK:"LINK",META:"META",PARAM:"PARAM",SOURCE:"SOURCE",TRACK:"TRACK",WBR:"WBR"},convertFontSize:function(t){var e,n,i,r;o.isString(t)&&t.indexOf("px")>-1?(i=o.keys(s.FONT_SIZES),r=o.values(s.FONT_SIZES)):(r=o.keys(s.FONT_SIZES),i=o.values(s.FONT_SIZES));for(e in i)if(n=i[e],parseInt(t)<=parseInt(n))return r[e];return o.last(r)},isIE:function(t){var e;return e=document.documentMode,e&&t>=e},isIOS:function(){return/iPhone|iPad/i.test(navigator.userAgent)},isMac:function(){return/Mac/i.test(navigator.platform)}}),e.exports=s},{lodash:"M4+//f"}],22:[function(t,e){var n,i;i=function(){function t(t){this.data=t,this.prev=this.next=null}return t}(),n=function(){function t(){this.length=0,this.first=this.last=null}return t.Node=i,t.prototype.append=function(t){return null!=this.first?(t.next=null,this.last.next=t):this.first=t,t.prev=this.last,this.last=t,this.length+=1},t.prototype.insertAfter=function(t,e){return e.prev=t,null!=t?(e.next=t.next,null!=t.next&&(t.next.prev=e),t.next=e,t===this.last&&(this.last=e)):(e.next=this.first,this.first.prev=e,this.first=e),this.length+=1},t.prototype.remove=function(t){return this.length>1?(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.first&&(this.first=t.next),t===this.last&&(this.last=t.prev)):this.first=this.last=null,t.prev=t.next=null,this.length-=1},t.prototype.toArray=function(){var t,e;for(t=[],e=this.first;null!=e;)t.push(e),e=e.next;return t},t}(),e.exports=n},{}],23:[function(t,e){var n,i,s;s=t("lodash"),i=t("./dom"),n={ALIASES:{STRONG:"B",EM:"I",DEL:"S",STRIKE:"S"},ATTRIBUTES:{color:"color",face:"fontFamily",size:"fontSize"},STYLES:{"background-color":"background-color",color:"color","font-family":"font-family","font-size":"font-size","text-align":"text-align"},TAGS:{DIV:"DIV",BR:"BR",SPAN:"SPAN",B:"B",I:"I",S:"S",U:"U",A:"A",IMG:"IMG",OL:"OL",UL:"UL",LI:"LI"},handleBreaks:function(t){var e;return e=s.map(t.querySelectorAll(i.DEFAULT_BREAK_TAG)),s.each(e,function(){return function(e){return null==e.nextSibling||i.isIE(10)&&null==e.previousSibling?void 0:i(e.nextSibling).splitAncestors(t.parentNode)}}(this)),t},normalizeLine:function(t){return t=n.wrapInline(t),t=n.handleBreaks(t),t=n.pullBlocks(t),t=n.normalizeNode(t),n.unwrapText(t),null!=t&&null!=i.LIST_TAGS[t.tagName]&&(t=t.firstChild),t},normalizeNode:function(t){return i(t).isTextNode()?t:(s.each(n.ATTRIBUTES,function(e,n){var s;return t.hasAttribute(n)?(s=t.getAttribute(n),"size"===n&&(s=i.convertFontSize(s)),t.style[e]=s,t.removeAttribute(n)):void 0}),n.whitelistStyles(t),n.whitelistTags(t))},optimizeLine:function(t){var e,n,r,o;for(e=i(t).length(),r=i(t).descendants(),o=[];r.length>0;)n=r.pop(),null!=(null!=n?n.parentNode:void 0)&&null==i.EMBED_TAGS[n.tagName]&&(n.tagName===i.DEFAULT_BREAK_TAG?o.push(0!==e?i(n).remove():void 0):0===i(n).length()?(r.push(n.nextSibling),o.push(i(n).unwrap())):null!=n.previousSibling&&n.tagName===n.previousSibling.tagName&&s.isEqual(i(n).attributes(),i(n.previousSibling).attributes())?(r.push(n.firstChild),o.push(i(n.previousSibling).merge(n))):o.push(void 0));return o},pullBlocks:function(t){var e;for(e=t.firstChild;null!=e;){if(null!=i.BLOCK_TAGS[e.tagName]&&"LI"!==e.tagName){null!=e.previousSibling&&i(e).splitAncestors(t.parentNode),null!=e.nextSibling&&i(e.nextSibling).splitAncestors(t.parentNode),null!=i.LIST_TAGS[e.tagName]&&e.firstChild?(i(e.parentNode).unwrap(),null==t.parentNode&&(t=e)):(i(e).unwrap(),n.pullBlocks(t));break}e=e.nextSibling}return t},stripComments:function(t){return t.replace(/<!--[\s\S]*?-->/g,"")},stripWhitespace:function(t){return t=t.replace(/^\s+/,"").replace(/\s+$/,""),t=t.replace(/^\s+/,"").replace(/\s+$/,""),t=t.replace(/(\r?\n|\r)+/g," "),t=t.replace(/\>\s+\</g,"><")},whitelistStyles:function(t){var e,r;return e=i(t).styles(),r=s.omit(e,function(t,e){return null==n.STYLES[e]}),s.keys(r).length<s.keys(e).length?s.keys(r).length>0?i(t).styles(r,!0):t.removeAttribute("style"):void 0},whitelistTags:function(t){return i(t).isElement()?(null!=n.ALIASES[t.tagName]?t=i(t).switchTag(n.ALIASES[t.tagName]):null==n.TAGS[t.tagName]&&(t=null!=i.BLOCK_TAGS[t.tagName]?i(t).switchTag(i.DEFAULT_BLOCK_TAG):t.hasAttributes()||null==t.firstChild?i(t).switchTag(i.DEFAULT_INLINE_TAG):i(t).unwrap()),t):t},wrapInline:function(t){var e,n;if(null!=i.BLOCK_TAGS[t.tagName])return t;for(e=t.ownerDocument.createElement(i.DEFAULT_BLOCK_TAG),t.parentNode.insertBefore(e,t);null!=t&&null==i.BLOCK_TAGS[t.tagName];)n=t.nextSibling,e.appendChild(t),t=n;return e},unwrapText:function(t){var e;return e=s.map(t.querySelectorAll(i.DEFAULT_INLINE_TAG)),s.each(e,function(t){return t.hasAttributes()?void 0:i(t).unwrap()})}},e.exports=n},{"./dom":21,lodash:"M4+//f"}],24:[function(t,e){var n,i,s,r;r=t("lodash"),s=t("./dom"),n=t("./normalizer"),i=function(){function t(t){this.select=t,this.container=this.select.ownerDocument.createElement("span"),this.buildPicker(),s(this.container).addClass("ql-picker"),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),s(this.select.ownerDocument).on("click",function(t){return function(){return t.close(),!0}}(this)),s(this.label).on("click",function(t){return function(){return r.defer(function(){return s(t.container).toggleClass("ql-expanded")}),!1}}(this)),s(this.select).on("change",function(t){return function(){var e,n;return t.select.selectedIndex>-1&&(e=t.container.querySelectorAll(".ql-picker-item")[t.select.selectedIndex],n=t.select.options[t.select.selectedIndex]),t.selectItem(e,!1),s(t.label).toggleClass("ql-active",n!==s(t.select)["default"]())}}(this))}return t.TEMPLATE='<span class="ql-picker-label"></span><span class="ql-picker-options"></span>',t.prototype.buildItem=function(t,e,n){var i;return i=this.select.ownerDocument.createElement("span"),i.setAttribute("data-value",e.getAttribute("value")),s(i).addClass("ql-picker-item").text(s(e).text()).on("click",function(t){return function(){return t.selectItem(i,!0),t.close()}}(this)),this.select.selectedIndex===n&&this.selectItem(i,!1),i},t.prototype.buildPicker=function(){var e;return r.each(s(this.select).attributes(),function(t){return function(e,n){return t.container.setAttribute(n,e)}}(this)),this.container.innerHTML=n.stripWhitespace(t.TEMPLATE),this.label=this.container.querySelector(".ql-picker-label"),e=this.container.querySelector(".ql-picker-options"),r.each(this.select.options,function(t){return function(n,i){var s;return s=t.buildItem(e,n,i),e.appendChild(s)}}(this))},t.prototype.close=function(){return s(this.container).removeClass("ql-expanded")},t.prototype.selectItem=function(t,e){var n,i;return n=this.container.querySelector(".ql-selected"),null!=n&&s(n).removeClass("ql-selected"),null!=t?(i=t.getAttribute("data-value"),s(t).addClass("ql-selected"),s(this.label).text(s(t).text()),s(this.select).option(i,e),this.label.setAttribute("data-value",i)):(this.label.innerHTML="&nbsp;",this.label.removeAttribute("data-value"))},t}(),e.exports=i},{"./dom":21,"./normalizer":23,lodash:"M4+//f"}],25:[function(t,e){var n,i;i=t("lodash"),n=function(){function t(t,e){this.start=t,this.end=e}return t.compare=function(t,e){return t===e?!0:null==t||null==e?!1:t.equals(e)},t.prototype.equals=function(t){return null==t?!1:this.start===t.start&&this.end===t.end},t.prototype.shift=function(t,e){var n;return n=i.map([this.start,this.end],function(n){return t>n?n:e>=0?n+e:Math.max(t,n+e)}),this.start=n[0],this.end=n[1],n},t.prototype.isCollapsed=function(){return this.start===this.end},t}(),e.exports=n},{lodash:"M4+//f"}],26:[function(t,e){var n,i,s,r,o;s=t("../quill"),o=s.require("lodash"),r=s.require("dom"),i=s.require("delta"),n=function(){function t(t,e){this.quill=t,this.options=e,null!=this.options.button&&this.attachButton(this.options.button),this.options.enabled&&this.enable(),this.quill.addFormat("author",{"class":"author-"}),null!=this.options.authorId&&(this.quill.on(this.quill.constructor.events.PRE_EVENT,function(t){return function(e,n,r){var a,l;return e===t.quill.constructor.events.TEXT_CHANGE&&"user"===r?(a=new i,l={author:t.options.authorId},o.each(n.ops,function(e){return null==e["delete"]?null!=e.insert||null!=e.retain&&null!=e.attributes?(e.attributes||(e.attributes={}),e.attributes.author=t.options.authorId,a.retain(e.retain||e.insert.length||1,l)):a.retain(e.retain):void 0}),t.quill.updateContents(a,s.sources.SILENT)):void 0}}(this)),this.addAuthor(this.options.authorId,this.options.color))}return t.DEFAULTS={authorId:null,color:"transparent",enabled:!1},t.prototype.addAuthor=function(t,e){var n;return n={},n[".authorship .author-"+t]={"background-color":""+e},this.quill.addStyles(n)},t.prototype.attachButton=function(t){var e;return e=r(t),e.on("click",function(t){return function(){return e.toggleClass("ql-on"),t.enable($dom.hasClass("ql-on"))}}(this))},t.prototype.enable=function(t){return null==t&&(t=!0),r(this.quill.root).toggleClass("authorship",t)},t.prototype.disable=function(){return this.enable(!1)},t}(),s.registerModule("authorship",n),e.exports=n},{"../quill":35}],27:[function(t,e){var n,i,s,r,o,a,l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};s=t("../quill"),r=t("./tooltip"),a=s.require("lodash"),o=s.require("dom"),n=s.require("delta"),i=function(t){function e(t,n){this.quill=t,this.options=n,this.options.styles=a.defaults(this.options.styles,r.DEFAULTS.styles),this.options=a.defaults(this.options,r.DEFAULTS),e.__super__.constructor.call(this,this.quill,this.options),this.preview=this.container.querySelector(".preview"),this.textbox=this.container.querySelector(".input"),o(this.container).addClass("image-tooltip-container"),this.initListeners()
}return c(e,t),e.DEFAULTS={styles:{".image-tooltip-container":{margin:"25px",padding:"10px",width:"300px"},".image-tooltip-container:after":{clear:"both",content:'""',display:"table"},".image-tooltip-container .preview":{margin:"10px 0px",position:"relative",border:"1px dashed #000",height:"200px"},".image-tooltip-container .preview span":{display:"inline-block",position:"absolute","text-align":"center",top:"40%",width:"100%"},".image-tooltip-container img":{bottom:"0",left:"0",margin:"auto","max-height":"100%","max-width":"100%",position:"absolute",right:"0",top:"0"},".image-tooltip-container .input":{"box-sizing":"border-box",width:"100%"},".image-tooltip-container a":{border:"1px solid black","box-sizing":"border-box",display:"inline-block","float":"left",padding:"5px","text-align":"center",width:"50%"}},template:'<input class="input" type="textbox"> <div class="preview"> <span>Preview</span> </div> <a href="javascript:;" class="cancel">Cancel</a> <a href="javascript:;" class="insert">Insert</a>'},e.prototype.initListeners=function(){return o(this.container.querySelector(".insert")).on("click",a.bind(this.insertImage,this)),o(this.container.querySelector(".cancel")).on("click",a.bind(this.hide,this)),o(this.textbox).on("input",a.bind(this._preview,this)),this.initTextbox(this.textbox,this.insertImage,this.hide),this.quill.onModuleLoad("toolbar",function(t){return function(e){return e.initFormat("image",a.bind(t._onToolbar,t))}}(this))},e.prototype.insertImage=function(){var t,e;return e=this._normalizeURL(this.textbox.value),null==this.range&&(this.range=new Range(0,0)),this.range&&(this.preview.innerHTML="<span>Preview</span>",this.textbox.value="",t=this.range.end,this.quill.insertEmbed(t,"image",e,"user"),this.quill.setSelection(t+1,t+1)),this.hide()},e.prototype._onToolbar=function(t,e){return e?(this.textbox.value||(this.textbox.value="http://"),this.show(),this.textbox.focus(),a.defer(function(t){return function(){return t.textbox.setSelectionRange(t.textbox.value.length,t.textbox.value.length)}}(this))):this.quill.deleteText(t,"user")},e.prototype._preview=function(){var t;return this._matchImageURL(this.textbox.value)?"IMG"===this.preview.firstChild.tagName?this.preview.firstChild.setAttribute("src",this.textbox.value):(t=this.preview.ownerDocument.createElement("img"),t.setAttribute("src",this.textbox.value),this.preview.replaceChild(t,this.preview.firstChild)):void 0},e.prototype._matchImageURL=function(t){return/^https?:\/\/.+\.(jp?g|gif|png)$/.test(t)},e.prototype._normalizeURL=function(t){return/^https?:\/\//.test(t)||(t="http://"+t),t},e}(r),s.registerModule("image-tooltip",i),e.exports=i},{"../quill":35,"./tooltip":33}],28:[function(t,e){var n,i,s,r,o;s=t("../quill"),o=s.require("lodash"),r=s.require("dom"),n=s.require("delta"),i=function(){function t(t){this.quill=t,this.hotkeys={},this._initListeners(),this._initHotkeys(),this._initDeletes()}return t.hotkeys={BOLD:{key:"B",metaKey:!0},INDENT:{key:r.KEYS.TAB},ITALIC:{key:"I",metaKey:!0},OUTDENT:{key:r.KEYS.TAB,shiftKey:!0},UNDERLINE:{key:"U",metaKey:!0}},t.prototype.addHotkey=function(t,e){return o.isArray(t)||(t=[t]),o.each(t,function(t){return function(n){var i,s;return n=o.isObject(n)?o.clone(n):{key:n},n.callback=e,i=o.isNumber(n.key)?n.key:n.key.toUpperCase().charCodeAt(0),null==(s=t.hotkeys)[i]&&(s[i]=[]),t.hotkeys[i].push(n)}}(this))},t.prototype.toggleFormat=function(t,e){var n,i,s;return n=t.isCollapsed()?this.quill.getContents(Math.max(0,t.start-1),t.end):this.quill.getContents(t),s=0===n.ops.length||!o.all(n.ops,function(t){var n;return null!=(n=t.attributes)?n[e]:void 0}),t.isCollapsed()?this.quill.prepareFormat(e,s):this.quill.formatText(t,e,s,"user"),i=this.quill.getModule("toolbar"),null!=i?i.setActive(e,s):void 0},t.prototype._initDeletes=function(){return this.addHotkey([r.KEYS.DELETE,r.KEYS.BACKSPACE],function(t){return function(){return t.quill.getLength()>1}}(this))},t.prototype._initHotkeys=function(){return this.addHotkey(t.hotkeys.INDENT,function(t){return function(e){return t._onTab(e,!1),!1}}(this)),this.addHotkey(t.hotkeys.OUTDENT,function(){return function(){return!1}}(this)),o.each(["bold","italic","underline"],function(e){return function(n){return e.addHotkey(t.hotkeys[n.toUpperCase()],function(t){return e.toggleFormat(t,n),!1})}}(this))},t.prototype._initListeners=function(){return r(this.quill.root).on("keydown",function(t){return function(e){var n;return n=!1,o.each(t.hotkeys[e.which],function(i){var s;return s=r.isMac()?e.metaKey:e.metaKey||e.ctrlKey,!!i.metaKey==!!s&&!!i.shiftKey==!!e.shiftKey&&!!i.altKey==!!e.altKey?(n=i.callback(t.quill.getSelection())===!1||n,!0):void 0}),!n}}(this))},t.prototype._onTab=function(t,e){var i;return null==e&&(e=!1),i=(new n).retain(t.start).insert("	")["delete"](t.end-t.start).retain(this.quill.getLength()-t.end),this.quill.updateContents(i),this.quill.setSelection(t.start+1,t.start+1)},t}(),s.registerModule("keyboard",i),e.exports=i},{"../quill":35}],29:[function(t,e){var n,i,s,r,o,a={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("../quill"),s=t("./tooltip"),o=i.require("lodash"),r=i.require("dom"),n=function(t){function e(t,n){this.quill=t,this.options=n,this.options.styles=o.defaults(this.options.styles,s.DEFAULTS.styles),this.options=o.defaults(this.options,s.DEFAULTS),e.__super__.constructor.call(this,this.quill,this.options),r(this.container).addClass("link-tooltip-container"),this.textbox=this.container.querySelector(".input"),this.link=this.container.querySelector(".url"),this.initListeners()}return l(e,t),e.DEFAULTS={maxLength:50,styles:{".link-tooltip-container":{padding:"5px 10px"},".link-tooltip-container input.input":{width:"170px"},".link-tooltip-container input.input, .link-tooltip-container a.done, .link-tooltip-container.editing a.url, .link-tooltip-container.editing a.change":{display:"none"},".link-tooltip-container.editing input.input, .link-tooltip-container.editing a.done":{display:"inline-block"}},template:'<span class="title">Visit URL:&nbsp;</span> <a href="#" class="url" target="_blank" href="about:blank"></a> <input class="input" type="text"> <span>&nbsp;&#45;&nbsp;</span> <a href="javascript:;" class="change">Change</a> <a href="javascript:;" class="done">Done</a>'},e.prototype.initListeners=function(){return this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(t){return function(e){var n;return null!=e&&e.isCollapsed()?(n=t._findAnchor(e),n?(t.setMode(n.href,!1),t.show(n)):(t.range=null,t.hide())):void 0}}(this)),r(this.container.querySelector(".done")).on("click",o.bind(this.saveLink,this)),r(this.container.querySelector(".change")).on("click",function(t){return function(){return t.setMode(t.link.href,!0)}}(this)),this.initTextbox(this.textbox,this.saveLink,this.hide),this.quill.onModuleLoad("toolbar",function(t){return function(e){return e.initFormat("link",o.bind(t._onToolbar,t))}}(this))},e.prototype.saveLink=function(){var t,e;return e=this._normalizeURL(this.textbox.value),null!=this.range&&(this.range.isCollapsed()?(t=this._findAnchor(this.range),null!=t&&(t.href=e)):this.quill.formatText(this.range,"link",e,"user")),this.setMode(e,!1)},e.prototype.setMode=function(t,e){var n;return null==e&&(e=!1),e?(this.textbox.value=t,o.defer(function(e){return function(){return e.textbox.focus(),e.textbox.setSelectionRange(t.length,t.length)}}(this))):(this.link.href=t,n=t.length>this.options.maxLength?t.slice(0,this.options.maxLength)+"...":t,r(this.link).text(n)),r(this.container).toggleClass("editing",e)},e.prototype._findAnchor=function(t){var e,n,i,s;for(s=this.quill.editor.doc.findLeafAt(t.start,!0),e=s[0],i=s[1],null!=e&&(n=e.node);null!=n;){if("A"===n.tagName)return n;n=n.parentNode}return null},e.prototype._onToolbar=function(t,e){var n;return t&&!t.isCollapsed()?e?(this.setMode(this._suggestURL(t),!0),n=this.quill.editor.selection._getNativeRange(),this.show(n)):this.quill.formatText(t,"link",!1,"user"):void 0},e.prototype._normalizeURL=function(t){return/^(https?:\/\/|mailto:)/.test(t)||(t="http://"+t),t},e.prototype._suggestURL=function(t){var e;return e=this.quill.getText(t),this._normalizeURL(e)},e}(s),i.registerModule("link-tooltip",n),e.exports=n},{"../quill":35,"./tooltip":33}],30:[function(t,e){var n,i,s,r,o,a={}.hasOwnProperty,l=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};s=t("../quill"),n=t("eventemitter2").EventEmitter2,o=s.require("lodash"),r=s.require("dom"),i=function(t){function e(t,e){this.quill=t,this.options=e,this.cursors={},this.container=this.quill.addContainer("cursor-container",!0),this.quill.addStyles({".cursor-container":{position:"absolute",left:"0",top:"0","z-index":"1000"},".cursor":{"margin-left":"-1px",position:"absolute"},".cursor-flag":{bottom:"100%",position:"absolute","white-space":"nowrap"},".cursor-name":{display:"inline-block",color:"white",padding:"2px 8px"},".cursor-caret":{height:"100%",position:"absolute",width:"2px"},".cursor.hidden .cursor-flag":{display:"none"},".cursor.top > .cursor-flag":{bottom:"auto",top:"100%"},".cursor.right > .cursor-flag":{right:"-2px"}}),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,o.bind(this._applyDelta,this))}return l(e,t),e.DEFAULTS={template:'<span class="cursor-flag"> <span class="cursor-name"></span> </span> <span class="cursor-caret"></span>',timeout:2500},e.events={CURSOR_ADDED:"cursor-addded",CURSOR_MOVED:"cursor-moved",CURSOR_REMOVED:"cursor-removed"},e.prototype.clearCursors=function(){return o.each(o.keys(this.cursors),o.bind(this.removeCursor,this)),this.cursors={}},e.prototype.moveCursor=function(t,e){var n;return n=this.cursors[t],n.index=e,r(n.elem).removeClass("hidden"),clearTimeout(n.timer),n.timer=setTimeout(function(){return function(){return r(n.elem).addClass("hidden"),n.timer=null}}(this),this.options.timeout),this._updateCursor(n),n},e.prototype.removeCursor=function(t){var n;return n=this.cursors[t],this.emit(e.events.CURSOR_REMOVED,n),null!=n&&n.elem.parentNode.removeChild(n.elem),delete this.cursors[t]},e.prototype.setCursor=function(t,n,i,s){var r;return null==this.cursors[t]&&(this.cursors[t]=r={userId:t,index:n,color:s,elem:this._buildCursor(i,s)},this.emit(e.events.CURSOR_ADDED,r)),o.defer(function(e){return function(){return e.moveCursor(t,n)}}(this)),this.cursors[t]},e.prototype.shiftCursors=function(t,e,n){return null==n&&(n=null),o.each(this.cursors,function(){return function(i){return i&&(i.index>t||i.userId===n)?i.index+=Math.max(e,t-i.index):void 0}}(this))},e.prototype.update=function(){return o.each(this.cursors,function(t){return function(e){return null!=e?(t._updateCursor(e),!0):void 0}}(this))},e.prototype._applyDelta=function(t){var e;return e=0,o.each(t.ops,function(t){return function(n){var i,s;return i=0,null!=n.insert?(i=n.insert.length||1,t.shiftCursors(e,i,null!=(s=n.attributes)?s.author:void 0)):null!=n["delete"]?t.shiftCursors(e,-1*n["delete"],null):null!=n.retain&&(t.shiftCursors(e,0,null),i=n.retain),e+=i}}(this)),this.update()},e.prototype._buildCursor=function(t,e){var n,i,s,o;return n=this.container.ownerDocument.createElement("span"),r(n).addClass("cursor"),n.innerHTML=this.options.template,s=n.querySelector(".cursor-flag"),o=n.querySelector(".cursor-name"),r(o).text(t),i=n.querySelector(".cursor-caret"),i.style.backgroundColor=o.style.backgroundColor=e,this.container.appendChild(n),n},e.prototype._moveCursor=function(t,n,i){var s,o,a;return null==i&&(i="left"),a=r(n).window(),s=n.getBoundingClientRect(),t.elem.style.top=s.top+a.pageYOffset+"px",t.elem.style.left=s[i]+"px",t.elem.style.height=s.height+"px",o=t.elem.querySelector(".cursor-flag"),r(t.elem).toggleClass("top",parseInt(t.elem.style.top)<=o.offsetHeight).toggleClass("left",parseInt(t.elem.style.left)<=o.offsetWidth).toggleClass("right",this.quill.root.offsetWidth-parseInt(t.elem.style.left)<=o.offsetWidth),this.emit(e.events.CURSOR_MOVED,t)},e.prototype._updateCursor=function(t){var e,n,i,o,a,l,c,h;return this.quill.editor.checkUpdate(),c=this.quill.editor.doc.findLeafAt(t.index,!0),i=c[0],a=c[1],n=this.container.ownerDocument.createElement("span"),null!=i?(h=r(i.node).split(a),o=h[0],l=h[1],e=h[2],r(n).text(r.ZERO_WIDTH_NOBREAK_SPACE),i.node.parentNode.insertBefore(n,l)):(r(n).text(r.NOBREAK_SPACE),this.quill.root.appendChild(n)),this._moveCursor(t,n),r(n).remove(),e&&r(i.node.parentNode).normalize(),this.quill.editor.selection.update(s.sources.SILENT)},e}(n),s.registerModule("multi-cursor",i),e.exports=i},{"../quill":35,eventemitter2:3}],31:[function(t,e){var n,i,s,r,o,a;r=t("../quill"),i=t("../core/document"),a=r.require("lodash"),o=r.require("dom"),n=r.require("delta"),s=function(){function t(t,e){this.quill=t,this.options=e,this.container=this.quill.addContainer("paste-container"),this.container.setAttribute("contenteditable",!0),this.quill.addStyles({".paste-container":{left:"-10000px",position:"absolute",top:"50%"}}),o(this.quill.root).on("paste",a.bind(this._paste,this))}return t.prototype._paste=function(){var t,e,s,r,l,c;return s=this.quill.getLength(),r=this.quill.getSelection(),null!=r?(this.container.innerHTML="",t=o(this.quill.root).window(),e=t.scrollY,l=window.scrollX,c=window.scrollY,this.container.focus(),a.defer(function(s){return function(){var o,a,h,u,d,p,f;return a=new i(s.container,s.quill.options),o=a.toDelta(),h=o.length()-1,o.compose((new n).retain(h)["delete"](1)),r.start>0&&o.ops.unshift({retain:r.start}),o["delete"](r.end-r.start),s.quill.updateContents(o,"user"),s.quill.setSelection(r.start+h,r.start+h),f=s.quill.editor.doc.findLineAt(r.start+h),u=f[0],p=f[1],d=u.node.offsetTop+u.node.offsetHeight,d>e+s.quill.root.offsetHeight&&(e=u.node.offsetTop-s.quill.root.offsetHeight/2),t.scrollTo(0,e),window.scrollTo(l,c)}}(this))):void 0},t}(),r.registerModule("paste-manager",s),e.exports=s},{"../core/document":12,"../quill":35}],32:[function(t,e){var n,i,s,r;n=t("../quill"),r=n.require("lodash"),s=n.require("dom"),i=function(){function t(e,n){if(this.quill=e,this.options=n,null==this.options.container)throw new Error("container required for toolbar",this.options);this.container=r.isString(this.options.container)?document.querySelector(this.options.container):this.options.container,this.inputs={},this.preventUpdate=!1,this.triggering=!1,r.each(this.quill.options.formats,function(e){return function(n){return null==t.formats.TOOLTIP[n]?e.initFormat(n,function(i,s){return e.triggering?void 0:(i.isCollapsed()?e.quill.prepareFormat(n,s):null!=t.formats.LINE[n]?e.quill.formatLine(i,n,s,"user"):e.quill.formatText(i,n,s,"user"),r.defer(function(){return e.updateActive(i,["bullet","list"]),e.setActive(n,s)}))}):void 0}}(this)),this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(t){return function(e){return null!=e?t.updateActive(e):void 0}}(this)),this.quill.onModuleLoad("keyboard",function(t){return function(e){return e.addHotkey([s.KEYS.BACKSPACE,s.KEYS.DELETE,s.KEYS.ENTER],function(){return r.defer(r.bind(t.updateActive,t))})}}(this)),s(this.container).addClass("ql-toolbar-container"),s.isIOS()&&s(this.container).addClass("ios"),s.isIE(11)&&s(this.container).on("mousedown",function(){return function(){return!1}}(this))}return t.DEFAULTS={container:null},t.formats={LINE:{align:"align",bullet:"bullet",list:"list"},SELECT:{align:"align",background:"background",color:"color",font:"font",size:"size"},TOGGLE:{bold:"bold",bullet:"bullet",image:"image",italic:"italic",link:"link",list:"list",strike:"strike",underline:"underline"},TOOLTIP:{image:"image",link:"link"}},t.prototype.initFormat=function(e,n){var i,r,o;return o=".ql-"+e,null!=t.formats.SELECT[e]?(o="select"+o,i="change"):i="click",r=this.container.querySelector(o),null!=r?(this.inputs[e]=r,s(r).on(i,function(t){return function(){var e,o;return o="change"===i?s(r).value():!s(r).hasClass("ql-active"),t.preventUpdate=!0,t.quill.focus(),e=t.quill.getSelection(),null!=e&&n(e,o),t.preventUpdate=!1,!0}}(this))):void 0},t.prototype.setActive=function(t,e){var n,i,o,a;return i=this.inputs[t],null!=i?(n=s(i),"SELECT"===i.tagName?(this.triggering=!0,o=n.value(i),null==e&&(e=null!=(a=n["default"]())?a.value:void 0),r.isArray(e)&&(e=""),e!==o&&(null!=e?n.option(e,!1):n.reset(!1)),this.triggering=!1):n.toggleClass("ql-active",e||!1)):void 0},t.prototype.updateActive=function(t,e){var n;return null==e&&(e=null),t||(t=this.quill.getSelection()),null==t||this.preventUpdate?void 0:(n=this._getActive(t),r.each(this.inputs,function(t){return function(i,s){return(!r.isArray(e)||e.indexOf(s)>-1)&&t.setActive(s,n[s]),!0}}(this)))},t.prototype._getActive=function(t){var e,n;return e=this._getLeafActive(t),n=this._getLineActive(t),r.defaults({},e,n)},t.prototype._getLeafActive=function(t){var e,n,i,s,o;return t.isCollapsed()?(o=this.quill.editor.doc.findLineAt(t.start),i=o[0],s=o[1],e=0===s?this.quill.getContents(t.start,t.end+1):this.quill.getContents(t.start-1,t.end)):e=this.quill.getContents(t),n=r.map(e.ops,"attributes"),this._intersectFormats(n)},t.prototype._getLineActive=function(t){var e,n,i,s,o,a;for(n=[],o=this.quill.editor.doc.findLineAt(t.start),e=o[0],s=o[1],a=this.quill.editor.doc.findLineAt(t.end),i=a[0],s=a[1],null!=i&&i===e&&(i=i.next);null!=e&&e!==i;)n.push(r.clone(e.formats)),e=e.next;return this._intersectFormats(n)},t.prototype._intersectFormats=function(e){return r.reduce(e.slice(1),function(e,n){var i,s,o,a,l;return i=r.keys(e),o=r.keys(n),a=r.intersection(i,o),l=r.difference(i,o),s=r.difference(o,i),r.each(a,function(i){if(null!=t.formats.SELECT[i])if(r.isArray(e[i])){if(r.indexOf(e[i],n[i])<0)return e[i].push(n[i])}else if(e[i]!==n[i])return e[i]=[e[i],n[i]]}),r.each(l,function(n){return null!=t.formats.TOGGLE[n]?delete e[n]:null==t.formats.SELECT[n]||r.isArray(e[n])?void 0:e[n]=[e[n]]}),r.each(s,function(i){return null!=t.formats.SELECT[i]?e[i]=[n[i]]:void 0}),e},e[0]||{})},t}(),n.registerModule("toolbar",i),e.exports=i},{"../quill":35}],33:[function(t,e){var n,i,s,r,o;i=t("../quill"),n=t("../lib/normalizer"),o=i.require("lodash"),r=i.require("dom"),s=function(){function t(e,i){this.quill=e,this.options=i,this.quill.addStyles(this.options.styles),this.container=this.quill.addContainer("tooltip"),this.container.innerHTML=n.stripWhitespace(this.options.template),this.container.style.position="absolute",r(this.quill.root).on("focus",o.bind(this.hide,this)),this.hide(),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(e){return function(n,i){return"user"===i&&e.container.style.left!==t.HIDE_MARGIN?(e.range=null,e.hide()):void 0}}(this))}return t.DEFAULTS={offset:10,styles:{".tooltip":{"background-color":"#fff",border:"1px solid #000",top:"0px","white-space":"nowrap","z-index":"2000"},".tooltip a":{cursor:"pointer","text-decoration":"none"}},template:""},t.HIDE_MARGIN="-10000px",t.prototype.initTextbox=function(t,e,n){return r(t).on("keyup",function(t){return function(i){switch(i.which){case r.KEYS.ENTER:return e.call(t);case r.KEYS.ESCAPE:return n.call(t);default:return!0}}}(this))},t.prototype.hide=function(){return this.container.style.left=t.HIDE_MARGIN,this.range&&this.quill.setSelection(this.range),this.range=null},t.prototype.show=function(t){var e,n,i,s,o;return this.range=this.quill.getSelection(),s=this._position(t),e=s[0],n=s[1],o=this._limit(e,n),e=o[0],n=o[1],i=r(this.quill.root).window(),e+=i.pageXOffset,n+=i.pageYOffset,this.container.style.left=""+e+"px",this.container.style.top=""+n+"px",this.container.focus()},t.prototype._getBounds=function(){var t,e,n,i;return t=this.quill.root.getBoundingClientRect(),i=r(this.quill.root).window(),e=i.pageXOffset,n=i.pageYOffset,{left:t.left+e,right:t.right+e,top:t.top+n,bottom:t.bottom+n,width:t.width,height:t.height}},t.prototype._limit=function(t,e){var n,i;return n=this._getBounds(),i=this.container.getBoundingClientRect(),t=Math.min(n.right-i.width,t),t=Math.max(n.left,t),e=Math.min(n.bottom-i.height,e),e=Math.max(n.top,e),[t,e]},t.prototype._position=function(t){var e,n,i,s,r;return s=this.container.getBoundingClientRect(),e=this._getBounds(),null!=t?(i=t.getBoundingClientRect(),n=i.left+i.width/2-s.width/2,r=i.top+i.height+this.options.offset,r+s.height>e.bottom&&(r=i.top-s.height-this.options.offset)):(n=e.left+e.width/2-s.width/2,r=e.top+e.height/2-s.height/2),[n,r]},t}(),i.registerModule("tooltip",s),e.exports=s},{"../lib/normalizer":23,"../quill":35}],34:[function(t,e){var n,i,s,r;i=t("../quill"),r=i.require("lodash"),n=i.require("delta"),s=function(){function t(t,e){this.quill=t,this.options=null!=e?e:{},this.lastRecorded=0,this.emittedDelta=null,this.clear(),this.initListeners()}return t.DEFAULTS={delay:1e3,maxStack:100},t.hotkeys={UNDO:{key:"Z",metaKey:!0},REDO:{key:"Z",metaKey:!0,shiftKey:!0}},t.prototype.initListeners=function(){return this.quill.onModuleLoad("keyboard",function(e){return function(n){return n.addHotkey(t.hotkeys.UNDO,function(){return e.undo(),!1}),n.addHotkey(t.hotkeys.REDO,function(){return e.redo(),!1})}}(this)),this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(t){return function(e){return r.isEqual(e,t.emittedDelta)?void 0:(t.record(e,t.oldDelta),t.oldDelta=t.quill.getContents())}}(this))},t.prototype.clear=function(){return this.stack={undo:[],redo:[]},this.oldDelta=this.quill.getContents()},t.prototype.record=function(t){var e,n,i,s;if(t.ops.length>0){this.stack.redo=[];try{if(s=this.quill.getContents().diff(this.oldDelta),i=(new Date).getTime(),this.lastRecorded+this.options.delay>i&&this.stack.undo.length>0?(e=this.stack.undo.pop(),s=s.compose(e.undo),t=e.redo.compose(t)):this.lastRecorded=i,this.stack.undo.push({redo:t,undo:s}),this.stack.undo.length>this.options.maxStack)return this.stack.undo.unshift()}catch(r){return n=r,this.clear()}}},t.prototype.redo=function(){return this._change("redo","undo")},t.prototype.undo=function(){return this._change("undo","redo")},t.prototype._getLastChangeIndex=function(t){var e,n;return n=0,e=0,t.ops.forEach(function(t){return null!=t.insert?n=Math.max(e+(t.insert.length||1),n):null!=t["delete"]?n=Math.max(e,n):null!=t.retain?(null!=t.attributes&&(n=Math.max(e+t.retain,n)),e+=t.retain):void 0}),n},t.prototype._change=function(t,e){var n,i;return this.stack[t].length>0?(n=this.stack[t].pop(),this.lastRecorded=0,this.emittedDelta=n[t],this.quill.updateContents(n[t],"user"),this.emittedDelta=null,i=this._getLastChangeIndex(n[t]),this.quill.setSelection(i,i),this.oldDelta=this.quill.getContents(),this.stack[e].push(n)):void 0},t}(),i.registerModule("undo-manager",s),e.exports=s},{"../quill":35}],35:[function(t,e){var n,i,s,r,o,a,l,c,h,u={}.hasOwnProperty,d=function(t,e){function n(){this.constructor=t}for(var i in e)u.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p=[].slice;h=t("lodash"),c=t("../package.json"),n=t("rich-text").Delta,s=t("eventemitter2").EventEmitter2,l=t("./lib/dom"),i=t("./core/editor"),r=t("./core/format"),a=t("./lib/range"),o=function(t){function e(t,n){var s,r,o;if(null==n&&(n={}),h.isString(t)&&(t=document.querySelector(t)),null==t)throw new Error("Invalid Quill container");if(r=h.defaults(n.modules||{},e.DEFAULTS.modules),s=t.innerHTML,this.options=h.defaults(n,e.DEFAULTS),this.options.modules=r,this.options.id=this.id="quill-"+(e.editors.length+1),this.options.emitter=this,this.modules={},this.editor=new i(t,this,this.options),this.root=this.editor.doc.root,e.editors.push(this),this.setHTML(s,e.sources.SILENT),o=e.themes[this.options.theme],null==o)throw new Error("Cannot load "+this.options.theme+" theme. Are you sure you registered it?");this.theme=new o(this,this.options),h.each(this.options.modules,function(t){return function(e,n){return t.addModule(n,e)}}(this))}return d(e,t),e.version=c.version,e.editors=[],e.modules=[],e.themes=[],e.DEFAULTS={formats:["align","bold","italic","strike","underline","color","background","font","size","link","image","bullet","list"],modules:{keyboard:!0,"paste-manager":!0,"undo-manager":!0},pollInterval:100,readOnly:!1,theme:"default"},e.events={MODULE_INIT:"module-init",POST_EVENT:"post-event",PRE_EVENT:"pre-event",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},e.sources=i.sources,e.registerModule=function(t,n){return null!=e.modules[t]&&console.warn("Overwriting "+t+" module"),e.modules[t]=n},e.registerTheme=function(t,n){return null!=e.themes[t]&&console.warn("Overwriting "+t+" theme"),e.themes[t]=n},e.require=function(t){switch(t){case"lodash":return h;case"delta":return n;case"dom":return l;default:return null}},e.prototype.addContainer=function(t,e){return null==e&&(e=!1),this.editor.renderer.addContainer(t,e)},e.prototype.addFormat=function(t,e){return this.editor.doc.addFormat(t,e)},e.prototype.addModule=function(t,n){var i;if(i=e.modules[t],null==i)throw new Error("Cannot load "+t+" module. Are you sure you registered it?");return h.isObject(n)||(n={}),n=h.defaults(n,this.theme.constructor.OPTIONS[t]||{},i.DEFAULTS||{}),this.modules[t]=new i(this,n),this.emit(e.events.MODULE_INIT,t,this.modules[t]),this.modules[t]},e.prototype.addStyles=function(t){return this.editor.renderer.addStyles(t)},e.prototype.deleteText=function(t,i,s){var r,o,a;return null==s&&(s=e.sources.API),a=this._buildParams(t,i,{},s),t=a[0],i=a[1],o=a[2],s=a[3],i>t?(r=(new n).retain(t)["delete"](i-t),this.editor.applyDelta(r,s)):void 0},e.prototype.emit=function(){var t,n;return n=arguments[0],t=2<=arguments.length?p.call(arguments,1):[],e.__super__.emit.apply(this,[e.events.PRE_EVENT,n].concat(p.call(t))),e.__super__.emit.apply(this,[n].concat(p.call(t))),e.__super__.emit.apply(this,[e.events.POST_EVENT,n].concat(p.call(t)))},e.prototype.focus=function(){return this.editor.focus()},e.prototype.formatLine=function(t,e,n,i,s){var r,o,a,l,c;return l=this._buildParams(t,e,n,i,s),t=l[0],e=l[1],r=l[2],s=l[3],c=this.editor.doc.findLineAt(e),o=c[0],a=c[1],null!=o&&(e+=o.length-a),this.formatText(t,e,r,s)},e.prototype.formatText=function(t,e,i,s,r){var o,a,l;return l=this._buildParams(t,e,i,s,r),t=l[0],e=l[1],a=l[2],r=l[3],a=h.reduce(a,function(t){return function(e,n,i){var s;return s=t.editor.doc.formats[i],n&&n!==s.config["default"]||(e[i]=null),e}}(this),a),o=(new n).retain(t).retain(e-t,a),this.editor.applyDelta(o,r)},e.prototype.getContents=function(t,e){return null==t&&(t=0),null==e&&(e=null),h.isObject(t)&&(e=t.end,t=t.start),this.editor.getDelta().slice(t,e)},e.prototype.getHTML=function(){return this.root.innerHTML},e.prototype.getLength=function(){return this.editor.getDelta().length()},e.prototype.getModule=function(t){return this.modules[t]},e.prototype.getSelection=function(){return this.editor.checkUpdate(),this.editor.selection.getRange()},e.prototype.getText=function(t,e){return null==t&&(t=0),null==e&&(e=null),h.map(this.getContents(t,e).ops,function(t){return h.isString(t.insert)?t.insert:""}).join("")},e.prototype.insertEmbed=function(t,e,n,i){return this.insertText(t,l.EMBED_TEXT,e,n,i)},e.prototype.insertText=function(t,e,i,s,r){var o,a,l,c;return c=this._buildParams(t,0,i,s,r),t=c[0],a=c[1],l=c[2],r=c[3],e.length>0?(o=(new n).retain(t).insert(e,l),this.editor.applyDelta(o,r)):void 0},e.prototype.onModuleLoad=function(t,n){return this.modules[t]?n(this.modules[t]):this.on(e.events.MODULE_INIT,function(e,i){return e===t?n(i):void 0})},e.prototype.prepareFormat=function(t,n){var i,s;return i=this.editor.doc.formats[t],null!=i&&(s=this.getSelection(),null!=s?s.isCollapsed():void 0)?i.isType(r.types.LINE)?this.formatLine(s,t,n,e.sources.USER):i.prepare(n):void 0},e.prototype.setContents=function(t,n){return null==n&&(n=e.sources.API),h.isArray(t)&&(t={ops:t}),t.ops.unshift({"delete":this.getLength()}),this.updateContents(t,n)},e.prototype.setHTML=function(t,n){return null==n&&(n=e.sources.API),t||(t="<"+l.DEFAULT_BLOCK_TAG+"><"+l.DEFAULT_BREAK_TAG+"></"+l.DEFAULT_BLOCK_TAG+">"),this.editor.doc.setHTML(t),this.editor.checkUpdate(n)},e.prototype.setSelection=function(t,n,i){var s;return null==i&&(i=e.sources.API),h.isNumber(t)&&h.isNumber(n)?s=new a(t,n):(s=t,i=n||i),this.editor.selection.setRange(s,i)},e.prototype.updateContents=function(t,n){return null==n&&(n=e.sources.API),this.editor.applyDelta(t,n)},e.prototype._buildParams=function(){var t,n;return n=1<=arguments.length?p.call(arguments,0):[],h.isObject(n[0])&&n.splice(0,1,n[0].start,n[0].end),h.isString(n[2])&&(t={},t[n[2]]=n[3],n.splice(2,2,t)),null==n[3]&&(n[3]=e.sources.API),n},e}(s),o.registerTheme("default",t("./themes/default")),o.registerTheme("snow",t("./themes/snow")),e.exports=o},{"../package.json":11,"./core/editor":13,"./core/format":14,"./lib/dom":21,"./lib/range":25,"./themes/default":36,"./themes/snow":37,eventemitter2:3,lodash:"M4+//f","rich-text":4}],36:[function(t,e){var n;n=function(){function t(t){this.quill=t,this.editor=this.quill.editor,this.editorContainer=this.editor.root}return t.OPTIONS={},t}(),e.exports=n},{}],37:[function(t,e){var n,i,s,r,o,a,l={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};a=t("lodash"),n=t("../../lib/color-picker"),i=t("../default"),o=t("../../lib/dom"),s=t("../../lib/picker"),r=function(t){function e(t){this.quill=t,e.__super__.constructor.apply(this,arguments),this.quill.addStyles(e.STYLES),this.pickers=[],this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(t){return function(e){return null!=e?a.invoke(t.pickers,"close"):void 0}}(this)),o(this.quill.root.ownerDocument.body).addClass("snow"),this.quill.onModuleLoad("multi-cursor",a.bind(this.extendMultiCursor,this)),this.quill.onModuleLoad("toolbar",a.bind(this.extendToolbar,this))}return c(e,t),e.COLORS=["#000000","#e60000","#ff9900","#ffff00","#008A00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],e.OPTIONS={"multi-cursor":{template:'<span class="cursor-flag"> <span class="cursor-triangle top"></span> <span class="cursor-name"></span> <span class="cursor-triangle bottom"></span> </span> <span class="cursor-caret"></span>'}},e.STYLES={".snow .image-tooltip-container a":{border:"1px solid #06c"},".snow .image-tooltip-container a.insert":{"background-color":"#06c",color:"#fff"},".snow .cursor-name":{"border-radius":"4px","font-size":"11px","font-family":"Arial","margin-left":"-50%",padding:"4px 10px"},".snow .cursor-triangle":{"border-left":"4px solid transparent","border-right":"4px solid transparent",height:"0px","margin-left":"-3px",width:"0px"},".snow .cursor.left .cursor-name":{"margin-left":"-8px"},".snow .cursor.right .cursor-flag":{right:"auto"},".snow .cursor.right .cursor-name":{"margin-left":"-100%","margin-right":"-8px"},".snow .cursor-triangle.bottom":{"border-top":"4px solid transparent",display:"block","margin-bottom":"-1px"},".snow .cursor-triangle.top":{"border-bottom":"4px solid transparent",display:"none","margin-top":"-1px"},".snow .cursor.top .cursor-triangle.bottom":{display:"none"},".snow .cursor.top .cursor-triangle.top":{display:"block"},".snow a":{color:"#06c"},".snow .tooltip":{border:"1px solid #ccc","box-shadow":"0px 0px 5px #ddd",color:"#222"},".snow .tooltip a":{color:"#06c"},".snow .tooltip .input":{border:"1px solid #ccc",margin:"0px",padding:"5px"},".snow .image-tooltip-container .preview":{"border-color":"#ccc",color:"#ccc"},".snow .link-tooltip-container a, .snow .link-tooltip-container span":{display:"inline-block","line-height":"25px"}},e.prototype.extendMultiCursor=function(t){return t.on(t.constructor.events.CURSOR_ADDED,function(t){var e,n;return e=t.elem.querySelector(".cursor-triangle.bottom"),n=t.elem.querySelector(".cursor-triangle.top"),e.style.borderTopColor=n.style.borderBottomColor=t.color
})},e.prototype.extendToolbar=function(t){return a.each(["color","background","font","size","align"],function(e){return function(i){var r,l;if(l=t.container.querySelector(".ql-"+i),null!=l){switch(i){case"font":case"size":case"align":r=new s(l);break;case"color":case"background":r=new n(l),a.each(r.container.querySelectorAll(".ql-picker-item"),function(t,e){return 7>e?o(t).addClass("ql-primary-color"):void 0})}return null!=r?e.pickers.push(r):void 0}}}(this)),a.each(o(t.container).textNodes(),function(t){return 0===o(t).text().trim().length?o(t).remove():void 0})},e}(i),e.exports=r},{"../../lib/color-picker":20,"../../lib/dom":21,"../../lib/picker":24,"../default":36,lodash:"M4+//f"}]},{},[19])(19)}),define("app/views/posts/main",["require","jquery","underscore","backbone","context","app/models/posts/post","quill","jquery-validate","serializeObject","chosen"],function(t){{var e=t("jquery"),n=t("underscore"),i=t("backbone"),s=t("context"),r=t("app/models/posts/post"),o=t("quill");t("jquery-validate"),t("serializeObject"),t("chosen")}return i.View.extend({el:".content",initialize:function(){_this=this,this.model=new r,this.model.set(this.$(".new-message form").serializeObject());var t=/.*toable_filter.*/;n.each(this.model.attributes,function(e,n){t.exec(n)&&(_this.model.containsFilter=!0,_this.model.filters.push(n))}),this.editor=new o("#editor",{theme:"snow"}),this.editor.addModule("toolbar",{container:"#full-toolbar"}),this.editor.addModule("link-tooltip"),this.editor.addModule("image-tooltip"),this.$el.find(".send-to select").chosen({disable_search:!1,width:"100%"}),this.$("iframe").each(function(){e(this.contentWindow).on("blur",function(){_this.correctEditorValidationError()})})},events:{"click #post-submit-btn":"submitForm","change .message-subject":"correctValidationErrors","blur iframe":"correctValidationErrors","focus iframe":"correctValidationErrors","change select":"correctSelectionErrors"},submitForm:function(t){if(t.preventDefault(),t.stopPropagation(),this.model.set(this.$(".new-message form").serializeObject()),this.getDataFromEditor(),this.model.isValid())this.$(".error-container").html('<div class="alert info">All good, submit the form</div>'),this.model.save(this.$(".new-message form").serializeObject()).done(function(){window.location="/programs/"+s.programId+"/activities"}).fail(function(){console.log("fail")});else{var e=this;this.$(".error-container").html('<div class="alert error">There was an error submitting your post. Please ensure all fields are complete</div>'),n.each(this.model.validationError,function(t){"message-filters"==t?(e.$(".send-to .chosen-choices").addClass("error"),e.$(".send-to h3").append('<div class="alert-string error">At least one selection must be made</div>')):e.$("."+t).addClass("error")})}},getDataFromEditor:function(){this.editor.getLength()>1?(this.model.set("message[content]",this.editor.getHTML()),this.$("#content").val(this.model.get("message[content]"))):(this.model.set("message[content]",""),this.$("#content").val(this.model.get("message[content]")))},correctValidationErrors:function(t){if(null!==this.model.validationError){{var n=e(t.currentTarget).attr("name");e(t.currentTarget).val()}this.model.set(this.$(".new-message form").serializeObject(),{validate:!0});var i=n.replace(/\[/g,"-").replace(/\]/g,"");-1==e.inArray(n,this.model.validationError)&&this.$("."+i).removeClass("error")}this.removeValidationError()},correctEditorValidationError:function(){if(null!==this.model.validationError){var t="message[content]",n=this.getDataFromEditor();this.model.set(t,n);var i=t.replace(/\[/g,"-").replace(/\]/g,"");-1==e.inArray(t,this.model.validationError)&&this.$("."+i).removeClass("error")}this.removeValidationError()},removeValidationError:function(){this.model.isValid()&&this.$(".error-container .alert").remove()},correctSelectionErrors:function(){if(null!==this.model.validationError){var t=this;this.model.set(this.$(".new-message form").serializeObject(),{validate:!0}),-1==e.inArray("message-filters",this.model.validationError)&&(t.$(".send-to .chosen-choices").removeClass("error"),t.$(".send-to .alert-string").remove())}this.removeValidationError()}})}),define("app/routers/contextAwareBaseRouter",["require","backbone","context"],function(t){var e=t("backbone"),n=t("context"),i={before:function(){},after:function(){},route:function(t,i,s){var r=this;return e.Router.prototype.route.call(this,t,i,function(){r.before(arguments),n.requestParameters=arguments,s?s.apply(this,arguments):r[i].apply(this,arguments),r.after(arguments)})}};return e.Router.extend(i)}),define("app/routers/router",["require","jquery","underscore","backbone","context","app/views/layout/main","app/views/activities/global","app/views/activities/activities","app/views/checkins/checkin","app/views/teams/main","app/views/stores/main","app/views/store_profile/main","app/views/stores/intel/edit","app/views/checkins/show/checkin","app/views/dashboards/alerts/index/sections","app/views/dashboards/alerts/show/stores","app/views/reports/index/report","app/views/reports/checkins/show/report","app/views/reports/info/show/info_list","app/views/global/content_view","app/views/notifications/notification_section","app/views/legal/shipping","app/views/posts/main","app/routers/contextAwareBaseRouter"],function(t){var e=t("jquery"),n=(t("underscore"),t("backbone")),i=t("context"),s=t("app/views/layout/main"),r=t("app/views/activities/global"),o=t("app/views/activities/activities"),a=t("app/views/checkins/checkin"),l=t("app/views/teams/main"),c=t("app/views/stores/main"),h=t("app/views/store_profile/main"),u=t("app/views/stores/intel/edit"),d=t("app/views/checkins/show/checkin"),p=t("app/views/dashboards/alerts/index/sections"),f=t("app/views/dashboards/alerts/show/stores"),m=t("app/views/reports/index/report"),g=t("app/views/reports/checkins/show/report"),v=t("app/views/reports/info/show/info_list"),y=t("app/views/global/content_view"),b=t("app/views/notifications/notification_section"),_=t("app/views/legal/shipping"),w=t("app/views/posts/main"),x=t("app/routers/contextAwareBaseRouter").extend({routes:{"programs/:program_id/activities":"activitiesFeed","programs/:program_id/activities/:activity_id":"activityFeed","programs/:program_id/profiles/:user_id":"programProfile","programs/:program_id/checkins":"checkin_list","programs/:program_id/teams(/)":"teams","programs/:program_id/stores(/)":"stores","programs/:program_id/stores/:store_id(/)":"storeProfile","programs/:program_id/stores/:store_id/activity":"storeProfileActivity","programs/:program_id/stores/:store_id/history":"storeProfileHistory","programs/:program_id/stores/:store_id/intel/edit":"editStoreIntel","programs/:program_id/checkins/:id":"checkin","programs/:program_id/dashboards/alerts":"dashboardAlerts","programs/:program_id/dashboards/alerts/:id":"dashboardAlert","programs/:program_id/reports":"reports","programs/:program_id/reports.pdf":"reports","programs/:program_id/reports/checkin/:id":"checkinReport","programs/:program_id/reports/:report_id/info/:id":"reportInfo","programs/:program_id/notifications":"notificationList","programs/:program_id/legal/shipping":"shippingForm","programs/:program_id/messages/new":"newPost","*path":"notFound"},before:function(t){i.programId=t[0]},activitiesFeed:function(t){var e=window.location.search,n="/programs/"+t+"/activities/posts"+e,i="/programs/"+t+"/activities/incomplete_posts"+e;new r;var s=new o({url:n,incompleteActivityUrl:i,programId:t});s.fetch()},activityFeed:function(t,e){var n=(window.location.search,"/programs/"+t+"/activities/"+e);new r;var i=new o({url:n,programId:t});i.fetch()},checkin_list:function(){a.init()},teams:function(){l.init()},stores:function(){c.init()},storeProfile:function(){h.init()},storeProfileActivity:function(){h.activity()},storeProfileHistory:function(){h.history()},editStoreIntel:function(){(new u).render()},programProfile:function(t,e){var n=window.location.search,i="/programs/"+t+"/activities/"+e+"/for"+n,s="/programs/"+t+"/activities/incomplete_posts"+n;new r;var a=new o({url:i,incompleteActivityUrl:s,programId:t});a.fetch()},dashboardAlerts:function(t){e(".dashboard").append(new p({programId:t}).render().$el)},dashboardAlert:function(t,e){new f({id:e,page:""}).render()},reports:function(t){new m({programId:t}).render()},checkin:function(t,e){new d({programId:t,checkinId:e}).render()},checkinReport:function(t){new g({programId:t}).render()},reportInfo:function(t,e,n){new v({programId:t,reportId:e,infoId:n}).render()},notificationList:function(){new y;new b({el:".new-notifications",url_action:"unread",emptyParams:{unread:"new"},bootstrap:window.unread}).start(),new b({el:".past-notifications",url_action:"read",bootstrap:window.read}).start()},shippingForm:function(){_.init()},newPost:function(){new w},notFound:function(){void 0!==window.reportData&&new m({programId:""}).render()}}),k=function(){s.init(),i.router=new x,n.history.start({pushState:!0})};return{initialize:k}}),define("app/app",["require","jquery","underscore","backbone","app/routers/router"],function(t){var e=(t("jquery"),t("underscore"),t("backbone"),t("app/routers/router")),n=function(){e.initialize()};return{initialize:n}}),require.config({baseUrl:"http://www.thirdchannel.dev:3031/js/",paths:{jquery:"libs/bower_components/jquery/jquery.min",underscore:"libs/bower_components/underscore/underscore",backbone:"libs/bower_components/backbone/backbone",handlebars:"libs/bower_components/handlebars/handlebars.min",handlebarsTemplates:"app/templates/hbs-compiled",handlebarsHelpers:"app/utils/handlebarsHelpers",context:"app/utils/context","backbone.paginator":"libs/bower_components/backbone.paginator/lib/backbone.paginator",imagesloaded:"libs/bower_components/imagesloaded/imagesloaded.pkgd","backbone.modal":"libs/backbone.modal",jquery_ujs:"libs/bower_components/jquery-ujs/src/rails",chartjs:"libs/Chart",owl_carousel:"libs/owl.carousel",slick_carousel:"libs/bower_components/slick.js/slick/slick",livestamp:"libs/livestamp.min",moment:"libs/moment",chosen:"libs/bower_components/chosen/chosen.jquery","jquery-validate":"libs/bower_components/jquery-validation/dist/jquery.validate",serializeObject:"libs/bower_components/jquery-serialize-object/jquery.serialize-object",quill:"libs/bower_components/quill/dist/quill.min"},shim:{jquery:{deps:[],exports:"$"},underscore:{deps:["jquery"],exports:"_"},backbone:{deps:["underscore"],exports:"Backbone"},handlebars:{deps:["jquery"],exports:"Handlebars"},handlebarTemplates:{deps:["handlebars","handlebarsHelpers"],exports:"HandlebarTemplates"},"backbone.paginator":{deps:["backbone"]},"backbone.modal":{deps:["backbone"],exports:"BackboneModal"},owl_carousel:{exports:"OwlCarousel"},livestamp:{deps:["moment"],exports:"Livestamp"},"jquery-validate":{deps:["jquery"],exports:"jquery.validation"}}}),require(["app/app"],function(t){t.initialize()}),define("app/init",function(){});
//# sourceMappingURL=app.js.map